/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.8 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

/**
 * Portions of this code are from the Google Closure Library,
 * received from the Closure Authors under the Apache 2.0 license.
 *
 * All other code is (C) 2011 FriendsOfSymfony and subject to the MIT license.
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//     Underscore.js 1.5.1
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * William DURAND <william.durand1@gmail.com>
 * MIT Licensed
 */

/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/*
 * jQuery timepicker addon
 * By: Trent Richardson [http://trentrichardson.com]
 * Version 1.2
 * Last Modified: 02/02/2013
 *
 * Copyright 2013 Trent Richardson
 * You may use this project under MIT or GPL licenses.
 * http://trentrichardson.com/Impromptu/GPL-LICENSE.txt
 * http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
 */

/*!
 * OuterHTML v2.1.0
 *
 * http://www.darlesson.com/
 *
 * Copyright 2012, Darlesson Oliveira
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * @requires jQuery v1.4.0 or above
 *
 * Reporting bugs, comments or suggestions: http://darlesson.com/contact/
 * Documentation and other jQuery plug-ins: http://darlesson.com/jquery/
 * Donations are welcome: http://darlesson.com/donate/
 */

/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */

/*
 *
 * Copyright (c) 2006-2011 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 * 
 * Version 1.3.1
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */

/*
Copyright 2012 Igor Vaynberg

Version: 3.4.1 Timestamp: Thu Jun 27 18:02:10 PDT 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/*
 * jsTree 1.0-rc3
 * http://jstree.com/
 *
 * Copyright (c) 2010 Ivan Bozhanov (vakata.com)
 *
 * Licensed same as jquery - under the terms of either the MIT License or the GPL Version 2 License
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * $Date: 2011-02-09 01:17:14 +0200 (ср, 09 февр 2011) $
 * $Revision: 236 $
 */

/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/

/*!
  * bean.js - copyright Jacob Thornton 2011
  * https://github.com/fat/bean
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */

/**
 * Flotr2 (c) 2012 Carl Sutherland
 * MIT License
 * Special thanks to:
 * Flotr: http://code.google.com/p/flotr/ (fork)
 * Flot: https://github.com/flot/flot (original fork)
 */

/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/

/* ===========================================================
 * bootstrap-tooltip.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ===================================================
 * popover-extra-placements.js v0.1
 * http://twitter.github.com/bootstrap-popover-extra-placements
 * ===================================================
 * Copyright 2012 Daniel Kleehammer
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*
  backbone-pageable 1.2.3
  http://github.com/wyuenho/backbone-pageable

  Copyright (c) 2013 Jimmy Yuen Ho Wong
  Licensed under the MIT @license.
*/

/*!
 * jQuery Form Plugin
 * version: 3.32.0-2013.04.09
 * @requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/*!
 * jQuery Extended Dialog 2.0
 *
 * Copyright (c) 2013 Oro Inc
 * Inspired by DialogExtend Copyright (c) 2010 Shum Ting Hin http://code.google.com/p/jquery-dialogextend/
 *
 * Licensed under MIT
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Depends:
 *   jQuery 1.7.2
 *   jQuery UI Dialog 1.10.2
 *
 */

/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

//! moment.js
//! version : 2.3.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*
  backgrid
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/

// Copyright 2009, 2010 Kristopher Michael Kowal
// https://github.com/kriskowal/es5-shim
// ES5 15.5.4.20
// http://es5.github.com/#x15.5.4.20

/*!
 * numeral.js
 * version : 1.5.1
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */

/*
 * jQuery MultiSelect UI ImportExport 1.14pre
 * Copyright (c) 2012 Eric Hynds
 *
 * http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/
 *
 * Depends:
 *   - jQuery 1.4.2+
 *   - jQuery UI 1.8 widget factory
 *
 * Optional:
 *   - jQuery UI effects
 *   - jQuery UI position utility
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */

/*
 * jQuery MultiSelect UI ImportExport Filtering Plugin 1.5pre
 * Copyright (c) 2012 Eric Hynds
 *
 * http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/
 *
 * Depends:
 *   - jQuery UI MultiSelect widget
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */

/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */

/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/

/** @license MIT License (c) copyright 2011-2013 original author or authors */

/**
 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @author Brian Cavalier
 * @author John Hann
 * @version 2.4.0
 */

function base64_encode(e){var t,i,n,s,o,r,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,d=0,u="",f=[];if(!e)return e;do t=e.charCodeAt(h++),i=e.charCodeAt(h++),n=e.charCodeAt(h++),l=t<<16|i<<8|n,s=63&l>>18,o=63&l>>12,r=63&l>>6,a=63&l,f[d++]=c.charAt(s)+c.charAt(o)+c.charAt(r)+c.charAt(a);while(h<e.length);u=f.join("");var p=e.length%3;return(p?u.slice(0,p-3):u)+"===".slice(p||3)}function base64_decode(e){var t,i,n,s,o,r,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,d=0,u="",f=[];if(!e)return e;e+="";do s=c.indexOf(e.charAt(h++)),o=c.indexOf(e.charAt(h++)),r=c.indexOf(e.charAt(h++)),a=c.indexOf(e.charAt(h++)),l=s<<18|o<<12|r<<6|a,t=255&l>>16,i=255&l>>8,n=255&l,f[d++]=64==r?String.fromCharCode(t):64==a?String.fromCharCode(t,i):String.fromCharCode(t,i,n);while(h<e.length);return u=f.join("")}var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,n){return t&&eachProp(t,function(t,s){(i||!hasProp(e,s))&&(n&&"string"!=typeof t?(e[s]||(e[s]={}),mixin(e[s],t,i,n)):e[s]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var s=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return s.requireType=e,s.requireModules=n,i&&(s.originalError=i),s}function newContext(e){function t(e){var t,i;for(t=0;e[t];t+=1)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,n){var s,o,r,a,l,c,h,d,u,f,p,g=i&&i.split("/"),m=g,v=C.map,_=v&&v["*"];if(e&&"."===e.charAt(0)&&(i?(m=getOwn(C.pkgs,i)?g=[i]:g.slice(0,g.length-1),e=m.concat(e.split("/")),t(e),o=getOwn(C.pkgs,s=e[0]),e=e.join("/"),o&&e===s+"/"+o.main&&(e=s)):0===e.indexOf("./")&&(e=e.substring(2))),n&&v&&(g||_)){for(a=e.split("/"),l=a.length;l>0;l-=1){if(h=a.slice(0,l).join("/"),g)for(c=g.length;c>0;c-=1)if(r=getOwn(v,g.slice(0,c).join("/")),r&&(r=getOwn(r,h))){d=r,u=l;break}if(d)break;!f&&_&&getOwn(_,h)&&(f=getOwn(_,h),p=l)}!d&&f&&(d=f,u=p),d&&(a.splice(0,u,d),e=a.join("/"))}return e}function n(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===b.contextName?(t.parentNode.removeChild(t),!0):void 0})}function s(e){var t=getOwn(C.paths,e);return t&&isArray(t)&&t.length>1?(n(e),t.shift(),b.require.undef(e),b.require([e]),!0):void 0}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function r(e,t,n,s){var r,a,l,c,h=null,d=t?t.name:null,u=e,f=!0,p="";return e||(f=!1,e="_@r"+(E+=1)),c=o(e),h=c[0],e=c[1],h&&(h=i(h,d,s),a=getOwn(M,h)),e&&(h?p=a&&a.normalize?a.normalize(e,function(e){return i(e,d,s)}):i(e,d,s):(p=i(e,d,s),c=o(p),h=c[0],p=c[1],n=!0,r=b.nameToUrl(p))),l=!h||a||n?"":"_unnormalized"+(F+=1),{prefix:h,name:p,parentMap:t,unnormalized:!!l,url:r,originalName:u,isDefine:f,id:(h?h+"!"+p:p)+l}}function a(e){var t=e.id,i=getOwn(k,t);return i||(i=k[t]=new b.Module(e)),i}function l(e,t,i){var n=e.id,s=getOwn(k,n);!hasProp(M,n)||s&&!s.defineEmitComplete?(s=a(e),s.error&&"error"===t?i(s.error):s.on(t,i)):"defined"===t&&i(M[n])}function c(e,t){var i=e.requireModules,n=!1;t?t(e):(each(i,function(t){var i=getOwn(k,t);i&&(i.error=e,i.events.error&&(n=!0,i.emit("error",e)))}),n||req.onError(e))}function h(){globalDefQueue.length&&(apsp.apply(D,[D.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function d(e){delete k[e],delete T[e]}function u(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,each(e.depMaps,function(n,s){var o=n.id,r=getOwn(k,o);!r||e.depMatched[s]||i[o]||(getOwn(t,o)?(e.defineDep(s,M[o]),e.check()):u(r,t,i))}),i[n]=!0)}function f(){var e,t,i,o,r=1e3*C.waitSeconds,a=r&&b.startTime+r<(new Date).getTime(),l=[],h=[],d=!1,p=!0;if(!_){if(_=!0,eachProp(T,function(i){if(e=i.map,t=e.id,i.enabled&&(e.isDefine||h.push(i),!i.error))if(!i.inited&&a)s(t)?(o=!0,d=!0):(l.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(d=!0,!e.prefix))return p=!1}),a&&l.length)return i=makeError("timeout","Load timeout for modules: "+l,null,l),i.contextName=b.contextName,c(i);p&&each(h,function(e){u(e,{},{})}),a&&!o||!d||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,f()},50)),_=!1}}function p(e){hasProp(M,e[0])||a(r(e[0],null,!0)).init(e[1],e[2])}function g(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return g(t,b.onScriptLoad,"load","onreadystatechange"),g(t,b.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(h();D.length;){if(e=D.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}}var _,y,b,w,x,C={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},k={},T={},S={},D=[],M={},j={},E=1,F=1;return w={require:function(e){return e.require?e.require:e.require=b.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=M[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,i=getOwn(C.pkgs,e.map.id);return t=i?getOwn(C.config,e.map.id+"/"+i.main):getOwn(C.config,e.map.id),t||{}},exports:M[e.map.id]}}},y=function(e){this.events=getOwn(S,e.id)||{},this.map=e,this.shim=getOwn(C.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var e=this.map;return this.shim?(b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;j[e]||(j[e]=!0,b.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,n=this.depExports,s=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=b.execCb(i,o,n,s)}catch(r){e=r}else s=b.execCb(i,o,n,s);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?s=t.exports:void 0===s&&this.usingExports&&(s=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(M[i]=s,req.onResourceLoad&&req.onResourceLoad(b,this.map,this.depMaps)),d(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=r(e.prefix);this.depMaps.push(n),l(n,"defined",bind(this,function(n){var s,o,h,u=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,p=b.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(u=n.normalize(u,function(e){return i(e,f,!0)})||""),o=r(e.prefix+"!"+u,this.map.parentMap),l(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=getOwn(k,o.id),h&&(this.depMaps.push(o),this.events.error&&h.on("error",bind(this,function(e){this.emit("error",e)})),h.enable()),void 0):(s=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(k,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),c(e)}),s.fromText=bind(this,function(i,n){var o=e.name,l=r(o),h=useInteractive;n&&(i=n),h&&(useInteractive=!1),a(l),hasProp(C.config,t)&&(C.config[o]=C.config[t]);try{req.exec(i)}catch(d){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+d,d,[t]))}h&&(useInteractive=!0),this.depMaps.push(l),b.completeLoad(o),p([o],s)}),n.load(e.name,p,s,C),void 0)})),b.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){T[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,s;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,s=getOwn(w,e.id))return this.depExports[t]=s(this),void 0;this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}i=e.id,n=k[i],hasProp(w,i)||!n||n.enabled||b.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&b.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},b={config:C,contextName:e,registry:k,defined:M,urlFetched:j,defQueue:D,Module:y,makeModuleMap:r,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=C.pkgs,i=C.shim,n={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?"map"===t?(C.map||(C.map={}),mixin(C[t],e,!0,!0)):mixin(C[t],e,!0):C[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=b.makeShimExports(e)),i[t]=e}),C.shim=i),e.packages&&(each(e.packages,function(e){var i;e="string"==typeof e?{name:e}:e,i=e.location,t[e.name]={name:e.name,location:i||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),C.pkgs=t),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t))}),(e.deps||e.callback)&&b.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(i,o,l){var h,d,u;return n.enableBuildCallback&&o&&isFunction(o)&&(o.__requireJsBuild=!0),"string"==typeof i?isFunction(o)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(w,i)?w[i](k[t.id]):req.get?req.get(b,i,t,s):(d=r(i,t,!1,!0),h=d.id,hasProp(M,h)?M[h]:c(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),b.nextTick(function(){v(),u=a(r(null,t)),u.skipMap=n.skipMap,u.init(i,o,l,{enabled:!0}),f()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,s=e.lastIndexOf("."),o=e.split("/")[0],r="."===o||".."===o;return-1!==s&&(!r||s>1)&&(n=e.substring(s,e.length),e=e.substring(0,s)),b.nameToUrl(i(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(M,r(e,t,!1,!0).id)},specified:function(e){return e=r(e,t,!1,!0).id,hasProp(M,e)||hasProp(k,e)}}),t||(s.undef=function(e){h();var i=r(e,t,!0),n=getOwn(k,e);delete M[e],delete j[i.url],delete S[e],n&&(n.events.defined&&(S[e]=n.events),d(e))}),s},enable:function(e){var t=getOwn(k,e.id);t&&a(e).enable()},completeLoad:function(e){var t,i,n,o=getOwn(C.shim,e)||{},r=o.exports;for(h();D.length;){if(i=D.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);p(i)}if(n=getOwn(k,e),!t&&!hasProp(M,e)&&n&&!n.inited){if(!(!C.enforceDefine||r&&getGlobal(r)))return s(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));p([e,o.deps||[],o.exportsFn])}f()},nameToUrl:function(e,t,i){var n,s,o,r,a,l,c,h,d;if(req.jsExtRegExp.test(e))h=e+(t||"");else{for(n=C.paths,s=C.pkgs,a=e.split("/"),l=a.length;l>0;l-=1){if(c=a.slice(0,l).join("/"),o=getOwn(s,c),d=getOwn(n,c)){isArray(d)&&(d=d[0]),a.splice(0,l,d);break}if(o){r=e===o.name?o.location+"/"+o.main:o.location,a.splice(0,l,r);break}}h=a.join("/"),h+=t||(/\?/.test(h)||i?"":".js"),h=("/"===h.charAt(0)||h.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+h}return C.urlArgs?h+((-1===h.indexOf("?")?"?":"&")+C.urlArgs):h},load:function(e,t){req.load(b,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);b.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);return s(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var s,o,r=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=n):e=[]),o&&o.context&&(r=o.context),s=getOwn(contexts,r),s||(s=contexts[r]=req.s.newContext(r)),o&&s.configure(o),s.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,i){var n,s=e&&e.config||{};if(isBrowser)return n=req.createNode(s,t,i),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{importScripts(i),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,o,[t]))}},isBrowser&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,i){var n,s;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript(),n&&(e||(e=n.getAttribute("data-requiremodule")),s=contexts[n.getAttribute("data-requirecontext")])),(s?s.defQueue:globalDefQueue).push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("require-lib",function(){}),require({waitSeconds:0,paths:{"oro/security-access-levels":"orosecurity/js/security-access-levels",text:"oroui/lib/text",json:"oroui/lib/json2",base64:"oroui/lib/base64",jquery:"oroui/lib/jquery-1.10.2","jquery-ui":"oroui/lib/jquery-ui.min","jquery-ui-timepicker":"oroui/lib/jquery-ui-timepicker-addon","jquery-outer-html":"oroui/lib/outerHTML-2.1.0-min","jquery.mousewheel":"oroui/lib/jquery/jquery.mousewheel.min","jquery.numeric":"oroui/lib/jquery/jquery.numeric","jquery.uniform":"oroui/lib/jquery/jquery.uniform.min","jquery.select2":"oroui/lib/jquery/select2","jquery.jstree":"oroui/lib/jstree/jquery.jstree","jstree/jquery.cookie":"oroui/lib/jstree/jquery.cookie","jstree/jquery.hotkeys":"oroui/lib/jstree/jquery.hotkeys",flotr2:"oroui/lib/flotr2/flotr2.amd",bean:"oroui/lib/flotr2/bean",bootstrap:"oroui/lib/bootstrap.min","bootstrap-tooltip":"oroui/lib/bootstrap/js/bootstrap-tooltip","popover-extra-placements":"oroui/lib/bootstrap/js/popover-extra-placements",underscore:"oroui/lib/underscore",backbone:"oroui/lib/backbone","backbone/bootstrap-modal":"oroui/lib/backbone.bootstrap-modal","oro/app":"oroui/js/app","oro/delete-confirmation":"oroui/js/delete-confirmation","oro/error":"oroui/js/error","oro/init-layout":"oroui/js/init-layout","oro/jquery-setup":"oroui/js/jquery-setup","oro/jquery-ui-datepicker-l10n":"oroui/js/jquery-ui-datepicker-l10n","oro/jquery-ui-timepicker-l10n":"oroui/js/jquery-ui-timepicker-l10n","oro/layout":"oroui/js/layout","oro/mediator":"oroui/js/mediator","oro/messenger":"oroui/js/messenger","oro/modal":"oroui/js/modal","oro/scrollspy":"oroui/js/scrollspy","oro/tools":"oroui/js/tools","oro/widget-manager":"oroui/js/widget-manager","oro/abstract-widget":"oroui/js/widget/abstract-widget","oro/block-widget":"oroui/js/widget/block-widget","oro/buttons-widget":"oroui/js/widget/buttons-widget","oro/mobile/layout":"oroui/js/mobile/layout","oro/mobile/page-header":"oroui/js/mobile/page-header","oro/mobile/side-menu":"oroui/js/mobile/side-menu","oro/entity-field-choice-view":"oroentity/js/entity-field-choice-view","oro/address-book":"oroaddress/js/address-book","oro/address/collection":"oroaddress/js/address/collection","oro/address/model":"oroaddress/js/address/model","oro/address/view":"oroaddress/js/address/view","oro/mapservice/googlemaps":"oroaddress/js/mapservice/googlemaps","oro/region/collection":"oroaddress/js/region/collection","oro/region/model":"oroaddress/js/region/model","oro/region/view":"oroaddress/js/region/view","jquery.fullcalendar":"orocalendar/lib/fullcalendar/fullcalendar","oro/calendar":"orocalendar/js/calendar","oro/calendar/connection/collection":"orocalendar/js/calendar/connection/collection","oro/calendar/connection/model":"orocalendar/js/calendar/connection/model","oro/calendar/connection/view":"orocalendar/js/calendar/connection/view","oro/calendar/event/collection":"orocalendar/js/calendar/event/collection","oro/calendar/event/model":"orocalendar/js/calendar/event/model","oro/calendar/event/view":"orocalendar/js/calendar/event/view","oro/form-validation":"orocalendar/js/form-validation","oro/calendar/color-manager":"orocalendar/js/calendar/color-manager","oro/form/state":"oroconfig/js/form/state","oro/init-job":"orocron/js/init-job","backbone/pageable-collection":"orodatagrid/lib/backbone-pageable",backgrid:"orodatagrid/lib/backgrid/backgrid","oro/datagrid/action-launcher":"orodatagrid/js/datagrid/action-launcher","oro/datagrid/abstract-action":"orodatagrid/js/datagrid/action/abstract-action","oro/datagrid/delete-action":"orodatagrid/js/datagrid/action/delete-action","oro/datagrid/ajax-action":"orodatagrid/js/datagrid/action/ajax-action","oro/datagrid/mass-action":"orodatagrid/js/datagrid/action/mass-action","oro/datagrid/delete-mass-action":"orodatagrid/js/datagrid/action/delete-mass-action","oro/datagrid/model-action":"orodatagrid/js/datagrid/action/model-action","oro/datagrid/navigate-action":"orodatagrid/js/datagrid/action/navigate-action","oro/datagrid/refresh-collection-action":"orodatagrid/js/datagrid/action/refresh-collection-action","oro/datagrid/reset-collection-action":"orodatagrid/js/datagrid/action/reset-collection-action","oro/datagrid/actions-panel":"orodatagrid/js/datagrid/actions-panel","oro/datagrid/action-column":"orodatagrid/js/datagrid/column/action-column","oro/datagrid/body":"orodatagrid/js/datagrid/body","oro/datagrid/action-cell":"orodatagrid/js/datagrid/cell/action-cell","oro/datagrid/boolean-cell":"orodatagrid/js/datagrid/cell/boolean-cell","oro/datagrid/html-cell":"orodatagrid/js/datagrid/cell/html-cell","oro/datagrid/date-cell":"orodatagrid/js/datagrid/cell/date-cell","oro/datagrid/datetime-cell":"orodatagrid/js/datagrid/cell/datetime-cell","oro/datagrid/number-cell":"orodatagrid/js/datagrid/cell/number-cell","oro/datagrid/select-cell":"orodatagrid/js/datagrid/cell/select-cell","oro/datagrid/select-row-cell":"orodatagrid/js/datagrid/cell/select-row-cell","oro/datagrid/string-cell":"orodatagrid/js/datagrid/cell/string-cell","oro/datagrid/cell-formatter":"orodatagrid/js/datagrid/formatter/cell-formatter","oro/datagrid/datetime-formatter":"orodatagrid/js/datagrid/formatter/datetime-formatter","oro/datagrid/number-formatter":"orodatagrid/js/datagrid/formatter/number-formatter","oro/datagrid/grid":"orodatagrid/js/datagrid/grid","oro/datagrid/header-cell":"orodatagrid/js/datagrid/header-cell/header-cell","oro/datagrid/select-all-header-cell":"orodatagrid/js/datagrid/header-cell/select-all-header-cell","oro/datagrid/header":"orodatagrid/js/datagrid/header","oro/datagrid/abstract-listener":"orodatagrid/js/datagrid/listener/abstract-listener","oro/datagrid/column-form-listener":"orodatagrid/js/datagrid/listener/column-form-listener","oro/datagrid/callback-listener":"orodatagrid/js/datagrid/listener/callback-listener","oro/datagrid/page-size":"orodatagrid/js/datagrid/page-size","oro/datagrid/grid-views/view":"orodatagrid/js/datagrid/grid-views/view","oro/datagrid/grid-views/model":"orodatagrid/js/datagrid/grid-views/model","oro/datagrid/grid-views/collection":"orodatagrid/js/datagrid/grid-views/collection","oro/datagrid/pagination-input":"orodatagrid/js/datagrid/pagination-input","oro/datagrid/pagination":"orodatagrid/js/datagrid/pagination","oro/datagrid/router":"orodatagrid/js/datagrid/router","oro/datagrid/row":"orodatagrid/js/datagrid/row","oro/datagrid/toolbar":"orodatagrid/js/datagrid/toolbar","oro/datagrid-builder":"orodatagrid/js/datagrid-builder","oro/loading-mask":"orodatagrid/js/loading-mask","oro/pageable-collection":"orodatagrid/js/pageable-collection","oro/email/template/collection":"oroemail/js/email/template/collection","oro/email/template/model":"oroemail/js/email/template/model","oro/email/template/view":"oroemail/js/email/template/view","oro/email/variable/model":"oroemail/js/email/variable/model","oro/email/variable/view":"oroemail/js/email/variable/view","oro/init-email":"oroemail/js/init-email","oro/init-entity-extend-apply":"oroentityextend/js/init-entity-extend-apply","oro/init-entity-extend-relation":"oroentityextend/js/init-entity-extend-relation","jquery.multiselect":"orofilter/lib/multiselect/jquery.multiselect","jquery.multiselect.filter":"orofilter/lib/multiselect/jquery.multiselect.filter","oro/datafilter/abstract-filter":"orofilter/js/datafilter/filter/abstract-filter","oro/datafilter/none-filter":"orofilter/js/datafilter/filter/none-filter","oro/datafilter/choice-filter":"orofilter/js/datafilter/filter/choice-filter","oro/datafilter/date-filter":"orofilter/js/datafilter/filter/date-filter","oro/datafilter/datetime-filter":"orofilter/js/datafilter/filter/datetime-filter","oro/datafilter/multiselect-filter":"orofilter/js/datafilter/filter/multiselect-filter","oro/datafilter/number-filter":"orofilter/js/datafilter/filter/number-filter","oro/datafilter/select-filter":"orofilter/js/datafilter/filter/select-filter","oro/datafilter/select-row-filter":"orofilter/js/datafilter/filter/select-row-filter","oro/datafilter/text-filter":"orofilter/js/datafilter/filter/text-filter","oro/datafilter/abstract-formatter":"orofilter/js/datafilter/formatter/abstract-formatter","oro/datafilter/number-formatter":"orofilter/js/datafilter/formatter/number-formatter","oro/datafilter/filters-manager":"orofilter/js/datafilter/filters-manager","oro/datafilter/collection-filters-manager":"orofilter/js/datafilter/collection-filters-manager","oro/datafilter-builder":"orofilter/js/datafilter-builder","oro/multiselect-decorator":"orofilter/js/multiselect-decorator","jquery.validate":"oroform/lib/jquery.validate/jquery.validate","oro/validate-setup":"oroform/js/validate-setup","oro/validator/count":"oroform/js/validator/count","oro/validator/date":"oroform/js/validator/date","oro/validator/email":"oroform/js/validator/email","oro/validator/length":"oroform/js/validator/length","oro/validator/notblank":"oroform/js/validator/notblank","oro/validator/notnull":"oroform/js/validator/notnull","oro/validator/number":"oroform/js/validator/number","oro/validator/range":"oroform/js/validator/range","oro/validator/regex":"oroform/js/validator/regex","oro/validator/repeated":"oroform/js/validator/repeated","oro/validator/url":"oroform/js/validator/url","oro/select2-config":"oroform/js/select2-config","oro/multiple-entity":"oroform/js/multiple-entity","oro/multiple-entity/view":"oroform/js/multiple-entity/view","oro/multiple-entity/model":"oroform/js/multiple-entity/model","oro/multiple-entity/collection":"oroform/js/multiple-entity/collection","oro/integration/channel-view":"orointegration/js/channel-view",moment:"orolocale/lib/moment",numeral:"orolocale/lib/numeral","oro/locale-settings":"orolocale/js/locale-settings","oro/locale-settings/data":"../js/oro.locale_data","oro/formatter/name":"orolocale/js/formatter/name","oro/formatter/address":"orolocale/js/formatter/address","oro/formatter/number":"orolocale/js/formatter/number","oro/formatter/datetime":"orolocale/js/formatter/datetime","oro/moment-l10n":"orolocale/js/moment-l10n","oro/query-designer":"oroquerydesigner/js/query-designer","oro/query-designer/util":"oroquerydesigner/js/query-designer/util","oro/query-designer/function-manager":"oroquerydesigner/js/query-designer/function-manager","oro/query-designer/filter-manager":"oroquerydesigner/js/query-designer/filter-manager","oro/query-designer/filter-builder":"oroquerydesigner/js/query-designer/filter-builder","oro/query-designer/abstract-view":"oroquerydesigner/js/query-designer/abstract-view","oro/query-designer/column-selector-view":"oroquerydesigner/js/query-designer/column-selector-view","oro/query-designer/column/collection":"oroquerydesigner/js/query-designer/column/collection","oro/query-designer/column/model":"oroquerydesigner/js/query-designer/column/model","oro/query-designer/column/view":"oroquerydesigner/js/query-designer/column/view","oro/query-designer/filter/collection":"oroquerydesigner/js/query-designer/filter/collection","oro/query-designer/filter/model":"oroquerydesigner/js/query-designer/filter/model","oro/query-designer/filter/view":"oroquerydesigner/js/query-designer/filter/view","oro/query-designer/grouping/view":"oroquerydesigner/js/query-designer/grouping/view","oro/init-search-bar":"orosearch/js/init-search-bar","jstree/jquery.jstree.tree_selector":"orosegmentationtree/lib/jstree/jquery.jstree.tree_selector","oro/sidebar/constants":"orosidebar/js/constants","oro/sidebar/sidebar/model":"orosidebar/js/sidebar/model","oro/sidebar/sidebar/template":"orosidebar/js/sidebar/templates/template.html","oro/sidebar/sidebar/view":"orosidebar/js/sidebar/view","oro/sidebar/widget-container/model":"orosidebar/js/widget-container/model","oro/sidebar/widget-container/collection":"orosidebar/js/widget-container/collection","oro/sidebar/widget-container/icon-template":"orosidebar/js/widget-container/templates/icon-template.html","oro/sidebar/widget-container/widget-min-template":"orosidebar/js/widget-container/templates/widget-min-template.html","oro/sidebar/widget-container/widget-max-template":"orosidebar/js/widget-container/templates/widget-max-template.html","oro/sidebar/widget-container/widget-add-template":"orosidebar/js/widget-container/templates/widget-add-template.html","oro/sidebar/widget-container/view":"orosidebar/js/widget-container/view","oro/sidebar/widget-container/icon-view":"orosidebar/js/widget-container/icon-view","oro/sidebar/widget-container/widget-add-view":"orosidebar/js/widget-container/widget-add-view","oro/sidebar/widget-container/widget-setup-view":"orosidebar/js/widget-container/widget-setup-view","oro/sidebar/widget/hello-world":"orosidebar/sidebar_widgets/hello_world/js/widget","cryptojs/core":"orosync/lib/cryptojs/core-min","cryptojs/enc-base64":"orosync/lib/cryptojs/enc-base64-min","cryptojs/hmac":"orosync/lib/cryptojs/hmac-min","cryptojs/sha256":"orosync/lib/cryptojs/sha256-min","cryptojs/pbkdf2":"orosync/lib/cryptojs/pbkdf2-min",when:"orosync/lib/when",autobahn:"orosync/lib/autobahn","oro/sync":"orosync/js/sync","oro/sync/wamp":"orosync/js/sync/wamp","oro/when-setup":"orosync/js/when-setup","oro/tag/collection":"orotag/js/tag/collection","oro/tag/model":"orotag/js/tag/model","oro/tag/update-view":"orotag/js/tag/update-view","oro/tag/view":"orotag/js/tag/view",translator:"orotranslation/lib/translator","oro/translator":"orotranslation/js/translator","oro/init-user":"orouser/js/init-user","jquery.dialog.extended":"orowindows/lib/jquery.dialog.extended","oro/dialog-widget":"orowindows/js/dialog-widget","oro/dialog/state/collection":"orowindows/js/dialog/state/collection","oro/dialog/state/model":"orowindows/js/dialog/state/model","oro/workflow-transition-handler":"oroworkflow/js/transition-handler","oro/workflow-save-and-transit-handler":"oroworkflow/js/save-and-transit-handler",routing:"fosjsrouting/js/router","jquery.form":"oronavigation/lib/jquery.form",url:"oronavigation/lib/url.min","oro/navigation":"oronavigation/js/navigation","oro/content-manager":"oronavigation/js/content-manager","oro/content/grid-builder":"oronavigation/js/content/grid-builder","oro/navigation/abstract-view":"oronavigation/js/navigation/abstract-view","oro/navigation/collection":"oronavigation/js/navigation/collection","oro/navigation/dotmenu/item-view":"oronavigation/js/navigation/dotmenu/item-view","oro/navigation/dotmenu/view":"oronavigation/js/navigation/dotmenu/view","oro/navigation/favorites/view":"oronavigation/js/navigation/favorites/view","oro/navigation/model":"oronavigation/js/navigation/model","oro/navigation/pagestate/model":"oronavigation/js/navigation/pagestate/model","oro/navigation/pagestate/view":"oronavigation/js/navigation/pagestate/view","oro/navigation/pinbar/collection":"oronavigation/js/navigation/pinbar/collection","oro/navigation/pinbar/item-view":"oronavigation/js/navigation/pinbar/item-view","oro/navigation/pinbar/model":"oronavigation/js/navigation/pinbar/model","oro/navigation/pinbar/view":"oronavigation/js/navigation/pinbar/view","oro/navigation/shortcuts/view":"oronavigation/js/navigation/shortcuts/view"},shim:{"jquery-ui":{deps:["jquery"]},"jquery-ui-timepicker":{deps:["jquery-ui"]},"jquery.mousewheel":{deps:["jquery"]},"jquery.numeric":{deps:["jquery"]},"jquery.uniform":{deps:["jquery"]},"jquery.select2":{deps:["jquery"]},"jquery.jstree":{deps:["jquery"]},"jstree/jquery.cookie":{deps:["jquery.jstree"]},"jstree/jquery.hotkeys":{deps:["jquery.jstree"]},flotr2:{deps:["jquery"]},bootstrap:{deps:["jquery"]},"bootstrap-tooltip":{deps:["bootstrap"]},"popover-extra-placements":{deps:["bootstrap-tooltip"]},underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"},"backbone/bootstrap-modal":{deps:["jquery","underscore","backbone"]},"jquery.fullcalendar":{deps:["jquery","jquery-ui"]},backgrid:{deps:["jquery","underscore","backbone"],exports:"Backgrid"},"backgrid/moment":{deps:["jquery","underscore","backbone","backgrid","moment"]},moment:{exports:["moment","moment"]},"jquery.multiselect":{deps:["jquery-ui"]},"jquery.multiselect.filter":{deps:["jquery.multiselect"]},"jquery.validate":{deps:["jquery"]},numeral:{exports:["numeral"]},"oro/formatter/number":{deps:["numeral","oro/locale-settings"]},"jstree/jquery.jstree.tree_selector":{deps:["jquery.jstree"]},"cryptojs/enc-base64":{deps:["cryptojs/core"]},"cryptojs/hmac":{deps:["cryptojs/core"]},"cryptojs/sha256":{deps:["cryptojs/core"]},"cryptojs/pbkdf2":{deps:["cryptojs/core"]},autobahn:{deps:["when","cryptojs/core","cryptojs/enc-base64","cryptojs/hmac","cryptojs/sha256","cryptojs/pbkdf2"],exports:"ab"},translator:{exports:"Translator"},"jquery.dialog.extended":{deps:["jquery-ui"]},routing:{exports:"window.Routing"},"jquery.form":{deps:["jquery"]},url:{exports:"Url"}},map:{"*":{jquery:"oro/jquery-setup","jquery-ui":"oro/jquery-ui-datepicker-l10n","jquery-ui-timepicker":"oro/jquery-ui-timepicker-l10n","jquery.validate":"oro/validate-setup",moment:"oro/moment-l10n"},"oro/jquery-setup":{jquery:"jquery"},"oro/jquery-ui-datepicker-l10n":{"jquery-ui":"jquery-ui"},"oro/jquery-ui-timepicker-l10n":{"jquery-ui-timepicker":"jquery-ui-timepicker"},"oro/validate-setup":{"jquery.validate":"jquery.validate"},"oro/moment-l10n":{moment:"moment"},autobahn:{when:"oro/when-setup"}}}),define("require-config",function(){}),function(e,t){function i(e){var t=e.length,i=ht.type(e);
return ht.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e){var t=Tt[e]={};return ht.each(e.match(ut)||[],function(e,i){t[i]=!0}),t}function s(e,i,n,s){if(ht.acceptData(e)){var o,r,a=ht.expando,l=e.nodeType,c=l?ht.cache:e,h=l?e[a]:e[a]&&a;if(h&&c[h]&&(s||c[h].data)||n!==t||"string"!=typeof i)return h||(h=l?e[a]=tt.pop()||ht.guid++:a),c[h]||(c[h]=l?{}:{toJSON:ht.noop}),("object"==typeof i||"function"==typeof i)&&(s?c[h]=ht.extend(c[h],i):c[h].data=ht.extend(c[h].data,i)),r=c[h],s||(r.data||(r.data={}),r=r.data),n!==t&&(r[ht.camelCase(i)]=n),"string"==typeof i?(o=r[i],null==o&&(o=r[ht.camelCase(i)])):o=r,o}}function o(e,t,i){if(ht.acceptData(e)){var n,s,o=e.nodeType,r=o?ht.cache:e,l=o?e[ht.expando]:ht.expando;if(r[l]){if(t&&(n=i?r[l]:r[l].data)){ht.isArray(t)?t=t.concat(ht.map(t,ht.camelCase)):t in n?t=[t]:(t=ht.camelCase(t),t=t in n?[t]:t.split(" ")),s=t.length;for(;s--;)delete n[t[s]];if(i?!a(n):!ht.isEmptyObject(n))return}(i||(delete r[l].data,a(r[l])))&&(o?ht.cleanData([e],!0):ht.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(e,i,n){if(n===t&&1===e.nodeType){var s="data-"+i.replace(Dt,"-$1").toLowerCase();if(n=e.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:St.test(n)?ht.parseJSON(n):n}catch(o){}ht.data(e,i,n)}else n=t}return n}function a(e){var t;for(t in e)if(("data"!==t||!ht.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function h(){try{return X.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function u(e,t,i){if(ht.isFunction(t))return ht.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ht.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(qt.test(t))return ht.filter(t,e,i);t=ht.filter(t,e)}return ht.grep(e,function(e){return ht.inArray(e,t)>=0!==i})}function f(e){var t=Vt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function p(e,t){return ht.nodeName(e,"table")&&ht.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function g(e){return e.type=(null!==ht.find.attr(e,"type"))+"/"+e.type,e}function m(e){var t=si.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var i,n=0;null!=(i=e[n]);n++)ht._data(i,"globalEval",!t||ht._data(t[n],"globalEval"))}function _(e,t){if(1===t.nodeType&&ht.hasData(e)){var i,n,s,o=ht._data(e),r=ht._data(t,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)ht.event.add(t,i,a[i][n])}r.data&&(r.data=ht.extend({},r.data))}}function y(e,t){var i,n,s;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ht.support.noCloneEvent&&t[ht.expando]){s=ht._data(t);for(n in s.events)ht.removeEvent(t,n,s.handle);t.removeAttribute(ht.expando)}"script"===i&&t.text!==e.text?(g(t).text=e.text,m(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ht.support.html5Clone&&e.innerHTML&&!ht.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&ti.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function b(e,i){var n,s,o=0,r=typeof e.getElementsByTagName!==G?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==G?e.querySelectorAll(i||"*"):t;if(!r)for(r=[],n=e.childNodes||e;null!=(s=n[o]);o++)!i||ht.nodeName(s,i)?r.push(s):ht.merge(r,b(s,i));return i===t||i&&ht.nodeName(e,i)?ht.merge([e],r):r}function w(e){ti.test(e.type)&&(e.defaultChecked=e.checked)}function x(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,s=ki.length;s--;)if(t=ki[s]+i,t in e)return t;return n}function C(e,t){return e=t||e,"none"===ht.css(e,"display")||!ht.contains(e.ownerDocument,e)}function k(e,t){for(var i,n,s,o=[],r=0,a=e.length;a>r;r++)n=e[r],n.style&&(o[r]=ht._data(n,"olddisplay"),i=n.style.display,t?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&C(n)&&(o[r]=ht._data(n,"olddisplay",M(n.nodeName)))):o[r]||(s=C(n),(i&&"none"!==i||!s)&&ht._data(n,"olddisplay",s?i:ht.css(n,"display"))));for(r=0;a>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[r]||"":"none"));return e}function T(e,t,i){var n=vi.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function S(e,t,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=ht.css(e,i+Ci[o],!0,s)),n?("content"===i&&(r-=ht.css(e,"padding"+Ci[o],!0,s)),"margin"!==i&&(r-=ht.css(e,"border"+Ci[o]+"Width",!0,s))):(r+=ht.css(e,"padding"+Ci[o],!0,s),"padding"!==i&&(r+=ht.css(e,"border"+Ci[o]+"Width",!0,s)));return r}function D(e,t,i){var n=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=hi(e),r=ht.support.boxSizing&&"border-box"===ht.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=di(e,t,o),(0>s||null==s)&&(s=e.style[t]),_i.test(s))return s;n=r&&(ht.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+S(e,t,i||(r?"border":"content"),n,o)+"px"}function M(e){var t=X,i=bi[e];return i||(i=j(e,t),"none"!==i&&i||(ci=(ci||ht("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(ci[0].contentWindow||ci[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=j(e,t),ci.detach()),bi[e]=i),i}function j(e,t){var i=ht(t.createElement(e)).appendTo(t.body),n=ht.css(i[0],"display");return i.remove(),n}function E(e,t,i,n){var s;if(ht.isArray(t))ht.each(t,function(t,s){i||Si.test(e)?n(e,s):E(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==ht.type(t))n(e,t);else for(s in t)E(e+"["+s+"]",t[s],i,n)}function F(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,o=t.toLowerCase().match(ut)||[];if(ht.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function A(e,t,i,n){function s(a){var l;return o[a]=!0,ht.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var o={},r=e===Wi;return s(t.dataTypes[0])||!o["*"]&&s("*")}function O(e,i){var n,s,o=ht.ajaxSettings.flatOptions||{};for(s in i)i[s]!==t&&((o[s]?e:n||(n={}))[s]=i[s]);return n&&ht.extend(!0,e,n),e}function N(e,i,n){for(var s,o,r,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){c.unshift(a);break}if(c[0]in n)r=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){r=a;break}s||(s=a)}r=r||s}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function I(e,t,i,n){var s,o,r,a,l,c={},h=e.dataTypes.slice();if(h[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(o=h.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=c[l+" "+o]||c["* "+o],!r)for(s in c)if(a=s.split(" "),a[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[s]:c[s]!==!0&&(o=a[0],h.unshift(a[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function P(){try{return new e.XMLHttpRequest}catch(t){}}function z(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function R(){return setTimeout(function(){Zi=t}),Zi=ht.now()}function $(e,t,i){for(var n,s=(on[t]||[]).concat(on["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,t,e))return n}function L(e,t,i){var n,s,o=0,r=sn.length,a=ht.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Zi||R(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(o);return a.notifyWith(e,[c,o,i]),1>o&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ht.extend({},t),opts:ht.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Zi||R(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ht.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),h=c.props;for(H(h,c.opts.specialEasing);r>o;o++)if(n=sn[o].call(c,e,h,c.opts))return n;return ht.map(h,$,c),ht.isFunction(c.opts.start)&&c.opts.start.call(e,c),ht.fx.timer(ht.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(e,t){var i,n,s,o,r;for(i in e)if(n=ht.camelCase(i),s=t[n],o=e[i],ht.isArray(o)&&(s=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),r=ht.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=s)}else t[n]=s}function q(e,t,i){var n,s,o,r,a,l,c=this,h={},d=e.style,u=e.nodeType&&C(e),f=ht._data(e,"fxshow");i.queue||(a=ht._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ht.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ht.css(e,"display")&&"none"===ht.css(e,"float")&&(ht.support.inlineBlockNeedsLayout&&"inline"!==M(e.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ht.support.shrinkWrapBlocks||c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],en.exec(s)){if(delete t[n],o=o||"toggle"===s,s===(u?"hide":"show"))continue;h[n]=f&&f[n]||ht.style(e,n)}if(!ht.isEmptyObject(h)){f?"hidden"in f&&(u=f.hidden):f=ht._data(e,"fxshow",{}),o&&(f.hidden=!u),u?ht(e).show():c.done(function(){ht(e).hide()}),c.done(function(){var t;ht._removeData(e,"fxshow");for(t in h)ht.style(e,t,h[t])});for(n in h)r=$(u?f[n]:0,n,c),n in f||(f[n]=r.start,u&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function W(e,t,i,n,s){return new W.prototype.init(e,t,i,n,s)}function U(e,t){var i,n={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)i=Ci[s],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function B(e){return ht.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V,Y,G=typeof t,K=e.location,X=e.document,J=X.documentElement,Z=e.jQuery,Q=e.$,et={},tt=[],it="1.10.2",nt=tt.concat,st=tt.push,ot=tt.slice,rt=tt.indexOf,at=et.toString,lt=et.hasOwnProperty,ct=it.trim,ht=function(e,t){return new ht.fn.init(e,t,Y)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ut=/\S+/g,ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,_t=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,yt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bt=/^-ms-/,wt=/-([\da-z])/gi,xt=function(e,t){return t.toUpperCase()},Ct=function(e){(X.addEventListener||"load"===e.type||"complete"===X.readyState)&&(kt(),ht.ready())},kt=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",Ct,!1),e.removeEventListener("load",Ct,!1)):(X.detachEvent("onreadystatechange",Ct),e.detachEvent("onload",Ct))};ht.fn=ht.prototype={jquery:it,constructor:ht,init:function(e,i,n){var s,o;if(!e)return this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:pt.exec(e),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(s[1]){if(i=i instanceof ht?i[0]:i,ht.merge(this,ht.parseHTML(s[1],i&&i.nodeType?i.ownerDocument||i:X,!0)),gt.test(s[1])&&ht.isPlainObject(i))for(s in i)ht.isFunction(this[s])?this[s](i[s]):this.attr(s,i[s]);return this}if(o=X.getElementById(s[2]),o&&o.parentNode){if(o.id!==s[2])return n.find(e);this.length=1,this[0]=o}return this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ht.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ht.makeArray(e,this))},selector:"",length:0,toArray:function(){return ot.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ht.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ht.each(this,e,t)},ready:function(e){return ht.ready.promise().done(e),this},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(ht.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:st,sort:[].sort,splice:[].splice},ht.fn.init.prototype=ht.fn,ht.extend=ht.fn.extend=function(){var e,i,n,s,o,r,a=arguments[0]||{},l=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||ht.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(o=arguments[l]))for(s in o)e=a[s],n=o[s],a!==n&&(h&&n&&(ht.isPlainObject(n)||(i=ht.isArray(n)))?(i?(i=!1,r=e&&ht.isArray(e)?e:[]):r=e&&ht.isPlainObject(e)?e:{},a[s]=ht.extend(h,r,n)):n!==t&&(a[s]=n));return a},ht.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ht&&(e.$=Q),t&&e.jQuery===ht&&(e.jQuery=Z),ht},isReady:!1,readyWait:1,holdReady:function(e){e?ht.readyWait++:ht.ready(!0)},ready:function(e){if(e===!0?!--ht.readyWait:!ht.isReady){if(!X.body)return setTimeout(ht.ready);ht.isReady=!0,e!==!0&&--ht.readyWait>0||(V.resolveWith(X,[ht]),ht.fn.trigger&&ht(X).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ht.type(e)},isArray:Array.isArray||function(e){return"array"===ht.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[at.call(e)]||"object":typeof e},isPlainObject:function(e){var i;if(!e||"object"!==ht.type(e)||e.nodeType||ht.isWindow(e))return!1;try{if(e.constructor&&!lt.call(e,"constructor")&&!lt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ht.support.ownLast)for(i in e)return lt.call(e,i);for(i in e);return i===t||lt.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||X;var n=gt.exec(e),s=!i&&[];return n?[t.createElement(n[1])]:(n=ht.buildFragment([e],t,s),s&&ht(s).remove(),ht.merge([],n.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ht.trim(t),t&&mt.test(t.replace(_t,"@").replace(yt,"]").replace(vt,"")))?new Function("return "+t)():(ht.error("Invalid JSON: "+t),void 0)},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(o){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ht.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&ht.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(bt,"ms-").replace(wt,xt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var s,o=0,r=e.length,a=i(e);if(n){if(a)for(;r>o&&(s=t.apply(e[o],n),s!==!1);o++);else for(o in e)if(s=t.apply(e[o],n),s===!1)break}else if(a)for(;r>o&&(s=t.call(e[o],o,e[o]),s!==!1);o++);else for(o in e)if(s=t.call(e[o],o,e[o]),s===!1)break;return e},trim:ct&&!ct.call("﻿ ")?function(e){return null==e?"":ct.call(e)}:function(e){return null==e?"":(e+"").replace(ft,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ht.merge(n,"string"==typeof e?[e]:e):st.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(rt)return rt.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,s=e.length,o=0;if("number"==typeof n)for(;n>o;o++)e[s++]=i[o];else for(;i[o]!==t;)e[s++]=i[o++];return e.length=s,e},grep:function(e,t,i){var n,s=[],o=0,r=e.length;for(i=!!i;r>o;o++)n=!!t(e[o],o),i!==n&&s.push(e[o]);return s},map:function(e,t,n){var s,o=0,r=e.length,a=i(e),l=[];if(a)for(;r>o;o++)s=t(e[o],o,n),null!=s&&(l[l.length]=s);else for(o in e)s=t(e[o],o,n),null!=s&&(l[l.length]=s);return nt.apply([],l)},guid:1,proxy:function(e,i){var n,s,o;return"string"==typeof i&&(o=e[i],i=e,e=o),ht.isFunction(e)?(n=ot.call(arguments,2),s=function(){return e.apply(i||this,n.concat(ot.call(arguments)))},s.guid=e.guid=e.guid||ht.guid++,s):t},access:function(e,i,n,s,o,r,a){var l=0,c=e.length,h=null==n;if("object"===ht.type(n)){o=!0;for(l in n)ht.access(e,i,l,n[l],!0,r,a)}else if(s!==t&&(o=!0,ht.isFunction(s)||(a=!0),h&&(a?(i.call(e,s),i=null):(h=i,i=function(e,t,i){return h.call(ht(e),i)})),i))for(;c>l;l++)i(e[l],n,a?s:s.call(e[l],l,i(e[l],n)));return o?e:h?i.call(e):c?i(e[0],n):r},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var s,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];s=i.apply(e,n||[]);for(o in t)e.style[o]=r[o];return s}}),ht.ready.promise=function(t){if(!V)if(V=ht.Deferred(),"complete"===X.readyState)setTimeout(ht.ready);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",Ct,!1),e.addEventListener("load",Ct,!1);else{X.attachEvent("onreadystatechange",Ct),e.attachEvent("onload",Ct);var i=!1;try{i=null==e.frameElement&&X.documentElement}catch(n){}i&&i.doScroll&&function s(){if(!ht.isReady){try{i.doScroll("left")}catch(e){return setTimeout(s,50)}kt(),ht.ready()}}()}return V.promise(t)},ht.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()}),Y=ht(X),function(e,t){function i(e,t,i,n){var s,o,r,a,l,c,h,d,p,g;if((t?t.ownerDocument||t:L)!==A&&F(t),t=t||A,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(N&&!n){if(s=yt.exec(e))if(r=s[1]){if(9===a){if(o=t.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&R(t,o)&&o.id===r)return i.push(o),i}else{if(s[2])return et.apply(i,t.getElementsByTagName(e)),i;if((r=s[3])&&C.getElementsByClassName&&t.getElementsByClassName)return et.apply(i,t.getElementsByClassName(r)),i}if(C.qsa&&(!I||!I.test(e))){if(d=h=$,p=t,g=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=u(e),(h=t.getAttribute("id"))?d=h.replace(xt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+f(c[l]);p=ft.test(e)&&t.parentNode||t,g=c.join(",")}if(g)try{return et.apply(i,p.querySelectorAll(g)),i}catch(m){}finally{h||t.removeAttribute("id")}}}return w(e.replace(ct,"$1"),t,i,n)}function n(){function e(i,n){return t.push(i+=" ")>T.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function s(e){return e[$]=!0,e}function o(e){var t=A.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=e.length;n--;)T.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function l(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function c(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function h(e){return s(function(t){return t=+t,s(function(i,n){for(var s,o=e([],i.length,t),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function d(){}function u(e,t){var n,s,o,r,a,l,c,h=U[e+" "];if(h)return t?0:h.slice(0);for(a=e,l=[],c=T.preFilter;a;){(!n||(s=dt.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=ut.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(ct," ")}),a=a.slice(n.length));for(r in T.filter)!(s=vt[r].exec(a))||c[r]&&!(s=c[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return t?a.length:a?i.error(e):U(e,l).slice(0)}function f(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,s=i&&"parentNode"===n,o=q++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,o)}:function(t,i,r){var a,l,c,h=H+" "+o;if(r){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(c=t[$]||(t[$]={}),(l=c[n])&&l[0]===h){if((a=l[1])===!0||a===k)return a===!0}else if(l=c[n]=[h],l[1]=e(t,i,r)||k,l[1]===!0)return!0}}function g(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function m(e,t,i,n,s){for(var o,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!i||i(o,n,s))&&(r.push(o),c&&t.push(a));return r}function v(e,t,i,n,o,r){return n&&!n[$]&&(n=v(n)),o&&!o[$]&&(o=v(o,r)),s(function(s,r,a,l){var c,h,d,u=[],f=[],p=r.length,g=s||b(t||"*",a.nodeType?[a]:a,[]),v=!e||!s&&t?g:m(g,u,e,a,l),_=i?o||(s?e:p||n)?[]:r:v;if(i&&i(v,_,a,l),n)for(c=m(_,f),n(c,[],a,l),h=c.length;h--;)(d=c[h])&&(_[f[h]]=!(v[f[h]]=d));if(s){if(o||e){if(o){for(c=[],h=_.length;h--;)(d=_[h])&&c.push(v[h]=d);o(null,_=[],c,l)}for(h=_.length;h--;)(d=_[h])&&(c=o?it.call(s,d):u[h])>-1&&(s[c]=!(r[c]=d))}}else _=m(_===r?_.splice(p,_.length):_),o?o(null,r,_,l):et.apply(r,_)})}function _(e){for(var t,i,n,s=e.length,o=T.relative[e[0].type],r=o||T.relative[" "],a=o?1:0,l=p(function(e){return e===t},r,!0),c=p(function(e){return it.call(t,e)>-1},r,!0),h=[function(e,i,n){return!o&&(n||i!==j)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];s>a;a++)if(i=T.relative[e[a].type])h=[p(g(h),i)];else{if(i=T.filter[e[a].type].apply(null,e[a].matches),i[$]){for(n=++a;s>n&&!T.relative[e[n].type];n++);return v(a>1&&g(h),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ct,"$1"),i,n>a&&_(e.slice(a,n)),s>n&&_(e=e.slice(n)),s>n&&f(e))}h.push(i)}return g(h)}function y(e,t){var n=0,o=t.length>0,r=e.length>0,a=function(s,a,l,c,h){var d,u,f,p=[],g=0,v="0",_=s&&[],y=null!=h,b=j,w=s||r&&T.find.TAG("*",h&&a.parentNode||a),x=H+=null==b?1:Math.random()||.1;for(y&&(j=a!==A&&a,k=n);null!=(d=w[v]);v++){if(r&&d){for(u=0;f=e[u++];)if(f(d,a,l)){c.push(d);break}y&&(H=x,k=++n)}o&&((d=!f&&d)&&g--,s&&_.push(d))}if(g+=v,o&&v!==g){for(u=0;f=t[u++];)f(_,p,a,l);if(s){if(g>0)for(;v--;)_[v]||p[v]||(p[v]=Z.call(c));p=m(p)}et.apply(c,p),y&&!s&&p.length>0&&g+t.length>1&&i.uniqueSort(c)}return y&&(H=x,j=b),_};return o?s(a):a}function b(e,t,n){for(var s=0,o=t.length;o>s;s++)i(e,t[s],n);return n}function w(e,t,i,n){var s,o,r,a,l,c=u(e);if(!n&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&C.getById&&9===t.nodeType&&N&&T.relative[o[1].type]){if(t=(T.find.ID(r.matches[0].replace(Ct,kt),t)||[])[0],!t)return i;e=e.slice(o.shift().value.length)}for(s=vt.needsContext.test(e)?0:o.length;s--&&(r=o[s],!T.relative[a=r.type]);)if((l=T.find[a])&&(n=l(r.matches[0].replace(Ct,kt),ft.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=n.length&&f(o),!e)return et.apply(i,n),i;break}}return M(e,c)(n,t,!N,i,ft.test(e)),i}var x,C,k,T,S,D,M,j,E,F,A,O,N,I,P,z,R,$="sizzle"+-new Date,L=e.document,H=0,q=0,W=n(),U=n(),B=n(),V=!1,Y=function(e,t){return e===t?(V=!0,0):0},G=typeof t,K=1<<31,X={}.hasOwnProperty,J=[],Z=J.pop,Q=J.push,et=J.push,tt=J.slice,it=J.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",st="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=ot.replace("w","w#"),at="\\["+st+"*("+ot+")"+st+"*(?:([*^$|!~]?=)"+st+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+rt+")|)|)"+st+"*\\]",lt=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+st+"+|((?:^|[^\\\\])(?:\\\\.)*)"+st+"+$","g"),dt=new RegExp("^"+st+"*,"+st+"*"),ut=new RegExp("^"+st+"*([>+~]|"+st+")"+st+"*"),ft=new RegExp(st+"*[+~]"),pt=new RegExp("="+st+"*([^\\]'\"]*)"+st+"*\\]","g"),gt=new RegExp(lt),mt=new RegExp("^"+rt+"$"),vt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+st+"*(even|odd|(([+-]|)(\\d*)n|)"+st+"*(?:([+-]|)"+st+"*(\\d+)|))"+st+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+st+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+st+"*((?:-\\d)?\\d*)"+st+"*\\)|)(?=[^-]|$)","i")},_t=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/^(?:input|select|textarea|button)$/i,wt=/^h\d$/i,xt=/'|\\/g,Ct=new RegExp("\\\\([\\da-f]{1,6}"+st+"?|("+st+")|.)","ig"),kt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{et.apply(J=tt.call(L.childNodes),L.childNodes),J[L.childNodes.length].nodeType}catch(Tt){et={apply:J.length?function(e,t){Q.apply(e,tt.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}D=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},C=i.support={},F=i.setDocument=function(e){var t=e?e.ownerDocument||e:L,i=t.defaultView;return t!==A&&9===t.nodeType&&t.documentElement?(A=t,O=t.documentElement,N=!D(t),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){F()}),C.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),C.getById=o(function(e){return O.appendChild(e).id=$,!t.getElementsByName||!t.getElementsByName($).length}),C.getById?(T.find.ID=function(e,t){if(typeof t.getElementById!==G&&N){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},T.filter.ID=function(e){var t=e.replace(Ct,kt);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(Ct,kt);return function(e){var i=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return i&&i.value===t}}),T.find.TAG=C.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],s=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},T.find.CLASS=C.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==G&&N?t.getElementsByClassName(e):void 0},P=[],I=[],(C.qsa=_t.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||I.push("\\["+st+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),o(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&I.push("[*^$]="+st+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(C.matchesSelector=_t.test(z=O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&o(function(e){C.disconnectedMatch=z.call(e,"div"),z.call(e,"[s!='']:x"),P.push("!=",lt)}),I=I.length&&new RegExp(I.join("|")),P=P.length&&new RegExp(P.join("|")),R=_t.test(O.contains)||O.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=O.compareDocumentPosition?function(e,i){if(e===i)return V=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!C.sortDetached&&i.compareDocumentPosition(e)===n?e===t||R(L,e)?-1:i===t||R(L,i)?1:E?it.call(E,e)-it.call(E,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,s=0,o=e.parentNode,r=i.parentNode,l=[e],c=[i];if(e===i)return V=!0,0;if(!o||!r)return e===t?-1:i===t?1:o?-1:r?1:E?it.call(E,e)-it.call(E,i):0;if(o===r)return a(e,i);for(n=e;n=n.parentNode;)l.unshift(n);for(n=i;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?a(l[s],c[s]):l[s]===L?-1:c[s]===L?1:0},t):A},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==A&&F(e),t=t.replace(pt,"='$1']"),!(!C.matchesSelector||!N||P&&P.test(t)||I&&I.test(t)))try{var n=z.call(e,t);if(n||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(s){}return i(t,A,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==A&&F(e),R(e,t)},i.attr=function(e,i){(e.ownerDocument||e)!==A&&F(e);var n=T.attrHandle[i.toLowerCase()],s=n&&X.call(T.attrHandle,i.toLowerCase())?n(e,i,!N):t;return s===t?C.attributes||!N?e.getAttribute(i):(s=e.getAttributeNode(i))&&s.specified?s.value:null:s},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,s=0;if(V=!C.detectDuplicates,E=!C.sortStable&&e.slice(0),e.sort(Y),V){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return e},S=i.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=S(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n];n++)i+=S(t);return i},T=i.selectors={cacheLength:50,createPseudo:s,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ct,kt),e[3]=(e[4]||e[5]||"").replace(Ct,kt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var i,n=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&gt.test(n)&&(i=u(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(e[0]=e[0].slice(0,i),e[2]=n.slice(0,i)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ct,kt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+st+")"+e+"("+st+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(s){var o=i.attr(s,e);return null==o?"!="===t:t?(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,s){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode
}:function(t,i,l){var c,h,d,u,f,p,g=o!==r?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!l&&!a;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?m.firstChild:m.lastChild],r&&_){for(h=m[$]||(m[$]={}),c=h[e]||[],f=c[0]===H&&c[1],u=c[0]===H&&c[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(u=f=0)||p.pop();)if(1===d.nodeType&&++u&&d===t){h[e]=[H,f,u];break}}else if(_&&(c=(t[$]||(t[$]={}))[e])&&c[0]===H)u=c[1];else for(;(d=++f&&d&&d[g]||(u=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++u||(_&&((d[$]||(d[$]={}))[e]=[H,u]),d!==t)););return u-=s,u===n||0===u%n&&u/n>=0}}},PSEUDO:function(e,t){var n,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return o[$]?o(t):o.length>1?(n=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,i){for(var n,s=o(e,t),r=s.length;r--;)n=it.call(e,s[r]),e[n]=!(i[n]=s[r])}):function(e){return o(e,0,n)}):o}},pseudos:{not:s(function(e){var t=[],i=[],n=M(e.replace(ct,"$1"));return n[$]?s(function(e,t,i,s){for(var o,r=n(e,null,s,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,s,o){return t[0]=e,n(t,null,o,i),!i.pop()}}),has:s(function(e){return function(t){return i(e,t).length>0}}),contains:s(function(e){return function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:s(function(e){return mt.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(Ct,kt).toLowerCase(),function(t){var i;do if(i=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return wt.test(e.nodeName)},input:function(e){return bt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:h(function(){return[0]}),last:h(function(e,t){return[t-1]}),eq:h(function(e,t,i){return[0>i?i+t:i]}),even:h(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:h(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:h(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:h(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},T.pseudos.nth=T.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})T.pseudos[x]=c(x);d.prototype=T.filters=T.pseudos,T.setFilters=new d,M=i.compile=function(e,t){var i,n=[],s=[],o=B[e+" "];if(!o){for(t||(t=u(e)),i=t.length;i--;)o=_(t[i]),o[$]?n.push(o):s.push(o);o=B(e,y(s,n))}return o},C.sortStable=$.split("").sort(Y).join("")===$,C.detectDuplicates=V,F(),C.sortDetached=o(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(nt,function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&n.specified?n.value:e[t]===!0?t.toLowerCase():null}),ht.find=i,ht.expr=i.selectors,ht.expr[":"]=ht.expr.pseudos,ht.unique=i.uniqueSort,ht.text=i.getText,ht.isXMLDoc=i.isXML,ht.contains=i.contains}(e);var Tt={};ht.Callbacks=function(e){e="string"==typeof e?Tt[e]||n(e):ht.extend({},e);var i,s,o,r,a,l,c=[],h=!e.once&&[],d=function(t){for(s=e.memory&&t,o=!0,a=l||0,l=0,r=c.length,i=!0;c&&r>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){s=!1;break}i=!1,c&&(h?h.length&&d(h.shift()):s?c=[]:u.disable())},u={add:function(){if(c){var t=c.length;!function n(t){ht.each(t,function(t,i){var s=ht.type(i);"function"===s?e.unique&&u.has(i)||c.push(i):i&&i.length&&"string"!==s&&n(i)})}(arguments),i?r=c.length:s&&(l=t,d(s))}return this},remove:function(){return c&&ht.each(arguments,function(e,t){for(var n;(n=ht.inArray(t,c,n))>-1;)c.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(e){return e?ht.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=h=s=t,this},disabled:function(){return!c},lock:function(){return h=t,s||u.disable(),this},locked:function(){return!h},fireWith:function(e,t){return!c||o&&!h||(t=t||[],t=[e,t.slice?t.slice():t],i?h.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},ht.extend({Deferred:function(e){var t=[["resolve","done",ht.Callbacks("once memory"),"resolved"],["reject","fail",ht.Callbacks("once memory"),"rejected"],["notify","progress",ht.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ht.Deferred(function(i){ht.each(t,function(t,o){var r=o[0],a=ht.isFunction(e[t])&&e[t];s[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ht.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ht.extend(e,n):n}},s={};return n.pipe=n.then,ht.each(t,function(e,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t,i,n,s=0,o=ot.call(arguments),r=o.length,a=1!==r||e&&ht.isFunction(e.promise)?r:0,l=1===a?e:ht.Deferred(),c=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?ot.call(arguments):s,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&ht.isFunction(o[s].promise)?o[s].promise().done(c(s,n,o)).fail(l.reject).progress(c(s,i,t)):--a;return a||l.resolveWith(n,o),l.promise()}}),ht.support=function(t){var i,n,s,o,r,a,l,c,h,d=X.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*")||[],n=d.getElementsByTagName("a")[0],!n||!n.style||!i.length)return t;o=X.createElement("select"),a=o.appendChild(X.createElement("option")),s=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(n.getAttribute("style")),t.hrefNormalized="/a"===n.getAttribute("href"),t.opacity=/^0.5/.test(n.style.opacity),t.cssFloat=!!n.style.cssFloat,t.checkOn=!!s.value,t.optSelected=a.selected,t.enctype=!!X.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(u){t.deleteExpando=!1}s=X.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),r=X.createDocumentFragment(),r.appendChild(s),t.appendChecked=s.checked,t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||d.attributes[l].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(h in ht(t))break;return t.ownLast="0"!==h,ht(function(){var i,n,s,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=X.getElementsByTagName("body")[0];r&&(i=X.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(i).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=d.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ht.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,n=d.appendChild(X.createElement("div")),n.style.cssText=d.style.cssText=o,n.style.marginRight=n.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof d.style.zoom!==G&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(i),i=d=s=n=null)}),i=o=r=a=n=s=null,t}({});var St=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Dt=/([A-Z])/g;ht.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ht.cache[e[ht.expando]]:e[ht.expando],!!e&&!a(e)},data:function(e,t,i){return s(e,t,i)},removeData:function(e,t){return o(e,t)},_data:function(e,t,i){return s(e,t,i,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ht.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ht.fn.extend({data:function(e,i){var n,s,o=null,a=0,l=this[0];if(e===t){if(this.length&&(o=ht.data(l),1===l.nodeType&&!ht._data(l,"parsedAttrs"))){for(n=l.attributes;a<n.length;a++)s=n[a].name,0===s.indexOf("data-")&&(s=ht.camelCase(s.slice(5)),r(l,s,o[s]));ht._data(l,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ht.data(this,e)}):arguments.length>1?this.each(function(){ht.data(this,e,i)}):l?r(l,e,ht.data(l,e)):null},removeData:function(e){return this.each(function(){ht.removeData(this,e)})}}),ht.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ht._data(e,t),i&&(!n||ht.isArray(i)?n=ht._data(e,t,ht.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=ht.queue(e,t),n=i.length,s=i.shift(),o=ht._queueHooks(e,t),r=function(){ht.dequeue(e,t)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete o.stop,s.call(e,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ht._data(e,i)||ht._data(e,i,{empty:ht.Callbacks("once memory").add(function(){ht._removeData(e,t+"queue"),ht._removeData(e,i)})})}}),ht.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?ht.queue(this[0],e):i===t?this:this.each(function(){var t=ht.queue(this,e,i);ht._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ht.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ht.dequeue(this,e)})},delay:function(e,t){return e=ht.fx?ht.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,s=1,o=ht.Deferred(),r=this,a=this.length,l=function(){--s||o.resolveWith(r,[r])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)n=ht._data(r[a],e+"queueHooks"),n&&n.empty&&(s++,n.empty.add(l));return l(),o.promise(i)}});var Mt,jt,Et=/[\t\r\n\f]/g,Ft=/\r/g,At=/^(?:input|select|textarea|button|object)$/i,Ot=/^(?:a|area)$/i,Nt=/^(?:checked|selected)$/i,It=ht.support.getSetAttribute,Pt=ht.support.input;ht.fn.extend({attr:function(e,t){return ht.access(this,ht.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ht.removeAttr(this,e)})},prop:function(e,t){return ht.access(this,ht.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ht.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,s,o,r=0,a=this.length,l="string"==typeof e&&e;if(ht.isFunction(e))return this.each(function(t){ht(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ut)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Et," "):" ")){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i.className=ht.trim(n)}return this},removeClass:function(e){var t,i,n,s,o,r=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ht.isFunction(e))return this.each(function(t){ht(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ut)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Et," "):"")){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");i.className=e?ht.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ht.isFunction(e)?this.each(function(i){ht(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,s=ht(this),o=e.match(ut)||[];t=o[n++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(i===G||"boolean"===i)&&(this.className&&ht._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ht._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Et," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,s,o=this[0];{if(arguments.length)return s=ht.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=s?e.call(this,i,ht(this).val()):e,null==o?o="":"number"==typeof o?o+="":ht.isArray(o)&&(o=ht.map(o,function(e){return null==e?"":e+""})),n=ht.valHooks[this.type]||ht.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=ht.valHooks[o.type]||ht.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(Ft,""):null==i?"":i)}}}),ht.extend({valHooks:{option:{get:function(e){var t=ht.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,r=o?null:[],a=o?s+1:n.length,l=0>s?a:o?s:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==s||(ht.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&ht.nodeName(i.parentNode,"optgroup"))){if(t=ht(i).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var i,n,s=e.options,o=ht.makeArray(t),r=s.length;r--;)n=s[r],(n.selected=ht.inArray(ht(n).val(),o)>=0)&&(i=!0);return i||(e.selectedIndex=-1),o}}},attr:function(e,i,n){var s,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===G?ht.prop(e,i,n):(1===r&&ht.isXMLDoc(e)||(i=i.toLowerCase(),s=ht.attrHooks[i]||(ht.expr.match.bool.test(i)?jt:Mt)),n===t?s&&"get"in s&&null!==(o=s.get(e,i))?o:(o=ht.find.attr(e,i),null==o?t:o):null!==n?s&&"set"in s&&(o=s.set(e,n,i))!==t?o:(e.setAttribute(i,n+""),n):(ht.removeAttr(e,i),void 0))},removeAttr:function(e,t){var i,n,s=0,o=t&&t.match(ut);if(o&&1===e.nodeType)for(;i=o[s++];)n=ht.propFix[i]||i,ht.expr.match.bool.test(i)?Pt&&It||!Nt.test(i)?e[n]=!1:e[ht.camelCase("default-"+i)]=e[n]=!1:ht.attr(e,i,""),e.removeAttribute(It?i:n)},attrHooks:{type:{set:function(e,t){if(!ht.support.radioValue&&"radio"===t&&ht.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,i,n){var s,o,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return r=1!==a||!ht.isXMLDoc(e),r&&(i=ht.propFix[i]||i,o=ht.propHooks[i]),n!==t?o&&"set"in o&&(s=o.set(e,n,i))!==t?s:e[i]=n:o&&"get"in o&&null!==(s=o.get(e,i))?s:e[i]},propHooks:{tabIndex:{get:function(e){var t=ht.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||Ot.test(e.nodeName)&&e.href?0:-1}}}}),jt={set:function(e,t,i){return t===!1?ht.removeAttr(e,i):Pt&&It||!Nt.test(i)?e.setAttribute(!It&&ht.propFix[i]||i,i):e[ht.camelCase("default-"+i)]=e[i]=!0,i}},ht.each(ht.expr.match.bool.source.match(/\w+/g),function(e,i){var n=ht.expr.attrHandle[i]||ht.find.attr;ht.expr.attrHandle[i]=Pt&&It||!Nt.test(i)?function(e,i,s){var o=ht.expr.attrHandle[i],r=s?t:(ht.expr.attrHandle[i]=t)!=n(e,i,s)?i.toLowerCase():null;return ht.expr.attrHandle[i]=o,r}:function(e,i,n){return n?t:e[ht.camelCase("default-"+i)]?i.toLowerCase():null}}),Pt&&It||(ht.attrHooks.value={set:function(e,t,i){return ht.nodeName(e,"input")?(e.defaultValue=t,void 0):Mt&&Mt.set(e,t,i)}}),It||(Mt={set:function(e,i,n){var s=e.getAttributeNode(n);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(n)),s.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},ht.expr.attrHandle.id=ht.expr.attrHandle.name=ht.expr.attrHandle.coords=function(e,i,n){var s;return n?t:(s=e.getAttributeNode(i))&&""!==s.value?s.value:null},ht.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&n.specified?n.value:t},set:Mt.set},ht.attrHooks.contenteditable={set:function(e,t,i){Mt.set(e,""===t?!1:t,i)}},ht.each(["width","height"],function(e,t){ht.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ht.support.hrefNormalized||ht.each(["href","src"],function(e,t){ht.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ht.support.style||(ht.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ht.support.optSelected||(ht.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ht.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ht.propFix[this.toLowerCase()]=this}),ht.support.enctype||(ht.propFix.enctype="encoding"),ht.each(["radio","checkbox"],function(){ht.valHooks[this]={set:function(e,t){return ht.isArray(t)?e.checked=ht.inArray(ht(e).val(),t)>=0:void 0}},ht.support.checkOn||(ht.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var zt=/^(?:input|select|textarea)$/i,Rt=/^key/,$t=/^(?:mouse|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Ht=/^([^.]*)(?:\.(.+)|)$/;ht.event={global:{},add:function(e,i,n,s,o){var r,a,l,c,h,d,u,f,p,g,m,v=ht._data(e);if(v){for(n.handler&&(c=n,n=c.handler,o=c.selector),n.guid||(n.guid=ht.guid++),(a=v.events)||(a=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ht===G||e&&ht.event.triggered===e.type?t:ht.event.dispatch.apply(d.elem,arguments)},d.elem=e),i=(i||"").match(ut)||[""],l=i.length;l--;)r=Ht.exec(i[l])||[],p=m=r[1],g=(r[2]||"").split(".").sort(),p&&(h=ht.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=ht.event.special[p]||{},u=ht.extend({type:p,origType:m,data:s,handler:n,guid:n.guid,selector:o,needsContext:o&&ht.expr.match.needsContext.test(o),namespace:g.join(".")},c),(f=a[p])||(f=a[p]=[],f.delegateCount=0,h.setup&&h.setup.call(e,s,g,d)!==!1||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,u):f.push(u),ht.event.global[p]=!0);e=null}},remove:function(e,t,i,n,s){var o,r,a,l,c,h,d,u,f,p,g,m=ht.hasData(e)&&ht._data(e);if(m&&(h=m.events)){for(t=(t||"").match(ut)||[""],c=t.length;c--;)if(a=Ht.exec(t[c])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f){for(d=ht.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,u=h[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=u.length;o--;)r=u[o],!s&&g!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(u.splice(o,1),r.selector&&u.delegateCount--,d.remove&&d.remove.call(e,r));l&&!u.length&&(d.teardown&&d.teardown.call(e,p,m.handle)!==!1||ht.removeEvent(e,f,m.handle),delete h[f])}else for(f in h)ht.event.remove(e,f+t[c],i,n,!0);ht.isEmptyObject(h)&&(delete m.handle,ht._removeData(e,"events"))}},trigger:function(i,n,s,o){var r,a,l,c,h,d,u,f=[s||X],p=lt.call(i,"type")?i.type:i,g=lt.call(i,"namespace")?i.namespace.split("."):[];if(l=d=s=s||X,3!==s.nodeType&&8!==s.nodeType&&!Lt.test(p+ht.event.triggered)&&(p.indexOf(".")>=0&&(g=p.split("."),p=g.shift(),g.sort()),a=p.indexOf(":")<0&&"on"+p,i=i[ht.expando]?i:new ht.Event(p,"object"==typeof i&&i),i.isTrigger=o?2:3,i.namespace=g.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=s),n=null==n?[i]:ht.makeArray(n,[i]),h=ht.event.special[p]||{},o||!h.trigger||h.trigger.apply(s,n)!==!1)){if(!o&&!h.noBubble&&!ht.isWindow(s)){for(c=h.delegateType||p,Lt.test(c+p)||(l=l.parentNode);l;l=l.parentNode)f.push(l),d=l;d===(s.ownerDocument||X)&&f.push(d.defaultView||d.parentWindow||e)}for(u=0;(l=f[u++])&&!i.isPropagationStopped();)i.type=u>1?c:h.bindType||p,r=(ht._data(l,"events")||{})[i.type]&&ht._data(l,"handle"),r&&r.apply(l,n),r=a&&l[a],r&&ht.acceptData(l)&&r.apply&&r.apply(l,n)===!1&&i.preventDefault();if(i.type=p,!o&&!i.isDefaultPrevented()&&(!h._default||h._default.apply(f.pop(),n)===!1)&&ht.acceptData(s)&&a&&s[p]&&!ht.isWindow(s)){d=s[a],d&&(s[a]=null),ht.event.triggered=p;try{s[p]()}catch(m){}ht.event.triggered=t,d&&(s[a]=d)}return i.result}},dispatch:function(e){e=ht.event.fix(e);var i,n,s,o,r,a=[],l=ot.call(arguments),c=(ht._data(this,"events")||{})[e.type]||[],h=ht.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,e)!==!1){for(a=ht.event.handlers.call(this,e,c),i=0;(o=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,n=((ht.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),n!==t&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,s,o,r,a=[],l=i.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],r=0;l>r;r++)s=i[r],n=s.selector+" ",o[n]===t&&(o[n]=s.needsContext?ht(n,this).index(c)>=0:ht.find(n,this,null,[c]).length),o[n]&&o.push(s);o.length&&a.push({elem:c,handlers:o})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(e){if(e[ht.expando])return e;var t,i,n,s=e.type,o=e,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=$t.test(s)?this.mouseHooks:Rt.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new ht.Event(o),t=n.length;t--;)i=n[t],e[i]=o[i];return e.target||(e.target=o.srcElement||X),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,s,o,r=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(s=e.target.ownerDocument||X,o=s.documentElement,n=s.body,e.pageX=i.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ht.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ht.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var s=ht.extend(new ht.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ht.event.trigger(s,null,t):ht.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},ht.removeEvent=X.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===G&&(e[n]=null),e.detachEvent(n,i))},ht.Event=function(e,t){return this instanceof ht.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&ht.extend(this,t),this.timeStamp=e&&e.timeStamp||ht.now(),this[ht.expando]=!0,void 0):new ht.Event(e,t)},ht.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ht.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ht.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==n&&!ht.contains(n,s))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),ht.support.submitBubbles||(ht.event.special.submit={setup:function(){return ht.nodeName(this,"form")?!1:(ht.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=ht.nodeName(i,"input")||ht.nodeName(i,"button")?i.form:t;n&&!ht._data(n,"submitBubbles")&&(ht.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ht._data(n,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ht.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ht.nodeName(this,"form")?!1:(ht.event.remove(this,"._submit"),void 0)}}),ht.support.changeBubbles||(ht.event.special.change={setup:function(){return zt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ht.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ht.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ht.event.simulate("change",this,e,!0)})),!1):(ht.event.add(this,"beforeactivate._change",function(e){var t=e.target;zt.test(t.nodeName)&&!ht._data(t,"changeBubbles")&&(ht.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ht.event.simulate("change",this.parentNode,e,!0)}),ht._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ht.event.remove(this,"._change"),!zt.test(this.nodeName)}}),ht.support.focusinBubbles||ht.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){ht.event.simulate(t,e.target,ht.event.fix(e),!0)};ht.event.special[t]={setup:function(){0===i++&&X.addEventListener(e,n,!0)},teardown:function(){0===--i&&X.removeEventListener(e,n,!0)}}}),ht.fn.extend({on:function(e,i,n,s,o){var r,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(r in e)this.on(r,i,n,e[r],o);return this}if(null==n&&null==s?(s=i,n=i=t):null==s&&("string"==typeof i?(s=n,n=t):(s=n,n=i,i=t)),s===!1)s=c;else if(!s)return this;return 1===o&&(a=s,s=function(e){return ht().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=ht.guid++)),this.each(function(){ht.event.add(this,e,s,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var s,o;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,ht(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(o in e)this.off(o,i,e[o]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=c),this.each(function(){ht.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){ht.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?ht.event.trigger(e,t,i,!0):void 0}});var qt=/^.[^:#\[\.,]*$/,Wt=/^(?:parents|prev(?:Until|All))/,Ut=ht.expr.match.needsContext,Bt={children:!0,contents:!0,next:!0,prev:!0};ht.fn.extend({find:function(e){var t,i=[],n=this,s=n.length;if("string"!=typeof e)return this.pushStack(ht(e).filter(function(){for(t=0;s>t;t++)if(ht.contains(n[t],this))return!0}));for(t=0;s>t;t++)ht.find(e,n[t],i);return i=this.pushStack(s>1?ht.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=ht(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(ht.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(u(this,e||[],!0))},filter:function(e){return this.pushStack(u(this,e||[],!1))},is:function(e){return!!u(this,"string"==typeof e&&Ut.test(e)?ht(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,s=this.length,o=[],r=Ut.test(e)||"string"!=typeof e?ht(e,t||this.context):0;s>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ht.find.matchesSelector(i,e))){i=o.push(i);break}return this.pushStack(o.length>1?ht.unique(o):o)},index:function(e){return e?"string"==typeof e?ht.inArray(this[0],ht(e)):ht.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?ht(e,t):ht.makeArray(e&&e.nodeType?[e]:e),n=ht.merge(this.get(),i);return this.pushStack(ht.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ht.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ht.dir(e,"parentNode")
},parentsUntil:function(e,t,i){return ht.dir(e,"parentNode",i)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ht.dir(e,"nextSibling")},prevAll:function(e){return ht.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ht.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ht.dir(e,"previousSibling",i)},siblings:function(e){return ht.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ht.sibling(e.firstChild)},contents:function(e){return ht.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ht.merge([],e.childNodes)}},function(e,t){ht.fn[e]=function(i,n){var s=ht.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=ht.filter(n,s)),this.length>1&&(Bt[e]||(s=ht.unique(s)),Wt.test(e)&&(s=s.reverse())),this.pushStack(s)}}),ht.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ht.find.matchesSelector(n,e)?[n]:[]:ht.find.matches(e,ht.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){for(var s=[],o=e[i];o&&9!==o.nodeType&&(n===t||1!==o.nodeType||!ht(o).is(n));)1===o.nodeType&&s.push(o),o=o[i];return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yt=/ jQuery\d+="(?:null|\d+)"/g,Gt=new RegExp("<(?:"+Vt+")[\\s/>]","i"),Kt=/^\s+/,Xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Jt=/<([\w:]+)/,Zt=/<tbody/i,Qt=/<|&#?\w+;/,ei=/<(?:script|style|link)/i,ti=/^(?:checkbox|radio)$/i,ii=/checked\s*(?:[^=]|=\s*.checked.)/i,ni=/^$|\/(?:java|ecma)script/i,si=/^true\/(.*)/,oi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ri={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ht.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ai=f(X),li=ai.appendChild(X.createElement("div"));ri.optgroup=ri.option,ri.tbody=ri.tfoot=ri.colgroup=ri.caption=ri.thead,ri.th=ri.td,ht.fn.extend({text:function(e){return ht.access(this,function(e){return e===t?ht.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ht.filter(e,this):this,s=0;null!=(i=n[s]);s++)t||1!==i.nodeType||ht.cleanData(b(i)),i.parentNode&&(t&&ht.contains(i.ownerDocument,i)&&v(b(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ht.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ht.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ht.clone(this,e,t)})},html:function(e){return ht.access(this,function(e){var i=this[0]||{},n=0,s=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Yt,""):t;if(!("string"!=typeof e||ei.test(e)||!ht.support.htmlSerialize&&Gt.test(e)||!ht.support.leadingWhitespace&&Kt.test(e)||ri[(Jt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Xt,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(ht.cleanData(b(i,!1)),i.innerHTML=e);i=0}catch(o){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ht.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],s=e[t++];s&&(n&&n.parentNode!==s&&(n=this.nextSibling),ht(this).remove(),s.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=nt.apply([],e);var n,s,o,r,a,l,c=0,h=this.length,d=this,u=h-1,f=e[0],p=ht.isFunction(f);if(p||!(1>=h||"string"!=typeof f||ht.support.checkClone)&&ii.test(f))return this.each(function(n){var s=d.eq(n);p&&(e[0]=f.call(this,n,s.html())),s.domManip(e,t,i)});if(h&&(l=ht.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(r=ht.map(b(l,"script"),g),o=r.length;h>c;c++)s=l,c!==u&&(s=ht.clone(s,!0,!0),o&&ht.merge(r,b(s,"script"))),t.call(this[c],s,c);if(o)for(a=r[r.length-1].ownerDocument,ht.map(r,m),c=0;o>c;c++)s=r[c],ni.test(s.type||"")&&!ht._data(s,"globalEval")&&ht.contains(a,s)&&(s.src?ht._evalUrl(s.src):ht.globalEval((s.text||s.textContent||s.innerHTML||"").replace(oi,"")));l=n=null}return this}}),ht.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ht.fn[e]=function(e){for(var i,n=0,s=[],o=ht(e),r=o.length-1;r>=n;n++)i=n===r?this:this.clone(!0),ht(o[n])[t](i),st.apply(s,i.get());return this.pushStack(s)}}),ht.extend({clone:function(e,t,i){var n,s,o,r,a,l=ht.contains(e.ownerDocument,e);if(ht.support.html5Clone||ht.isXMLDoc(e)||!Gt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(li.innerHTML=e.outerHTML,li.removeChild(o=li.firstChild)),!(ht.support.noCloneEvent&&ht.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ht.isXMLDoc(e)))for(n=b(o),a=b(e),r=0;null!=(s=a[r]);++r)n[r]&&y(s,n[r]);if(t)if(i)for(a=a||b(e),n=n||b(o),r=0;null!=(s=a[r]);r++)_(s,n[r]);else _(e,o);return n=b(o,"script"),n.length>0&&v(n,!l&&b(e,"script")),n=a=s=null,o},buildFragment:function(e,t,i,n){for(var s,o,r,a,l,c,h,d=e.length,u=f(t),p=[],g=0;d>g;g++)if(o=e[g],o||0===o)if("object"===ht.type(o))ht.merge(p,o.nodeType?[o]:o);else if(Qt.test(o)){for(a=a||u.appendChild(t.createElement("div")),l=(Jt.exec(o)||["",""])[1].toLowerCase(),h=ri[l]||ri._default,a.innerHTML=h[1]+o.replace(Xt,"<$1></$2>")+h[2],s=h[0];s--;)a=a.lastChild;if(!ht.support.leadingWhitespace&&Kt.test(o)&&p.push(t.createTextNode(Kt.exec(o)[0])),!ht.support.tbody)for(o="table"!==l||Zt.test(o)?"<table>"!==h[1]||Zt.test(o)?0:a:a.firstChild,s=o&&o.childNodes.length;s--;)ht.nodeName(c=o.childNodes[s],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(ht.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=u.lastChild}else p.push(t.createTextNode(o));for(a&&u.removeChild(a),ht.support.appendChecked||ht.grep(b(p,"input"),w),g=0;o=p[g++];)if((!n||-1===ht.inArray(o,n))&&(r=ht.contains(o.ownerDocument,o),a=b(u.appendChild(o),"script"),r&&v(a),i))for(s=0;o=a[s++];)ni.test(o.type||"")&&i.push(o);return a=null,u},cleanData:function(e,t){for(var i,n,s,o,r=0,a=ht.expando,l=ht.cache,c=ht.support.deleteExpando,h=ht.event.special;null!=(i=e[r]);r++)if((t||ht.acceptData(i))&&(s=i[a],o=s&&l[s])){if(o.events)for(n in o.events)h[n]?ht.event.remove(i,n):ht.removeEvent(i,n,o.handle);l[s]&&(delete l[s],c?delete i[a]:typeof i.removeAttribute!==G?i.removeAttribute(a):i[a]=null,tt.push(s))}},_evalUrl:function(e){return ht.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ht.fn.extend({wrapAll:function(e){if(ht.isFunction(e))return this.each(function(t){ht(this).wrapAll(e.call(this,t))});if(this[0]){var t=ht(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ht.isFunction(e)?this.each(function(t){ht(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ht(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ht.isFunction(e);return this.each(function(i){ht(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ht.nodeName(this,"body")||ht(this).replaceWith(this.childNodes)}).end()}});var ci,hi,di,ui=/alpha\([^)]*\)/i,fi=/opacity\s*=\s*([^)]*)/,pi=/^(top|right|bottom|left)$/,gi=/^(none|table(?!-c[ea]).+)/,mi=/^margin/,vi=new RegExp("^("+dt+")(.*)$","i"),_i=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),yi=new RegExp("^([+-])=("+dt+")","i"),bi={BODY:"block"},wi={position:"absolute",visibility:"hidden",display:"block"},xi={letterSpacing:0,fontWeight:400},Ci=["Top","Right","Bottom","Left"],ki=["Webkit","O","Moz","ms"];ht.fn.extend({css:function(e,i){return ht.access(this,function(e,i,n){var s,o,r={},a=0;if(ht.isArray(i)){for(o=hi(e),s=i.length;s>a;a++)r[i[a]]=ht.css(e,i[a],!1,o);return r}return n!==t?ht.style(e,i,n):ht.css(e,i)},e,i,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){C(this)?ht(this).show():ht(this).hide()})}}),ht.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=di(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ht.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,l=ht.camelCase(i),c=e.style;if(i=ht.cssProps[l]||(ht.cssProps[l]=x(c,l)),a=ht.cssHooks[i]||ht.cssHooks[l],n===t)return a&&"get"in a&&(o=a.get(e,!1,s))!==t?o:c[i];if(r=typeof n,"string"===r&&(o=yi.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(ht.css(e,i)),r="number"),!(null==n||"number"===r&&isNaN(n)||("number"!==r||ht.cssNumber[l]||(n+="px"),ht.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(e,n,s))===t)))try{c[i]=n}catch(h){}}},css:function(e,i,n,s){var o,r,a,l=ht.camelCase(i);return i=ht.cssProps[l]||(ht.cssProps[l]=x(e.style,l)),a=ht.cssHooks[i]||ht.cssHooks[l],a&&"get"in a&&(r=a.get(e,!0,n)),r===t&&(r=di(e,i,s)),"normal"===r&&i in xi&&(r=xi[i]),""===n||n?(o=parseFloat(r),n===!0||ht.isNumeric(o)?o||0:r):r}}),e.getComputedStyle?(hi=function(t){return e.getComputedStyle(t,null)},di=function(e,i,n){var s,o,r,a=n||hi(e),l=a?a.getPropertyValue(i)||a[i]:t,c=e.style;return a&&(""!==l||ht.contains(e.ownerDocument,e)||(l=ht.style(e,i)),_i.test(l)&&mi.test(i)&&(s=c.width,o=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=s,c.minWidth=o,c.maxWidth=r)),l}):X.documentElement.currentStyle&&(hi=function(e){return e.currentStyle},di=function(e,i,n){var s,o,r,a=n||hi(e),l=a?a[i]:t,c=e.style;return null==l&&c&&c[i]&&(l=c[i]),_i.test(l)&&!pi.test(i)&&(s=c.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),c.left="fontSize"===i?"1em":l,l=c.pixelLeft+"px",c.left=s,r&&(o.left=r)),""===l?"auto":l}),ht.each(["height","width"],function(e,t){ht.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&gi.test(ht.css(e,"display"))?ht.swap(e,wi,function(){return D(e,t,n)}):D(e,t,n):void 0},set:function(e,i,n){var s=n&&hi(e);return T(e,i,n?S(e,t,n,ht.support.boxSizing&&"border-box"===ht.css(e,"boxSizing",!1,s),s):0)}}}),ht.support.opacity||(ht.cssHooks.opacity={get:function(e,t){return fi.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=ht.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ht.trim(o.replace(ui,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=ui.test(o)?o.replace(ui,s):o+" "+s)}}),ht(function(){ht.support.reliableMarginRight||(ht.cssHooks.marginRight={get:function(e,t){return t?ht.swap(e,{display:"inline-block"},di,[e,"marginRight"]):void 0}}),!ht.support.pixelPosition&&ht.fn.position&&ht.each(["top","left"],function(e,t){ht.cssHooks[t]={get:function(e,i){return i?(i=di(e,t),_i.test(i)?ht(e).position()[t]+"px":i):void 0}}})}),ht.expr&&ht.expr.filters&&(ht.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ht.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ht.css(e,"display"))},ht.expr.filters.visible=function(e){return!ht.expr.filters.hidden(e)}),ht.each({margin:"",padding:"",border:"Width"},function(e,t){ht.cssHooks[e+t]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[e+Ci[n]+t]=o[n]||o[n-2]||o[0];return s}},mi.test(e)||(ht.cssHooks[e+t].set=T)});var Ti=/%20/g,Si=/\[\]$/,Di=/\r?\n/g,Mi=/^(?:submit|button|image|reset|file)$/i,ji=/^(?:input|select|textarea|keygen)/i;ht.fn.extend({serialize:function(){return ht.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ht.prop(this,"elements");return e?ht.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ht(this).is(":disabled")&&ji.test(this.nodeName)&&!Mi.test(e)&&(this.checked||!ti.test(e))}).map(function(e,t){var i=ht(this).val();return null==i?null:ht.isArray(i)?ht.map(i,function(e){return{name:t.name,value:e.replace(Di,"\r\n")}}):{name:t.name,value:i.replace(Di,"\r\n")}}).get()}}),ht.param=function(e,i){var n,s=[],o=function(e,t){t=ht.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=ht.ajaxSettings&&ht.ajaxSettings.traditional),ht.isArray(e)||e.jquery&&!ht.isPlainObject(e))ht.each(e,function(){o(this.name,this.value)});else for(n in e)E(n,e[n],i,o);return s.join("&").replace(Ti,"+")},ht.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ht.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ht.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Ei,Fi,Ai=ht.now(),Oi=/\?/,Ni=/#.*$/,Ii=/([?&])_=[^&]*/,Pi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,zi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ri=/^(?:GET|HEAD)$/,$i=/^\/\//,Li=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Hi=ht.fn.load,qi={},Wi={},Ui="*/".concat("*");try{Fi=K.href}catch(Bi){Fi=X.createElement("a"),Fi.href="",Fi=Fi.href}Ei=Li.exec(Fi.toLowerCase())||[],ht.fn.load=function(e,i,n){if("string"!=typeof e&&Hi)return Hi.apply(this,arguments);var s,o,r,a=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),ht.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(r="POST"),a.length>0&&ht.ajax({url:e,type:r,dataType:"html",data:i}).done(function(e){o=arguments,a.html(s?ht("<div>").append(ht.parseHTML(e)).find(s):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},ht.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ht.fn[t]=function(e){return this.on(t,e)}}),ht.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fi,type:"GET",isLocal:zi.test(Ei[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ui,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ht.parseJSON,"text xml":ht.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?O(O(e,ht.ajaxSettings),t):O(ht.ajaxSettings,e)},ajaxPrefilter:F(qi),ajaxTransport:F(Wi),ajax:function(e,i){function n(e,i,n,s){var o,d,_,y,w,C=i;2!==b&&(b=2,l&&clearTimeout(l),h=t,a=s||"",x.readyState=e>0?4:0,o=e>=200&&300>e||304===e,n&&(y=N(u,x,n)),y=I(u,y,x,o),o?(u.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ht.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(ht.etag[r]=w)),204===e||"HEAD"===u.type?C="nocontent":304===e?C="notmodified":(C=y.state,d=y.data,_=y.error,o=!_)):(_=C,(e||!C)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(i||C)+"",o?g.resolveWith(f,[d,C,x]):g.rejectWith(f,[x,C,_]),x.statusCode(v),v=t,c&&p.trigger(o?"ajaxSuccess":"ajaxError",[x,u,o?d:_]),m.fireWith(f,[x,C]),c&&(p.trigger("ajaxComplete",[x,u]),--ht.active||ht.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var s,o,r,a,l,c,h,d,u=ht.ajaxSetup({},i),f=u.context||u,p=u.context&&(f.nodeType||f.jquery)?ht(f):ht.event,g=ht.Deferred(),m=ht.Callbacks("once memory"),v=u.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!d)for(d={};t=Pi.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,_[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return h&&h.abort(t),n(0,t),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,u.url=((e||u.url||Fi)+"").replace(Ni,"").replace($i,Ei[1]+"//"),u.type=i.method||i.type||u.method||u.type,u.dataTypes=ht.trim(u.dataType||"*").toLowerCase().match(ut)||[""],null==u.crossDomain&&(s=Li.exec(u.url.toLowerCase()),u.crossDomain=!(!s||s[1]===Ei[1]&&s[2]===Ei[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(Ei[3]||("http:"===Ei[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=ht.param(u.data,u.traditional)),A(qi,u,i,x),2===b)return x;c=u.global,c&&0===ht.active++&&ht.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Ri.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(Oi.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=Ii.test(r)?r.replace(Ii,"$1_="+Ai++):r+(Oi.test(r)?"&":"?")+"_="+Ai++)),u.ifModified&&(ht.lastModified[r]&&x.setRequestHeader("If-Modified-Since",ht.lastModified[r]),ht.etag[r]&&x.setRequestHeader("If-None-Match",ht.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Ui+"; q=0.01":""):u.accepts["*"]);for(o in u.headers)x.setRequestHeader(o,u.headers[o]);if(u.beforeSend&&(u.beforeSend.call(f,x,u)===!1||2===b))return x.abort();w="abort";for(o in{success:1,error:1,complete:1})x[o](u[o]);if(h=A(Wi,u,i,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},u.timeout));try{b=1,h.send(_,n)}catch(C){if(!(2>b))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getJSON:function(e,t,i){return ht.get(e,t,i,"json")},getScript:function(e,i){return ht.get(e,t,i,"script")}}),ht.each(["get","post"],function(e,i){ht[i]=function(e,n,s,o){return ht.isFunction(n)&&(o=o||s,s=n,n=t),ht.ajax({url:e,type:i,dataType:o,data:n,success:s})}}),ht.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ht.globalEval(e),e}}}),ht.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ht.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=X.head||ht("head")[0]||X.documentElement;return{send:function(t,s){i=X.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||s(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Vi=[],Yi=/(=)\?(?=&|$)|\?\?/;ht.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vi.pop()||ht.expando+"_"+Ai++;return this[e]=!0,e}}),ht.ajaxPrefilter("json jsonp",function(i,n,s){var o,r,a,l=i.jsonp!==!1&&(Yi.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yi.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(o=i.jsonpCallback=ht.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Yi,"$1"+o):i.jsonp!==!1&&(i.url+=(Oi.test(i.url)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return a||ht.error(o+" was not called"),a[0]},i.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},s.always(function(){e[o]=r,i[o]&&(i.jsonpCallback=n.jsonpCallback,Vi.push(o)),a&&ht.isFunction(r)&&r(a[0]),a=r=t}),"script"):void 0});var Gi,Ki,Xi=0,Ji=e.ActiveXObject&&function(){var e;for(e in Gi)Gi[e](t,!0)};ht.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&P()||z()}:P,Ki=ht.ajaxSettings.xhr(),ht.support.cors=!!Ki&&"withCredentials"in Ki,Ki=ht.support.ajax=!!Ki,Ki&&ht.ajaxTransport(function(i){if(!i.crossDomain||ht.support.cors){var n;return{send:function(s,o){var r,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)l.setRequestHeader(a,s[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,s){var a,c,h,d;try{if(n&&(s||4===l.readyState))if(n=t,r&&(l.onreadystatechange=ht.noop,Ji&&delete Gi[r]),s)4!==l.readyState&&l.abort();else{d={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{h=l.statusText}catch(u){h=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(f){s||o(-1,f)}d&&o(a,h,d,c)},i.async?4===l.readyState?setTimeout(n):(r=++Xi,Ji&&(Gi||(Gi={},ht(e).unload(Ji)),Gi[r]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var Zi,Qi,en=/^(?:toggle|show|hide)$/,tn=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),nn=/queueHooks$/,sn=[q],on={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),s=tn.exec(t),o=s&&s[3]||(ht.cssNumber[e]?"":"px"),r=(ht.cssNumber[e]||"px"!==o&&+n)&&tn.exec(ht.css(i.elem,e)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,ht.style(i.elem,e,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};ht.Animation=ht.extend(L,{tweener:function(e,t){ht.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,s=e.length;s>n;n++)i=e[n],on[i]=on[i]||[],on[i].unshift(t)},prefilter:function(e,t){t?sn.unshift(e):sn.push(e)}}),ht.Tween=W,W.prototype={constructor:W,init:function(e,t,i,n,s,o){this.elem=e,this.prop=i,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ht.cssNumber[i]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,i=W.propHooks[this.prop];return this.pos=t=this.options.duration?ht.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ht.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ht.fx.step[e.prop]?ht.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ht.cssProps[e.prop]]||ht.cssHooks[e.prop])?ht.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ht.each(["toggle","show","hide"],function(e,t){var i=ht.fn[t];ht.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(U(t,!0),e,n,s)}}),ht.fn.extend({fadeTo:function(e,t,i,n){return this.filter(C).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=ht.isEmptyObject(e),o=ht.speed(t,i,n),r=function(){var t=L(this,ht.extend({},e),o);(s||ht._data(this,"finish"))&&t.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(e,i,n){var s=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ht.timers,r=ht._data(this);if(i)r[i]&&r[i].stop&&s(r[i]);else for(i in r)r[i]&&r[i].stop&&nn.test(i)&&s(r[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&ht.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ht._data(this),n=i[e+"queue"],s=i[e+"queueHooks"],o=ht.timers,r=n?n.length:0;for(i.finish=!0,ht.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ht.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ht.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ht.speed=function(e,t,i){var n=e&&"object"==typeof e?ht.extend({},e):{complete:i||!i&&t||ht.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ht.isFunction(t)&&t};return n.duration=ht.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ht.fx.speeds?ht.fx.speeds[n.duration]:ht.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ht.isFunction(n.old)&&n.old.call(this),n.queue&&ht.dequeue(this,n.queue)},n},ht.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ht.timers=[],ht.fx=W.prototype.init,ht.fx.tick=function(){var e,i=ht.timers,n=0;for(Zi=ht.now();n<i.length;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||ht.fx.stop(),Zi=t},ht.fx.timer=function(e){e()&&ht.timers.push(e)&&ht.fx.start()},ht.fx.interval=13,ht.fx.start=function(){Qi||(Qi=setInterval(ht.fx.tick,ht.fx.interval))},ht.fx.stop=function(){clearInterval(Qi),Qi=null},ht.fx.speeds={slow:600,fast:200,_default:400},ht.fx.step={},ht.expr&&ht.expr.filters&&(ht.expr.filters.animated=function(e){return ht.grep(ht.timers,function(t){return e===t.elem}).length}),ht.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ht.offset.setOffset(this,e,t)});var i,n,s={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return i=r.documentElement,ht.contains(i,o)?(typeof o.getBoundingClientRect!==G&&(s=o.getBoundingClientRect()),n=B(r),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},ht.offset={setOffset:function(e,t,i){var n=ht.css(e,"position");"static"===n&&(e.style.position="relative");var s,o,r=ht(e),a=r.offset(),l=ht.css(e,"top"),c=ht.css(e,"left"),h=("absolute"===n||"fixed"===n)&&ht.inArray("auto",[l,c])>-1,d={},u={};h?(u=r.position(),s=u.top,o=u.left):(s=parseFloat(l)||0,o=parseFloat(c)||0),ht.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):r.css(d)}},ht.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ht.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ht.nodeName(e[0],"html")||(i=e.offset()),i.top+=ht.css(e[0],"borderTopWidth",!0),i.left+=ht.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ht.css(n,"marginTop",!0),left:t.left-i.left-ht.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||J;e&&!ht.nodeName(e,"html")&&"static"===ht.css(e,"position");)e=e.offsetParent;return e||J})}}),ht.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);ht.fn[e]=function(s){return ht.access(this,function(e,s,o){var r=B(e);return o===t?r?i in r?r[i]:r.document.documentElement[s]:e[s]:(r?r.scrollTo(n?ht(r).scrollLeft():o,n?o:ht(r).scrollTop()):e[s]=o,void 0)},e,s,arguments.length,null)}}),ht.each({Height:"height",Width:"width"},function(e,i){ht.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,s){ht.fn[s]=function(s,o){var r=arguments.length&&(n||"boolean"!=typeof s),a=n||(s===!0||o===!0?"margin":"border");return ht.access(this,function(i,n,s){var o;return ht.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(o=i.documentElement,Math.max(i.body["scroll"+e],o["scroll"+e],i.body["offset"+e],o["offset"+e],o["client"+e])):s===t?ht.css(i,n,a):ht.style(i,n,s,a)},i,r?s:t,r,null)}})}),ht.fn.size=function(){return this.length},ht.fn.andSelf=ht.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ht:(e.jQuery=e.$=ht,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ht}))}(window),define("oro/jquery-setup",["jquery"],function(e){return e.ajaxSetup({headers:{"X-CSRF-Header":1}}),e.expr[":"].parents=function(t,i,n){return e(t).parents(n[3]).length<1},e.isActive=e.proxy(function(t){return"undefined"!==e.type(t)&&(this.active=t),e.active||this.active},{active:!1}),e}),function(){function e(e,t){var i=e.split("."),n=c;!(i[0]in n)&&n.execScript&&n.execScript("var "+i[0]);for(var s;i.length&&(s=i.shift());)i.length||void 0===t?n=n[s]?n[s]:n[s]={}:n[s]=t}function t(e){this.c={},this.a=[];var n=arguments.length;if(n>1){if(n%2)throw Error("Uneven number of arguments");for(var s=0;n>s;s+=2)this.set(arguments[s],arguments[s+1])}else if(e){var o;if(e instanceof t)for(i(e),s=e.a.concat(),i(e),o=[],n=0;n<e.a.length;n++)o.push(e.c[e.a[n]]);else{var n=[],r=0;for(s in e)n[r++]=s;s=n,n=[],r=0;for(o in e)n[r++]=e[o];o=n}for(n=0;n<s.length;n++)this.set(s[n],o[n])}}function i(e){if(e.f!=e.a.length){for(var t=0,i=0;t<e.a.length;){var s=e.a[t];n(e.c,s)&&(e.a[i++]=s),t++}e.a.length=i}if(e.f!=e.a.length){for(var o={},i=t=0;t<e.a.length;)s=e.a[t],n(o,s)||(e.a[i++]=s,o[s]=1),t++;e.a.length=i}}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(){return c.navigator?c.navigator.userAgent:null}function o(e,t){this.b=e||{e:"",prefix:"",host:"",scheme:""},this.h(t||{})}function r(e,t,i,n){var s,o=RegExp(/\[\]$/);if(i instanceof Array)d(i,function(i,s){o.test(t)?n(t,i):r(e,t+"["+("object"==typeof i?s:"")+"]",i,n)});else if("object"==typeof i)for(s in i)r(e,t+"["+s+"]",i[s],n);else n(t,i)}var a,l=!1,c=this,h=Array.prototype,d=h.forEach?function(e,t,i){h.forEach.call(e,t,i)}:function(e,t,i){for(var n=e.length,s="string"==typeof e?e.split(""):e,o=0;n>o;o++)o in s&&t.call(i,s[o],o,e)};t.prototype.f=0,t.prototype.p=0,t.prototype.get=function(e,t){return n(this.c,e)?this.c[e]:t},t.prototype.set=function(e,t){n(this.c,e)||(this.f++,this.a.push(e),this.p++),this.c[e]=t};var u,f,p,g;g=p=f=u=l;var m;if(m=s()){var v=c.navigator;u=0==m.indexOf("Opera"),f=!u&&-1!=m.indexOf("MSIE"),p=!u&&-1!=m.indexOf("WebKit"),g=!u&&!p&&"Gecko"==v.product}var _,y=f,b=g,w=p;if(u&&c.opera){var x=c.opera.version;"function"==typeof x&&x()}else b?_=/rv\:([^\);]+)(\)|;)/:y?_=/MSIE\s+([^\);]+)(\)|;)/:w&&(_=/WebKit\/(\S+)/),_&&_.exec(s());
o.g=function(){return o.j?o.j:o.j=new o},a=o.prototype,a.h=function(e){this.d=new t(e)},a.o=function(){return this.d},a.k=function(e){this.b.e=e},a.n=function(){return this.b.e},a.l=function(e){this.b.prefix=e},a.i=function(e){var t=this.b.prefix+e;if(n(this.d.c,t))e=t;else if(!n(this.d.c,e))throw Error('The route "'+e+'" does not exist.');return this.d.get(e)},a.m=function(e,t,i){var n,s=this.i(e),o=t||{},a={};for(n in o)a[n]=o[n];var c="",h=!0,u="";d(s.tokens,function(t){if("text"===t[0])c=t[1]+c,h=l;else{if("variable"!==t[0])throw Error('The token type "'+t[0]+'" is not supported.');var i=t[3]in s.defaults;if(l===h||!i||t[3]in o&&o[t[3]]!=s.defaults[t[3]]){if(t[3]in o){var i=o[t[3]],n=t[3];n in a&&delete a[n]}else{if(!i){if(h)return;throw Error('The route "'+e+'" requires the parameter "'+t[3]+'".')}i=s.defaults[t[3]]}(!0!==i&&l!==i&&""!==i||!h)&&(n=encodeURIComponent(i).replace(/%2F/g,"/"),"null"===n&&null===i&&(n=""),c=t[1]+n+c),h=l}else i&&(t=t[3],t in a&&delete a[t])}}),""===c&&(c="/"),d(s.hosttokens,function(e){var t;if("text"===e[0])u=e[1]+u;else if("variable"===e[0]){if(e[3]in o){t=o[e[3]];var i=e[3];i in a&&delete a[i]}else e[3]in s.defaults&&(t=s.defaults[e[3]]);u=e[1]+t+u}}),c=this.b.e+c,"_scheme"in s.requirements&&this.b.scheme!=s.requirements._scheme?c=s.requirements._scheme+"://"+(u||this.b.host)+c:u&&this.b.host!==u?c=this.b.scheme+"://"+u+c:!0===i&&(c=this.b.scheme+"://"+this.b.host+c);var f,t=0;for(f in a)t++;if(t>0){var p,g=[];f=function(e,t){t="function"==typeof t?t():t,g.push(encodeURIComponent(e)+"="+encodeURIComponent(null===t?"":t))};for(p in a)r(this,p,a[p],f);c=c+"?"+g.join("&").replace(/%20/g,"+")}return c},e("fos.Router",o),e("fos.Router.setData",function(e){var t=o.g();t.k(e.base_url),t.h(e.routes),"prefix"in e&&t.l(e.prefix),t.b.host=e.host,t.b.scheme=e.scheme}),o.getInstance=o.g,o.prototype.setRoutes=o.prototype.h,o.prototype.getRoutes=o.prototype.o,o.prototype.setBaseUrl=o.prototype.k,o.prototype.getBaseUrl=o.prototype.n,o.prototype.generate=o.prototype.m,o.prototype.setPrefix=o.prototype.l,o.prototype.getRoute=o.prototype.i,window.Routing=o.g()}(),define("routing",function(e){return function(){var t;return t||e.window.Routing}}(this)),require(["jquery","routing"],function(e,t){var i=".access_level_value a",n=".access_level_value_choice",s="access_level_value_link",o="oro_security_access_levels",r="data-identity",a="data-selector-name",l="data-selector-id",c="data-value";e(function(){e(document).on("click",i,function(){var i=e(this),h=i.parent().parent(),d=h.find(n),u=h.find(s);i.hide();var f=h.attr(r);return f=f.replace(/\\/g,"_"),e.ajax({url:t.generate(o,{oid:f}),success:function(t){var i=e("<select>");i.attr("name",h.attr(a)),i.attr("id",h.attr(l)),i.attr("class","security-permission"),e.each(t,function(t,n){var s=e("<option>").attr("value",t).text(n);h.attr(c)==t&&s.attr("selected","selected"),i.append(s)}),d.append(i),d.show(),u.remove(),e("select").uniform("update")},error:function(){i.show()}}),!1})})}),define("oro/security-access-levels",function(){}),define("text",["module"],function(e){var t,i,n,s,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,h=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,u=c&&(location.port||void 0),f={},p=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=r[t];try{e=new ActiveXObject(i)}catch(n){}if(e){r=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,o=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),i=e.substring(o+1,e.length)):t=e,n=i||t,o=n.indexOf("!"),-1!==o&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,s){var o,r,a,l=t.xdRegExp.exec(e);return l?(o=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==s)):!0},finishLoad:function(e,i,n,s){n=i?t.strip(n):n,p.isBuild&&(f[e]=n),s(n)},load:function(e,i,n,s){if(s.isBuild&&!s.inlineText)return n(),void 0;p.isBuild=s.isBuild;var o=t.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),a=i.toUrl(r),l=p.useXhr||t.useXhr;return 0===a.indexOf("empty:")?(n(),void 0):(!c||l(a,h,d,u)?t.get(a,function(i){t.finishLoad(e,o.strip,i,n)},function(e){n.error&&n.error(e)}):i([r],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}),void 0)},write:function(e,i,n){if(f.hasOwnProperty(i)){var s=t.jsEscape(f[i]);n.asModule(e+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,i,n,s,o){var r=t.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";t.load(l,n,function(){var i=function(e){return s(c,e)};i.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,l,i,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var s=i.readFileSync(e,"utf8");0===s.indexOf("﻿")&&(s=s.substring(1)),t(s)}catch(o){n(o)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,i,n,s){var o,r=t.createXhr();if(r.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);p.onXhr&&p.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=r,n(s)):i(r.responseText),p.onXhrComplete&&p.onXhrComplete(r,e))},r.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,s="utf-8",o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,r,a,l={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,s,o,r,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;o>i;i+=1)r[i]=str(i,l)||"null";return s=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,l),s&&r.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&r.push(quote(n)+(gap?": ":":")+s));return s=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,s=e[t];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(e,t,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json",function(){}),define("base64",function(){}),function(){var e=this,t=e._,i={},n=Array.prototype,s=Object.prototype,o=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=s.toString,h=s.hasOwnProperty,d=n.forEach,u=n.map,f=n.reduce,p=n.reduceRight,g=n.filter,m=n.every,v=n.some,_=n.indexOf,y=n.lastIndexOf,b=Array.isArray,w=Object.keys,x=o.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.5.1";var k=C.each=C.forEach=function(e,t,n){if(null!=e)if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var s=0,o=e.length;o>s;s++)if(t.call(n,e[s],s,e)===i)return}else for(var r=C.keys(e),s=0,o=r.length;o>s;s++)if(t.call(n,e[r[s]],r[s],e)===i)return};C.map=C.collect=function(e,t,i){var n=[];return null==e?n:u&&e.map===u?e.map(t,i):(k(e,function(e,s,o){n.push(t.call(i,e,s,o))}),n)};var T="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return n&&(t=C.bind(t,n)),s?e.reduce(t,i):e.reduce(t);if(k(e,function(e,o,r){s?i=t.call(n,i,e,o,r):(i=e,s=!0)}),!s)throw new TypeError(T);return i},C.reduceRight=C.foldr=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return n&&(t=C.bind(t,n)),s?e.reduceRight(t,i):e.reduceRight(t);var o=e.length;if(o!==+o){var r=C.keys(e);o=r.length}if(k(e,function(a,l,c){l=r?r[--o]:--o,s?i=t.call(n,i,e[l],l,c):(i=e[l],s=!0)}),!s)throw new TypeError(T);return i},C.find=C.detect=function(e,t,i){var n;return S(e,function(e,s,o){return t.call(i,e,s,o)?(n=e,!0):void 0}),n},C.filter=C.select=function(e,t,i){var n=[];return null==e?n:g&&e.filter===g?e.filter(t,i):(k(e,function(e,s,o){t.call(i,e,s,o)&&n.push(e)}),n)},C.reject=function(e,t,i){return C.filter(e,function(e,n,s){return!t.call(i,e,n,s)},i)},C.every=C.all=function(e,t,n){t||(t=C.identity);var s=!0;return null==e?s:m&&e.every===m?e.every(t,n):(k(e,function(e,o,r){return(s=s&&t.call(n,e,o,r))?void 0:i}),!!s)};var S=C.some=C.any=function(e,t,n){t||(t=C.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,n):(k(e,function(e,o,r){return s||(s=t.call(n,e,o,r))?i:void 0}),!!s)};C.contains=C.include=function(e,t){return null==e?!1:_&&e.indexOf===_?-1!=e.indexOf(t):S(e,function(e){return e===t})},C.invoke=function(e,t){var i=a.call(arguments,2),n=C.isFunction(t);return C.map(e,function(e){return(n?t:e[t]).apply(e,i)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t,i){return C.isEmpty(t)?i?void 0:[]:C[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},C.findWhere=function(e,t){return C.where(e,t,!0)},C.max=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return k(e,function(e,s,o){var r=t?t.call(i,e,s,o):e;r>n.computed&&(n={value:e,computed:r})}),n.value},C.min=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return k(e,function(e,s,o){var r=t?t.call(i,e,s,o):e;r<n.computed&&(n={value:e,computed:r})}),n.value},C.shuffle=function(e){var t,i=0,n=[];return k(e,function(e){t=C.random(i++),n[i-1]=n[t],n[t]=e}),n};var D=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,i){var n=D(t);return C.pluck(C.map(e,function(e,t,s){return{value:e,index:t,criteria:n.call(i,e,t,s)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var M=function(e){return function(t,i,n){var s={},o=null==i?C.identity:D(i);return k(t,function(i,r){var a=o.call(n,i,r,t);e(s,a,i)}),s}};C.groupBy=M(function(e,t,i){(C.has(e,t)?e[t]:e[t]=[]).push(i)}),C.indexBy=M(function(e,t,i){e[t]=i}),C.countBy=M(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,i,n){i=null==i?C.identity:D(i);for(var s=i.call(n,t),o=0,r=e.length;r>o;){var a=o+r>>>1;i.call(n,e[a])<s?o=a+1:r=a}return o},C.toArray=function(e){return e?C.isArray(e)?a.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:a.call(e,0,t)},C.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},C.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var j=function(e,t,i){return t&&C.every(e,C.isArray)?l.apply(i,e):(k(e,function(e){C.isArray(e)||C.isArguments(e)?t?r.apply(i,e):j(e,t,i):i.push(e)}),i)};C.flatten=function(e,t){return j(e,t,[])},C.without=function(e){return C.difference(e,a.call(arguments,1))},C.uniq=C.unique=function(e,t,i,n){C.isFunction(t)&&(n=i,i=t,t=!1);var s=i?C.map(e,i,n):e,o=[],r=[];return k(s,function(i,n){(t?n&&r[r.length-1]===i:C.contains(r,i))||(r.push(i),o.push(e[n]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=a.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=l.apply(n,a.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=C.pluck(arguments,""+i);return t},C.object=function(e,t){if(null==e)return{};for(var i={},n=0,s=e.length;s>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},C.indexOf=function(e,t,i){if(null==e)return-1;var n=0,s=e.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,s+i):i}if(_&&e.indexOf===_)return e.indexOf(t,i);for(;s>n;n++)if(e[n]===t)return n;return-1},C.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(y&&e.lastIndexOf===y)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var s=n?i:e.length;s--;)if(e[s]===t)return s;return-1},C.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=0,o=new Array(n);n>s;)o[s++]=e,e+=i;return o};var E=function(){};C.bind=function(e,t){var i,n;if(x&&e.bind===x)return x.apply(e,a.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));E.prototype=e.prototype;var s=new E;E.prototype=null;var o=e.apply(s,i.concat(a.call(arguments)));return Object(o)===o?o:s}},C.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},C.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return k(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var i={};return t||(t=C.identity),function(){var n=t.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},C.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(a.call(arguments,1)))},C.throttle=function(e,t,i){var n,s,o,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,r=null,o=e.apply(n,s)};return function(){var c=new Date;a||i.leading!==!1||(a=c);var h=t-(c-a);return n=this,s=arguments,0>=h?(clearTimeout(r),r=null,a=c,o=e.apply(n,s)):r||i.trailing===!1||(r=setTimeout(l,h)),o}},C.debounce=function(e,t,i){var n,s=null;return function(){var o=this,r=arguments,a=function(){s=null,i||(n=e.apply(o,r))},l=i&&!s;return clearTimeout(s),s=setTimeout(a,t),l&&(n=e.apply(o,r)),n}},C.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var i=[e];return r.apply(i,arguments),t.apply(this,i)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)C.has(e,i)&&t.push(i);return t},C.values=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),s=0;i>s;s++)n[s]=e[t[s]];return n},C.pairs=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),s=0;i>s;s++)n[s]=[t[s],e[t[s]]];return n},C.invert=function(e){for(var t={},i=C.keys(e),n=0,s=i.length;s>n;n++)t[e[i[n]]]=i[n];return t},C.functions=C.methods=function(e){var t=[];for(var i in e)C.isFunction(e[i])&&t.push(i);return t.sort()},C.extend=function(e){return k(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},C.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return k(i,function(i){i in e&&(t[i]=e[i])}),t},C.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var s in e)C.contains(i,s)||(t[s]=e[s]);return t},C.defaults=function(e){return k(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var F=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var s=c.call(e);if(s!=c.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return n[o]==t;var r=e.constructor,a=t.constructor;if(r!==a&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(a)&&a instanceof a))return!1;i.push(e),n.push(t);var l=0,h=!0;if("[object Array]"==s){if(l=e.length,h=l==t.length)for(;l--&&(h=F(e[l],t[l],i,n)););}else{for(var d in e)if(C.has(e,d)&&(l++,!(h=C.has(t,d)&&F(e[d],t[d],i,n))))break;if(h){for(d in t)if(C.has(t,d)&&!l--)break;h=!l}}return i.pop(),n.pop(),h};C.isEqual=function(e,t){return F(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=b||function(e){return"[object Array]"==c.call(e)},C.isObject=function(e){return e===Object(e)},k(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return h.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.times=function(e,t,i){for(var n=Array(Math.max(0,e)),s=0;e>s;s++)n[s]=t.call(i,s);return n},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=C.invert(A.escape);var O={escape:new RegExp("["+C.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(A.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(O[e],function(t){return A[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var i=e[t];return C.isFunction(i)?i.call(e):i},C.mixin=function(e){k(C.functions(e),function(t){var i=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),R.call(this,i.apply(C,e))}})};var N=0;C.uniqueId=function(e){var t=++N+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,i){var n;i=C.defaults({},i,C.templateSettings);var s=new RegExp([(i.escape||I).source,(i.interpolate||I).source,(i.evaluate||I).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(s,function(t,i,n,s,a){return r+=e.slice(o,a).replace(z,function(e){return"\\"+P[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(r+="';\n"+s+"\n__p+='"),o=a+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(t)return n(t,C);var l=function(e){return n.call(this,e,C)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},C.chain=function(e){return C(e).chain()};var R=function(e){return this._chain?C(e).chain():e};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];C.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],R.call(this,i)}}),k(["concat","join","slice"],function(e){var t=n[e];C.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this));var Translator=function(){function e(e,t){var i,n=Translator.placeHolderPrefix,s=Translator.placeHolderSuffix;for(i in t){var o=new RegExp(n+i+s,"g");o.test(e)&&(e=e.replace(o,t[i]),delete t[i])}return e}function t(e){var t,i=Translator.defaultDomains;Translator.defaultDomains.constructor!=Array&&(i=[Translator.defaultDomains]);for(t in i)if(Translator.has(i[t]+":"+e))return Translator.get(i[t]+":"+e);return void 0}function i(e,t){var i,o,c=[],h=[],d=e.split(Translator.pluralSeparator),u=[];for(i in d){var f=d[i],p=new RegExp(a),g=new RegExp(r);p.test(f)?(u=f.match(p),c[u[0]]=u[u.length-1]):g.test(f)?(u=f.match(g),h.push(u[1])):h.push(f)}for(o in c){var m=new RegExp(l);if(m.test(o))if(u=o.match(m),u[1]){var v,_=u[2].split(",");for(v in _)if(t==_[v])return c[o]}else{var y=n(u[4]),b=n(u[5]);if(("["===u[3]?t>=y:t>y)&&("]"===u[6]?b>=t:b>t))return c[o]}}return h[s(t)]||void 0}function n(e){return"-Inf"===e?Math.log(0):"+Inf"===e||"Inf"===e?-Math.log(0):parseInt(e,10)}function s(e){var t=Translator.locale||Translator.fallback;switch("pt_BR"===t&&(t="xbr"),t.length>3&&(t=t.split("_")[0]),t){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1==e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return 1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2;case"cs":case"sk":return 1==e?0:e>=2&&4>=e?1:2;case"ga":return 1==e?0:2==e?1:2;case"lt":return 1==e%10&&11!=e%100?0:e%10>=2&&(10>e%100||e%100>=20)?1:2;case"sl":return 1==e%100?0:2==e%100?1:3==e%100||4==e%100?2:3;case"mk":return 1==e%10?0:1;case"mt":return 1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3;case"lv":return 0===e?0:1==e%10&&11!=e%100?1:2;case"pl":return 1==e?0:e%10>=2&&4>=e%10&&(12>e%100||e%100>14)?1:2;case"cy":return 1==e?0:2==e?1:8==e||11==e?2:3;case"ro":return 1==e?0:0===e||e%100>0&&20>e%100?1:2;case"ar":return 0===e?0:1==e?1:2==e?2:e>=3&&10>=e?3:e>=11&&99>=e?4:5;default:return 0}}var o={},r=/^\w+\: +(.+)$/,a=/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/,l=/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/;return{locale:"",fallback:"en",placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomains:[],pluralSeparator:"|",add:function(e,t){return o[e]=t,this},get:function(n,s,r){var a=o[n],l=parseInt(r,10),c=s||{};return void 0===a&&(a=t(n)),void 0===a&&(a=n),a&&!isNaN(l)&&(a=i(a,l)),a=e(a,c)},has:function(e){return o[e]?!0:!1},fromJSON:function(e){if("string"==typeof e&&(e=JSON.parse(e)),e.locale&&(this.locale=e.locale),e.defaultDomains&&(this.defaultDomains=e.defaultDomains),e.messages){var t;for(t in e.messages){var i=e.messages[t];this.add(t,i)}}return this}}}();"function"==typeof window.define&&window.define.amd&&window.define("Translator",[],function(){return Translator}),define("translator",function(e){return function(){var t;return t||e.Translator}}(this)),define("oro/translator",["underscore","translator","json"],function(e,t){function i(i){if(s){var o=t.defaultDomains,r=function(e){return n.hasOwnProperty(e?e+":"+i:i)};o=e.union([void 0],e.isArray(o)?o:[o]),e.some(o,r)||console.error("Untranslated: %s",i)}}var n={},s=!1,o=t.add,r=t.get,a=t.fromJSON;return t.placeHolderPrefix="{{ ",t.placeHolderSuffix=" }}",t.add=function(e){n[e]=1,o.apply(t,arguments)},t.get=function(e){return i(e),r.apply(t,arguments)},t.fromJSON=function(e){return"string"==typeof e&&(e=JSON.parse(e)),s=e.debug||!1,a.call(t,e)},e.mixin({__:e.bind(t.get,t)}),e.__}),define("oro/locale-settings/data",{locale_data:{AD:{default_locale:"ca",currency_code:"EUR",phone_prefix:"376"},AE:{default_locale:"ar_AE",currency_code:"AED",phone_prefix:"971"},AF:{default_locale:"fa_AF",currency_code:"AFN",phone_prefix:"93"},AG:{default_locale:"en_AG",currency_code:"XCD",phone_prefix:"+1-268"},AI:{default_locale:"en",currency_code:"XCD",phone_prefix:"+1-264"},AL:{default_locale:"sq",currency_code:"ALL",phone_prefix:"355"},AM:{default_locale:"hy",currency_code:"AMD",phone_prefix:"374"},AO:{default_locale:"pt_AO",currency_code:"AOA",phone_prefix:"244"},AR:{default_locale:"es_AR",currency_code:"ARS",phone_prefix:"54"},AS:{default_locale:"en_AS",currency_code:"USD",phone_prefix:"+1-684"},AT:{default_locale:"de_AT",currency_code:"EUR",phone_prefix:"43"},AU:{default_locale:"en_AU",currency_code:"AUD",phone_prefix:"61"},AW:{default_locale:"nl_AW",currency_code:"AWG",phone_prefix:"297"},AX:{default_locale:"sv_AX",currency_code:"EUR",phone_prefix:"+358-18"},AZ:{default_locale:"az",currency_code:"AZN",phone_prefix:"994"},BA:{default_locale:"bs",currency_code:"BAM",phone_prefix:"387"},BB:{default_locale:"en_BB",currency_code:"BBD",phone_prefix:"+1-246"},BD:{default_locale:"bn_BD",currency_code:"BDT",phone_prefix:"880"},BE:{default_locale:"nl_BE",currency_code:"EUR",phone_prefix:"32"},BF:{default_locale:"fr_BF",currency_code:"XOF",phone_prefix:"226"},BG:{default_locale:"bg",currency_code:"BGN",phone_prefix:"359"},BH:{default_locale:"ar_BH",currency_code:"BHD",phone_prefix:"973"},BI:{default_locale:"fr_BI",currency_code:"BIF",phone_prefix:"257"},BJ:{default_locale:"fr_BJ",currency_code:"XOF",phone_prefix:"229"},BL:{default_locale:"fr",currency_code:"EUR",phone_prefix:"590"},BM:{default_locale:"en_BM",currency_code:"BMD",phone_prefix:"+1-441"},BN:{default_locale:"ms_BN",currency_code:"BND",phone_prefix:"673"},BO:{default_locale:"es_BO",currency_code:"BOB",phone_prefix:"591"},BQ:{default_locale:"nl",currency_code:"USD",phone_prefix:"599"},BR:{default_locale:"pt_BR",currency_code:"BRL",phone_prefix:"55"},BS:{default_locale:"en_BS",currency_code:"BSD",phone_prefix:"+1-242"},BT:{default_locale:"dz",currency_code:"BTN",phone_prefix:"975"},BW:{default_locale:"en_BW",currency_code:"BWP",phone_prefix:"267"},BY:{default_locale:"be",currency_code:"BYR",phone_prefix:"375"},BZ:{default_locale:"en_BZ",currency_code:"BZD",phone_prefix:"501"},CA:{default_locale:"en_CA",currency_code:"CAD",phone_prefix:"1"},CC:{default_locale:"ms",currency_code:"AUD",phone_prefix:"61"},CD:{default_locale:"fr_CD",currency_code:"CDF",phone_prefix:"243"},CF:{default_locale:"fr_CF",currency_code:"XAF",phone_prefix:"236"},CG:{default_locale:"fr_CG",currency_code:"XAF",phone_prefix:"242"},CH:{default_locale:"de_CH",currency_code:"CHF",phone_prefix:"41"},CI:{default_locale:"fr_CI",currency_code:"XOF",phone_prefix:"225"},CK:{default_locale:"en",currency_code:"NZD",phone_prefix:"682"},CL:{default_locale:"es_CL",currency_code:"CLP",phone_prefix:"56"},CM:{default_locale:"en_CM",currency_code:"XAF",phone_prefix:"237"},CN:{default_locale:"zh_CN",currency_code:"CNY",phone_prefix:"86"},CO:{default_locale:"es_CO",currency_code:"COP",phone_prefix:"57"},CR:{default_locale:"es_CR",currency_code:"CRC",phone_prefix:"506"},CU:{default_locale:"es_CU",currency_code:"CUP",phone_prefix:"53"},CV:{default_locale:"pt_CV",currency_code:"CVE",phone_prefix:"238"},CW:{default_locale:"nl",currency_code:"ANG",phone_prefix:"599"},CX:{default_locale:"en",currency_code:"AUD",phone_prefix:"61"},CY:{default_locale:"el_CY",currency_code:"EUR",phone_prefix:"357"},CZ:{default_locale:"cs",currency_code:"CZK",phone_prefix:"420"},DE:{default_locale:"de",currency_code:"EUR",phone_prefix:"49"},DJ:{default_locale:"fr_DJ",currency_code:"DJF",phone_prefix:"253"},DK:{default_locale:"da_DK",currency_code:"DKK",phone_prefix:"45"},DM:{default_locale:"en_DM",currency_code:"XCD",phone_prefix:"+1-767"},DO:{default_locale:"es_DO",currency_code:"DOP",phone_prefix:"+1-809"},DZ:{default_locale:"ar_DZ",currency_code:"DZD",phone_prefix:"213"},EC:{default_locale:"es_EC",currency_code:"USD",phone_prefix:"593"},EE:{default_locale:"et",currency_code:"EUR",phone_prefix:"372"},EG:{default_locale:"ar_EG",currency_code:"EGP",phone_prefix:"20"},EH:{default_locale:"ar",currency_code:"MAD",phone_prefix:"212"},ER:{default_locale:"ti_ER",currency_code:"ERN",phone_prefix:"291"},ES:{default_locale:"es_ES",currency_code:"EUR",phone_prefix:"34"},ET:{default_locale:"am",currency_code:"ETB",phone_prefix:"251"},FI:{default_locale:"fi_FI",currency_code:"EUR",phone_prefix:"358"},FJ:{default_locale:"en_FJ",currency_code:"FJD",phone_prefix:"679"},FK:{default_locale:"en",currency_code:"FKP",phone_prefix:"500"},FM:{default_locale:"en_FM",currency_code:"USD",phone_prefix:"691"},FO:{default_locale:"fo",currency_code:"DKK",phone_prefix:"298"},FR:{default_locale:"fr_FR",currency_code:"EUR",phone_prefix:"33"},GA:{default_locale:"fr_GA",currency_code:"XAF",phone_prefix:"241"},GB:{default_locale:"en_GB",currency_code:"GBP",phone_prefix:"44"},GD:{default_locale:"en_GD",currency_code:"XCD",phone_prefix:"+1-473"},GE:{default_locale:"ka",currency_code:"GEL",phone_prefix:"995"},GF:{default_locale:"fr_GF",currency_code:"EUR",phone_prefix:"594"},GG:{default_locale:"en",currency_code:"GBP",phone_prefix:"+44-1481"},GH:{default_locale:"en_GH",currency_code:"GHS",phone_prefix:"233"},GI:{default_locale:"en_GI",currency_code:"GIP",phone_prefix:"350"},GL:{default_locale:"kl",currency_code:"DKK",phone_prefix:"299"},GM:{default_locale:"en_GM",currency_code:"GMD",phone_prefix:"220"},GN:{default_locale:"fr_GN",currency_code:"GNF",phone_prefix:"224"},GP:{default_locale:"fr_GP",currency_code:"EUR",phone_prefix:"590"},GQ:{default_locale:"es_GQ",currency_code:"XAF",phone_prefix:"240"},GR:{default_locale:"el_GR",currency_code:"EUR",phone_prefix:"30"},GS:{default_locale:"en",currency_code:"GBP"},GT:{default_locale:"es_GT",currency_code:"GTQ",phone_prefix:"502"},GU:{default_locale:"en_GU",currency_code:"USD",phone_prefix:"+1-671"},GW:{default_locale:"pt_GW",currency_code:"XOF",phone_prefix:"245"},GY:{default_locale:"en_GY",currency_code:"GYD",phone_prefix:"592"},HK:{default_locale:"zh_HK",currency_code:"HKD",phone_prefix:"852"},HN:{default_locale:"es_HN",currency_code:"HNL",phone_prefix:"504"},HR:{default_locale:"hr_HR",currency_code:"HRK",phone_prefix:"385"},HT:{default_locale:"fr",currency_code:"HTG",phone_prefix:"509"},HU:{default_locale:"hu_HU",currency_code:"HUF",phone_prefix:"36"},ID:{default_locale:"id",currency_code:"IDR",phone_prefix:"62"},IE:{default_locale:"en_IE",currency_code:"EUR",phone_prefix:"353"},IL:{default_locale:"he",currency_code:"ILS",phone_prefix:"972"},IM:{default_locale:"en",currency_code:"GBP",phone_prefix:"+44-1624"},IN:{default_locale:"en_IN",currency_code:"INR",phone_prefix:"91"},IO:{default_locale:"en",currency_code:"USD",phone_prefix:"246"},IQ:{default_locale:"ar_IQ",currency_code:"IQD",phone_prefix:"964"},IR:{default_locale:"fa_IR",currency_code:"IRR",phone_prefix:"98"},IS:{default_locale:"is",currency_code:"ISK",phone_prefix:"354"},IT:{default_locale:"it_IT",currency_code:"EUR",phone_prefix:"39"},JE:{default_locale:"en",currency_code:"GBP",phone_prefix:"+44-1534"},JM:{default_locale:"en_JM",currency_code:"JMD",phone_prefix:"+1-876"},JO:{default_locale:"ar_JO",currency_code:"JOD",phone_prefix:"962"},JP:{default_locale:"ja",currency_code:"JPY",phone_prefix:"81"},KE:{default_locale:"en_KE",currency_code:"KES",phone_prefix:"254"},KG:{default_locale:"ru",currency_code:"KGS",phone_prefix:"996"},KH:{default_locale:"km",currency_code:"KHR",phone_prefix:"855"},KI:{default_locale:"en_KI",currency_code:"AUD",phone_prefix:"686"},KM:{default_locale:"ar",currency_code:"KMF",phone_prefix:"269"},KN:{default_locale:"en_KN",currency_code:"XCD",phone_prefix:"+1-869"},KP:{default_locale:"ko_KP",currency_code:"KPW",phone_prefix:"850"},KR:{default_locale:"ko_KR",currency_code:"KRW",phone_prefix:"82"},XK:{default_locale:"sq",currency_code:"EUR"},KW:{default_locale:"ar_KW",currency_code:"KWD",phone_prefix:"965"},KY:{default_locale:"en_KY",currency_code:"KYD",phone_prefix:"+1-345"},KZ:{default_locale:"kk",currency_code:"KZT",phone_prefix:"7"},LA:{default_locale:"lo",currency_code:"LAK",phone_prefix:"856"},LB:{default_locale:"ar_LB",currency_code:"LBP",phone_prefix:"961"},LC:{default_locale:"en_LC",currency_code:"XCD",phone_prefix:"+1-758"},LI:{default_locale:"de_LI",currency_code:"CHF",phone_prefix:"423"},LK:{default_locale:"si",currency_code:"LKR",phone_prefix:"94"},LR:{default_locale:"en_LR",currency_code:"LRD",phone_prefix:"231"},LS:{default_locale:"en_LS",currency_code:"LSL",phone_prefix:"266"},LT:{default_locale:"lt",currency_code:"LTL",phone_prefix:"370"},LU:{default_locale:"fr",currency_code:"EUR",phone_prefix:"352"},LV:{default_locale:"lv",currency_code:"LVL",phone_prefix:"371"},LY:{default_locale:"ar_LY",currency_code:"LYD",phone_prefix:"218"},MA:{default_locale:"ar_MA",currency_code:"MAD",phone_prefix:"212"},MC:{default_locale:"fr_MC",currency_code:"EUR",phone_prefix:"377"},MD:{default_locale:"ro",currency_code:"MDL",phone_prefix:"373"},ME:{default_locale:"sr",currency_code:"EUR",phone_prefix:"382"},MF:{default_locale:"fr",currency_code:"EUR",phone_prefix:"590"},MG:{default_locale:"fr_MG",currency_code:"MGA",phone_prefix:"261"},MH:{default_locale:"en",currency_code:"USD",phone_prefix:"692"},MK:{default_locale:"mk",currency_code:"MKD",phone_prefix:"389"},ML:{default_locale:"fr_ML",currency_code:"XOF",phone_prefix:"223"},MM:{default_locale:"my",currency_code:"MMK",phone_prefix:"95"},MN:{default_locale:"mn",currency_code:"MNT",phone_prefix:"976"},MO:{default_locale:"zh",currency_code:"MOP",phone_prefix:"853"},MP:{default_locale:"fil",currency_code:"USD",phone_prefix:"+1-670"},MQ:{default_locale:"fr_MQ",currency_code:"EUR",phone_prefix:"596"},MR:{default_locale:"ar_MR",currency_code:"MRO",phone_prefix:"222"},MS:{default_locale:"en",currency_code:"XCD",phone_prefix:"+1-664"},MT:{default_locale:"mt",currency_code:"EUR",phone_prefix:"356"},MU:{default_locale:"en_MU",currency_code:"MUR",phone_prefix:"230"},MV:{default_locale:"en",currency_code:"MVR",phone_prefix:"960"},MW:{default_locale:"en",currency_code:"MWK",phone_prefix:"265"},MX:{default_locale:"es_MX",currency_code:"MXN",phone_prefix:"52"},MY:{default_locale:"ms_MY",currency_code:"MYR",phone_prefix:"60"},MZ:{default_locale:"pt_MZ",currency_code:"MZN",phone_prefix:"258"},NA:{default_locale:"en_NA",currency_code:"NAD",phone_prefix:"264"},NC:{default_locale:"fr_NC",currency_code:"XPF",phone_prefix:"687"},NE:{default_locale:"fr_NE",currency_code:"XOF",phone_prefix:"227"},NF:{default_locale:"en",currency_code:"AUD",phone_prefix:"672"},NG:{default_locale:"en_NG",currency_code:"NGN",phone_prefix:"234"},NI:{default_locale:"es_NI",currency_code:"NIO",phone_prefix:"505"},NL:{default_locale:"nl_NL",currency_code:"EUR",phone_prefix:"31"},NO:{default_locale:"no",currency_code:"NOK",phone_prefix:"47"},NP:{default_locale:"ne",currency_code:"NPR",phone_prefix:"977"},NR:{default_locale:"en",currency_code:"AUD",phone_prefix:"674"},NU:{default_locale:"en",currency_code:"NZD",phone_prefix:"683"},NZ:{default_locale:"en_NZ",currency_code:"NZD",phone_prefix:"64"},OM:{default_locale:"ar_OM",currency_code:"OMR",phone_prefix:"968"},PA:{default_locale:"es_PA",currency_code:"PAB",phone_prefix:"507"},PE:{default_locale:"es_PE",currency_code:"PEN",phone_prefix:"51"},PF:{default_locale:"fr_PF",currency_code:"XPF",phone_prefix:"689"},PG:{default_locale:"en_PG",currency_code:"PGK",phone_prefix:"675"},PH:{default_locale:"tl",currency_code:"PHP",phone_prefix:"63"},PK:{default_locale:"ur_PK",currency_code:"PKR",phone_prefix:"92"},PL:{default_locale:"pl",currency_code:"PLN",phone_prefix:"48"},PM:{default_locale:"fr",currency_code:"EUR",phone_prefix:"508"},PN:{default_locale:"en",currency_code:"NZD",phone_prefix:"870"},PR:{default_locale:"en_PR",currency_code:"USD",phone_prefix:"+1-787"},PS:{default_locale:"ar_PS",currency_code:"ILS",phone_prefix:"970"},PT:{default_locale:"pt_PT",currency_code:"EUR",phone_prefix:"351"},PW:{default_locale:"en",currency_code:"USD",phone_prefix:"680"},PY:{default_locale:"es_PY",currency_code:"PYG",phone_prefix:"595"},QA:{default_locale:"ar_QA",currency_code:"QAR",phone_prefix:"974"},RE:{default_locale:"fr_RE",currency_code:"EUR",phone_prefix:"262"},RO:{default_locale:"ro",currency_code:"RON",phone_prefix:"40"},RS:{default_locale:"sr",currency_code:"RSD",phone_prefix:"381"},RU:{default_locale:"ru",currency_code:"RUB",phone_prefix:"7"},RW:{default_locale:"rw",currency_code:"RWF",phone_prefix:"250"},SA:{default_locale:"ar_SA",currency_code:"SAR",phone_prefix:"966"},SB:{default_locale:"en_SB",currency_code:"SBD",phone_prefix:"677"},SC:{default_locale:"en_SC",currency_code:"SCR",phone_prefix:"248"},SD:{default_locale:"ar_SD",currency_code:"SDG",phone_prefix:"249"},SS:{default_locale:"en",currency_code:"SSP",phone_prefix:"211"},SE:{default_locale:"sv_SE",currency_code:"SEK",phone_prefix:"46"},SG:{default_locale:"en",currency_code:"SGD",phone_prefix:"65"},SH:{default_locale:"en",currency_code:"SHP",phone_prefix:"290"},SI:{default_locale:"sl",currency_code:"EUR",phone_prefix:"386"},SJ:{default_locale:"no",currency_code:"NOK",phone_prefix:"47"},SK:{default_locale:"sk",currency_code:"EUR",phone_prefix:"421"},SL:{default_locale:"en_SL",currency_code:"SLL",phone_prefix:"232"},SM:{default_locale:"it_SM",currency_code:"EUR",phone_prefix:"378"},SN:{default_locale:"fr_SN",currency_code:"XOF",phone_prefix:"221"},SO:{default_locale:"so_SO",currency_code:"SOS",phone_prefix:"252"},SR:{default_locale:"nl_SR",currency_code:"SRD",phone_prefix:"597"},ST:{default_locale:"pt_ST",currency_code:"STD",phone_prefix:"239"},SV:{default_locale:"es_SV",currency_code:"USD",phone_prefix:"503"},SX:{default_locale:"nl",currency_code:"ANG",phone_prefix:"599"},SY:{default_locale:"ar_SY",currency_code:"SYP",phone_prefix:"963"},SZ:{default_locale:"en_SZ",currency_code:"SZL",phone_prefix:"268"},TC:{default_locale:"en_TC",currency_code:"USD",phone_prefix:"+1-649"},TD:{default_locale:"fr_TD",currency_code:"XAF",phone_prefix:"235"},TF:{default_locale:"fr",currency_code:"EUR"},TG:{default_locale:"fr_TG",currency_code:"XOF",phone_prefix:"228"},TH:{default_locale:"th",currency_code:"THB",phone_prefix:"66"},TJ:{default_locale:"fr",currency_code:"TJS",phone_prefix:"992"},TK:{default_locale:"en",currency_code:"NZD",phone_prefix:"690"},TL:{default_locale:"pt",currency_code:"USD",phone_prefix:"670"},TM:{default_locale:"ru",currency_code:"TMT",phone_prefix:"993"},TN:{default_locale:"ar_TN",currency_code:"TND",phone_prefix:"216"},TO:{default_locale:"to",currency_code:"TOP",phone_prefix:"676"},TR:{default_locale:"tr_TR",currency_code:"TRY",phone_prefix:"90"},TT:{default_locale:"en_TT",currency_code:"TTD",phone_prefix:"+1-868"},TV:{default_locale:"en",currency_code:"AUD",phone_prefix:"688"},TW:{default_locale:"zh_TW",currency_code:"TWD",phone_prefix:"886"},TZ:{default_locale:"sw_TZ",currency_code:"TZS",phone_prefix:"255"},UA:{default_locale:"uk",currency_code:"UAH",phone_prefix:"380"},UG:{default_locale:"en_UG",currency_code:"UGX",phone_prefix:"256"},UM:{default_locale:"en_UM",currency_code:"USD",phone_prefix:"1"},US:{default_locale:"en_US",currency_code:"USD",phone_prefix:"1"},UY:{default_locale:"es_UY",currency_code:"UYU",phone_prefix:"598"},UZ:{default_locale:"uz",currency_code:"UZS",phone_prefix:"998"},VA:{default_locale:"it",currency_code:"EUR",phone_prefix:"379"},VC:{default_locale:"en_VC",currency_code:"XCD",phone_prefix:"+1-784"},VE:{default_locale:"es_VE",currency_code:"VEF",phone_prefix:"58"},VG:{default_locale:"en_VG",currency_code:"USD",phone_prefix:"+1-284"},VI:{default_locale:"en_VI",currency_code:"USD",phone_prefix:"+1-340"},VN:{default_locale:"vi",currency_code:"VND",phone_prefix:"84"},VU:{default_locale:"fr",currency_code:"VUV",phone_prefix:"678"},WF:{default_locale:"fr",currency_code:"XPF",phone_prefix:"681"},WS:{default_locale:"en",currency_code:"WST",phone_prefix:"685"},YE:{default_locale:"ar_YE",currency_code:"YER",phone_prefix:"967"},YT:{default_locale:"fr_YT",currency_code:"EUR",phone_prefix:"262"},ZA:{default_locale:"zu",currency_code:"ZAR",phone_prefix:"27"},ZM:{default_locale:"en_ZM",currency_code:"ZMK",phone_prefix:"260"},ZW:{default_locale:"en_ZW",currency_code:"ZWL",phone_prefix:"263"},CS:{default_locale:"sr",currency_code:"RSD",phone_prefix:"381"},AN:{default_locale:"nl",currency_code:"ANG",phone_prefix:"599"}},currency_data:{AED:{symbol:"د.إ.‏"},AFN:{symbol:"؋"},ALL:{symbol:"Lek"},AMD:{symbol:"դր."},ANG:{symbol:"ANG"},AOA:{symbol:"Kz"},ARS:{symbol:"$"},AUD:{symbol:"AU$"},AWG:{symbol:"Afl."},AZN:{symbol:"man."},BAM:{symbol:"KM"},BBD:{symbol:"$"},BDT:{symbol:"৳"},BGN:{symbol:"лв."},BHD:{symbol:"د.ب.‏"},BIF:{symbol:"FBu"},BMD:{symbol:"$"},BND:{symbol:"$"},BOB:{symbol:"Bs"},BRL:{symbol:"R$"},BSD:{symbol:"BSD"},BTN:{symbol:"BTN"},BWP:{symbol:"P"},BYR:{symbol:"BYR"},BZD:{symbol:"$"},CAD:{symbol:"$"},CDF:{symbol:"FrCD"},CHF:{symbol:"CHF"},CLP:{symbol:"$"},CNY:{symbol:"￥"},COP:{symbol:"$"},CRC:{symbol:"₡"},CUP:{symbol:"CUP"},CVE:{symbol:"CVE"},CZK:{symbol:"Kč"},DJF:{symbol:"Fdj"},DKK:{symbol:"kr"},DOP:{symbol:"$"},DZD:{symbol:"د.ج.‏"},EGP:{symbol:"ج.م.‏"},ERN:{symbol:"Nfk"},ETB:{symbol:"ብር"},EUR:{symbol:"€"},FJD:{symbol:"FJD"},FKP:{symbol:"FKP"},GBP:{symbol:"£"},GEL:{symbol:"GEL"},GHS:{symbol:"GHS"},GIP:{symbol:"GIP"},GMD:{symbol:"GMD"},GNF:{symbol:"FG"},GTQ:{symbol:"Q"},GYD:{symbol:"GYD"},HKD:{symbol:"$"},HNL:{symbol:"L"},HRK:{symbol:"kn"},HTG:{symbol:"HTG"},HUF:{symbol:"Ft"},IDR:{symbol:"Rp"},ILS:{symbol:"₪"},INR:{symbol:"₹"},IQD:{symbol:"د.ع.‏"},IRR:{symbol:"﷼"},ISK:{symbol:"kr"},JMD:{symbol:"$"},JOD:{symbol:"د.أ.‏"},JPY:{symbol:"￥"},KES:{symbol:"KES"},KGS:{symbol:"KGS"},KHR:{symbol:"៛"},KMF:{symbol:"ف.ج.ق.‏"},KPW:{symbol:"KPW"},KRW:{symbol:"₩"},KWD:{symbol:"د.ك.‏"},KYD:{symbol:"KYD"},KZT:{symbol:"тңг."},LAK:{symbol:"LAK"},LBP:{symbol:"ل.ل.‏"},LKR:{symbol:"රු."},LRD:{symbol:"LRD"},LSL:{symbol:"LSL"},LTL:{symbol:"Lt"},LVL:{symbol:"Ls"},LYD:{symbol:"د.ل.‏"},MAD:{symbol:"د.م.‏"},MDL:{symbol:"MDL"},MGA:{symbol:"MGA"},MKD:{symbol:"MKD"},MMK:{symbol:"K"},MNT:{symbol:"MNT"},MOP:{symbol:"MOP"},MRO:{symbol:"أ.م.‏"},MUR:{symbol:"MUR"},MVR:{symbol:"Rf."},MWK:{symbol:"MWK"},MXN:{symbol:"$"},MYR:{symbol:"RM"},MZN:{symbol:"MTn"},NAD:{symbol:"$"},NGN:{symbol:"NGN"},NIO:{symbol:"C$"},NOK:{symbol:"kr"},NPR:{symbol:"नेरू "},NZD:{symbol:"NZ$"},OMR:{symbol:"ر.ع.‏"},PAB:{symbol:"B/."},PEN:{symbol:"S/."},PGK:{symbol:"PGK"},PHP:{symbol:"₱"},PKR:{symbol:"PKRs"},PLN:{symbol:"zł"},PYG:{symbol:"₲"},QAR:{symbol:"ر.ق.‏"},RON:{symbol:"RON"},RSD:{symbol:"дин."},RUB:{symbol:"руб."},RWF:{symbol:"RF"},SAR:{symbol:"ر.س.‏"},SBD:{symbol:"SBD"},SCR:{symbol:"SCR"},SDG:{symbol:"SDG"},SEK:{symbol:"kr"},SGD:{symbol:"SGD"},SHP:{symbol:"SHP"},SLL:{symbol:"SLL"},SOS:{symbol:"SOS"},SRD:{symbol:"SRD"},SSP:{symbol:"SSP"},STD:{symbol:"Db"},SYP:{symbol:"ل.س.‏"},SZL:{symbol:"SZL"},THB:{symbol:"฿"},TJS:{symbol:"TJS"},TMT:{symbol:"TMT"},TND:{symbol:"د.ت.‏"},TOP:{symbol:"T$"},TRY:{symbol:"TL"},TTD:{symbol:"$"},TWD:{symbol:"NT$"},TZS:{symbol:"TSh"},UAH:{symbol:"₴"},UGX:{symbol:"UGX"},USD:{symbol:"$"},UYU:{symbol:"$"},UZS:{symbol:"UZS"},VEF:{symbol:"Bs.F."},VND:{symbol:"₫"},VUV:{symbol:"VUV"},WST:{symbol:"WST"},XAF:{symbol:"FCFA"},XCD:{symbol:"EC$"},XOF:{symbol:"CFA"},XPF:{symbol:"FCFP"},YER:{symbol:"ر.ي.‏"},ZAR:{symbol:"R"},ZMK:{symbol:"ZMK"},ZWL:{symbol:"ZWL"}},format:{address:{AD:"%name%\\n%organization%\\n%street%\\n%postal_code% %REGION%\\n%COUNTRY%",AE:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",AG:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",AM:"%name%\\n%organization%\\n%street%\\n%postal_code%\\n%city%\\n%region%\\n%country%",AR:"%name%\\n%organization%\\n%STREET%\\n%POSTAL_CODE% %CITY%\\n%region%\\n%country%",AS:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",AT:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",AU:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",AX:"%organization%\\n%name%\\n%street%\\nAX-%postal_code% %city%\\n%country%\\nÅLAND",AZ:"%name%\\n%organization%\\n%street%\\nAZ %postal_code% %city%\\n%country%",BA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",BB:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",BD:"%name%\\n%organization%\\n%street%\\n%city% - %postal_code%\\n%country%",BE:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",BF:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",BG:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",BH:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",BL:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",BM:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",BN:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",BR:"%organization%\\n%name%\\n%street%\\n%CITY%-%REGION%\\n%COUNTRY%\\n%postal_code%",BS:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%",BY:"%country%\\n%region%\\n%postal_code% %city% %street%\\n%organization%\\n%name%",CA:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION%, %COUNTRY% %POSTAL_CODE%",CC:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",CD:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",CH:"%organization%\\n%name%\\n%street%\\nCH-%postal_code% %city%\\n%country%",CI:"%name%\\n%organization% %street% %city%\\n%country%",CK:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",CL:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%region%\\n%country%",CN:"%postal_code%\\n%COUNTRY%\\n%REGION%%city%\\n%street%\\n%organization%\\n%name%",CO:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%",CR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",CS:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",CV:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%region%\\n%country%",CX:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",CY:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",CZ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",DE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",DK:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",DO:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",DZ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",EC:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE%\\n%CITY%\\n%COUNTRY%",EE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",EG:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%\\n%postal_code%",ES:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",ET:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",FI:"%organization%\\n%name%\\n%street%\\nFI-%postal_code% %city%\\n%country%",FK:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",FM:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",FO:"%name%\\n%organization%\\n%street%\\nFO%postal_code% %city%\\n%country%",FR:"%organization%\\n%name%\\n%street%\\n%postal_code% %CITY%\\n%COUNTRY%",GB:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%region%\\n%country%\\n%POSTAL_CODE%",GE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",GF:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",GG:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\nGUERNSEY\\n%POSTAL_CODE%",GI:"%name%\\n%organization%\\n%street%\\n%country%",GL:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",GN:"%name%\\n%organization%\\n%postal_code% %street% %city%\\n%country%",GP:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",GR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",GS:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",GT:"%name%\\n%organization%\\n%street%\\n%postal_code%- %city%\\n%country%",GU:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",GW:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",HK:"%REGION%\\n%street%\\n%organization%\\n%name%",HM:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",HN:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%\\n%postal_code%",HR:"%name%\\n%organization%\\n%street%\\nHR-%postal_code% %city%\\n%country%",HT:"%name%\\n%organization%\\n%street%\\nHT%postal_code% %city%\\n%country%",HU:"%NAME%\\n%ORGANIZATION%\\n%CITY%\\n%STREET%\\n%COUNTRY%\\n%postal_code%",ID:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%region%\\n%country%",IE:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%",IL:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",IM:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",IN:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%region%\\n%country%",IO:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",IQ:"%organization%\\n%name%\\n%street%\\n%CITY%, %REGION%\\n%COUNTRY%\\n%postal_code%",IS:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",IT:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",JE:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\nJERSEY\\n%POSTAL_CODE%",JM:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%",JO:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",JP:"〒%postal_code%\\n%REGION%%city%\\n%street%\\n%organization%\\n%name%",KE:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%\\n%postal_code%",KG:"%postal_code% %country% %city% %street%\\n%organization%\\n%name%",KH:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",KI:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%REGION%\\n%CITY%\\n%COUNTRY%",KN:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%",KR:"%country%\\n%region% %city%\\n%street%\\n%organization%\\n%name%\\nSEOUL %POSTAL_CODE%",KW:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",KY:"%name%\\n%organization%\\n%street%\\n%region%\\n%country%",KZ:"%postal_code%\\n%country%\\n%region%\\n%city%\\n%street%\\n%organization%\\n%name%",LA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",LB:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",LI:"%organization%\\n%name%\\n%street%\\nFL-%postal_code% %city%\\n%country%",LK:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%\\n%postal_code%",LR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",LS:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",LT:"%organization%\\n%name%\\n%street%\\nLT-%postal_code% %city%\\n%country%",LU:"%organization%\\n%name%\\n%street%\\nL-%postal_code% %city%\\n%country%",LV:"%name%\\n%organization%\\n%street%\\n%city% %country%, %postal_code%",MA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MC:"%name%\\n%organization%\\n%street%\\nMC-%postal_code% %city%\\n%country%",MD:"%name%\\n%organization%\\n%street%\\nMD-%postal_code% %city%\\n%country%",ME:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MF:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",MG:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MH:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",MK:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MN:"%name%\\n%organization%\\n%street%\\n%region% %city%\\n%country%\\n%postal_code%",MO:"%street%\\n%organization%\\n%name%",MP:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",MQ:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",MT:"%name%\\n%organization%\\n%street%\\n%CITY% %POSTAL_CODE%\\n%COUNTRY%",MU:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE%\\n%CITY%\\n%COUNTRY%",MV:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",MW:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",MX:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE% %CITY%, %REGION%\\n%COUNTRY%",MY:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY%, %REGION%\\n%COUNTRY%",MZ:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",NC:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",NE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",NF:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %postal_code%",NG:"%name%\\n%organization%\\n%street%\\n%CITY% %postal_code%\\n%REGION%\\n%COUNTRY%",NI:"%name%\\n%organization%\\n%street%\\n%postal_code%\\n%CITY%, %REGION%\\n%COUNTRY%",NL:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",NO:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",NP:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",NR:"%name%\\n%organization%\\n%street%\\n%region%\\n%country%",NZ:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",OM:"%name%\\n%organization%\\n%street%\\n%postal_code%\\n%city%\\n%country%",PA:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%REGION%\\n%COUNTRY%",PF:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",PG:"%name%\\n%organization%\\n%street%\\n%city% %postal_code% %region%\\n%country%",PH:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%region%\\n%country%",PK:"%name%\\n%organization%\\n%street%\\n%city%-%postal_code%\\n%country%",PL:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",PM:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",PN:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",PR:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% PR %postal_code%\\n%COUNTRY%",PT:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",PW:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",PY:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",RE:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",RO:"%name%\\n%organization%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",RS:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",RU:"%postal_code% %COUNTRY% %CITY%\\n%STREET%\\n%organization%\\n%name%",SA:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",SC:"%name%\\n%organization%\\n%street%\\n%city%\\n%REGION%\\n%COUNTRY%",SE:"%organization%\\n%name%\\n%street%\\nSE-%postal_code% %city%\\n%country%",SG:"%name%\\n%organization%\\n%street%\\nSINGAPORE %postal_code%",SH:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",SI:"%name%\\n%organization%\\n%street%\\nSI- %postal_code% %city%\\n%country%",SJ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SK:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SM:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SN:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SO:"%name%\\n%organization%\\n%STREET%\\n%CITY%, %REGION% %COUNTRY% %postal_code%",SR:"%name%\\n%organization%\\n%STREET%\\n%city% %REGION%\\n%COUNTRY%",ST:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",SV:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE%-%CITY%\\n%REGION%\\n%COUNTRY%",SZ:"%name%\\n%organization%\\n%STREET%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",TC:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",TH:"%name%\\n%organization%\\n%street%\\n%city%\\n%REGION% %COUNTRY% %postal_code%",TJ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TM:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TN:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%/%region%\\n%country%",TV:"%name%\\n%organization%\\n%STREET%\\n%CITY%\\n%REGION%\\n%COUNTRY%",TW:"%postal_code%\\n%country%\\n%region%%city%\\n%street%\\n%organization%\\n%name%",UA:"%postal_code% %country% %city%\\n%street%\\n%organization%\\n%name%",UM:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",US:"%name%\\n%organization%\\n%street%\\n%CITY% %REGION_CODE% %COUNTRY_ISO2% %postal_code%",UY:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",UZ:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY%\\n%REGION%\\n%COUNTRY%",VA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",VE:"%name%\\n%organization%\\n%street%\\n%CITY% %postal_code%, %REGION%\\n%COUNTRY%",VG:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",VI:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",VN:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%",WF:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",YE:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",YT:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",ZA:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%\\n%postal_code%",ZM:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%"},name:{en:"%prefix% %first_name% %middle_name% %last_name% %suffix%",en_US:"%prefix% %first_name% %middle_name% %last_name% %suffix%",ru:"%last_name% %first_name% %middle_name%",ru_RU:"%last_name% %first_name% %middle_name%"}}}),define("oro/locale-settings",["underscore","oro/locale-settings/data"],function(e,t){var i={defaults:{locale:"en_US",language:"en",country:"US",currency:"USD",timezone:"UTC",timezone_offset:"+00:00"},settings:{locale:"en_US",language:"en",country:"US",currency:"USD",timezone:"UTC",timezone_offset:"+00:00",format_address_by_address_country:!0,locale_data:{US:{phone_prefix:"1",default_locale:"en_US",currency_code:"USD"}},currency_data:{USD:{symbol:"$"}},format:{datetime:{moment:{date:"YYYY-MM-DD",time:"HH:mms",datetime:"YYYY-MM-DD HH:mm"}},address:{US:"%name%\n%organization%\n%street%\n%CITY% %REGION% %COUNTRY% %postal_code%"},name:{en_US:"%prefix% %first_name% %middle_name% %last_name% %suffix%"}},calendar:{dow:{wide:{1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday"},abbreviated:{1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"},"short":{1:"Su",2:"Mo",3:"Tu",4:"We",5:"Th",6:"Fr",7:"Sa"},narrow:{1:"S",2:"M",3:"T",4:"W",5:"T",6:"F",7:"S"}},months:{wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"}},first_dow:1}},_deepExtend:function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=e.isObject(t[n])?this._deepExtend(t[n],i[n]):i[n]);
return t},extendSettings:function(e){this.settings=this._deepExtend(this.settings,e)},extendDefaults:function(e){this.defaults=this._deepExtend(this.defaults,e)},getLocale:function(){return this.settings.locale},getCountry:function(){return this.settings.country},getCurrency:function(){return this.settings.currency},getCurrencySymbol:function(e){return e||(e=this.settings.currency),this.settings.currency_data.hasOwnProperty(e)?this.settings.currency_data[e].symbol:e},getTimeZoneOffset:function(){return this.settings.timezone_offset},getNameFormats:function(){return this.settings.format.name},getAddressFormats:function(){return this.settings.format.address},getNumberFormats:function(e){return this.settings.format.number[e]},getCountryLocale:function(e){return this.getLocaleData(e,"default_locale")||this.settings.locale},getVendorDateTimeFormat:function(e,t,i){return this.settings.format.datetime.hasOwnProperty(e)?(t=t&&this.settings.format.datetime[e].hasOwnProperty(t)?t:"datetime",this.settings.format.datetime[e][t]):i},getLocaleData:function(e,t){return this.settings.locale_data.hasOwnProperty(e)?this.settings.locale_data[e][t]:null},isFormatAddressByAddressCountry:function(){return this.settings.format_address_by_address_country},getCalendarMonthNames:function(t,i){t=t&&this.settings.calendar.months.hasOwnProperty(t)?t:"wide";var n=this.settings.calendar.months[t];return i&&(n=e.map(n,function(e){return e})),n},getCalendarDayOfWeekNames:function(t,i){t=t&&this.settings.calendar.dow.hasOwnProperty(t)?t:"wide";var n=this.settings.calendar.dow[t];return i&&(n=e.map(n,function(e){return e})),n},getCalendarFirstDayOfWeek:function(){return this.settings.calendar.first_dow},getLocaleFallback:function(e){for(var t=[e,this.settings.locale,this.defaults.locale],i=function(e){return e?e.split("_")[0]:e},n=[],s=0;s<t.length;s++)t[s]&&(n.push(t[s]),n.push(i(t[s])));return n}};return i.extendSettings(t),i}),function(e,t){function i(t,i){var s,o,r,a=t.nodeName.toLowerCase();return"area"===a?(s=t.parentNode,o=s.name,t.href&&o&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+o+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(i,n,s){var o,r,a,l,c={},h=i.split(".")[0];i=i.split(".")[1],o=h+"-"+i,s||(s=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[h]=e[h]||{},r=e[h][i],a=e[h][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new a(e,i)},e.extend(a,r,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),l=new n,l.options=e.widget.extend({},l.options),e.each(s,function(i,s){return e.isFunction(s)?(c[i]=function(){var e=function(){return n.prototype[i].apply(this,arguments)},t=function(e){return n.prototype[i].apply(this,e)};return function(){var i,n=this._super,o=this._superApply;return this._super=e,this._superApply=t,i=s.apply(this,arguments),this._super=n,this._superApply=o,i}}(),t):(c[i]=s,t)}),a.prototype=e.widget.extend(l,{widgetEventPrefix:r?l.widgetEventPrefix:i},c,{constructor:a,namespace:h,widgetName:i,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete r._childConstructors):n._childConstructors.push(a),e.widget.bridge(i,a)},e.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==t&&(i[s]=e.isPlainObject(o)?e.isPlainObject(i[s])?e.widget.extend({},i[s],o):e.widget.extend({},o):o);return i},e.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,s=e.data(this,o);return s?e.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,l),n!==s&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(r||{})._init():e.data(this,o,new s(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=e.widget.extend({},this.options[i]),r=0;s.length-1>r;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,s){var o,r=this;"boolean"!=typeof i&&(s=n,n=i,i=!1),s?(n=o=e(n),this.bindings=this.bindings.add(n)):(s=n,n=this.element,o=this.widget()),e.each(s,function(s,a){function l(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):t}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||e.guid++);var c=s.match(/^(\w+)\s*(.*)$/),h=c[1]+r.eventNamespace,d=c[2];d?o.delegate(d,h,l):n.bind(h,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),r=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&e.effects&&e.effects.effect[a]?n[t](s):a!==t&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;return s.containment?"window"===s.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===s.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):s.containment.constructor===Array?(this.containment=s.containment,void 0):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),n=i[0],n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,s,o,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var o=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,o,r,a,l,c,h,d,u,f=e(this).data("ui-draggable"),p=f.options,g=p.snapTolerance,m=i.offset.left,v=m+f.helperProportions.width,_=i.offset.top,y=_+f.helperProportions.height;for(d=f.snapElements.length-1;d>=0;d--)a=f.snapElements[d].left,l=a+f.snapElements[d].width,c=f.snapElements[d].top,h=c+f.snapElements[d].height,a-g>v||m>l+g||c-g>y||_>h+g||!e.contains(f.snapElements[d].item.ownerDocument,f.snapElements[d].item)?(f.snapElements[d].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,t,e.extend(f._uiHash(),{snapItem:f.snapElements[d].item})),f.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(n=g>=Math.abs(c-y),s=g>=Math.abs(h-_),o=g>=Math.abs(a-v),r=g>=Math.abs(l-m),n&&(i.position.top=f._convertPositionTo("relative",{top:c-f.helperProportions.height,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:h,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a-f.helperProportions.width}).left-f.margins.left),r&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l}).left-f.margins.left)),u=n||s||o||r,"outer"!==p.snapMode&&(n=g>=Math.abs(c-_),s=g>=Math.abs(h-y),o=g>=Math.abs(a-m),r=g>=Math.abs(l-v),n&&(i.position.top=f._convertPositionTo("relative",{top:c,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:h-f.helperProportions.height,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a}).left-f.margins.left),r&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[d].snapping&&(n||s||o||r||u)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,t,e.extend(f._uiHash(),{snapItem:f.snapElements[d].item})),f.snapElements[d].snapping=n||s||o||r||u)
}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,s=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var s,o,r=(e.positionAbs||e.position.absolute).left,a=r+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,h=i.offset.left,d=h+i.proportions.width,u=i.offset.top,f=u+i.proportions.height;switch(n){case"fit":return r>=h&&d>=a&&l>=u&&f>=c;case"intersect":return r+e.helperProportions.width/2>h&&d>a-e.helperProportions.width/2&&l+e.helperProportions.height/2>u&&f>c-e.helperProportions.height/2;case"pointer":return s=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(o,u,i.proportions.height)&&t(s,h,i.proportions.width);case"touch":return(l>=u&&f>=l||c>=u&&f>=c||u>l&&c>f)&&(r>=h&&d>=r||a>=h&&d>=a||h>r&&a>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,s,o=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(s=0;a.length>s;s++)if(a[s]===o[n].element[0]){o[n].proportions.height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===r&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,r=e.ui.intersect(t,this,this.options.tolerance),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===s}),o.length&&(n=e.data(o[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,s,o,r=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)n=e.trim(t[i]),o="ui-resizable-"+n,s=e("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:a.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(t){var i,n,s,o;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(s,o),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,s=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(i){var n,s,o,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=t(this.helper.css("left")),s=t(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,s+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,h=this.size.height,d=t.pageX-o.left||0,u=t.pageY-o.top||0,f=this._change[r];return f?(i=f.apply(this,[t,d,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==c&&(s.width=this.size.width+"px"),this.size.height!==h&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,s,o,r,a,l,c=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&e.ui.hasScroll(i[0],"left")?0:h.sizeDiff.height,o=n?0:h.sizeDiff.width,r={width:h.helper.width()-o,height:h.helper.height()-s},a=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,s,o,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),s>r.minHeight&&(r.minHeight=s),r.maxWidth>n&&(r.maxWidth=n),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,s=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,s=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&h&&(e.left=l-t.minWidth),s&&h&&(e.left=l-t.maxWidth),a&&d&&(e.top=c-t.minHeight),o&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,s,o=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(s=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,h&&c?{top:h,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,s,o,r,a,l,c=e(this).data("ui-resizable"),h=c.options,d=c.element,u=h.containment,f=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;f&&(c.containerElement=e(f),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(f),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){n[e]=t(i.css("padding"+s))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},s=c.containerOffset,o=c.containerSize.height,r=c.containerSize.width,a=e.ui.hasScroll(f,"left")?f.scrollWidth:r,l=e.ui.hasScroll(f)?f.scrollHeight:o,c.parentData={element:f,left:s.left,top:s.top,width:a,height:l}))},resize:function(t){var i,n,s,o,r=e(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,h=r._aspectRatio||t.shiftKey,d={top:0,left:0},u=r.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),h&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),h&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,h&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,h&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,s=t.containerPosition,o=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),o={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,s=t.originalSize,o=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,h=Math.round((n.width-s.width)/l)*l,d=Math.round((n.height-s.height)/c)*c,u=s.width+h,f=s.height+d,p=i.maxWidth&&u>i.maxWidth,g=i.maxHeight&&f>i.maxHeight,m=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>f;i.grid=a,m&&(u+=l),v&&(f+=c),p&&(u-=l),g&&(f-=c),/^(se|s|e)$/.test(r)?(t.size.width=u,t.size.height=f):/^(ne)$/.test(r)?(t.size.width=u,t.size.height=f,t.position.top=o.top-d):/^(sw)$/.test(r)?(t.size.width=u,t.size.height=f,t.position.left=o.left-h):(t.size.width=u,t.size.height=f,t.position.top=o.top-d,t.position.left=o.left-h)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,s=e.data(this,"selectable-item");return s?(n=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],r=this.opos[1],a=t.pageX,l=t.pageY;return o>a&&(i=a,a=o,o=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:o,top:r,width:a-o,height:l-r}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?c=!(i.left>a||o>i.right||i.top>l||r>i.bottom):"fit"===s.tolerance&&(c=i.left>o&&a>i.right&&i.top>r&&l>i.bottom),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,s=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(n=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),n?!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s)?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,n){var s,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,s,o,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;
this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=e.left,r=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,h=this.offset.click.left,d="x"===this.options.axis||n+c>a&&l>n+c,u="y"===this.options.axis||t+h>o&&r>t+h,f=d&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:t+this.helperProportions.width/2>o&&r>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>s-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=i&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&i||"up"===s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,s,o,r=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(s=e(l[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,s,o,r,a,l,c,h=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(s=e(u[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=d.length-1;i>=0;i--)for(r=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",r),h.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",t.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(e,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var s,o,r,a,l,c,h,d,u,f,p=null,g=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(p&&e.contains(this.containers[s].element[0],p.element[0]))continue;p=this.containers[s],g=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",n,this._uiHash(this)),this.containers[s].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",n,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(r=1e4,a=null,f=p.floating||i(this.currentItem),l=f?"left":"top",c=f?"width":"height",h=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!f||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[l],u=!1,Math.abs(d-h)>Math.abs(d+this.items[o][c]-h)&&(u=!0,d+=this.items[o][c]),r>Math.abs(d-h)&&(r=Math.abs(d-h),a=this.items[o],this.direction=u?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[g].element,!0),this._trigger("change",n,this._uiHash()),this.containers[g]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",n,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],i=e(s.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i,n,s=this.options,o=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function n(i){var n=c(),s=n._rgba=[];return i=i.toLowerCase(),p(l,function(e,o){var r,a=o.re.exec(i),l=a&&o.parse(a),c=o.space||"rgba";return l?(r=n[c](l),n[h[c].cache]=r[h[c].cache],s=n._rgba=r._rgba,!1):t}),s.length?("0,0,0,0"===s.join()&&e.extend(s,o.transparent),n):o[i]}function s(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var o,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=c.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(h,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(s,r,a,l){if(s===t)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=e(s).css(r),r=t);var d=this,u=e.type(s),f=this._rgba=[];return r!==t&&(s=[s,r,a,l],u="array"),"string"===u?this.parse(n(s)||o._default):"array"===u?(p(h.rgba.props,function(e,t){f[t.idx]=i(s[t.idx],t)}),this):"object"===u?(s instanceof c?p(h,function(e,t){s[t.cache]&&(d[t.cache]=s[t.cache].slice())}):p(h,function(t,n){var o=n.cache;p(n.props,function(e,t){if(!d[o]&&n.to){if("alpha"===e||null==s[e])return;d[o]=n.to(d._rgba)}d[o][t.idx]=i(s[e],t,!0)}),d[o]&&0>e.inArray(null,d[o].slice(0,3))&&(d[o][3]=1,n.from&&(d._rgba=n.from(d[o])))}),this):t},is:function(e){var i=c(e),n=!0,s=this;return p(h,function(e,o){var r,a=i[o.cache];return a&&(r=s[o.cache]||o.to&&o.to(s._rgba)||[],p(o.props,function(e,i){return null!=a[i.idx]?n=a[i.idx]===r[i.idx]:t})),n}),n},_space:function(){var e=[],t=this;return p(h,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),s=n._space(),o=h[s],r=0===this.alpha()?c("transparent"):this,a=r[o.cache]||o.to(r._rgba),l=a.slice();return n=n[o.cache],p(o.props,function(e,s){var o=s.idx,r=a[o],c=n[o],h=d[s.type]||{};null!==c&&(null===r?l[o]=c:(h.mod&&(c-r>h.mod/2?r+=h.mod:r-c>h.mod/2&&(r-=h.mod)),l[o]=i((c-r)*t+r,s)))}),this[s](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,o=e[2]/255,r=e[3],a=Math.max(n,s,o),l=Math.min(n,s,o),c=a-l,h=a+l,d=.5*h;return t=l===a?0:n===a?60*(s-o)/c+360:s===a?60*(o-n)/c+120:60*(n-s)/c+240,i=0===c?0:.5>=d?c/h:c/(2-h),[Math.round(t)%360,i,d,null==r?1:r]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*s(a,r,t+1/3)),Math.round(255*s(a,r,t)),Math.round(255*s(a,r,t-1/3)),o]},p(h,function(n,s){var o=s.props,r=s.cache,l=s.to,h=s.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===t)return this[r].slice();var s,a=e.type(n),d="array"===a||"object"===a?n:arguments,u=this[r].slice();return p(o,function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),h?(s=c(h(u)),s[r]=u,s):c(u)},p(o,function(t,i){c.fn[t]||(c.fn[t]=function(s){var o,r=e.type(s),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),h=c[i.idx];return"undefined"===r?h:("function"===r&&(s=s.call(this,h),r=e.type(s)),null==s&&i.empty?this:("string"===r&&(o=a.exec(s),o&&(s=h+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=s,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={set:function(t,s){var o,r,a="";if("transparent"!==s&&("string"!==e.type(s)||(o=n(s)))){if(s=c(o||s),!u.rgba&&1!==s._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&r&&r.style;)try{a=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[e.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}function n(t,i){var n,s,r={};for(n in i)s=i[n],t[n]!==s&&(o[n]||(e.fx.step[n]||!isNaN(parseFloat(s)))&&(r[n]=s));return r}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,r,a){var l=e.speed(o,r,a);return this.queue(function(){var o,r=e(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}}),o=function(){e.each(s,function(e,i){t[i]&&r[i+"Class"](t[i])})},o(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(i,n,s,o){return n?e.effects.animateClass.call(this,{add:i},n,s,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,s,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,s,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,s,o,r,a){return"boolean"==typeof s||s===t?o?e.effects.animateClass.call(this,s?{add:n}:{remove:n},o,r,a):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},s,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,s,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,o)}})}(),function(){function n(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var s,o;for(o=0;n.length>o;o++)null!==n[o]&&(s=e.data(i+n[o]),s===t&&(s=""),e.css(n[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(r){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){var o=t.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(s[0]),e.isFunction(t)&&t()}var s=e(this),o=i.complete,a=i.mode;(s.is(":hidden")?"hide"===a:"show"===a)?(s[a](),n()):r.call(s[0],i,n)}var i=n.apply(this,arguments),s=i.mode,o=i.queue,r=e.effects.effect[i.effect];return e.fx.off||!r?s?this[s](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,s=n.heightStyle,o=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=r+"-header-"+t,i.attr("id",n)),o||(o=r+"-panel-"+t,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(i=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s[0]===n[0],r=o&&i.collapsible,a=r?e():s.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?e():s,newPanel:a};t.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=r?!1:this.headers.index(s),this.active=o?e():s,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,s){var o,r,a,l=this,c=0,h=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},u=h&&d.down||d,f=function(){l._toggleComplete(s)};return"number"==typeof u&&(a=u),"string"==typeof u&&(r=u),r=r||u.easing||d.easing,a=a||u.duration||d.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(i,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(n,{duration:a,easing:r,complete:f,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-t.outerHeight()-c),c=0)}}),void 0):t.animate(i,a,r,f):e.animate(n,a,r,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault(),void 0;if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i,n,s,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},c=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,a=this.options,h="checkbox"===this.type||"radio"===this.type,d=h?"":"ui-state-active",u="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(u)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(u)}),h&&(this.element.bind("change"+this.eventNamespace,function(){s||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(s=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(i!==e.pageX||n!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||s?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||s)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var t=r.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,r.document.one("mouseup",function(){t=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+r+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var o,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,s,o;n=t.nodeName.toLowerCase(),s="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),s),o.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):s&&this._inlineDatepicker(t,o)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,s,o,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:s,title:s}):s)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,o=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,n=0,s=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,n=s);return n},o.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,a){var l,c,h,d,u,f=this._dialogInst;return f||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},e.data(this._dialogInput[0],r,f)),s(f.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,f),this},_destroyDatepicker:function(t){var i,n=e(t),s=e.data(t,r);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var r,a,l,c,h=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):h?"all"===n?e.extend({},h.settings):this._get(h,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=o),h&&(this._curInst===h&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),s(h.settings,r),null!==l&&r.dateFormat!==t&&r.minDate===t&&(h.settings.minDate=this._formatDate(h,l)),null!==c&&r.dateFormat!==t&&r.maxDate===t&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),h),this._autoSize(h),this._setDate(h,a),this._updateAlternate(h),this._updateDatepicker(h)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,s,o=e.datepicker._getInst(t.target),r=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),s[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,s[0]),i=e.datepicker._get(o,"onSelect"),i?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");
break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var n,s,o=e.datepicker._getInst(i.target);return e.datepicker._get(o,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">s||!n||n.indexOf(s)>-1):t},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,o,r,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),o=n?n.apply(t,[t,i]):{},o!==!1&&(s(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),s=n[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,s,o,a=this._curInst;!a||t&&a!==e.data(t,r)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),s=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,s):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var s=e(t),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var s=e(t),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(t,i,n,s){var o,r=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(o=this._getInst(r[0]),o.selectedDay=o.currentDay=e("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,s=e(t),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,s,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),s=this.formatDate(i,n,this._getFormatConfig(t)),e(o).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,n,s){if(null==i||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var o,r,a,l,c=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,f=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,g=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,_=-1,y=-1,b=!1,w=function(e){var t=i.length>o+1&&i.charAt(o+1)===e;return t&&o++,t},x=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=RegExp("^\\d{1,"+i+"}"),o=n.substring(c).match(s);if(!o)throw"Missing number at position "+c;return c+=o[0].length,parseInt(o[0],10)},C=function(i,s,o){var r=-1,a=e.map(w(i)?o:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,i){var s=i[1];return n.substr(c,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],c+=s.length,!1):t}),-1!==r)return r+1;throw"Unknown name at position "+c},k=function(){if(n.charAt(c)!==i.charAt(o))throw"Unexpected literal at position "+c;c++};for(o=0;i.length>o;o++)if(b)"'"!==i.charAt(o)||w("'")?k():b=!1;else switch(i.charAt(o)){case"d":_=x("d");break;case"D":C("D",u,f);break;case"o":y=x("o");break;case"m":v=x("m");break;case"M":v=C("M",p,g);break;case"y":m=x("y");break;case"@":l=new Date(x("@")),m=l.getFullYear(),v=l.getMonth()+1,_=l.getDate();break;case"!":l=new Date((x("!")-this._ticksTo1970)/1e4),m=l.getFullYear(),v=l.getMonth()+1,_=l.getDate();break;case"'":w("'")?k():b=!0;break;default:k()}if(n.length>c&&(a=n.substr(c),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=m?0:-100)),y>-1)for(v=1,_=y;r=this._getDaysInMonth(m,v-1),!(r>=_);)v++,_-=r;if(l=this._daylightSavingAdjust(new Date(m,v-1,_)),l.getFullYear()!==m||l.getMonth()+1!==v||l.getDate()!==_)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},h=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",u=!1;if(t)for(n=0;e.length>n;n++)if(u)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):u=!1;else switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=h("D",t.getDay(),s,o);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=h("M",t.getMonth(),r,a);break;case"y":d+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":u=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,s=function(i){var n=e.length>t+1&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;e.length>t;t++)if(n)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),o=s,r=this._getFormatConfig(e);try{o=this.parseDate(i,n,r)||s}catch(a){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=s.getFullYear(),r=s.getMonth(),a=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,r))}c=l.exec(i)}return new Date(o,r,a)},r=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,o,r,a,l,c,h,d,u,f,p,g,m,v,_,y,b,w,x,C,k,T,S,D,M,j,E,F,A,O,N,I,P,z,R,$,L=new Date,H=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),q=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),B=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),Q=e.drawMonth-Y,et=e.drawYear;if(0>Q&&(Q+=12,et--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-V[0]*V[1]+1,Z.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(et,Q,1))>t;)Q--,0>Q&&(Q=11,et--);for(e.drawMonth=Q,e.drawYear=et,i=this._get(e,"prevText"),i=B?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Q-G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,et,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=B?this.formatDate(s,this._daylightSavingAdjust(new Date(et,Q+G,1)),this._getFormatConfig(e)):s,o=this._canAdjustMonth(e,1,et,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+s+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?X:H,r=B?this.formatDate(r,a,this._getFormatConfig(e)):r,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(q?"":l)+"</div>":"",h=parseInt(this._get(e,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(e,"showWeek"),u=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),b="",x=0;V[0]>x;x++){for(C="",this.maxRows=4,k=0;V[1]>k;k++){if(T=this._daylightSavingAdjust(new Date(et,Q,e.selectedDay)),S=" ui-corner-all",D="",K){if(D+="<div class='ui-datepicker-group",V[1]>1)switch(k){case 0:D+=" ui-datepicker-group-first",S=" ui-corner-"+(q?"right":"left");break;case V[1]-1:D+=" ui-datepicker-group-last",S=" ui-corner-"+(q?"left":"right");break;default:D+=" ui-datepicker-group-middle",S=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===x?q?o:n:"")+(/all|right/.test(S)&&0===x?q?n:o:"")+this._generateMonthYearHeader(e,Q,et,J,Z,x>0||k>0,p,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)j=(w+h)%7,M+="<th"+((w+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+u[j]+"'>"+f[j]+"</span></th>";for(D+=M+"</tr></thead><tbody>",E=this._getDaysInMonth(et,Q),et===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,E)),F=(this._getFirstDayOfMonth(et,Q)-h+7)%7,A=Math.ceil((F+E)/7),O=K?this.maxRows>A?this.maxRows:A:A,this.maxRows=O,N=this._daylightSavingAdjust(new Date(et,Q,1-F)),I=0;O>I;I++){for(D+="<tr>",P=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;7>w;w++)z=m?m.apply(e.input?e.input[0]:null,[N]):[!0,""],R=N.getMonth()!==Q,$=R&&!_||!z[0]||J&&J>N||Z&&N>Z,P+="<td class='"+((w+h+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(N.getTime()===T.getTime()&&Q===e.selectedMonth&&e._keyEvent||y.getTime()===N.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!v?"":" "+z[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(R&&!v||!z[2]?"":" title='"+z[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(R&&!v?"&#xa0;":$?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===H.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);D+=P+"</tr>"}Q++,Q>11&&(Q=0,et++),D+="</tbody></table>"+(K?"</div>"+(V[0]>0&&k===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=D}b+=C}return b+=c,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,s,o,r,a){var l,c,h,d,u,f,p,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(o||!m)b+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=s&&s.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!l||h>=n.getMonth())&&(!c||s.getMonth()>=h)&&(b+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+a[h]+"</option>");b+="</select>"}if(_||(y+=b+(!o&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),f=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},p=f(d[0]),g=Math.max(p,f(d[1]||"")),p=n?Math.max(p,n.getFullYear()):p,g=s?Math.min(g,s.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=p;p++)e.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),_&&(y+=(!o&&m&&v?"":"&#xa0;")+b),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),r=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!s||t.getTime()>=s.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!a||a>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,n){var s,o;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(t.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(s))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(s,o){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var s=this,o=!1,r={};e.each(n,function(e,n){s._setOption(e,n),e in t&&(o=!0),e in i&&(r[e]=n)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,n,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=s.is(":data(ui-resizable)"),n&&!t&&s.resizable("destroy"),n&&"string"==typeof t&&s.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),i={my:n[0]+(0>s[0]?s[0]:"+"+s[0])+" "+n[1]+(0>s[1]?s[1]:"+"+s[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,s){var o,r,a,l=e(this),c=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(l,n.mode||"hide"),d=n.direction||"up",u=t.test(d),f=u?"height":"width",p=u?"top":"left",g=i.test(d),m={},v="show"===h;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),o=e.effects.createWrapper(l).css({overflow:"hidden"}),r=o[f](),a=parseFloat(o.css(p))||0,m[f]=v?r:0,g||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),m[p]=v?a:r+a),v&&(o.css(f,0),g||o.css(p,a+r)),o.animate(m,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===h&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),s()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,s,o,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"effect"),c="hide"===l,h="show"===l,d=t.direction||"up",u=t.distance,f=t.times||5,p=2*f+(h||c?1:0),g=t.duration/p,m=t.easing,v="up"===d||"down"===d?"top":"left",_="up"===d||"left"===d,y=r.queue(),b=y.length;for((h||c)&&a.push("opacity"),e.effects.save(r,a),r.show(),e.effects.createWrapper(r),u||(u=r["top"===v?"outerHeight":"outerWidth"]()/3),h&&(o={opacity:1},o[v]=0,r.css("opacity",0).css(v,_?2*-u:2*u).animate(o,g,m)),c&&(u/=Math.pow(2,f-1)),o={},o[v]=0,n=0;f>n;n++)s={},s[v]=(_?"-=":"+=")+u,r.animate(s,g,m).animate(o,g,m),u=c?2*u:u/2;c&&(s={opacity:0},s[v]=(_?"-=":"+=")+u,r.animate(s,g,m)),r.queue(function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}),b>1&&y.splice.apply(y,[1,0].concat(y.splice(b,p+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,s,o,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"hide"),c="show"===l,h=t.direction||"vertical",d="vertical"===h,u=d?"height":"width",f=d?"top":"left",p={};e.effects.save(r,a),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),s="IMG"===r[0].tagName?n:r,o=s[u](),c&&(s.css(u,0),s.css(f,o/2)),p[u]=c?o:0,p[f]=c?0:o/2,s.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(s,t.mode||"hide"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",h="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(s,o),s.show(),e.effects.createWrapper(s),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(c,"pos"===h?-n:n),d[c]=(a?"pos"===h?"+=":"-=":"pos"===h?"-=":"+=")+n,s.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){y.push(this),y.length===d*u&&s()}function s(){f.css({visibility:"visible"}),e(y).remove(),g||f.hide(),i()}var o,r,a,l,c,h,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=d,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),g="show"===p,m=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/u),_=Math.ceil(f.outerHeight()/d),y=[];for(o=0;d>o;o++)for(l=m.top+o*_,h=o-(d-1)/2,r=0;u>r;r++)a=m.left+r*v,c=r-(u-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:a+(g?c*v:0),top:l+(g?h*_:0),opacity:g?0:1}).animate({left:a+(g?0:c*v),top:l+(g?0:h*_),opacity:g?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,s,o=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"hide"),l="show"===a,c="hide"===a,h=t.size||15,d=/([0-9]+)%/.exec(h),u=!!t.horizFirst,f=l!==u,p=f?["width","height"]:["height","width"],g=t.duration/2,m={},v={};e.effects.save(o,r),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),s=f?[n.width(),n.height()]:[n.height(),n.width()],d&&(h=parseInt(d[1],10)/100*s[c?0:1]),l&&n.css(u?{height:0,width:h}:{height:h,width:0}),m[p[0]]=l?s[0]:h,v[p[1]]=l?s[1]:0,n.animate(m,g,t.easing).animate(v,g,t.easing,function(){c&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),s=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===o&&(r.opacity=0),e.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,s),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,s=e(this),o=e.effects.setMode(s,t.mode||"show"),r="show"===o,a="hide"===o,l=r||"hide"===o,c=2*(t.times||5)+(l?1:0),h=t.duration/c,d=0,u=s.queue(),f=u.length;for((r||!s.is(":visible"))&&(s.css("opacity",0).show(),d=1),n=1;c>n;n++)s.animate({opacity:d},h,t.easing),d=1-d;s.animate({opacity:d},h,t.easing),s.queue(function(){a&&s.hide(),i()}),f>1&&u.splice.apply(u,[1,0].concat(u.splice(f,c+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"hide"),o="hide"===s,r=parseInt(t.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?r:100,from:o?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),s=e.extend(!0,{},t),o=e.effects.setMode(n,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},h={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),s.to={height:c.height*h.y,width:c.width*h.x,outerHeight:c.outerHeight*h.y,outerWidth:c.outerWidth*h.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},e.effects.effect.size=function(t,i){var n,s,o,r=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],h=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(r,t.mode||"effect"),p=t.restore||"effect"!==f,g=t.scale||"both",m=t.origin||["middle","center"],v=r.css("position"),_=p?a:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===f?(r.from=t.to||y,r.to=t.from||n):(r.from=t.from||("show"===f?y:n),r.to=t.to||("hide"===f?y:n)),o={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===g||"both"===g)&&(o.from.y!==o.to.y&&(_=_.concat(d),r.from=e.effects.setTransition(r,d,o.from.y,r.from),r.to=e.effects.setTransition(r,d,o.to.y,r.to)),o.from.x!==o.to.x&&(_=_.concat(u),r.from=e.effects.setTransition(r,u,o.from.x,r.from),r.to=e.effects.setTransition(r,u,o.to.x,r.to))),("content"===g||"both"===g)&&o.from.y!==o.to.y&&(_=_.concat(h).concat(c),r.from=e.effects.setTransition(r,h,o.from.y,r.from),r.to=e.effects.setTransition(r,h,o.to.y,r.to)),e.effects.save(r,_),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),m&&(s=e.effects.getBaseline(m,n),r.from.top=(n.outerHeight-r.outerHeight())*s.y,r.from.left=(n.outerWidth-r.outerWidth())*s.x,r.to.top=(n.outerHeight-r.to.outerHeight)*s.y,r.to.left=(n.outerWidth-r.to.outerWidth)*s.x),r.css(r.from),("content"===g||"both"===g)&&(d=d.concat(["marginTop","marginBottom"]).concat(h),u=u.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(u),r.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,c),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=e.effects.setTransition(i,d,o.from.y,i.from),i.to=e.effects.setTransition(i,d,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=e.effects.setTransition(i,u,o.from.x,i.from),i.to=e.effects.setTransition(i,u,o.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,c)})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===f&&r.hide(),e.effects.restore(r,_),p||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,i){var n=parseInt(i,10),s=e?r.to.left:r.to.top;return"auto"===i?s+"px":n+s+"px"})})),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(s,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,h=2*c+1,d=Math.round(t.duration/h),u="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},g={},m={},v=s.queue(),_=v.length;for(e.effects.save(s,o),s.show(),e.effects.createWrapper(s),p[u]=(f?"-=":"+=")+l,g[u]=(f?"+=":"-=")+2*l,m[u]=(f?"-=":"+=")+2*l,s.animate(p,d,t.easing),n=1;c>n;n++)s.animate(g,d,t.easing).animate(m,d,t.easing);s.animate(g,d,t.easing).animate(p,d/2,t.easing).queue(function(){"hide"===r&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,h+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(s,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",h="up"===l||"left"===l,d={};e.effects.save(s,o),s.show(),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(c,h?isNaN(n)?"-"+n:-n:n),d[c]=(a?h?"+=":"-=":h?"-=":"+=")+n,s.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),s=e(t.to),o="fixed"===s.css("position"),r=e("body"),a=o?r.scrollTop():0,l=o?r.scrollLeft():0,c=s.offset(),h={top:c.top-a,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},d=n.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(h,t.duration,t.easing,function(){u.remove(),i()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),o===s?r=!0:o=s+o,a=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),a=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,o,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-n-s}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,n,s;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,h=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return e("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var o,f,g,m,v,_,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),x=(t.collision||"flip").split(" "),C={};return _=s(y),y[0].preventDefault&&(t.at="left top"),f=_.width,g=_.height,m=_.offset,v=e.extend({},m),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?v.left+=f:"center"===t.at[0]&&(v.left+=f/2),"bottom"===t.at[1]?v.top+=g:"center"===t.at[1]&&(v.top+=g/2),o=i(C.at,f,g),v.left+=o[0],v.top+=o[1],this.each(function(){var s,c,h=e(this),d=h.outerWidth(),u=h.outerHeight(),p=n(this,"marginLeft"),_=n(this,"marginTop"),k=d+p+n(this,"marginRight")+w.width,T=u+_+n(this,"marginBottom")+w.height,S=e.extend({},v),D=i(C.my,h.outerWidth(),h.outerHeight());"right"===t.my[0]?S.left-=d:"center"===t.my[0]&&(S.left-=d/2),"bottom"===t.my[1]?S.top-=u:"center"===t.my[1]&&(S.top-=u/2),S.left+=D[0],S.top+=D[1],e.support.offsetFractions||(S.left=l(S.left),S.top=l(S.top)),s={marginLeft:p,marginTop:_},e.each(["left","top"],function(i,n){e.ui.position[x[i]]&&e.ui.position[x[i]][n](S,{targetWidth:f,targetHeight:g,elemWidth:d,elemHeight:u,collisionPosition:s,collisionWidth:k,collisionHeight:T,offset:[o[0]+D[0],o[1]+D[1]],my:t.my,at:t.at,within:b,elem:h})}),t.using&&(c=function(e){var i=m.left-S.left,n=i+f-d,s=m.top-S.top,o=s+g-u,l={target:{element:y,left:m.left,top:m.top,width:f,height:g},element:{element:h,left:S.left,top:S.top,width:d,height:u},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};d>f&&f>a(i+n)&&(l.horizontal="center"),u>g&&g>a(s+o)&&(l.vertical="middle"),l.important=r(a(i),a(n))>r(a(s),a(o))?"horizontal":"vertical",t.using.call(this,e,l)}),h.offset(e.extend(S,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-o-s;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-s,e.left+=l-i):e.left=c>0&&0>=l?s:l>c?s+o-t.collisionWidth:s:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-o-s;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-s,e.top+=l-i):e.top=c>0&&0>=l?s:l>c?s+o-t.collisionHeight:s:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,h=c-l,d=c+t.collisionWidth-r-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>h?(i=e.left+u+f+p+t.collisionWidth-r-o,(0>i||a(h)>i)&&(e.left+=u+f+p)):d>0&&(n=e.left-t.collisionPosition.marginLeft+u+f+p-l,(n>0||d>a(n))&&(e.left+=u+f+p))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,h=c-l,d=c+t.collisionHeight-r-l,u="top"===t.my[1],f=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];0>h?(n=e.top+f+p+g+t.collisionHeight-r-o,e.top+f+p+g>h&&(0>n||a(h)>n)&&(e.top+=f+p+g)):d>0&&(i=e.top-t.collisionPosition.marginTop+f+p+g-l,e.top+f+p+g>d&&(i>0||d>a(i))&&(e.top+=f+p+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(a),i=r||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=e(a).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()
},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;i>t;t++)r.push(o);this.handles=s.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,r,a,l,c,h=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-h.values(t));(s>i||s===i&&(t===h._lastChangedValue||h.values(t)===d.min))&&(s=i,o=e(this),r=t)}),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),h["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](h,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,s,o,r,a=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(r=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-r)}this._slide(i,a,o)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var s=i.attr(n);void 0!==s&&s.length&&(t[n]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&n.min>e?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var s=0,o=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,n=this.options.collapsible,s=location.hash.substring(1);return null===i&&(s&&this.tabs.each(function(n,o){return e(o).attr("aria-controls")===s?(i=n,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=n?!1:0)),!n&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(i){var n=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(n),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(s),t;case e.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),t;default:return}i.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,o),i.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function n(){return t>s&&(t=0),0>t&&(t=s),t}for(var s=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,i){return"active"===e?(this._activate(i),t):"disabled"===e?(this._setupDisabled(i),t):(this._super(e,i),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(i),"heightStyle"===e&&this._setupHeightStyle(i),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var o,r,a,l=e(s).uniqueId().attr("id"),c=e(s).closest("li"),h=c.attr("aria-controls");n(s)?(o=s.hash,r=t.element.find(t._sanitizeSelector(o))):(a=t._tabId(c),o="#"+a,r=t.element.find(o),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),h&&c.data("ui-tabs-aria-controls",h),c.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s.closest("li"),r=o[0]===n[0],a=r&&i.collapsible,l=a?e():this._getPanelForTab(o),c=n.length?this._getPanelForTab(n):e(),h={oldTab:n,oldPanel:c,newTab:a?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",t,h)===!1||(i.active=a?!1:this.tabs.index(o),this.active=r?e():o,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,h))},_toggle:function(t,i){function n(){o.running=!1,o._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&o.options.show?o._show(r,o.options.show,n):(r.show(),n())}var o=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var s=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),l={tab:o,panel:a};n(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,o){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=o),this._open(t,e,i)})}),i&&this._open(t,e,i),void 0)},_open:function(i,n,s){function o(e){c.of=e,r.is(":hidden")||r.position(c)}var r,a,l,c=e.extend({},this.options.position);
if(s){if(r=this._find(n),r.length)return r.find(".ui-tooltip-content").html(s),void 0;n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),t(n,r.attr("id")),r.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):r.position(e.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){r.is(":visible")&&(o(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),define("jquery-ui",["jquery"],function(){}),define("oro/jquery-ui-datepicker-l10n",["jquery","oro/translator","oro/locale-settings","jquery-ui"],function(e,t,i){var n=i.getLocale();e.datepicker.regional[n]={closeText:t("Done"),prevText:t("Prev"),nextText:t("Next"),currentText:t("Today"),monthNames:i.getCalendarMonthNames("wide",!0),monthNamesShort:i.getCalendarMonthNames("abbreviated",!0),dayNames:i.getCalendarDayOfWeekNames("wide",!0),dayNamesShort:i.getCalendarDayOfWeekNames("abbreviated",!0),dayNamesMin:i.getCalendarDayOfWeekNames("short",!0),weekHeader:t("Wk"),dateFormat:i.getVendorDateTimeFormat("jquery_ui","date","mm/dd/yy"),firstDay:i.getCalendarFirstDayOfWeek()-1},e.datepicker.setDefaults(e.datepicker.regional[n])}),function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.2"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showMillisec:!1,showTimezone:!1,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:!1,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneIso8601:!1,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec"],control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(e,t){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst):void 0},onChangeMonthYear:function(e,t,i){tp_inst._updateDateTime(i),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=o[i]||null);if(tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),"string"==typeof tp_inst._defaults.controlType?(void 0===$.fn[tp_inst._defaults.controlType]&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType,null===tp_inst._defaults.timezoneList){var timezoneList=["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"];tp_inst._defaults.timezoneIso8601&&(timezoneList=$.map(timezoneList,function(e){return"+0000"==e?"Z":e.substring(0,3)+":"+e.substring(3)})),tp_inst._defaults.timezoneList=timezoneList}return tp_inst.timezone=tp_inst._defaults.timezone,tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(s){return $.timepicker.log("Error parsing the date/time string: "+s+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var o=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return o?($.extend(this,o),!0):!1},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,n="",s="",o={},r={},a=null;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){for(var l=' style="display:none;"',c='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+'"><dl>'+'<dt class="ui_tpicker_time_label"'+(t.showTime?"":l)+">"+t.timeText+"</dt>"+'<dd class="ui_tpicker_time"'+(t.showTime?"":l)+"></dd>",h=0,d=this.units.length;d>h;h++){if(n=this.units[h],s=n.substr(0,1).toUpperCase()+n.substr(1),o[n]=parseInt(t[n+"Max"]-(t[n+"Max"]-t[n+"Min"])%t["step"+s],10),r[n]=0,c+='<dt class="ui_tpicker_'+n+'_label"'+(t["show"+s]?"":l)+">"+t[n+"Text"]+"</dt>"+'<dd class="ui_tpicker_'+n+'"><div class="ui_tpicker_'+n+'_slider"'+(t["show"+s]?"":l)+"></div>",t["show"+s]&&t[n+"Grid"]>0){if(c+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==n)for(var u=t[n+"Min"];u<=o[n];u+=parseInt(t[n+"Grid"],10)){r[n]++;var f=$.datepicker.formatTime(useAmpm(t.pickerTimeFormat||t.timeFormat)?"hht":"HH",{hour:u},t);c+='<td data-for="'+n+'">'+f+"</td>"}else for(var p=t[n+"Min"];p<=o[n];p+=parseInt(t[n+"Grid"],10))r[n]++,c+='<td data-for="'+n+'">'+(10>p?"0":"")+p+"</td>";c+="</tr></table></div>"}c+="</dd>"}c+='<dt class="ui_tpicker_timezone_label"'+(t.showTimezone?"":l)+">"+t.timezoneText+"</dt>",c+='<dd class="ui_tpicker_timezone" '+(t.showTimezone?"":l)+"></dd>",c+="</dl></div>";var g=$(c);t.timeOnly===!0&&(g.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div>"+"</div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());for(var h=0,d=i.units.length;d>h;h++)n=i.units[h],s=n.substr(0,1).toUpperCase()+n.substr(1),i[n+"_slider"]=i.control.create(i,g.find(".ui_tpicker_"+n+"_slider"),n,i[n],t[n+"Min"],o[n],t["step"+s]),t["show"+s]&&t[n+"Grid"]>0&&(a=100*r[n]*t[n+"Grid"]/(o[n]-t[n+"Min"]),g.find(".ui_tpicker_"+n+" table").css({width:a+"%",marginLeft:t.isRTL?"0":a/(-2*r[n])+"%",marginRight:t.isRTL?a/(-2*r[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var e=$(this),t=e.html(),s=parseInt(t.replace(/[^0-9]/g),10),o=t.replace(/[^apm]/gi),r=e.data("for");"hour"==r&&(-1!==o.indexOf("p")&&12>s?s+=12:-1!==o.indexOf("a")&&12===s&&(s=0)),i.control.value(i,i[r+"_slider"],n,s),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/r[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=g.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var m=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12),v=$.timepicker.timeZoneOffsetString(m);v==this.timezone?selectLocalTimeZone(i):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.defaultTimezone):selectLocalTimeZone(i);this.timezone_select.change(function(){i._defaults.useLocalTimezone=!1,i._onTimeChange(),i._onSelectHandler()});var _=e.find(".ui-datepicker-buttonpane");if(_.length?_.before(g):e.append(g),this.$timeObj=g.find(".ui_tpicker_time"),null!==this.inst){var y=this.timeDefined;this._onTimeChange(),this.timeDefined=y}if(this._defaults.addSliderAccess){var b=this._defaults.sliderAccessArgs,w=this._defaults.isRTL;b.isRTL=w,setTimeout(function(){if(0===g.find(".ui-slider-access").length){g.find(".ui-slider:visible").sliderAccess(b);var e=g.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&g.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),n=t.css(w?"marginRight":"marginLeft").toString().replace("%",""),s=i-e,o=n*s/i+"%",r={width:s,marginRight:0,marginLeft:0};r[w?"marginRight":"marginLeft"]=o,t.css(r)})}},10)}}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&n){var s=$.datepicker._get(e,"minDateTime"),o=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin),e.settings.timeOnly||o.getTime()==n.getTime()?(this._defaults.hourMin=s.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=s.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=s.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=s.getMilliseconds()):(this.millisec<this._defaults.millisecMin&&(this.millisec=this._defaults.millisecMin),this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&n){var r=$.datepicker._get(e,"maxDateTime"),a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax),e.settings.timeOnly||a.getTime()==n.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds()):(this.millisec>this._defaults.millisecMax&&(this.millisec=this._defaults.millisecMax),this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)}if(void 0!==t&&t===!0){var l=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),c=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),h=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),d=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:l}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:c}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:h}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:d}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec))}}},_onTimeChange:function(){var e=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,t=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,i=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,n=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,s=this.timezone_select?this.timezone_select.val():!1,o=this._defaults,r=o.pickerTimeFormat||o.timeFormat,a=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof s&&(s=!1),e!==!1&&(e=parseInt(e,10)),t!==!1&&(t=parseInt(t,10)),i!==!1&&(i=parseInt(i,10)),n!==!1&&(n=parseInt(n,10));var l=o[12>e?"amNames":"pmNames"][0],c=e!=this.hour||t!=this.minute||i!=this.second||n!=this.millisec||this.ampm.length>0&&12>e!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null===this.timezone&&s!=this.defaultTimezone||null!==this.timezone&&s!=this.timezone;c&&(e!==!1&&(this.hour=e),t!==!1&&(this.minute=t),i!==!1&&(this.second=i),n!==!1&&(this.millisec=n),s!==!1&&(this.timezone=s),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),useAmpm(o.timeFormat)&&(this.ampm=l),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(r===o.timeFormat?this.$timeObj.text(this.formattedTime+a):this.$timeObj.text($.datepicker.formatTime(r,this,o)+a)),this.timeDefined=!0,c&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=$.datepicker._daylightSavingAdjust(new Date(e.selectedYear,e.selectedMonth,e.selectedDay)),i=$.datepicker._get(e,"dateFormat"),n=$.datepicker._getFormatConfig(e),s=null!==t&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(i,null===t?new Date:t,n);var o=this.formattedDate;if(""==e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),this._defaults.timeOnly===!0?o=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||s)&&(o+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=o,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(o);var r="",a=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,l=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;r=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===t?new Date:t,n):this.formattedDate,r&&(r+=a),r+=this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+l:this.formattedTime+l,this.$altInput.val(r)}else this.$input.val(o);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!=e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(i){$.timepicker.log(i)}}},_controls:{slider:{create:function(e,t,i,n,s,o,r){var a=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:a?-1*n:n,min:a?-1*o:s,max:a?-1*s:o,step:r,slide:function(t,n){e.control.value(e,$(this),i,a?-1*n.value:n.value),e._onTimeChange()},stop:function(){e._onSelectHandler()}})},options:function(e,t,i,n,s){if(e._defaults.isRTL){if("string"==typeof n)return"min"==n||"max"==n?void 0!==s?t.slider(n,-1*s):Math.abs(t.slider(n)):t.slider(n);var o=n.min,r=n.max;return n.min=n.max=null,void 0!==o&&(n.max=-1*o),void 0!==r&&(n.min=-1*r),t.slider(n)}return"string"==typeof n&&void 0!==s?t.slider(n,s):t.slider(n)},value:function(e,t,i,n){return e._defaults.isRTL?void 0!==n?t.slider("value",-1*n):Math.abs(t.slider("value")):void 0!==n?t.slider("value",n):t.slider("value")}},select:{create:function(e,t,i,n,s,o,r){var a='<select class="ui-timepicker-select" data-unit="'+i+'" data-min="'+s+'" data-max="'+o+'" data-step="'+r+'">';-1!==e._defaults.timeFormat.indexOf("t")?"toLowerCase":"toUpperCase";for(var l=s;o>=l;l+=r)a+='<option value="'+l+'"'+(l==n?" selected":"")+">",a+="hour"==i&&useAmpm(e._defaults.pickerTimeFormat||e._defaults.timeFormat)?$.datepicker.formatTime("hh TT",{hour:l},e._defaults):"millisec"==i||l>=10?l:"0"+l.toString(),a+="</option>";return a+="</select>",t.children("select").remove(),$(a).appendTo(t).change(function(){e._onTimeChange(),e._onSelectHandler()}),t},options:function(e,t,i,n,s){var o={},r=t.children("select");if("string"==typeof n){if(void 0===s)return r.data(n);o[n]=s}else o=n;return e.control.create(e,t,r.data("unit"),r.val(),o.min||r.data("min"),o.max||r.data("max"),o.step||r.data("step"))},value:function(e,t,i,n){var s=t.children("select");return void 0!==n?s.val(n):s.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"==e?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,n,s){var o=parseDateTimeInternal(e,t,i,n,s);if(o.timeObj){var r=o.timeObj;o.date.setHours(r.hour,r.minute,r.second,r.millisec)}return o.date},$.datepicker.parseTime=function(e,t,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),s=function(e,t,i){var n,s=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},o=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1==i[t[n].toString().charAt(0)]&&(i[t[n].toString().charAt(0)]=n+1);return i},r="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return s(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",a=o(e),l="";n=t.match(new RegExp(r,"i"));var c={hour:0,minute:0,second:0,millisec:0};if(n){if(-1!==a.t&&(void 0===n[a.t]||0===n[a.t].length?(l="",c.ampm=""):(l=-1!==$.inArray(n[a.t].toUpperCase(),i.amNames)?"AM":"PM",c.ampm=i["AM"==l?"amNames":"pmNames"][0])),-1!==a.h&&(c.hour="AM"==l&&"12"==n[a.h]?0:"PM"==l&&"12"!=n[a.h]?parseInt(n[a.h],10)+12:Number(n[a.h])),-1!==a.m&&(c.minute=Number(n[a.m])),-1!==a.s&&(c.second=Number(n[a.s])),-1!==a.l&&(c.millisec=Number(n[a.l])),-1!==a.z&&void 0!==n[a.z]){var h=n[a.z].toUpperCase();switch(h.length){case 1:h=i.timezoneIso8601?"Z":"+0000";break;case 5:i.timezoneIso8601&&(h="0000"==h.substring(1)?"Z":h.substring(0,3)+":"+h.substring(3));break;case 6:i.timezoneIso8601?"00:00"==h.substring(1)&&(h="Z"):h="Z"==h||"00:00"==h.substring(1)?"+0000":h.replace(/:/,"")}c.timezone=h}return c}return!1},o=function(e,t,i){try{var n=new Date("2012-01-01 "+t);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+t),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+t),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),timezone:$.timepicker.timeZoneOffsetString(n)}}catch(o){try{return s(e,t,i)}catch(r){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1};return"function"==typeof n.parse?n.parse(e,t,n):"loose"===n.parse?o(e,t,n):s(e,t,n)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},t);var n=e,s=i.amNames[0],o=parseInt(t.hour,10);return o>11&&(s=i.pmNames[0]),n=n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g,function(e){switch(e){case"HH":return("0"+o).slice(-2);case"H":return o;case"hh":return("0"+convert24to12(o)).slice(-2);case"h":return convert24to12(o);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"z":return null===t.timezone?i.defaultTimezone:t.timezone;case"T":return s.charAt(0).toUpperCase();case"TT":return s.toUpperCase();case"t":return s.charAt(0).toLowerCase();case"tt":return s.toLowerCase();default:return e.replace(/\'/g,"")||"'"}}),n=$.trim(n)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i=this._getInst($(e)[0]),n=this._get(i,"timepicker");n?(n._limitMinMaxDateTime(i,!0),i.inline=i.stay_open=!0,this._base_selectDate(e,t),i.inline=i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t||"boolean"==typeof e.stay_open&&e.stay_open!==!1)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var n=useAmpm(i._defaults.timeFormat),s=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),o=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(i._defaults.showTimezone?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+s,r=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||" ">r||!s||o.indexOf(r)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var n=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),s=$.datepicker._getFormatConfig(e),o="",r=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,a=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;o+=$.datepicker.formatTime(l,t,t._defaults)+a,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(o=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,n,s)+r+o:t.formattedDate+r+o),$(i).val(o)}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!=t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(n){$.timepicker.log(n)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=t.dpDiv;this._base_gotoToday(e);var n=this._get(t,"timepicker");selectLocalTimeZone(n);var s=new Date;this._setTime(t,s),$(".ui-datepicker-today",i).click()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var n=i._defaults;i.hour=t?t.getHours():n.hour,i.minute=t?t.getMinutes():n.minute,i.second=t?t.getSeconds():n.second,i.millisec=t?t.getMilliseconds():n.millisec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var n=this._getInst(e);if(n){var s=this._get(n,"timepicker");if(s){this._setDateFromField(n);var o;t&&("string"==typeof t?(s._parseTime(t,i),o=new Date,o.setHours(s.hour,s.minute,s.second,s.millisec)):o=new Date(t.getTime()),"Invalid Date"==o.toString()&&(o=void 0),this._setTime(n,o))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=t instanceof Date?new Date(t.getTime()):t;this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,n,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker");if(n){void 0===i.lastVal&&this._setDateFromField(i,t);var s=this._getDate(i);return s&&n._parseTime($(e).val(),n.timeOnly)&&s.setHours(n.hour,n.minute,n.second,n.millisec),s}return this._base_getDateDatepicker(e,t)
}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var n;try{n=this._base_parseDate(e,t,i)}catch(s){n=this._base_parseDate(e,t.substring(0,t.length-(s.length-s.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+s+"\ndate string = "+t+"\ndate format = "+e)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e){var t=this._get(e,"timepicker");return t?(t._updateDateTime(e),t.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var n,s=this._getInst(e);if(!s)return null;var o=this._get(s,"timepicker");if(o){var r,a=null,l=null,c=null,h=o._defaults.evnts,d={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)a=i;else if("maxDate"===t||"maxDateTime"===t)l=i;else if("onSelect"===t)c=i;else if(h.hasOwnProperty(t)){if("undefined"==typeof i)return h[t];d[t]=i,n={}}}else if("object"==typeof t){t.minDate?a=t.minDate:t.minDateTime?a=t.minDateTime:t.maxDate?l=t.maxDate:t.maxDateTime&&(l=t.maxDateTime);for(r in h)h.hasOwnProperty(r)&&t[r]&&(d[r]=t[r])}for(r in d)d.hasOwnProperty(r)&&(h[r]=d[r],n||(n=$.extend({},t)),delete n[r]);if(n&&isEmptyObject(n))return;a?(a=0===a?new Date:new Date(a),o._defaults.minDate=a,o._defaults.minDateTime=a):l?(l=0===l?new Date:new Date(l),o._defaults.maxDate=l,o._defaults.maxDateTime=l):c&&(o._defaults.onSelect=c)}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,n||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(e))return!1;return!0},extendRemove=function(e,t){$.extend(e,t);for(var i in t)(null===t[i]||void 0===t[i])&&(e[i]=t[i]);return e},useAmpm=function(e){return-1!==e.indexOf("t")&&-1!==e.indexOf("h")},convert24to12=function(e){return e>12&&(e-=12),0==e&&(e=12),String(e)},splitDateTime=function(e,t,i,n){try{var s=n&&n.separator?n.separator:$.timepicker._defaults.separator,o=n&&n.timeFormat?n.timeFormat:$.timepicker._defaults.timeFormat,r=o.split(s),a=r.length,l=t.split(s),c=l.length;if(c>1)return[l.splice(0,c-a).join(s),l.splice(0,a).join(s)]}catch(h){if($.timepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+h+"\ndateTimeString"+t+"\ndateFormat = "+e+"\nseparator = "+n.separator+"\ntimeFormat = "+n.timeFormat),h.indexOf(":")>=0){var d=t.length-(h.length-h.indexOf(":")-2);return t.substring(d),[$.trim(t.substring(0,d)),$.trim(t.substring(d))]}throw h}return[t,""]},parseDateTimeInternal=function(e,t,i,n,s){var o,r=splitDateTime(e,i,n,s);if(o=$.datepicker._base_parseDate(e,r[0],n),""!==r[1]){var a=r[1],l=$.datepicker.parseTime(t,a,s);if(null===l)throw"Wrong time format";return{date:o,timeObj:l}}return{date:o}},selectLocalTimeZone=function(e,t){if(e&&e.timezone_select){e._defaults.useLocalTimezone=!0;var i="undefined"!=typeof t?t:new Date,n=$.timepicker.timeZoneOffsetString(i);e._defaults.timezoneIso8601&&(n=n.substring(0,3)+":"+n.substring(3)),e.timezone_select.val(n)}};$.timepicker=new Timepicker,$.timepicker.timeZoneOffsetString=function(e){var t=-1*e.getTimezoneOffset(),i=t%60,n=(t-i)/60;return(t>=0?"+":"-")+("0"+(101*n).toString()).slice(-2)+("0"+(101*i).toString()).slice(-2)},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.dateTimeRange=function(e,t,i){$.timepicker.dateRange(e,t,i,"datetimepicker")},$.timepicker.dateRange=function(e,t,i,n){n=n||"datepicker",$.timepicker.handleRange(n,e,t,i)},$.timepicker.handleRange=function(e,t,i,n){function s(e,n,s){n.val()&&new Date(t.val())>new Date(i.val())&&n.val(s)}function o(t,i,n){if($(t).val()){var s=$(t)[e].call($(t),"getDate");s.getTime&&$(i)[e].call($(i),"option",n,s)}}return $.fn[e].call(t,$.extend({onClose:function(e){s(this,i,e)},onSelect:function(){o(this,i,"minDate")}},n,n.start)),$.fn[e].call(i,$.extend({onClose:function(e){s(this,t,e)},onSelect:function(){o(this,t,"maxDate")}},n,n.end)),"timepicker"!=e&&n.reformat&&$([t,i]).each(function(){var t=$(this)[e].call($(this),"option","dateFormat"),i=new Date($(this).val());$(this).val()&&i&&$(this).val($.datepicker.formatDate(t,i))}),s(t,i,t.val()),o(t,i,"minDate"),o(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(e){window.console&&console.log(e)},$.timepicker.version="1.2"}}(jQuery),define("jquery-ui-timepicker",["jquery-ui"],function(){}),define("oro/jquery-ui-timepicker-l10n",["jquery","oro/translator","oro/locale-settings","jquery-ui-timepicker"],function(e,t,i){var n=i.locale,s=i.getVendorDateTimeFormat("jquery_ui","datetime","").replace(i.getVendorDateTimeFormat("jquery_ui","date"),"").replace(i.getVendorDateTimeFormat("jquery_ui","time"),"");e.timepicker.regional[n]={currentText:t("Now"),closeText:t("Done"),amNames:[t("AM"),t("A")],pmNames:[t("PM"),t("P")],timeFormat:i.getVendorDateTimeFormat("jquery_ui","time","HH:mm"),timeSuffix:"",timeOnlyTitle:t("Choose Time"),timeText:t("Time"),hourText:t("Hour"),minuteText:t("Minute"),secondText:t("Second"),millisecText:t("Millisecond"),microsecText:t("Microsecond"),timezoneText:t("Time Zone"),defaultTimezone:i.getTimeZoneOffset().replace(":",""),separator:s},e.timepicker.setDefaults(e.timepicker.regional[n])}),function(e){e.fn.extend({outerHTML:function(t){if(!this.length)return null;if(void 0===t){var i,n=this.length?this[0]:this;return i=n.outerHTML?n.outerHTML:e(document.createElement("div")).append(e(n).clone()).html(),"string"==typeof i&&(i=e.trim(i)),i}if(!e.isFunction(t)){for(var s,o=e(this),r=[],a=e(t),l=0;l<o.length;l++){s=a.clone(!0),o.eq(l).replaceWith(s);for(var c=0;c<s.length;c++)r.push(s[c])}return r.length?e(r):null}this.each(function(i){var n=e(this);n.outerHTML(t.call(this,i,n.outerHTML()))})}})}(jQuery),define("jquery-outer-html",function(){}),function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),s=0,o=0,r=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(s=i.wheelDelta/120),i.detail&&(s=-i.detail/3),r=s,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(r=0,o=-1*s),void 0!==i.wheelDeltaY&&(r=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(o=-1*i.wheelDeltaX/120),n.unshift(t,s,o,r),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),define("jquery.mousewheel",["jquery"],function(){}),function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var n=t.decimal===!1?"":t.decimal||".",s=t.negative===!0?!0:!1;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",n).data("numeric.negative",s).data("numeric.callback",i).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),s=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==s&&"input"==this.nodeName.toLowerCase())return!0;if(13==s)return!1;var o=!1;if(t.ctrlKey&&97==s||t.ctrlKey&&65==s)return!0;if(t.ctrlKey&&120==s||t.ctrlKey&&88==s)return!0;if(t.ctrlKey&&99==s||t.ctrlKey&&67==s)return!0;if(t.ctrlKey&&122==s||t.ctrlKey&&90==s)return!0;if(t.ctrlKey&&118==s||t.ctrlKey&&86==s||t.shiftKey&&45==s)return!0;if(48>s||s>57){var r=e(this).val();if(0!==r.indexOf("-")&&n&&45==s&&(0===r.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&s==i.charCodeAt(0)&&-1!=r.indexOf(i)&&(o=!1),8!=s&&9!=s&&13!=s&&35!=s&&36!=s&&37!=s&&39!=s&&46!=s?o=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(o=!0,46==t.which&&(o=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(o=!0)),i&&s==i.charCodeAt(0)&&(o=-1==r.indexOf(i)?!0:!1)}else o=!0;return o},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),n=e.data(this,"numeric.decimal"),s=e.data(this,"numeric.negative");if(""!==n&&null!==n){var o=t.indexOf(n);0===o&&(this.value="0"+t),1==o&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var r=[0,1,2,3,4,5,6,7,8,9,"-",n],a=t.length,l=a-1;l>=0;l--){var c=t.charAt(l);0!==l&&"-"==c?t=t.substring(0,l)+t.substring(l+1):0!==l||s||"-"!=c||(t=t.substring(1));for(var h=!1,d=0;d<r.length;d++)if(c==r[d]){h=!0;break}h&&" "!=c||(t=t.substring(0,l)+t.substring(l+1))}var u=t.indexOf(n);if(u>0)for(var f=a-1;f>u;f--){var p=t.charAt(f);p==n&&(t=t.substring(0,f)+t.substring(f+1))}this.value=t,e.fn.setSelection(this,i)}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),n=this.value;if(""!==n){var s=new RegExp("^\\d+$|^\\d*"+t+"\\d+$");s.exec(n)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""===t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]),i.select()}else e.setSelectionRange&&(e.focus(),e.setSelectionRange(t[0],t[1]))}}(jQuery),define("jquery.numeric",["jquery"],function(){}),function(e,t){function i(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function n(e,t,i){var n,s;for(n in i)i.hasOwnProperty(n)&&(s=n.replace(/ |$/g,t.eventNamespace),e.bind(s,i[n]))}function s(e,t,i){n(e,i,{focus:function(){t.addClass(i.focusClass)},blur:function(){t.removeClass(i.focusClass),t.removeClass(i.activeClass)},mouseenter:function(){t.addClass(i.hoverClass)},mouseleave:function(){t.removeClass(i.hoverClass),t.removeClass(i.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(i.activeClass)},"mouseup touchend":function(){t.removeClass(i.activeClass)}})}function o(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function r(e,t,i){i?e.addClass(t):e.removeClass(t)}function a(e,t,i){var n="checked",s=t.is(":"+n);t.prop?t.prop(n,s):s?t.attr(n,n):t.removeAttr(n),r(e,i.checkedClass,s)}function l(e,t,i){r(e,i.disabledClass,t.is(":disabled"))}function c(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function h(t,n,s){var o,r,a;return s||(s={}),s=e.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},s),o=e("<div />"),r=e("<span />"),n.autoHide&&t.is(":hidden")&&"none"===t.css("display")&&o.hide(),s.divClass&&o.addClass(s.divClass),n.wrapperClass&&o.addClass(n.wrapperClass),s.spanClass&&r.addClass(s.spanClass),a=i(t,"id"),n.useID&&a&&i(o,"id",n.idPrefix+"-"+a),s.spanHtml&&r.html(s.spanHtml),o=c(t,o,s.divWrap),r=c(t,r,s.spanWrap),l(o,t,n),{div:o,span:r}}function d(t,i){var n;return i.wrapperClass?(n=e("<span />").addClass(i.wrapperClass),n=c(t,n,"wrap")):null}function u(){var t,i,n,s;return s="rgb(120,2,153)",i=e('<div style="width:0;height:0;color:'+s+'">'),e("body").append(i),n=i.get(0),t=window.getComputedStyle?window.getComputedStyle(n,"").color:(n.currentStyle||n.style||{}).color,i.remove(),t.replace(/ /g,"")!==s}function f(t){return t?e("<span />").text(t).html():""}function p(){return navigator.cpuClass&&!navigator.product}function g(){return void 0!==window.XMLHttpRequest?!0:!1}function m(e){var t;return e[0].multiple?!0:(t=i(e,"size"),!t||1>=t?!1:!0)}function v(){return!1}function _(e,t){var i="none";n(e,t,{"selectstart dragstart mousedown":v}),e.css({MozUserSelect:i,msUserSelect:i,webkitUserSelect:i,userSelect:i})}function y(e,t,i){var n=e.val();""===n?n=i.fileDefaultHtml:(n=n.split(/[\/\\]+/),n=n[n.length-1]),t.text(n)}function b(e,t,i){var n,s;for(n=[],e.each(function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])}),i();n.length;)s=n.pop(),s.el.style[s.name]=s.old}function w(e,t){var i;i=e.parents(),i.push(e[0]),i=i.not(":visible"),b(i,{visibility:"hidden",display:"block",position:"absolute"},t)}function x(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var C=!0,k=!1,T=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,t){var r,a,c,d,u;return a=t.submitDefaultHtml,e.is(":reset")&&(a=t.resetDefaultHtml),d=e.is("a, button")?function(){return e.html()||a}:function(){return f(i(e,"value"))||a},c=h(e,t,{divClass:t.buttonClass,spanHtml:d()}),r=c.div,s(e,r,t),u=!1,n(r,t,{"click touchend":function(){var t,n,s,o;u||e.is(":disabled")||(u=!0,e[0].dispatchEvent?(t=document.createEvent("MouseEvents"),t.initEvent("click",!0,!0),n=e[0].dispatchEvent(t),e.is("a")&&n&&(s=i(e,"target"),o=i(e,"href"),s&&"_self"!==s?window.open(o,s):document.location.href=o)):e.click(),u=!1)}}),_(r,t),{remove:function(){return r.after(e),r.remove(),e.unbind(t.eventNamespace),e},update:function(){o(r,t),l(r,e,t),e.detach(),c.span.html(d()).append(e)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,r,c;return i=h(e,t,{divClass:t.checkboxClass}),r=i.div,c=i.span,s(e,r,t),n(e,t,{"click touchend":function(){a(c,e,t)}}),a(c,e,t),{remove:x(e,t),update:function(){o(r,t),c.removeClass(t.checkedClass),a(c,e,t),l(r,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,r){function a(){y(t,f,r)}var d,u,f,g;return d=h(t,r,{divClass:r.fileClass,spanClass:r.fileButtonClass,spanHtml:r.fileButtonHtml,spanWrap:"after"}),u=d.div,g=d.span,f=e("<span />").html(r.fileDefaultHtml),f.addClass(r.filenameClass),f=c(t,f,"after"),i(t,"size")||i(t,"size",u.width()/10),s(t,u,r),a(),p()?n(t,r,{click:function(){t.trigger("change"),setTimeout(a,0)}}):n(t,r,{change:a}),_(f,r),_(g,r),{remove:function(){return f.remove(),g.remove(),t.unwrap().unbind(r.eventNamespace)},update:function(){o(u,r),y(t,f,r),l(u,t,r)}}}},{match:function(e){if(e.is("input")){var t=(" "+i(e,"type")+" ").toLowerCase(),n=" color date datetime datetime-local email month number password search tel text time url week ";return n.indexOf(t)>=0}return!1},apply:function(e,t){var n,o;return n=i(e,"type"),e.addClass(t.inputClass),o=d(e,t),s(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),o&&e.unwrap()},update:v}}},{match:function(e){return e.is(":radio")},apply:function(t,r){var c,d,u;return c=h(t,r,{divClass:r.radioClass}),d=c.div,u=c.span,s(t,d,r),n(t,r,{"click touchend":function(){e.uniform.update(e(':radio[name="'+i(t,"name")+'"]'))}}),a(u,t,r),{remove:x(t,r),update:function(){o(d,r),a(u,t,r),l(d,t,r)}}}},{match:function(e){return e.is("select")&&!m(e)?!0:!1},apply:function(t,i){var r,a,c,d;return i.selectAutoWidth&&w(t,function(){d=t.width()}),r=h(t,i,{divClass:i.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),a=r.div,c=r.span,i.selectAutoWidth?w(t,function(){b(e([c[0],a[0]]),{display:"block"},function(){var e;e=c.outerWidth()-c.width(),a.width(d+e),c.width(d)})}):a.addClass("fixedWidth"),s(t,a,i),n(t,i,{change:function(){c.html(t.find(":selected").html()),a.removeClass(i.activeClass)},"click touchend":function(){var e=t.find(":selected").html();c.html()!==e&&t.trigger("change")},keyup:function(){c.html(t.find(":selected").html())}}),_(c,i),{remove:function(){return c.remove(),t.unwrap().unbind(i.eventNamespace),t},update:function(){i.selectAutoWidth?(e.uniform.restore(t),t.uniform(i)):(o(a,i),c.html(t.find(":selected").html()),l(a,t,i))}}}},{match:function(e){return e.is("select")&&m(e)?!0:!1},apply:function(e,t){var i;return e.addClass(t.selectMultiClass),i=d(e,t),s(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),i&&e.unwrap()},update:v}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var i;return e.addClass(t.textareaClass),i=d(e,t),s(e,e,t),{remove:function(){e.removeClass(t.textareaClass),i&&e.unwrap()},update:v}}}];p()&&!g()&&(C=!1),e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},e.fn.uniform=function(t){var i=this;return t=e.extend({},e.uniform.defaults,t),k||(k=!0,u()&&(C=!1)),C?(t.resetSelector&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(i)},10)}),this.each(function(){var i,n,s,o=e(this);if(o.data("uniformed"))return e.uniform.update(o),void 0;for(i=0;T.length>i;i+=1)if(n=T[i],n.match(o,t))return s=n.apply(o,t),o.data("uniformed",s),e.uniform.elements.push(o.get(0)),void 0})):this},e.uniform.restore=e.fn.uniform.restore=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i,n=e(this);i=n.data("uniformed"),i&&(i.remove(),t=e.inArray(this,e.uniform.elements),t>=0&&e.uniform.elements.splice(t,1),n.removeData("uniformed"))})},e.uniform.update=e.fn.uniform.update=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i=e(this);t=i.data("uniformed"),t&&t.update(i,t.options)})}}(jQuery),define("jquery.uniform",["jquery"],function(){}),function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var i=e([0]),n=-1,s=this.length;++n<s&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){function i(e,t){for(var i=0,n=t.length;n>i;i+=1)if(s(e,t[i]))return i;return-1}function n(){var t=e(z);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function s(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function o(t,i){var n,s,o;if(null===t||t.length<1)return[];for(n=t.split(i),s=0,o=n.length;o>s;s+=1)n[s]=e.trim(n[s]);return n}function r(e){return e.outerWidth(!1)-e.width()}function a(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var s=e.data(i,n);s!==t&&i.val()!==s&&(e.removeData(i,n),i.trigger("keyup-change"))})}function l(i){i.on("mousemove",function(i){var n=P;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function c(e,i,n){n=n||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){i.apply(n,t)},e)}}function h(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function d(e,t){var n=c(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function u(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var s=document.selection.createRange();n=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),i=s.text.length-n}return{offset:i,length:n}}function p(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function m(t){if(!O){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);O=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),O.attr("class","select2-sizer"),e("body").append(O)}return O.text(t.val()),O.width()}function v(t,i,n){var s,o,r=[];s=t.attr("class"),s&&(s=""+s,e(s.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=i.attr("class"),s&&(s=""+s,e(s.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=n(this),o&&r.push(this))})),t.attr("class",r.join(" "))}function _(e,t,i,n){var s=e.toUpperCase().indexOf(t.toUpperCase()),o=t.length;return 0>s?(i.push(n(e)),void 0):(i.push(n(e.substring(0,s))),i.push("<span class='select2-match'>"),i.push(n(e.substring(s,s+o))),i.push("</span>"),i.push(n(e.substring(s+o,e.length))),void 0)}function y(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function b(i){var n,s=0,o=null,r=i.quietMillis||100,a=i.url,l=this;return function(c){window.clearTimeout(n),n=window.setTimeout(function(){s+=1;var n=s,r=i.data,h=a,d=i.transport||e.fn.select2.ajaxDefaults.transport,u={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},f=e.extend({},e.fn.select2.ajaxDefaults.params,u);r=r?r.call(l,c.term,c.page,c.context):null,h="function"==typeof h?h.call(l,c.term,c.page,c.context):h,o&&o.abort(),i.params&&(e.isFunction(i.params)?e.extend(f,i.params.call(l)):e.extend(f,i.params)),e.extend(f,{url:h,dataType:i.dataType,data:r,success:function(e){if(!(s>n)){var t=i.results(e,c.page);c.callback(t)}}}),o=d.call(l,f)},r)}}function w(t){var i,n,s=t,o=function(e){return""+e.text};e.isArray(s)&&(n=s,s={results:n}),e.isFunction(s)===!1&&(n=s,s=function(){return n});var r=s();return r.text&&(o=r.text,e.isFunction(o)||(i=r.text,o=function(e){return e[i]})),function(t){var i,n=t.term,r={results:[]};return""===n?(t.callback(s()),void 0):(i=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],e(s.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,o(a),s))&&r.push(a)}else t.matcher(n,o(s),s)&&r.push(s)},e(s().results).each2(function(e,t){i(t,r.results)}),t.callback(r),void 0)}}function x(i){var n=e.isFunction(i);return function(s){var o=s.term,r={results:[]};e(n?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||s.matcher(o,i))&&r.results.push(e?this:{id:this,text:this})}),s.callback(r)}}function C(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function k(t){return e.isFunction(t)?t():t}function T(t){var i=0;return e.each(t,function(e,t){t.children?i+=T(t.children):i++}),i}function S(e,i,n,o){var r,a,l,c,h,d=e,u=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(h=o.tokenSeparators[l],a=e.indexOf(h),!(a>=0));l++);if(0>a)break;if(r=e.substring(0,a),e=e.substring(a+h.length),r.length>0&&(r=o.createSearchChoice.call(this,r,i),r!==t&&null!==r&&o.id(r)!==t&&null!==o.id(r))){for(u=!1,l=0,c=i.length;c>l;l++)if(s(o.id(r),o.id(i[l]))){u=!0;break}u||n(r)}}return d!==e?e:void 0}function D(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var M,j,E,F,A,O,N,I,P={x:0,y:0},M={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},z="<div class='select2-measure-scrollbar'></div>";N=e(document),A=function(){var e=1;return function(){return e++}}(),N.on("mousemove",function(e){P.x=e.pageX,P.y=e.pageY}),j=D(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var s,o,r,c,u=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+A()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=h(function(){return i.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(k(i.containerCss)),this.container.addClass(k(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(k(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=s=this.container.find(u),this.search=o=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",u,this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.on("scroll-debounced",u,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&s.mousewheel(function(e,t,i,n){var o=s.scrollTop();n>0&&0>=o-n?(s.scrollTop(0),p(e)):0>n&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),p(e))}),a(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",u,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var r=i.element.prop("disabled");r===t&&(r=!1),this.enable(!r);var c=i.element.prop("readonly");c===t&&(c=!1),this.readonly(c),I=I||n(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element,i=e.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:s(e.attr("locked"),"locked")||s(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,r,a,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=r=i.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,s,o){var r,a=this.opts.id;r=function(n,s,l){var h,d,u,f,p,g,m,v,_,y;for(n=i.sortResults(n,s,o),h=0,d=n.length;d>h;h+=1)u=n[h],p=u.disabled===!0,f=!p&&a(u)!==t,g=u.children&&u.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+l),m.addClass("select2-result"),m.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(u)),v=e(document.createElement("div")),v.addClass("select2-result-label"),y=i.formatResult(u,v,o,c.opts.escapeMarkup),y!==t&&v.html(y),m.append(v),g&&(_=e("<ul></ul>"),_.addClass("select2-result-sub"),r(u.children,_,l+1),m.append(_)),m.data("select2-data",u),s.append(m)},r(s,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(r?(i.query=this.bind(function(e){var i,s,o,r={results:[],more:!1},a=e.term;o=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){o(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(s=this.getPlaceholderOption(),s&&(i=i.not(s))),i.each2(function(e,t){o(t,r.results)}),e.callback(r)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=b.call(i.element,i.ajax)):"data"in i?i.query=w(i.data):"tags"in i&&(i.query=x(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(e){return{id:e,text:e}}),i.initSelection===t&&(i.initSelection=function(t,n){var r=[];e(o(t.val(),i.separator)).each(function(){var t=this,n=this,o=i.tags;e.isFunction(o)&&(o=o()),e(o).each(function(){return s(this.id,t)?(n=this.text,!1):void 0}),r.push({id:t,text:n})}),n(r)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,n=i.prop("disabled");n===t&&(n=!1),this.enable(!n);var e=i.prop("readonly");e===t&&(e=!1),this.readonly(e),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass))}),i.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()
},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,s,o=this.dropdown,r=this.container.offset(),a=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=o.outerHeight(!1),h=e(window).scrollLeft()+e(window).width(),d=e(window).scrollTop()+e(window).height(),u=r.top+a,f=r.left,p=d>=u+c,g=r.top-c>=this.body().scrollTop(),m=o.outerWidth(!1),v=h>=f+m,_=o.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(s=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),m=o.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:I.width),m>l?l=m:m=l,v=h>=f+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),u-=t.top,f-=t.left),_?(i=!0,!g&&p&&(i=!1)):(i=!1,!p&&g&&(i=!0)),v||(f=r.left+l-m),i?(u=r.top-c,this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),n=e.extend({top:u,left:f,width:l},k(this.opts.dropdownCss)),o.css(n)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var i,n,s=this.containerId,o="scroll."+s,r="resize."+s,a="orientationchange."+s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),i=e("#select2-drop-mask"),0==i.length&&(i=e(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.on("mousedown touchstart click",function(t){var i,n=e("#select2-drop");n.length>0&&(i=n.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n=t(),i.css(n).show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var l=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+o+" "+a,function(){var i=t();e("#select2-drop-mask").css(i),l.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,n,s,o,r,a,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),s=n.offset().top+n.outerHeight(!0),i===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),s>o&&l.scrollTop(l.scrollTop()+(s-o)),r=n.offset().top-l.offset().top,0>r&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var s=e(i[n]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var n,s,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),n=e(o[t]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),s=n.data("select2-data"),s&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,s=this,o=this.search.val(),r=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{term:o,page:n,context:r}),s.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(s.opts.formatLoadMore(n+1)),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):i.remove(),s.positionDropdown(),s.resultsPage=n,s.context=e.context)})})))},tokenize:function(){},updateResults:function(i){function n(){l.removeClass("select2-active"),d.positionDropdown()}function o(e){c.html(e),n()}var r,a,l=this.search,c=this.results,h=this.opts,d=this,u=l.val(),f=e.data(this.container,"select2-last-term");if((i===!0||!f||!s(u,f))&&(e.data(this.container,"select2-last-term",u),i===!0||this.showSearchInput!==!1&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(r=this.data(),e.isArray(r)&&r.length>=p&&C(h.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(p)+"</li>"),void 0;if(l.val().length<h.minimumInputLength)return C(h.formatInputTooShort,"formatInputTooShort")?o("<li class='select2-no-results'>"+h.formatInputTooShort(l.val(),h.minimumInputLength)+"</li>"):o(""),i&&this.showSearch&&this.showSearch(!0),void 0;if(h.maximumInputLength&&l.val().length>h.maximumInputLength)return C(h.formatInputTooLong,"formatInputTooLong")?o("<li class='select2-no-results'>"+h.formatInputTooLong(l.val(),h.maximumInputLength)+"</li>"):o(""),void 0;h.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+h.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=t&&null!=a&&l.val(a),this.resultsPage=1,h.query({element:h.element,term:l.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(r){var a;return this.opened()?(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(d,l.val(),r.results),a!==t&&null!==a&&d.id(a)!==t&&null!==d.id(a)&&0===e(r.results).filter(function(){return s(d.id(this),d.id(a))}).length&&r.results.unshift(a)),0===r.results.length&&C(h.formatNoMatches,"formatNoMatches")?(o("<li class='select2-no-results'>"+h.formatNoMatches(l.val())+"</li>"),void 0):(c.empty(),d.opts.populateResults.call(this,c,r.results,{term:l.val(),page:this.resultsPage,context:null}),r.more===!0&&C(h.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),n(),this.opts.element.trigger({type:"select2-loaded",items:r}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){u(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children().first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function i(){var i,n,s,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),o=0,r=n.length;r>o;o+=1)if(s=n[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==s&&s.length>=1)return s[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),E=D(j,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(n=this.search.val().length,t.setSelectionRange(n,n)),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,i=this.container,n=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+A()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)return p(e),void 0;switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),p(e),void 0;case M.ENTER:return this.selectHighlighted(),p(e),void 0;case M.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case M.ESC:return this.cancel(e),p(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.ESC){if(this.opts.openOnEnter===!1&&e.which===M.ENTER)return p(e),void 0;if(e.which==M.DOWN||e.which==M.UP||e.which==M.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),p(e),void 0}return e.which==M.DELETE||e.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),p(e),void 0):void 0}})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(t)})),n.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){p(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");if(t){var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return(e=this.getPlaceholderOption())!==t&&e.is(":selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find(":selected");t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var o=i.val(),r=null;t.query({matcher:function(e,i,n){var a=s(o,t.id(n));return a&&(r=n),a},callback:e.isFunction(n)?function(){n(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){return s(o.id(t.data("select2-data")),o.opts.element.val())?(n=e,!1):void 0}),i!==!1&&(t===!0&&n>=0?this.highlight(n):this.highlight(0)),t===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(T(e.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),s(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),i=this.opts.formatSelection(e,s,this.opts.escapeMarkup),i!==t&&s.append(i),n=this.opts.formatSelectionCssClass(e,s),n!==t&&s.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,s=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return n=s.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:o});else{if(!e&&0!==e)return this.clear(i),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),i&&s.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,i){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(e&&""!==e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i),void 0)}}),F=D(j,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find(":selected").each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var r=o(i.val(),t.separator),a=[];t.query({matcher:function(i,n,o){var l=e.grep(r,function(e){return s(e,t.id(o))}).length;return l&&a.push(o),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<r.length;i++)for(var o=r[i],l=0;l<a.length;l++){var c=a[l];if(s(o,t.id(c))){e.push(c),a.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("mousedown",".select2-search-choice",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+A()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),s=i.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(i.length&&(e.which==M.LEFT||e.which==M.RIGHT||e.which==M.BACKSPACE||e.which==M.DELETE||e.which==M.ENTER)){var r=i;return e.which==M.LEFT&&n.length?r=n:e.which==M.RIGHT?r=s.length?s:null:e.which===M.BACKSPACE?(this.unselect(i.first()),this.search.width(10),r=n.length?n:s):e.which==M.DELETE?(this.unselect(i.first()),this.search.width(10),r=s.length?s:null):e.which==M.ENTER&&(r=null),this.selectChoice(r),p(e),r&&r.length||this.open(),void 0}if((e.which===M.BACKSPACE&&1==this.keydowns||e.which==M.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),p(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),p(e),void 0;case M.ENTER:return this.selectHighlighted(),p(e),void 0;case M.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case M.ESC:return this.cancel(e),p(e),void 0}if(e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.BACKSPACE&&e.which!==M.ESC){if(e.which===M.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)&&p(e),e.which===M.ENTER&&p(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],s=[],o=this;e(t).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),s.push(this))}),t=s,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,s,o=!i.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?r:a,c=this.id(i),h=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),s=this.opts.formatSelectionCssClass(i,l.find("div")),s!=t&&l.addClass(s),o&&l.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),p(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),h.push(c),this.setVal(h)},unselect:function(e){var t,n,s=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(n=i(this.id(t),s),n>=0&&(s.splice(n,1),this.setVal(s),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,n){var s=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var n=a.id(t.data("select2-data"));i(n,s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&C(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var e,t,i,n,s,o=r(this.search);e=m(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,s=i-(t-n)-o,e>s&&(s=i-o),40>s&&(s=i-o),0>=s&&(s=e),this.search.width(s)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),o(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)s(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var s,o=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange({added:this.data(),removed:s}),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,o.id);o.setVal(i),o.updateSelection(t),o.clearSearch(),n&&o.triggerChange(this.buildChangeDetails(s,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,s,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),t||(t=[]),n=e.map(t,function(e){return o.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(s,this.data())),void 0)}}),e.fn.select2=function(){var n,s,o,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","readonly","positionDropdown","data","search"],h=["val","opened","isFocused","container","data"],d={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),s=a?new F:new E,s.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],c)<0)throw"Unknown method: "+l[0];
if(r=t,s=e(this).data("select2"),s===t)return;if(o=l[0],"container"===o?r=s.container:"dropdown"===o?r=s.dropdown:(d[o]&&(o=d[o]),r=s[o].apply(s,l.slice(1))),i(l[0],h)>=0)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var s=[];return _(e.text,i.term,s,n),s.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:S,escapeMarkup:y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:b,local:w,tags:x},util:{debounce:c,markMatch:_,escapeMarkup:y},"class":{"abstract":j,single:E,multi:F}}}}(jQuery),define("jquery.select2",["jquery"],function(){}),function(){if(!jQuery||!jQuery.jstree){var e=!1,t=!1,i=!1;!function(n){n.vakata={},n.vakata.css={get_css:function(e,t,i){e=e.toLowerCase();var n=i.cssRules||i.rules,s=0;do{if(n.length&&s>n.length+5)return!1;if(n[s].selectorText&&n[s].selectorText.toLowerCase()==e)return t===!0?(i.removeRule&&i.removeRule(s),i.deleteRule&&i.deleteRule(s),!0):n[s]}while(n[++s]);return!1},add_css:function(e,t){return n.jstree.css.get_css(e,!1,t)?!1:(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),n.vakata.css.get_css(e))},remove_css:function(e,t){return n.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,i=!0;if(e.str)return e.title&&(t=n("style[id='"+e.title+"-stylesheet']")[0]),t?i=!1:(t=document.createElement("style"),t.setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?i?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(s){}}}};var s=[],o=-1,r={},a={};n.fn.jstree=function(e){var t="string"==typeof e,i=Array.prototype.slice.call(arguments,1),o=this;if(t){if("_"==e.substring(0,1))return o;this.each(function(){var t=s[n.data(this,"jstree_instance_id")],r=t&&n.isFunction(t[e])?t[e].apply(t,i):t;return"undefined"!=typeof r&&(0===e.indexOf("is_")||r!==!0&&r!==!1)?(o=r,!1):void 0})}else this.each(function(){var t=n.data(this,"jstree_instance_id"),o=[],a=e?n.extend({},!0,e):{},l=n(this),c=!1,h=[];o=o.concat(i),l.data("jstree")&&o.push(l.data("jstree")),a=o.length?n.extend.apply(null,[!0,a].concat(o)):a,"undefined"!=typeof t&&s[t]&&s[t].destroy(),t=parseInt(s.push({}),10)-1,n.data(this,"jstree_instance_id",t),a.plugins=n.isArray(a.plugins)?a.plugins:n.jstree.defaults.plugins.slice(),a.plugins.unshift("core"),a.plugins=a.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),c=n.extend(!0,{},n.jstree.defaults,a),c.plugins=a.plugins,n.each(r,function(e){-1===n.inArray(e,c.plugins)?(c[e]=null,delete c[e]):h.push(e)}),c.plugins=h,s[t]=new n.jstree._instance(t,n(this).addClass("jstree jstree-"+t),c),n.each(s[t]._get_settings().plugins,function(e,i){s[t].data[i]={}}),n.each(s[t]._get_settings().plugins,function(e,i){r[i]&&r[i].__init.apply(s[t])}),setTimeout(function(){s[t]&&s[t].init()},0)});return o},n.jstree={defaults:{plugins:[]},_focused:function(){return s[o]||null},_reference:function(e){if(s[e])return s[e];var t=n(e);return t.length||"string"!=typeof e||(t=n("#"+e)),t.length?s[t.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(e,t,i){this.data={core:{}},this.get_settings=function(){return n.extend(!0,{},i)},this._get_settings=function(){return i},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){i=n.extend(!0,{},i,e)}},_fn:{},plugin:function(e,t){t=n.extend({},{__init:n.noop,__destroy:n.noop,_fn:{},defaults:!1},t),r[e]=t,n.jstree.defaults[e]=t.defaults,n.each(t._fn,function(t,i){i.plugin=e,i.old=n.jstree._fn[t],n.jstree._fn[t]=function(){var e,s=i,o=Array.prototype.slice.call(arguments),r=new n.Event("before.jstree"),a=!1;if(this.data.core.locked!==!0||"unlock"===t||"is_locked"===t){do{if(s&&s.plugin&&-1!==n.inArray(s.plugin,this._get_settings().plugins))break;s=s.old}while(s);if(s){if(0===t.indexOf("_"))e=s.apply(this,o);else{if(e=this.get_container().triggerHandler(r,{func:t,inst:this,args:o,plugin:s.plugin}),e===!1)return;"undefined"!=typeof e&&(o=e),e=s.apply(n.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:o,rslt:e,rlbk:a})},__rollback:function(){return a=this.get_rollback()},__call_old:function(e){return s.old.apply(this,e?Array.prototype.slice.call(arguments,1):o)}}),o)}return e}}},n.jstree._fn[t].old=i.old,n.jstree._fn[t].plugin=e})},rollback:function(e){e&&(n.isArray(e)||(e=[e]),n.each(e,function(e,t){s[t.i].set_rollback(t.h,t.d)}))}},n.jstree._fn=n.jstree._instance.prototype={},n(function(){var s=navigator.userAgent.toLowerCase(),o=(s.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(s)&&6==parseInt(o,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}r+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(s)&&7==parseInt(o,10)&&(t=!0,r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(s)&&/mozilla/.test(s)&&parseFloat(o,10)<1.9&&(i=!0,r+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),n.vakata.css.add_sheet({str:r,title:"jstree"})}),n.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",n.proxy(function(e){var t=n(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",n.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var e;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",n.proxy(function(e,t){var i=this._get_node(t.rslt.obj),s=this;-1===i&&(i=this.get_container_ul()),i.length&&i.find("li").each(function(){var e=n(this);e.data("jstree")&&n.each(e.data("jstree"),function(t,i){s.data[t]&&n.isFunction(s["_"+t+"_notify"])&&s["_"+t+"_notify"].call(s,e,i)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",n.proxy(function(e,t){var i=this._get_node(t.rslt.obj),s=this;-1===i&&(i=this.get_container_ul()),i.length&&i.find("li.jstree-open:not(:has(ul))").each(function(){s.load_node(this,n.noop,n.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),i=this._get_settings(),a=this;if(n.each(i.plugins,function(e,t){try{r[t].__destroy.apply(a)}catch(i){}}),this.__callback(),this.is_focused())for(e in s)if(s.hasOwnProperty(e)&&e!=t){s[e].set_focus();break}t===o&&(o=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),n(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),s[t]=null,delete s[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,i=!0,s=[],o=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=n.map(n.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=n.map(n.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(n.each(this.data.core.to_load,function(e,t){return"#"==t?!0:(n(t).length?s.push(t):o.push(t),void 0)}),s.length&&(this.data.core.to_load=o,n.each(s,function(e,n){t._is_loaded(n)||(t.load_node(n,function(){t.reload_nodes(!0)},function(){t.reload_nodes(!0)}),i=!1)}))),this.data.core.to_open.length&&n.each(this.data.core.to_open,function(e,i){t.open_node(i,!1,!0)}),i&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&n.each(this.data.core.to_open,function(t,i){e.open_node(i,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),-1!==e?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var e=n.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),o=this.get_index(),this.__callback()}},is_focused:function(){return o==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),o=-1),this.__callback()},_get_node:function(e){var t=n(e,this.get_container());return t.is(".jstree")||-1==e?-1:(t=t.closest("li",this.get_container()),t.length?t:!1)},_get_next:function(e,t){return e=this._get_node(e),-1===e?this.get_container().find("> ul > li:first-child"):e.length?t?e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):!1:e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(e,t){if(e=this._get_node(e),-1===e)return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):!1;if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".jstree","li:eq(0)");return i.length?i:!1},_get_parent:function(e){if(e=this._get_node(e),-1==e||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),-1===e?this.get_container().children("ul:eq(0)").children("li"):e.length?e.children("ul:eq(0)").children("li"):!1},get_path:function(e,t){var i=[],n=this;return e=this._get_node(e),-1!==e&&e&&e.length?(e.parentsUntil(".jstree","li").each(function(){i.push(t?this.id:n.get_text(this))}),i.reverse(),i.push(t?e.attr("id"):this.get_text(e)),i):!1},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-open")},is_closed:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-leaf")},correct_state:function(e){return e=this._get_node(e),e&&-1!==e?(e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e}),void 0):!1},open_node:function(t,i,n){if(t=this._get_node(t),!t.length)return!1;if(!t.hasClass("jstree-closed"))return i&&i.call(),!1;var s=n||e?0:this._get_settings().core.animation,o=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each(function(){o.open_node(this,!1,!0)}),s&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),s?t.children("ul").stop(!0,!0).slideDown(s,function(){this.style.display="",o.after_open(t)}):o.after_open(t),this.__callback({obj:t}),i&&i.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,function(){o.open_node(t,i,n)},i))},after_open:function(e){this.__callback({obj:e})},close_node:function(t,i){t=this._get_node(t);var n=i||e?0:this._get_settings().core.animation,s=this;return t.length&&t.hasClass("jstree-open")?(n&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),n?t.children("ul").stop(!0,!0).slideUp(n,function(){this.style.display="",s.after_close(t)}):s.after_close(t),this.__callback({obj:t}),void 0):!1},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return e=this._get_node(e),e.hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,i){e=e?this._get_node(e):-1,e&&-1!==e||(e=this.get_container_ul()),i?e=e.find("li.jstree-closed"):(i=e,e=e.is(".jstree-closed")?e.find("li.jstree-closed").addBack():e.find("li.jstree-closed"));var n=this;e.each(function(){var e=this;n._is_loaded(this)?n.open_node(this,!1,!t):n.open_node(this,function(){n.open_all(e,t,i)},!t)}),0===i.find("li.jstree-closed").length&&this.__callback({obj:i})},close_all:function(e,t){var i=this;e=e?this._get_node(e):this.get_container(),e&&-1!==e||(e=this.get_container_ul()),e.find("li.jstree-open").addBack().each(function(){i.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){e=e&&-1!=e?n(e):this.get_container_ul(),e=e.is("li")?e.find("li").addBack():e.find("li"),e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e){this.__callback({obj:e})},_is_loaded:function(){return!0},create_node:function(e,t,i,s,o){e=this._get_node(e),t="undefined"==typeof t?"last":t;var r,a=n("<li />"),l=this._get_settings().core;if(-1!==e&&!e.length)return!1;if(!o&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,s,!0)}),!1;switch(this.__rollback(),"string"==typeof i&&(i={data:i}),i||(i={}),i.attr&&a.attr(i.attr),i.metadata&&a.data(i.metadata),i.state&&a.addClass("jstree-"+i.state),i.data||(i.data=this._get_string("new_node")),n.isArray(i.data)||(r=i.data,i.data=[],i.data.push(r)),n.each(i.data,function(e,t){r=n("<a />"),n.isFunction(t)&&(t=t.call(this,i)),"string"==typeof t?r.attr("href","#")[l.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),r.attr(t.attr)[l.html_titles?"html":"text"](t.title),t.language&&r.addClass(t.language)),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&i.icon&&(t.icon=i.icon),t.icon&&(-1===t.icon.indexOf("/")?r.children("ins").addClass(t.icon):r.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),a.append(r)}),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===e&&(e=this.get_container(),"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(a),r=this._get_parent(e);break;case"after":e.after(a),r=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(a),r=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(a),r=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),r=e.children("ul").children("li").eq(t),r.length?r.before(a):e.children("ul").append(a),r=e}return(-1===r||r.get(0)===this.get_container().get(0))&&(r=-1),this.clean_node(r),this.__callback({obj:a,parent:r}),s&&s.call(this,a),a},get_text:function(e){if(e=this._get_node(e),!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0],e.nodeValue)},set_text:function(e,t){if(e=this._get_node(e),!e.length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var i=e.children("INS").clone();return e.html(t).prepend(i),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){if(e=this._get_node(e),!e.length)return!1;this.__rollback();var t=this._get_parent(e),i=n([]),s=this;return e.each(function(){i=i.add(s._get_prev(this))}),e=e.detach(),-1!==t&&0===t.find("> ul > li").length&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:i,parent:t}),e},prepare_move:function(e,t,i,s,o){var r={};if(r.ot=n.jstree._reference(e)||this,r.o=r.ot._get_node(e),r.r=-1===t?-1:this._get_node(t),r.p="undefined"==typeof i||i===!1?"last":i,!o&&a.o&&a.o[0]===r.o[0]&&a.r[0]===r.r[0]&&a.p===r.p)return this.__callback(a),s&&s.call(this,a),void 0;if(r.ot=n.jstree._reference(r.o)||this,r.rt=n.jstree._reference(r.r)||this,-1!==r.r&&r.r){if(!/^(before|after)$/.test(r.p)&&!this._is_loaded(r.r))return this.load_node(r.r,function(){this.prepare_move(e,t,i,s,!0)});switch(r.p){case"before":r.cp=r.r.index(),r.cr=r.rt._get_parent(r.r);break;case"after":r.cp=r.r.index()+1,r.cr=r.rt._get_parent(r.r);break;case"inside":case"first":r.cp=0,r.cr=r.r;break;case"last":r.cp=r.r.find(" > ul > li").length,r.cr=r.r;break;default:r.cp=r.p,r.cr=r.r}}else switch(r.cr=-1,r.p){case"first":case"before":case"inside":r.cp=0;break;case"after":case"last":r.cp=r.rt.get_container().find(" > ul > li").length;break;default:r.cp=r.p}r.np=-1==r.cr?r.rt.get_container():r.cr,r.op=r.ot._get_parent(r.o),r.cop=r.o.index(),-1===r.op&&(r.op=r.ot?r.ot.get_container():this.get_container()),!/^(before|after)$/.test(r.p)&&r.op&&r.np&&r.op[0]===r.np[0]&&r.o.index()<r.cp&&r.cp++,r.or=r.np.find(" > ul > li:nth-child("+(r.cp+1)+")"),a=r,this.__callback(a),s&&s.call(this,a)},check_move:function(){var e=a,t=!0,i=-1===e.r?this.get_container():e.r;if(!e||!e.o||e.or[0]===e.o[0])return!1;if(!e.cy){if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index())return!1;e.o.each(function(){return-1!==i.parentsUntil(".jstree","li").addBack().index(this)?(t=!1,!1):void 0})}return t},move_node:function(e,t,i,s,o,r){if(!o)return this.prepare_move(e,t,i,function(e){this.move_node(e,!1,!1,s,!0,r)});if(s&&(a.cy=!0),!r&&!this.check_move())return!1;this.__rollback();var l=!1;s?(l=e.o.clone(!0),l.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||n("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(c){}return s&&(a.cy=!0,a.oc=l),this.__callback(a),a},_get_move:function(){return a}}})}(jQuery),function(e){var t,i,n;e(function(){/msie/.test(navigator.userAgent.toLowerCase())?(i=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),n=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=i.width()-n.width(),i.add(n).remove()):(i=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-i.width(),i.parent().remove())}),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,i){var n=this._get_settings().ui,s=this._get_node(i.rslt.obj),o=s&&s.length?s.children("ul").find("a.jstree-clicked"):e(),r=this;n.selected_parent_close!==!1&&o.length&&o.each(function(){r.deselect_node(this),"select_parent"===n.selected_parent_close&&r.select_node(s)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var i=this._get_settings().ui.select_prev_on_delete,n=this._get_node(t.rslt.obj),s=n&&n.length?n.find("a.jstree-clicked"):[],o=this;s.each(function(){o.deselect_node(this)}),i&&s.length&&t.rslt.prev.each(function(){return this.parentNode?(o.select_node(this),!1):void 0})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,i){if("undefined"==typeof t||null===t)return i?this.data.ui.selected:this.data.ui.last_selected;var n=e(t,this.get_container());return n.is(".jstree")||-1==t?-1:(n=n.closest("li",this.get_container()),n.length?n:!1)},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),e.each(i,function(e,i){i&&"#"!==i&&t.select_node(i)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(){return this.save_selected(),this.__call_old()},hover_node:function(e){return e=this._get_node(e),e.length?(e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),this.__callback({obj:e}),void 0):!1},dehover_node:function(){var e,t=this.data.ui.hovered;return t&&t.length?(e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),this.__callback({obj:t}),void 0):!1},select_node:function(e,t,i){if(e=this._get_node(e),-1==e||!e||!e.length)return!1;var n=this._get_settings().ui,s="on"==n.select_multiple_modifier||n.select_multiple_modifier!==!1&&i&&i[n.select_multiple_modifier+"Key"],o=n.select_range_modifier!==!1&&i&&i[n.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],r=this.is_selected(e),a=!0,l=this;if(t){if(n.disable_selecting_children&&s&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(a=!1,!0){case o:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack(),-1==n.select_limit||e.length<n.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),r=!1,a=!0):a=!1;break;case r&&!s:this.deselect_all(),r=!1,a=!0;break;case!r&&!s:(-1==n.select_limit||n.select_limit>0)&&(this.deselect_all(),a=!0);break;case r&&s:this.deselect_node(e);break;case!r&&s:(-1==n.select_limit||this.data.ui.selected.length+1<=n.select_limit)&&(a=!0)}}a&&!r&&(o||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),n.selected_parent_open&&e.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:i}))},_fix_scroll:function(e){var i,n=this.get_container()[0];if(n.scrollHeight>n.offsetHeight){if(e=this._get_node(e),!e||-1===e||!e.length||!e.is(":visible"))return;i=e.offset().top-this.get_container().offset().top,0>i&&(n.scrollTop=n.scrollTop+i-1),i+this.data.core.li_height+(n.scrollWidth>n.offsetWidth?t:0)>n.offsetHeight&&(n.scrollTop=n.scrollTop+(i-n.offsetHeight+this.data.core.li_height+1+(n.scrollWidth>n.offsetWidth?t:0)))}},deselect_node:function(e){return e=this._get_node(e),e.length?(this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e})),void 0):!1},toggle_select:function(e){return e=this._get_node(e),e.length?(this.is_selected(e)?this.deselect_node(e):this.select_node(e),void 0):!1},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var i=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();i.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:i})}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var i=this;t.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){i.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(t,i){t=this._get_node(t);var n=this._get_settings().core.rtl,s=this._get_settings().crrm.input_width_limit,o=t.children("ins").width(),r=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,a=this.get_text(t),l=e("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=t.css("position","relative").append(e("<input />",{value:a,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:n?"auto":o+r+4+"px",right:n?o+r+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),n=e.val();""===n&&(n=a),l.remove(),e.remove(),this.set_text(t,a),this.rename_node(t,n),i.call(this,t,n,a),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;return 27==t?(this.value=a,this.blur(),void 0):13==t?(this.blur(),void 0):(c.width(Math.min(l.text("pW"+this.value).width(),s)),void 0)},keypress:function(e){var t=e.keyCode||e.which;return 13==t?!1:void 0}})).children(".jstree-rename-input");this.set_text(t,""),l.css({fontFamily:c.css("fontFamily")||"",fontSize:c.css("fontSize")||"",fontWeight:c.css("fontWeight")||"",fontStyle:c.css("fontStyle")||"",fontStretch:c.css("fontStretch")||"",fontVariant:c.css("fontVariant")||"",letterSpacing:c.css("letterSpacing")||"",wordSpacing:c.css("wordSpacing")||""}),c.width(Math.min(l.text("pW"+c[0].value).width(),s))[0].select()
},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,i,n){t.call(this,{obj:e,new_name:i,old_name:n})})},create:function(t,i,n,s,o){var r,a=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),r=this.create_node(t,i,n,function(t){var i=this._get_parent(t),n=e(t).index();s&&s.call(this,t),i.length&&i.hasClass("jstree-closed")&&this.open_node(i,!1,!0),o?a.__callback({obj:t,name:this.get_text(t),parent:i,position:n}):this._show_input(t,function(e,t){a.__callback({obj:e,name:t,parent:i,position:n})})})},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),i=this._get_prev(e);this.__rollback(),e=this.delete_node(e),e!==!1&&this.__callback({obj:e,prev:i,parent:t})},check_move:function(){if(!this.__call_old())return!1;var e=this._get_settings().crrm.move;return e.check_move.call(this,this._get_move())?!0:!1},move_node:function(e,t,i,n,s,o){var r=this._get_settings().crrm.move;return s?((r.always_copy===!0||"multitree"===r.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(n=!0),this.__call_old(!0,e,t,i,n,!0,o),void 0):("undefined"==typeof i&&(i=r.default_position),"inside"!==i||r.default_position.match(/^(before|after)$/)||(i=r.default_position),this.__call_old(!0,e,t,i,n,!1,o))},cut:function(e){return e=this._get_node(e,!0),e&&e.length?(this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,this.__callback({obj:e}),void 0):!1},copy:function(e){return e=this._get_node(e,!0),e&&e.length?(this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,this.__callback({obj:e}),void 0):!1},paste:function(e){if(e=this._get_node(e),!e||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;return this.data.crrm.ct_nodes||this.data.crrm.cp_nodes?(this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.__callback({obj:e,nodes:t}),void 0):!1}}})}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(i,n){return i?(n||(n=e.jstree._themes+i+"/style.css"),-1==e.inArray(n,t)&&(e.vakata.css.add_sheet({url:n}),t.push(n)),this.data.themes.theme!=i&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=i),this.get_container().addClass("jstree-"+i),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback(),void 0):!1},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){e.jstree._themes===!1&&e("script").each(function(){return this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)?(e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1):void 0}),e.jstree._themes===!1&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function t(t,i){var n,s=e.jstree._focused();return s&&s.data&&s.data.hotkeys&&s.data.hotkeys.enabled&&(n=s._get_settings().hotkeys[t])?n.call(s,i):void 0}var i=[];e.jstree.plugin("hotkeys",{__init:function(){if("undefined"==typeof e.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(n,s){s!==!1&&-1==e.inArray(n,i)&&(e(document).bind("keydown",n,function(e){return t(n,e)}),i.push(n))}),this.get_container().bind("lock.jstree",e.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",e.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;e.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,i){var n=this;this.load_node_json(e,function(){n.__callback({obj:n._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().json_data;return t=this._get_node(t),-1==t||!t||!i.ajax&&!i.progressive_render&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var i=this._get_settings().json_data;return t&&-1!==t&&i.progressive_unload&&(e.isFunction(i.data)||i.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,i,n){var s,o=this.get_settings().json_data,r=function(){},a=function(){};if(t=this._get_node(t),t&&-1!==t&&(o.progressive_render||o.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&0===t.children("ul").children("li").length&&t.data("jstree_children"))return s=this._parse_json(t.data("jstree_children"),t),s&&(t.append(s),o.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),i&&i.call(this),void 0;if(t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!o.data&&!o.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(o.data):o.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t),e?(-1!==t&&t?(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(t),i&&i.call(this)):(-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&this.correct_state(t)):o.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!t||-1===t):t&&-1!=t||(s=this._parse_json(o.data,t),s?(this.get_container().children("ul").empty().append(s.children()),this.clean_node()):o.correct_state&&this.get_container().children("ul").empty()),i&&i.call(this);break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&t&&-1!==t:r=function(e,i,s){var r=this.get_settings().json_data.ajax.error;r&&r.call(this,e,i,s),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&o.correct_state&&this.correct_state(t)):"success"===i&&o.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},a=function(n,s,a){var l=this.get_settings().json_data.ajax.success;return l&&(n=l.call(this,n,s,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")||!e.isArray(n)&&!e.isPlainObject(n)?r.call(this,a,s,""):(n=this._parse_json(n,t),n?(-1!==t&&t?(t.append(n).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),this.clean_node(t),i&&i.call(this)):-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)),void 0)},o.ajax.context=this,o.ajax.error=r,o.ajax.success=a,o.ajax.dataType||(o.ajax.dataType="json"),e.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,t)),e.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,t)),e.ajax(o.ajax)}},_parse_json:function(t,i,n){var s,o,r,a,l,c=!1,h=this._get_settings(),d=h.json_data,u=h.core.html_titles;if(!t)return c;if(d.progressive_unload&&i&&-1!==i&&i.data("jstree_children",c),e.isArray(t)){if(c=e("<ul>"),!t.length)return!1;for(o=0,r=t.length;r>o;o++)s=this._parse_json(t[o],i,!0),s.length&&(c=c.append(s));c=c.children()}else{if("string"==typeof t&&(t={data:t}),!t.data&&""!==t.data)return c;c=e("<li />"),t.attr&&c.attr(t.attr),t.metadata&&c.data(t.metadata),t.state&&c.addClass("jstree-"+t.state),e.isArray(t.data)||(s=t.data,t.data=[],t.data.push(s)),e.each(t.data,function(i,n){s=e("<a />"),e.isFunction(n)&&(n=n.call(this,t)),"string"==typeof n?s.attr("href","#")[u?"html":"text"](n):(n.attr||(n.attr={}),n.attr.href||(n.attr.href="#"),s.attr(n.attr)[u?"html":"text"](n.title),n.language&&s.addClass(n.language)),s.prepend("<ins class='jstree-icon'>&#160;</ins>"),!n.icon&&t.icon&&(n.icon=t.icon),n.icon&&(-1===n.icon.indexOf("/")?s.children("ins").addClass(n.icon):s.children("ins").css("background","url('"+n.icon+"') center center no-repeat")),c.append(s)}),c.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(d.progressive_render&&"open"!==t.state?c.addClass("jstree-closed").data("jstree_children",t.children):(d.progressive_unload&&c.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(s=this._parse_json(t.children,i,!0),s.length&&(l=e("<ul />"),l.append(s),c.append(l)))))}return n||(a=e("<ul />"),a.append(c),c=a),c},get_json:function(t,i,n,s){var o,r,a,l,c,h,d=[],u=this._get_settings(),f=this;return t=this._get_node(t),t&&-1!==t||(t=this.get_container().find("> ul > li")),i=e.isArray(i)?i:["id","class"],!s&&this.data.types&&i.push(u.types.type_attr),n=e.isArray(n)?n:[],t.each(function(){a=e(this),o={data:[]},i.length&&(o.attr={}),e.each(i,function(e,t){r=a.attr(t),r&&r.length&&r.replace(/jstree[^ ]*/gi,"").length&&(o.attr[t]=(" "+r).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),a.hasClass("jstree-open")&&(o.state="open"),a.hasClass("jstree-closed")&&(o.state="closed"),a.data()&&(o.metadata=a.data()),l=a.children("a"),l.each(function(){c=e(this),n.length||-1!==e.inArray("languages",u.plugins)||c.children("ins").get(0).style.backgroundImage.length||c.children("ins").get(0).className&&c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(h=!1,-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){return c.hasClass(t)?(h=t,!1):void 0}),r={attr:{},title:f.get_text(c,h)},e.each(n,function(e,t){r.attr[t]=(" "+(c.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){return c.hasClass(t)?(r.language=t,!0):void 0}),c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(r.icon=c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),c.children("ins").get(0).style.backgroundImage.length&&(r.icon=c.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=f.get_text(c),l.length>1?o.data.push(r):o.data=r}),a=a.find("> ul > li"),a.length&&(o.children=f.get_json(a,i,n,!0)),d.push(o)}),d}}})}(jQuery),function(e){var t=!1;e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(i){var n=this._get_settings().languages,s=!1,o=".jstree-"+this.get_index()+" a";if(!e.isArray(n)||0===n.length)return!1;if(-1==e.inArray(i,n)){if(!n[i])return!1;i=n[i]}return i==this.data.languages.current_language?!0:(s=e.vakata.css.get_css(o+"."+this.data.languages.current_language,!1,t),s!==!1&&(s.style.display="none"),s=e.vakata.css.get_css(o+"."+i,!1,t),s!==!1&&(s.style.display=""),this.data.languages.current_language=i,this.__callback(i),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,i){var n=this._get_settings().languages,s=this._get_settings().core.strings;return e.isArray(n)&&n.length&&(i=i&&-1!=e.inArray(i,n)?i:this.data.languages.current_language),s[i]&&s[i][t]?s[i][t]:s[t]?s[t]:t},get_text:function(t,i){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var n=this._get_settings().languages,s=this._get_settings().core.html_titles;return e.isArray(n)&&n.length?(i=i&&-1!=e.inArray(i,n)?i:this.data.languages.current_language,t=t.children("a."+i)):t=t.children("a:eq(0)"),s?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return 3==this.nodeType})[0],t.nodeValue)},set_text:function(t,i,n){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var s,o=this._get_settings().languages,r=this._get_settings().core.html_titles;return e.isArray(o)&&o.length?(n=n&&-1!=e.inArray(n,o)?n:this.data.languages.current_language,t=t.children("a."+n)):t=t.children("a:eq(0)"),r?(s=t.children("INS").clone(),t.html(i).prepend(s),this.__callback({obj:t,name:i,lang:n}),!0):(t=t.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:t,name:i,lang:n}),t.nodeValue=i)},_load_css:function(){var i,n=this._get_settings().languages,s="/* languages css */",o=".jstree-"+this.get_index()+" a";if(e.isArray(n)&&n.length){for(this.data.languages.current_language=n[0],i=0;i<n.length;i++)s+=o+"."+n[i]+" {",n[i]!=this.data.languages.current_language&&(s+=" display:none; "),s+=" } ";t=e.vakata.css.add_sheet({str:s,title:"jstree-languages"})}},create_node:function(t,i,n,s){var o=this.__call_old(!0,t,i,n,function(t){var i,n=this._get_settings().languages,o=t.children("a");if(e.isArray(n)&&n.length){for(i=0;i<n.length;i++)o.is("."+n[i])||t.append(o.eq(0).clone().removeClass(n.join(" ")).addClass(n[i]));o.not("."+n.join(", .")).remove()}s&&s.call(this,t)});return o}}})}(jQuery),function(e){e.jstree.plugin("cookies",{__init:function(){if("undefined"==typeof e.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var t,i=this._get_settings().cookies;i.save_loaded&&(t=e.cookie(i.save_loaded),t&&t.length&&(this.data.core.to_load=t.split(","))),i.save_opened&&(t=e.cookie(i.save_opened),t&&t.length&&(this.data.core.to_open=t.split(","))),i.save_selected&&(t=e.cookie(i.save_selected),t&&t.length&&this.data.ui&&(this.data.ui.to_select=t.split(","))),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(!this.data.core.refreshing){var i=this._get_settings().cookies;if(!t)return i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options)),i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options)),void 0;switch(t){case"open_node":case"close_node":i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options));break;case"select_node":case"deselect_node":i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options))}}}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var i=this._get_node(t.rslt.obj);i=-1===i?this.get_container().children("ul"):i.children("ul"),this.sort(i)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var i=-1==t.rslt.np?this.get_container():t.rslt.np;this.sort(i.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var i=this._get_settings().sort,n=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(i,n))),t.find("> li > ul").each(function(){n.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){var t=!1,i=!1,n=!1,s=!1,o=!1,r=!1,a=!1,l=!1,c=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,i,n){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(s){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=i,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(n),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(e.vakata.dnd.is_down){if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if("mousemove"===t.type){var i=e(document),n=i.scrollTop(),s=i.scrollLeft();t.pageY-n<20?(r&&"down"===a&&(clearInterval(r),r=!1),r||(a="up",r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150))):r&&"up"===a&&(clearInterval(r),r=!1),e(window).height()-(t.pageY-n)<20?(r&&"up"===a&&(clearInterval(r),r=!1),r||(a="down",r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150))):r&&"down"===a&&(clearInterval(r),r=!1),t.pageX-s<20?(o&&"right"===l&&(clearInterval(o),o=!1),o||(l="left",o=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150))):o&&"left"===l&&(clearInterval(o),o=!1),e(window).width()-(t.pageX-s)<20?(o&&"left"===l&&(clearInterval(o),o=!1),o||(l="right",o=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150))):o&&"right"===l&&(clearInterval(o),o=!1)}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})}},drag_stop:function(t){o&&clearInterval(o),r&&clearInterval(r),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})}),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.themes&&(n.attr("class","jstree-"+this.data.themes.theme),s&&s.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target)){var o,r=e.jstree._reference(i.target);r.data.dnd.foreign?(o=r._get_settings().dnd.drag_check.call(this,{o:t,r:r.get_container(),is_root:!0}),(o===!0||o.inside===!0||o.before===!0||o.after===!0)&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(r.prepare_move(t,r.get_container(),"last"),r.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target){var n,s=e.jstree._reference(i.currentTarget);s.data.dnd.foreign?(n=s._get_settings().dnd.drag_check.call(this,{o:t,r:s.get_container(),is_root:!0}),(n===!0||n.inside===!0||n.before===!0||n.after===!0)&&s._get_settings().dnd.drag_finish.call(this,{o:t,r:s.get_container(),is_root:!0})):s.move_node(t,s.get_container(),"last",i[s._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",e.proxy(function(t){return t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id?!1:(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")),void 0)},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var i=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},i),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},i),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",e.proxy(function(){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&n&&s&&(n.hide(),s.hide())},this)).delegate("a","mousedown.jstree",e.proxy(function(e){return 1===e.which?(this.start_drag(e.currentTarget,e),!1):void 0},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)},this)).delegate("a","mousemove.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(i&&i.length&&i.children("a")[0]===t.currentTarget||this.dnd_enter(t.currentTarget),"undefined"==typeof this.data.dnd.off.top&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;n&&n.hide(),s&&s.hide(),this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)},this)),e(document).bind("drag_stop.vakata",e.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,n&&n.css({top:"-2000px"}),s&&s.css({top:"-2000px"})},this)).bind("drag_start.vakata",e.proxy(function(t,i){if(i.data.jstree){var n=e(i.event.target);n.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(n)}},this));var o=this._get_settings().dnd;o.drag_target&&e(document).delegate(o.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(i){t=i.target,e.vakata.dnd.drag_start(i,{jstree:!0,obj:i.target},"<ins class='jstree-icon'></ins>"+e(i.target).text()),this.data.themes&&(n&&n.attr("class","jstree-"+this.data.themes.theme),s&&s.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var o=this.get_container();this.data.dnd.cof=o.offset(),this.data.dnd.cw=parseInt(o.width(),10),this.data.dnd.ch=parseInt(o.height(),10),this.data.dnd.foreign=!0,i.preventDefault()},this)),o.drop_target&&e(document).delegate(o.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(i.target),e:i})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(o.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(o.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(i.target),e:i})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(i&&i.length){if(this.data.dnd.off=i.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+i.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:i});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,i,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,i,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(i)?(this.prepare_move(t,i,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var t,i=["before","inside","after"],o=!1,r=this._get_settings().core.rtl;switch(i=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],e.each(i,e.proxy(function(t,i){return this.data.dnd[i]?(e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),o=i,!1):void 0},this)),o===!1&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),t=r?this.data.dnd.off.right-18:this.data.dnd.off.left+10,o){case"before":n.css({left:t+"px",top:this.data.dnd.off.top-6+"px"}).show(),s&&s.css({left:t+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":n.css({left:t+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),s&&s.css({left:t+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":n.css({left:t+(r?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),s&&s.hide();break;default:n.hide(),s&&s.hide()}return c=o,o}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(i,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:i,p:c}):(this.dnd_prepare(),this.move_node(t,i,c,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,i=!1,n.hide(),s&&s.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var n=this._get_settings().dnd;this.data.dnd.prepared=!1,i=this._get_node(t),n.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),n.check_timeout)):this.dnd_prepare(),n.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),i&&i.length&&i.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),n.open_timeout))):i&&i.length&&i.hasClass("jstree-closed")&&this.dnd_open()
},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),n.hide(),s&&s.hide(),i&&i[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(i,o){t=this._get_node(i),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var r=t.length>1?this._get_string("multiple_selection"):this.get_text(t),a=this.get_container();this._get_settings().core.html_titles||(r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),e.vakata.dnd.drag_start(o,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+r),this.data.themes&&(n&&n.attr("class","jstree-"+this.data.themes.theme),s&&s.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=a.offset(),this.data.dnd.cw=parseInt(a.width(),10),this.data.dnd.ch=parseInt(a.height(),10),this.data.dnd.active=!0}}}),e(function(){var t="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";e.vakata.css.add_sheet({str:t,title:"jstree"}),n=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return n.hide(),s.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),s=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){return i&&i.length?(i.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}).bind("mouseleave",function(t){var o=e(t.relatedTarget);return(o.is(".jstree")||0===o.closest(".jstree").length)&&i&&i.length?(i.children("a").trigger(t),n.hide(),s.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1):void 0}).appendTo("body"),e(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(n.show(),s&&s.show())}),e(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(n.hide(),s&&s.hide())})})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){return e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),this.data.ui&&this.data.checkbox.noui?(this.save_selected(),this.data.cookies&&this.save_cookie("select_node"),void 0):(e.stopImmediatePropagation(),!1)},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){if(t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"),t!==!1){var i,n,s=this,o=this._get_settings().checkbox.two_state,r=this._get_settings().checkbox.real_checkboxes,a=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){n=e(this),i=n.is("li")&&(n.hasClass("jstree-checked")||r&&n.children(":checked").length)?"jstree-checked":"jstree-unchecked",n.find("li").addBack().each(function(){var t,n=e(this);n.children("a"+(s.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(o?"jstree-unchecked":i),r&&(n.children(":checkbox").length?n.children(":checkbox").addClass("jstree-real-checkbox"):(t=a.call(s,n),n.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+t[0]+"' name='"+t[0]+"' value='"+t[1]+"' />"))),o?(n.hasClass("jstree-checked")||n.children(":checked").length)&&n.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===i||n.hasClass("jstree-checked")||n.children(":checked").length)&&n.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),o||t.find(".jstree-checked").parent().parent().each(function(){s._repair_state(this)})}},change_state:function(t,i){t=this._get_node(t);var n=!1,s=this._get_settings().checkbox.real_checkboxes;if(!t||-1===t)return!1;if(i=i===!1||i===!0?i:t.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)i?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),s&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),s&&t.children(":checkbox").prop("checked",!0));else{if(i){if(n=t.find("li").addBack(),!n.filter(".jstree-checked, .jstree-undetermined").length)return!1;n.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),s&&n.children(":checkbox").prop("checked",!1)}else{if(n=t.find("li").addBack(),!n.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;n.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),s&&n.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(i){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),s&&t.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),s&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),s&&t.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),s&&t.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return e=this._get_node(e),e.length?e.is(".jstree-checked"):!1},get_checked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if(e=this._get_node(e),e.length){if(this._get_settings().checkbox.two_state)return e.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0),void 0;var t=this._get_settings().checkbox.real_checkboxes,i=e.find("> ul > .jstree-checked").length,n=e.find("> ul > .jstree-undetermined").length,s=e.find("> ul > li").length;0===s?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===i&&0===n?this.change_state(e,!0):i===s?this.change_state(e,!1):(e.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),e.each(i,function(e,i){t.check_node(i)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.vakata.xslt=function(t,i,n){var s,o,r,a=!1;if(a===!1&&window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XSLTemplate"),o=new ActiveXObject("Msxml2.DOMDocument"),o.loadXML(t),r=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),r.loadXML(i),a.stylesheet=r,s=a.createProcessor(),s.input=o,s.transform(),a=s.output}catch(l){}t=e.parseXML(t),i=e.parseXML(i),a===!1&&"undefined"!=typeof XSLTProcessor&&(s=new XSLTProcessor,s.importStylesheet(i),a=s.transformToFragment(t,document),a=e("<div />").append(a).html()),a===!1&&"undefined"!=typeof t.transformNode&&(a=t.transformNode(i)),n.call(null,a)};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:copy-of select="./child::node()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:copy-of select="./child::node()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'},i=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,i){var n=this;this.load_node_xml(e,function(){n.__callback({obj:n._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().xml_data;return t=this._get_node(t),-1==t||!t||!i.ajax&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,i,n){var s=this.get_settings().xml_data,o=function(){},r=function(){};if(t=this._get_node(t),t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(n){this.parse_xml(n,e.proxy(function(n){n&&(n=n.replace(/ ?xmlns="[^"]*"/gi,""),n.length>10?(n=e(n),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),s.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this))},this));break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||this.parse_xml(s.data,e.proxy(function(n){n?(n=n.replace(/ ?xmlns="[^"]*"/gi,""),n.length>10&&(n=e(n),this.get_container().children("ul").empty().append(n.children()),s.clean_node&&this.clean_node(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:o=function(e,i,o){var r=this.get_settings().xml_data.ajax.error;r&&r.call(this,e,i,o),-1!==t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&s.correct_state&&this.correct_state(t)):"success"===i&&s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},r=function(n,r,a){n=a.responseText;var l=this.get_settings().xml_data.ajax.success;return l&&(n=l.call(this,n,r,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")?o.call(this,a,r,""):(this.parse_xml(n,e.proxy(function(n){n&&(n=n.replace(/ ?xmlns="[^"]*"/gi,""),n.length>10?(n=e(n),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),s.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this)),void 0)},s.ajax.context=this,s.ajax.error=o,s.ajax.success=r,s.ajax.dataType||(s.ajax.dataType="xml"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}},parse_xml:function(i,n){var s=this._get_settings().xml_data;e.vakata.xslt(i,t[s.xsl],n)},get_xml:function(t,n,s,o,r){var a,l,c,h,d,u="",f=this._get_settings(),p=this;return t||(t="flat"),r||(r=0),n=this._get_node(n),n&&-1!==n||(n=this.get_container().find("> ul > li")),s=e.isArray(s)?s:["id","class"],!r&&this.data.types&&-1===e.inArray(f.types.type_attr,s)&&s.push(f.types.type_attr),o=e.isArray(o)?o:[],r||(f.xml_data.get_include_preamble&&(u+='<?xml version="1.0" encoding="UTF-8"?>'),u+="<root>"),n.each(function(){u+="<item",c=e(this),e.each(s,function(e,t){var n=c.attr(t);f.xml_data.get_skip_empty&&"undefined"==typeof n||(u+=" "+t+'="'+i((" "+(n||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),c.hasClass("jstree-open")&&(u+=' state="open"'),c.hasClass("jstree-closed")&&(u+=' state="closed"'),"flat"===t&&(u+=' parent_id="'+i(r)+'"'),u+=">",u+="<content>",h=c.children("a"),h.each(function(){a=e(this),d=!1,u+="<name",-1!==e.inArray("languages",f.plugins)&&e.each(f.languages,function(e,t){return a.hasClass(t)?(u+=' lang="'+i(t)+'"',d=t,!1):void 0}),o.length&&e.each(o,function(e,t){var n=a.attr(t);f.xml_data.get_skip_empty&&"undefined"==typeof n||(u+=" "+t+'="'+i((" "+n||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),a.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(u+=' icon="'+i(a.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),a.children("ins").get(0).style.backgroundImage.length&&(u+=' icon="'+i(a.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),u+=">",u+="<![CDATA["+p.get_text(a,d)+"]]>",u+="</name>"}),u+="</content>",l=c[0].id||!0,c=c.find("> ul > li"),l=c.length?p.get_xml(t,c,s,o,l):"","nest"==t&&(u+=l),u+="</item>","flat"==t&&(u+=l)}),r||(u+="</root>"),u}}})}(jQuery),function(e){e().jquery.split(".")[1]>=8?(e.expr[":"].jstree_contains=e.expr.createPseudo(function(e){return function(t){return(t.textContent||t.innerText||"").toLowerCase().indexOf(e.toLowerCase())>=0}}),e.expr[":"].jstree_title_contains=e.expr.createPseudo(function(e){return function(t){return(t.getAttribute("title")||"").toLowerCase().indexOf(e.toLowerCase())>=0}})):(e.expr[":"].jstree_contains=function(e,t,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,i){return(e.getAttribute("title")||"").toLowerCase().indexOf(i[3].toLowerCase())>=0}),e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(t,i){e(this).children("ul").find("li").hide().removeClass("jstree-last"),i.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,i){if(""===e.trim(t))return this.clear_search(),void 0;var n=this.get_settings().search,s=this,o=function(){},r=function(){};return this.data.search.str=t,!i&&n.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0?(this.search.supress_callback=!0,o=function(){},r=function(e,t,i){var n=this.get_settings().search.ajax.success;n&&(e=n.call(this,e,t,i)||e),this.data.search.to_open=e,this._search_open()},n.ajax.context=this,n.ajax.error=o,n.ajax.success=r,e.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,t)),e.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,t)),n.ajax.data||(n.ajax.data={search_string:t}),(!n.ajax.dataType||/^json/.exec(n.ajax.dataType))&&(n.ajax.dataType="json"),e.ajax(n.ajax),void 0):(this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+n.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){s.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:t}),void 0)},clear_search:function(){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(){var t=this,i=!0,n=[],s=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,function(t,i){return"#"==i?!0:(e(i).length&&e(i).is(".jstree-closed")?n.push(i):s.push(i),void 0)}),n.length&&(this.data.search.to_open=s,e.each(n,function(e,i){t.open_node(i,function(){t._search_open(!0)})}),i=!1)),i&&this.search(this.data.search.str,!0)}}})}(jQuery),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,i,n,s,o,r,a){e.vakata.context.rtl=!!a;var l,c,h=e.vakata.context.parse(t);h&&(e.vakata.context.vis=!0,e.vakata.context.tgt=i,e.vakata.context.par=r||i||null,e.vakata.context.data=o||null,e.vakata.context.cnt.html(h).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",function(){e.vakata.context.hide()}),l=e.vakata.context.cnt.height(),c=e.vakata.context.cnt.width(),n+c>e(document).width()&&(n=e(document).width()-(c+5),e.vakata.context.cnt.find("li > ul").addClass("right")),s+l>e(document).height()&&(s-=l+i[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:n,top:s}).find("li:has(ul)").bind("mouseenter",function(){var t=e(document).width(),i=e(document).height(),n=e(this).children("ul").show();t!==e(document).width()&&n.toggleClass("right"),i!==e(document).height()&&n.toggleClass("bottom")}).bind("mouseleave",function(){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata"))},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,i){if(!t)return!1;var n="",s=!1,o=!0;return i||(e.vakata.context.func={}),n+="<ul>",e.each(t,function(t,i){return i?(e.vakata.context.func[t]=i.action,!o&&i.separator_before&&(n+="<li class='vakata-separator vakata-separator-before'></li>"),o=!1,n+="<li class='"+(i._class||"")+(i._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",i.icon&&-1===i.icon.indexOf("/")&&(n+=" class='"+i.icon+"' "),i.icon&&-1!==i.icon.indexOf("/")&&(n+=" style='background:url("+i.icon+") center center no-repeat;' "),n+=">&#160;</ins><a href='#' rel='"+t+"'>",i.submenu&&(n+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),n+=i.label+"</a>",i.submenu&&(s=e.vakata.context.parse(i.submenu,!0),s&&(n+=s)),n+="</li>",i.separator_after&&(n+="<li class='vakata-separator vakata-separator-after'></li>",o=!0),void 0):!0}),n=n.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),n+="</ul>",e(document).triggerHandler("context_parse.vakata"),n.length>10?n:!1},exec:function(t){return e.isFunction(e.vakata.context.func[t])?(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0):!1}},e(function(){var t="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"}),e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),e(document).bind("mousedown",function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()}),"undefined"!=typeof e.hotkeys&&e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","right",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","left",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.hide(),t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),t.preventDefault()})}),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)},this)).delegate("a","click.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)).bind("destroy.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)),e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)
}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,i,n){t=this._get_node(t);var s=this.get_settings().contextmenu,o=t.children("a:visible:eq(0)"),r=!1,a=!1;s.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0)),(s.show_at_node||"undefined"==typeof i||"undefined"==typeof n)&&(r=o.offset(),i=r.left,n=r.top+this.data.core.li_height),a=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:s.items,e.isFunction(a)&&(a=a.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(a,o,i,n,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var i=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",t.proxy(function(){var e=i.types,n=i.type_attr,s="",o=this;t.each(e,function(e,i){return t.each(i,function(e){/^(max_depth|max_children|icon|valid_children)$/.test(e)||o.data.types.attach_to.push(e)}),i.icon?((i.icon.image||i.icon.position)&&(s+="default"==e?".jstree-"+o.get_index()+" a > .jstree-icon { ":".jstree-"+o.get_index()+" li["+n+'="'+e+'"] > a > .jstree-icon { ',i.icon.image&&(s+=" background-image:url("+i.icon.image+"); "),s+=i.icon.position?" background-position:"+i.icon.position+"; ":" background-position:0 0; ",s+="} "),void 0):!0}),""!==s&&t.vakata.css.add_sheet({str:s,title:"jstree-types"})},this)).bind("before.jstree",t.proxy(function(e,i){var n,s,o=this._get_settings().types.use_data?this._get_node(i.args[0]):!1,r=o&&-1!==o&&o.length?o.data("jstree"):!1;if(r&&r.types&&r.types[i.func]===!1)return e.stopImmediatePropagation(),!1;if(-1!==t.inArray(i.func,this.data.types.attach_to)){if(!i.args[0]||!i.args[0].tagName&&!i.args[0].jquery)return;if(n=this._get_settings().types.types,s=this._get_type(i.args[0]),(n[s]&&"undefined"!=typeof n[s][i.func]||n["default"]&&"undefined"!=typeof n["default"][i.func])&&this._check(i.func,i.args[0])===!1)return e.stopImmediatePropagation(),!1}},this)),e&&this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,i){var n=i&&i.rslt&&i.rslt.obj&&-1!==i.rslt.obj?this._get_node(i.rslt.obj).parent():this.get_container_ul(),s=!1,o=this._get_settings().types;t.each(o.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(s="default"===e?n.find("li > a > .jstree-icon"):n.find("li["+o.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&s.css("backgroundImage","url("+t.icon.image+")"),s.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return e=this._get_node(e),e&&e.length?e.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(e,t){t=this._get_node(t);var i=t.length&&e?t.attr(this._get_settings().types.type_attr,e):!1;return i&&this.__callback({obj:t,type:e}),i},_check:function(e,i,n){i=this._get_node(i);var s=!1,o=this._get_type(i),r=0,a=this,l=this._get_settings().types,c=!1;if(-1===i){if(!l[e])return;s=l[e]}else{if(o===!1)return;c=l.use_data?i.data("jstree"):!1,c&&c.types&&"undefined"!=typeof c.types[e]?s=c.types[e]:l.types[o]&&"undefined"!=typeof l.types[o][e]?s=l.types[o][e]:l.types["default"]&&"undefined"!=typeof l.types["default"][e]&&(s=l.types["default"][e])}return t.isFunction(s)&&(s=s.call(this,i)),"max_depth"===e&&-1!==i&&n!==!1&&-2!==l.max_depth&&0!==s&&i.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){return-1!==l.max_depth&&l.max_depth-(t+1)<=0?(s=0,!1):(r=0===t?s:a._check(e,this,!1),-1!==r&&0>=r-(t+1)?(s=0,!1):(r>=0&&(s>r-(t+1)||0>s)&&(s=r-(t+1)),l.max_depth>=0&&(l.max_depth-(t+1)<s||0>s)&&(s=l.max_depth-(t+1)),void 0))}),s},check_move:function(){if(!this.__call_old())return!1;var e,i=this._get_move(),n=i.rt._get_settings().types,s=i.rt._check("max_children",i.cr),o=i.rt._check("max_depth",i.cr),r=i.rt._check("valid_children",i.cr),a=0,l=1;if("none"===r)return!1;if(t.isArray(r)&&i.ot&&i.ot._get_type&&(i.o.each(function(){return-1===t.inArray(i.ot._get_type(this),r)?(l=!1,!1):void 0}),l===!1))return!1;if(-2!==n.max_children&&-1!==s&&(a=-1===i.cr?this.get_container().find("> ul > li").not(i.o).length:i.cr.find("> ul > li").not(i.o).length,a+i.o.length>s))return!1;if(-2!==n.max_depth&&-1!==o){if(l=0,0===o)return!1;if("undefined"==typeof i.o.d){for(e=i.o;e.length>0;)e=e.find("> ul > li"),l++;i.o.d=l}if(o-i.o.d<0)return!1}return!0},create_node:function(e,i,n,s,o,r){if(!r&&(o||this._is_loaded(e))){var a,l="string"==typeof i&&i.match(/^before|after$/i)&&-1!==e?this._get_parent(e):this._get_node(e),c=this._get_settings().types,h=this._check("max_children",l),d=this._check("max_depth",l),u=this._check("valid_children",l);if("string"==typeof n&&(n={data:n}),n||(n={}),"none"===u)return!1;if(t.isArray(u))if(n.attr&&n.attr[c.type_attr]){if(-1===t.inArray(n.attr[c.type_attr],u))return!1}else n.attr||(n.attr={}),n.attr[c.type_attr]=u[0];if(-2!==c.max_children&&-1!==h&&(a=-1===l?this.get_container().find("> ul > li").length:l.find("> ul > li").length,a+1>h))return!1;if(-2!==c.max_depth&&-1!==d&&0>d-1)return!1}return this.__call_old(!0,e,i,n,s,o,r)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,i){var n=this;this.load_node_html(e,function(){n.__callback({obj:n._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){return t=this._get_node(t),-1==t||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,i,n){var s,o=this.get_settings().html_data,r=function(){},a=function(){};if(t=this._get_node(t),t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(o.data):o.data.call(this,t,e.proxy(function(n){n&&""!==n&&n.toString&&""!==n.toString().replace(/^[\s\n]+$/,"")?(n=e(n),n.is("ul")||(n=e("<ul />").append(n)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!o.data&&!o.ajax:t&&-1!=t||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!t||-1===t):t&&-1!=t||(s=e(o.data),s.is("ul")||(s=e("<ul />").append(s)),this.get_container().children("ul").empty().append(s.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&t&&-1!==t:t=this._get_node(t),r=function(e,i,s){var r=this.get_settings().html_data.ajax.error;r&&r.call(this,e,i,s),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&o.correct_state&&this.correct_state(t)):"success"===i&&o.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},a=function(n,s,a){var l=this.get_settings().html_data.ajax.success;return l&&(n=l.call(this,n,s,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")?r.call(this,a,s,""):(n?(n=e(n),n.is("ul")||(n=e("<ul />").append(n)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)),void 0)},o.ajax.context=this,o.ajax.error=r,o.ajax.success=a,o.ajax.dataType||(o.ajax.dataType="html"),e.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,t)),e.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,t)),e.ajax(o.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(i){e(i.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,i){i.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,i){this.get_container().find("a."+t.item_h).not(i.rslt.obj).removeClass(t.item_h),i.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,i=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(i=i.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+i.join(", .")).removeClass(i.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=e&&-1!=e?this._get_node(e):this.get_container_ul(),e=e&&-1!=e?e.parent():this.get_container_ul(),e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e(function(){var t=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,i){var n,s,o=[],r=!0;return"move_node"==i.func&&i.args[4]===!0&&i.args[0].o&&i.args[0].o.length&&(i.args[0].o.children("a").each(function(){o.push(e(this).text().replace(/^\s+/g,""))}),r=this._check_unique(o,i.args[0].np.find("> ul > li").not(i.args[0].o),"move_node")),"create_node"==i.func&&(i.args[4]||this._is_loaded(i.args[0]))&&(n=this._get_node(i.args[0]),!i.args[1]||"before"!==i.args[1]&&"after"!==i.args[1]||(n=this._get_parent(i.args[0]),n&&-1!==n||(n=this.get_container())),"string"==typeof i.args[2]?o.push(i.args[2]):i.args[2]&&i.args[2].data?o.push(i.args[2].data):o.push(this._get_string("new_node")),r=this._check_unique(o,n.find("> ul > li"),"create_node")),"rename_node"==i.func&&(o.push(i.args[1]),s=this._get_node(i.args[0]),n=this._get_parent(s),n&&-1!==n||(n=this.get_container()),r=this._check_unique(o,n.find("> ul > li").not(s),"rename_node")),r?void 0:(t.stopPropagation(),!1)},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,i,n){var s=[],o=!0;return i.children("a").each(function(){s.push(e(this).text().replace(/^\s+/g,""))}),s.length&&t.length?(e.each(t,function(t,i){return-1!==e.inArray(i,s)?(o=!1,!1):void 0}),o||this._get_settings().unique.error_callback.call(null,t,i,n),o):!0},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),i=[];return t.o&&t.o.length?(t.o.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))}),this._check_unique(i,t.np.find("> ul > li").not(t.o),"check_move")):!0}}})}(jQuery),function(n){n.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",n.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",n.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",n.proxy(function(e,t){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",n.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",n.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((n(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",n.proxy(function(e,t){if(this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type){var i=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");i.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=n(e.currentTarget);"A"===e.target.tagName||"INS"===e.target.tagName&&t.closest("li").is(".jstree-open, .jstree-closed")||(t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation())}).delegate("li","mouseover.jstree",n.proxy(function(e){return e.stopImmediatePropagation(),n(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length?!1:(this.hover_node(e.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",n.proxy(function(e){n(e.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(e.currentTarget)},this)),(t||e)&&n.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"),e!==!1&&e.each(function(){n(this).find("li").addBack().each(function(){var e=n(this);return e.children(".jstree-wholerow-span").length?!0:(e.prepend("<span class='jstree-wholerow-span' style='width:"+18*e.parentsUntil(".jstree","li").length+"px;'>&#160;</span>"),void 0)})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),i=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==i&&(this.data.wholerow.last_html=i,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",-1*(e.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),n(function(){var s=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";i&&(s+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(t||e)&&(s+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),n.vakata.css.add_sheet({str:s,title:"jstree"})})}(jQuery),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],i=function(t,i){var n=!0;return t=t||{},i=[].concat(i),e.each(i,function(i,s){return e.isFunction(t[s])?void 0:(n=!1,!1)}),n};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(n,s){var o=-1==n?this._get_settings().model.object:n.data("jstree_model");return i(o,t)?(this._get_settings().model.async?o.getChildren(e.proxy(function(e){this.model_done(e,s)},this)):this.model_done(o.getChildren(),s),void 0):s.call(null,!1)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,i){var n=[],s=this._get_settings(),o=this;e.isArray(t)||(t=[t]),e.each(t,function(t,i){var r=i.getProps()||{};r.attr=i.getAttr()||{},i.getChildrenCount()&&(r.state="closed"),r.data=i.getName(),e.isArray(r.data)||(r.data=[r.data]),o.data.types&&e.isFunction(i.getType)&&(r.attr[s.types.type_attr]=i.getType()),r.attr.id&&s.model.id_prefix&&(r.attr.id=s.model.id_prefix+r.attr.id),r.metadata||(r.metadata={}),r.metadata.jstree_model=i,n.push(r)}),i.call(null,n)}}})}(jQuery)}}(),define("jquery.jstree",["jquery"],function(){}),jQuery.cookie=function(e,t,i){if("undefined"==typeof t){var n=null;if(document.cookie&&""!=document.cookie)for(var s=document.cookie.split(";"),o=0;o<s.length;o++){var r=jQuery.trim(s[o]);if(r.substring(0,e.length+1)==e+"="){n=decodeURIComponent(r.substring(e.length+1));break}}return n}i=i||{},null===t&&(t="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+1e3*60*60*24*i.expires)):l=i.expires,a="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",h=i.domain?"; domain="+i.domain:"",d=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,c,h,d].join("")},define("jstree/jquery.cookie",["jquery.jstree"],function(){}),function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var i=t.handler,n=t.data.keys.toLowerCase().split(" "),s=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,s)>-1)){var o=e.hotkeys.specialKeys[t.keyCode],r="keypress"===t.type&&String.fromCharCode(t.which).toLowerCase(),a="",l={};t.altKey&&"alt"!==o&&(a+="alt+"),t.ctrlKey&&"ctrl"!==o&&(a+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==o&&(a+="meta+"),t.shiftKey&&"shift"!==o&&(a+="shift+"),o&&(l[a+o]=!0),r&&(l[a+r]=!0,l[a+e.hotkeys.shiftNums[r]]=!0,"shift+"===a&&(l[e.hotkeys.shiftNums[r]]=!0));for(var c=0,h=n.length;h>c;c++)if(l[n[c]])return i.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(this.jQuery),define("jstree/jquery.hotkeys",["jquery.jstree"],function(){}),!function(e,t,i){"undefined"!=typeof module?module.exports=i(e,t):"function"==typeof define&&"object"==typeof define.amd?define("bean",i):t[e]=i(e,t)}("bean",this,function(e,t){var i=window,n=t[e],s=/over|out/,o=/[^\.]*(?=\..*)\.|.*/,r=/\..*/,a="addEventListener",l="attachEvent",c="removeEventListener",h="detachEvent",d=document||{},u=d.documentElement||{},f=u[a],p=f?a:l,g=Array.prototype.slice,m=/click|mouse|menu|drag|drop/i,v=/^touch|^gesture/i,_={one:1},y=function(e,t,i){for(i=0;i<t.length;i++)e[t[i]]=1;return e}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(f?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),b=function(){function e(e,t){for(;null!==(t=t.parentNode);)if(t===e)return!0;return!1}function t(t){var i=t.relatedTarget;return i?i!==this&&"xul"!==i.prefix&&!/document/.test(this.toString())&&!e(this,i):null===i}return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),w=function(){var e="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),t=e.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),i=e.concat("char charCode key keyCode".split(" ")),n=e.concat("touches targetTouches changedTouches scale rotation".split(" ")),o="preventDefault",r=function(e){return function(){e[o]?e[o]():e.returnValue=!1}},a="stopPropagation",l=function(e){return function(){e[a]?e[a]():e.cancelBubble=!0}},c=function(e){return function(){e[o](),e[a](),e.stopped=!0}},h=function(e,t,i){var n,s;for(n=i.length;n--;)s=i[n],!(s in t)&&s in e&&(t[s]=e[s])};return function(f,p){var g={originalEvent:f,isNative:p};if(!f)return g;var _,y=f.type,b=f.target||f.srcElement;return g[o]=r(f),g[a]=l(f),g.stop=c(g),g.target=b&&3===b.nodeType?b.parentNode:b,p&&(-1!==y.indexOf("key")?(_=i,g.keyCode=f.which||f.keyCode):m.test(y)?(_=t,g.rightClick=3===f.which||2===f.button,g.pos={x:0,y:0},f.pageX||f.pageY?(g.clientX=f.pageX,g.clientY=f.pageY):(f.clientX||f.clientY)&&(g.clientX=f.clientX+d.body.scrollLeft+u.scrollLeft,g.clientY=f.clientY+d.body.scrollTop+u.scrollTop),s.test(y)&&(g.relatedTarget=f.relatedTarget||f[("mouseover"===y?"from":"to")+"Element"])):v.test(y)&&(_=n),h(f,g,_||e)),g}}(),x=function(e,t){return f||t||e!==d&&e!==i?e:u},C=function(){function e(e,t,i,n,s){this.element=e,this.type=t,this.handler=i,this.original=n,this.namespaces=s,this.custom=b[t],this.isNative=y[t]&&e[p],this.eventType=f||this.isNative?t:"propertychange",this.customType=!f&&!this.isNative&&t,this.target=x(e,this.isNative),this.eventSupport=this.target[p]}return e.prototype={inNamespaces:function(e){var t,i;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(i=this.namespaces.length;i--;)if(e[t]===this.namespaces[i])return!0;return!1},matches:function(e,t,i){return!(this.element!==e||t&&this.original!==t||i&&this.handler!==i)}},e}(),k=function(){var e={},t=function(i,n,s,o,r){if(n&&"*"!==n){var a,l=0,c=e["$"+n],h="*"===i;if(!c)return;for(a=c.length;a>l;l++)if((h||c[l].matches(i,s,o))&&!r(c[l],c,l,n))return}else for(var d in e)"$"===d.charAt(0)&&t(i,d.substr(1),s,o,r)},i=function(t,i,n){var s,o=e["$"+i];if(o)for(s=o.length;s--;)if(o[s].matches(t,n,null))return!0;return!1},n=function(e,i,n){var s=[];return t(e,i,n,null,function(e){return s.push(e)}),s},s=function(t){return(e["$"+t.type]||(e["$"+t.type]=[])).push(t),t},o=function(i){t(i.element,i.type,null,i.handler,function(t,i,n){return i.splice(n,1),0===i.length&&delete e["$"+t.type],!1})},r=function(){var t,i=[];for(t in e)"$"===t.charAt(0)&&(i=i.concat(e[t]));return i};return{has:i,get:n,put:s,del:o,entries:r}}(),T=f?function(e,t,i,n){e[n?a:c](t,i,!1)}:function(e,t,i,n,s){s&&n&&null===e["_on"+s]&&(e["_on"+s]=0),e[n?l:h]("on"+t,i)},S=function(e,t,n){return function(s){return s=w(s||((this.ownerDocument||this.document||this).parentWindow||i).event,!0),t.apply(e,[s].concat(n))}},D=function(e,t,n,s,o,r){return function(a){(s?s.apply(this,arguments):f?!0:a&&a.propertyName==="_on"+n||!a)&&(a&&(a=w(a||((this.ownerDocument||this.document||this).parentWindow||i).event,r)),t.apply(e,!a||o&&0!==o.length?g.call(arguments,a?0:1).concat(o):arguments))}},M=function(e,t,i,n,s){return function(){e(t,i,s),n.apply(this,arguments)}},j=function(e,t,i,n){var s,o,a,l=t&&t.replace(r,""),c=k.get(e,l,i);for(s=0,o=c.length;o>s;s++)c[s].inNamespaces(n)&&((a=c[s]).eventSupport&&T(a.target,a.eventType,a.handler,!1,a.type),k.del(a))},E=function(e,t,i,n,s){var a,l=t.replace(r,""),c=t.replace(o,"").split(".");return k.has(e,l,i)?e:("unload"===l&&(i=M(j,e,l,i,n)),b[l]&&(b[l].condition&&(i=D(e,i,l,b[l].condition,!0)),l=b[l].base||l),a=k.put(new C(e,l,i,n,c[0]&&c)),a.handler=a.isNative?S(e,a.handler,s):D(e,a.handler,l,!1,s,!1),a.eventSupport&&T(a.target,a.eventType,a.handler,!0,a.customType),void 0)},F=function(e,t,i){return function(n){var s,o,r="string"==typeof e?i(e,this):e;for(s=n.target;s&&s!==this;s=s.parentNode)for(o=r.length;o--;)if(r[o]===s)return t.apply(s,arguments)}},A=function(e,t,i){var n,s,a,l,c=j,h=t&&"string"==typeof t;if(h&&t.indexOf(" ")>0){for(t=t.split(" "),l=t.length;l--;)A(e,t[l],i);return e}if(s=h&&t.replace(r,""),s&&b[s]&&(s=b[s].type),!t||h)(a=h&&t.replace(o,""))&&(a=a.split(".")),c(e,s,i,a);else if("function"==typeof t)c(e,null,t);else for(n in t)t.hasOwnProperty(n)&&A(e,n,t[n]);return e},O=function(e,t,i,n,s){var o,r,a,l,c=i,h=i&&"string"==typeof i;
if(t&&!i&&"object"==typeof t)for(o in t)t.hasOwnProperty(o)&&O.apply(this,[e,o,t[o]]);else for(l=arguments.length>3?g.call(arguments,3):[],r=(h?i:t).split(" "),h&&(i=F(t,c=n,s))&&(l=g.call(l,1)),this===_&&(i=M(A,e,t,i,c)),a=r.length;a--;)E(e,r[a],i,c,l);return e},N=function(){return O.apply(_,arguments)},I=f?function(e,t,n){var s=d.createEvent(e?"HTMLEvents":"UIEvents");s[e?"initEvent":"initUIEvent"](t,!0,!0,i,1),n.dispatchEvent(s)}:function(e,t,i){i=x(i,e),e?i.fireEvent("on"+t,d.createEventObject()):i["_on"+t]++},P=function(e,t,i){var n,s,a,l,c,h=t.split(" ");for(n=h.length;n--;)if(t=h[n].replace(r,""),(l=h[n].replace(o,""))&&(l=l.split(".")),l||i||!e[p])for(c=k.get(e,t),i=[!1].concat(i),s=0,a=c.length;a>s;s++)c[s].inNamespaces(l)&&c[s].handler.apply(e,i);else I(y[t],t,e);return e},z=function(e,t,i){for(var n=0,s=k.get(t,i),o=s.length;o>n;n++)s[n].original&&O(e,s[n].type,s[n].original);return e},R={add:O,one:N,remove:A,clone:z,fire:P,noConflict:function(){return t[e]=n,this}};if(i[l]){var $=function(){var e,t=k.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&A(t[e].element,t[e].type);i[h]("onunload",$),i.CollectGarbage&&i.CollectGarbage()};i[l]("onunload",$)}return R}),function(e,t){"function"==typeof define&&define.amd?define("flotr2",["bean","underscore"],function(i,n){return e.Flotr=t(i,n)}):e.Flotr=t(e.bean,e._)}(this,function(e,t){return function(){var i,n=this,s=this.Flotr;i={_:t,bean:e,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(e,t){i.graphTypes[e]=t,i.defaultOptions[e]=t.options||{},i.defaultOptions.defaultType=i.defaultOptions.defaultType||e},addPlugin:function(e,t){i.plugins[e]=t,i.defaultOptions[e]=t.options||{}},draw:function(e,t,n,s){return s=s||i.Graph,new s(e,t,n)},merge:function(e,t){var n,s,o=t||{};for(n in e)s=e[n],o[n]=s&&"object"==typeof s?s.constructor===Array?this._.clone(s):s.constructor===RegExp||this._.isElement(s)?s:i.merge(s,t?t[n]:void 0):s;return o},clone:function(e){return i.merge(e,{})},getTickSize:function(e,t,n,s){var o=(n-t)/e,r=i.getMagnitude(o),a=10,l=o/r;return 1.5>l?a=1:2.25>l?a=2:3>l?a=0===s?2:2.5:7.5>l&&(a=5),a*r},defaultTickFormatter:function(e){return e+""},defaultTrackFormatter:function(e){return"("+e.x+", "+e.y+")"},engineeringNotation:function(e,t,i){var n=["Y","Z","E","P","T","G","M","k",""],s=["y","z","a","f","p","n","µ","m",""],o=n.length;if(i=i||1e3,t=Math.pow(10,t||2),0===e)return 0;if(e>1)for(;o--&&e>=i;)e/=i;else for(n=s,o=n.length;o--&&1>e;)e*=i;return Math.round(e*t)/t+n[o]},getMagnitude:function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},toPixel:function(e){return Math.floor(e)+.5},toRad:function(e){return-e*(Math.PI/180)},floorInBase:function(e,t){return t*Math.floor(e/t)},drawText:function(e,t,n,s,o){return e.fillText?(o=this._.extend({size:i.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},o),e.save(),e.translate(n,s),e.rotate(o.angle),e.fillStyle=o.color,e.font=(o.weight>1?"bold ":"")+1.3*o.size+"px sans-serif",e.textAlign=o.textAlign,e.textBaseline=o.textBaseline,e.fillText(t,0,0),e.restore(),void 0):(e.drawText(t,n,s,o),void 0)},getBestTextAlign:function(e,t){return t=t||{textAlign:"center",textBaseline:"middle"},e+=i.getTextAngleFromAlign(t),Math.abs(Math.cos(e))>.01&&(t.textAlign=Math.cos(e)>0?"right":"left"),Math.abs(Math.sin(e))>.01&&(t.textBaseline=Math.sin(e)>0?"top":"bottom"),t},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(e){return i.alignTable[e.textAlign+" "+e.textBaseline]||0},noConflict:function(){return n.Flotr=s,this}},n.Flotr=i}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function e(){this.rgba=["r","g","b","a"];for(var e=4;-1<--e;)this[this.rgba[e]]=arguments[e]||(3==e?1:0);this.normalize()}var t=Flotr._,i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};e.prototype={scale:function(){for(var e=4;-1<--e;)t.isUndefined(arguments[e])||(this[this.rgba[e]]*=arguments[e]);return this.normalize()},alpha:function(e){return t.isUndefined(e)||t.isNull(e)||(this.a=e),this.normalize()},clone:function(){return new e(this.r,this.b,this.g,this.a)},limit:function(e,t,i){return Math.max(Math.min(e,i),t)},normalize:function(){var e=this.limit;return this.r=e(parseInt(this.r,10),0,255),this.g=e(parseInt(this.g,10),0,255),this.b=e(parseInt(this.b,10),0,255),this.a=e(this.a,0,1),this},distance:function(t){if(t){t=new e.parse(t);for(var i=0,n=3;-1<--n;)i+=Math.abs(this[this.rgba[n]]-t[this.rgba[n]]);return i}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var e=1-(.299*this.r+.587*this.g+.114*this.b)/255;return.5>e?"#000000":"#ffffff"}},t.extend(e,{parse:function(t){if(t instanceof e)return t;var n;if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return new e(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return new e(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return new e(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return new e(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));var s=(t+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==s?new e(255,255,255,0):(n=i[s])?new e(n[0],n[1],n[2]):new e(0,0,0,0)},processColor:function(i,n){var s=n.opacity;if(!i)return"rgba(0, 0, 0, 0)";if(i instanceof e)return i.alpha(s).toString();if(t.isString(i))return e.parse(i).alpha(s).toString();var o=i.colors?i:{colors:i};if(!n.ctx)return t.isArray(o.colors)?e.parse(t.isArray(o.colors[0])?o.colors[0][1]:o.colors[0]).alpha(s).toString():"rgba(0, 0, 0, 0)";o=t.extend({start:"top",end:"bottom"},o),/top/i.test(o.start)&&(n.x1=0),/left/i.test(o.start)&&(n.y1=0),/bottom/i.test(o.end)&&(n.x2=0),/right/i.test(o.end)&&(n.y2=0);var r,a,l,c=n.ctx.createLinearGradient(n.x1,n.y1,n.x2,n.y2);for(r=0;r<o.colors.length;r++)a=o.colors[r],t.isArray(a)?(l=a[0],a=a[1]):l=r/(o.colors.length-1),c.addColorStop(l,e.parse(a).alpha(s));return c}}),Flotr.Color=e}(),Flotr.Date={set:function(e,t,i,n){i=i||"UTC",t="set"+("UTC"===i?"UTC":"")+t,e[t](n)},get:function(e,t,i){return i=i||"UTC",t="get"+("UTC"===i?"UTC":"")+t,e[t]()},format:function(e,t,i){function n(e){return e+="",1==e.length?"0"+e:e}if(e){for(var s,o=this.get,r={h:o(e,"Hours",i).toString(),H:n(o(e,"Hours",i)),M:n(o(e,"Minutes",i)),S:n(o(e,"Seconds",i)),s:o(e,"Milliseconds",i),d:o(e,"Date",i).toString(),m:(o(e,"Month",i)+1).toString(),y:o(e,"FullYear",i).toString(),b:Flotr.Date.monthNames[o(e,"Month",i)]},a=[],l=!1,c=0;c<t.length;++c)s=t.charAt(c),l?(a.push(r[s]||s),l=!1):"%"==s?l=!0:a.push(s);return a.join("")}},getFormat:function(e,t){var i=Flotr.Date.timeUnits;return e<i.second?"%h:%M:%S.%s":e<i.minute?"%h:%M:%S":e<i.day?t<2*i.day?"%h:%M":"%b %d %h:%M":e<i.month?"%b %d":e<i.year?t<i.year?"%b":"%b %y":"%y"},formatter:function(e,t){var i=t.options,n=Flotr.Date.timeUnits[i.timeUnit],s=new Date(e*n);if(t.options.timeFormat)return Flotr.Date.format(s,i.timeFormat,i.timeMode);var o=(t.max-t.min)*n,r=t.tickSize*Flotr.Date.timeUnits[t.tickUnit];return Flotr.Date.format(s,Flotr.Date.getFormat(r,o),i.timeMode)},generator:function(e){function t(e){o(v,e,h,Flotr.floorInBase(r(v,e,h),m))}var i,n,s,o=this.set,r=this.get,a=this.timeUnits,l=this.spec,c=e.options,h=c.timeMode,d=a[c.timeUnit],u=e.min*d,f=e.max*d,p=(f-u)/c.noTicks,g=[],m=e.tickSize;for(n=c.tickFormatter===Flotr.defaultTickFormatter?this.formatter:c.tickFormatter,s=0;s<l.length-1;++s){var v=l[s][0]*a[l[s][1]];if(p<(v+l[s+1][0]*a[l[s+1][1]])/2&&v>=m)break}m=l[s][0],i=l[s][1],"year"==i&&(m=Flotr.getTickSize(c.noTicks*a.year,u,f,0),.5==m&&(i="month",m=6)),e.tickUnit=i,e.tickSize=m;var _=m*a[i];switch(v=new Date(u),i){case"millisecond":t("Milliseconds");break;case"second":t("Seconds");break;case"minute":t("Minutes");break;case"hour":t("Hours");break;case"month":t("Month");break;case"year":t("FullYear")}_>=a.second&&o(v,"Milliseconds",h,0),_>=a.minute&&o(v,"Seconds",h,0),_>=a.hour&&o(v,"Minutes",h,0),_>=a.day&&o(v,"Hours",h,0),_>=4*a.day&&o(v,"Date",h,1),_>=a.year&&o(v,"Month",h,0);var y,b=0,w=0/0;do if(y=w,w=v.getTime(),g.push({v:w/d,label:n(w/d,e)}),"month"==i)if(1>m){o(v,"Date",h,1);var x=v.getTime();o(v,"Month",h,r(v,"Month",h)+1);var C=v.getTime();v.setTime(w+b*a.hour+(C-x)*m),b=r(v,"Hours",h),o(v,"Hours",h,0)}else o(v,"Month",h,r(v,"Month",h)+m);else"year"==i?o(v,"FullYear",h,r(v,"FullYear",h)+m):v.setTime(w+_);while(f>w&&w!=y);return g},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){var e=Flotr._;Flotr.DOM={addClass:function(t,i){var n=t.className?t.className:"";e.include(n.split(/\s+/g),i)||(t.className=(n?n+" ":"")+i)},create:function(e){return document.createElement(e)},node:function(e){var t,i=Flotr.DOM.create("div");return i.innerHTML=e,t=i.children[0],i.innerHTML="",t},empty:function(e){e.innerHTML=""},hide:function(e){Flotr.DOM.setStyles(e,{display:"none"})},insert:function(t,i){e.isString(i)?t.innerHTML+=i:e.isElement(i)&&t.appendChild(i)},opacity:function(e,t){e.style.opacity=t},position:function(e,t){return e.offsetParent?(t=this.position(e.offsetParent),t.left+=e.offsetLeft,t.top+=e.offsetTop,t):{left:e.offsetLeft||0,top:e.offsetTop||0}},removeClass:function(t,i){var n=t.className?t.className:"";t.className=e.filter(n.split(/\s+/g),function(e){return e!=i?!0:void 0}).join(" ")},setStyles:function(t,i){e.each(i,function(e,i){t.style[i]=e})},show:function(e){Flotr.DOM.setStyles(e,{display:""})},size:function(e){return{height:e.offsetHeight,width:e.offsetWidth}}}}(),function(){var e=Flotr,t=e.bean;e.EventAdapter={observe:function(e,i,n){return t.add(e,i,n),this},fire:function(e,i,n){return t.fire(e,i,n),"undefined"!=typeof Prototype&&Event.fire(e,i,n),this},stopObserving:function(e,i,n){return t.remove(e,i,n),this},eventPointer:function(t){if(!e._.isUndefined(t.touches)&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(!e._.isUndefined(t.changedTouches)&&t.changedTouches.length>0)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};if(t.clientX||t.clientY){var i=document,n=i.body,s=i.documentElement;return{x:t.clientX+n.scrollLeft+s.scrollLeft,y:t.clientY+n.scrollTop+s.scrollTop}}}}}(),function(){var e=Flotr,t=e.DOM,i=e._,n=function(e){this.o=e};n.prototype={dimensions:function(e,t,i,n){return e?this.o.html?this.html(e,this.o.element,i,n):this.canvas(e,t):{width:0,height:0}},canvas:function(t,i){if(this.o.textEnabled){i=i||{};var n,s=this.measureText(t,i),o=s.width,r=i.size||e.defaultOptions.fontSize,a=i.angle||0,l=Math.cos(a),c=Math.sin(a),h=2,d=6;return n={width:Math.abs(l*o)+Math.abs(c*r)+h,height:Math.abs(c*o)+Math.abs(l*r)+d}}},html:function(e,i,n,s){var o=t.create("div");return t.setStyles(o,{position:"absolute",top:"-10000px"}),t.insert(o,'<div style="'+n+'" class="'+s+' flotr-dummy-div">'+e+"</div>"),t.insert(this.o.element,o),t.size(o)},measureText:function(t,n){var s,o=this.o.ctx;return!o.fillText||e.isIphone&&o.measure?{width:o.measure(t,n)}:(n=i.extend({size:e.defaultOptions.fontSize,weight:1,angle:0},n),o.save(),o.font=(n.weight>1?"bold ":"")+1.3*n.size+"px sans-serif",s=o.measureText(t),o.restore(),s)}},Flotr.Text=n}(),function(){function e(){return i.observe.apply(this,arguments),this._handles.push(arguments),this}var t=Flotr.DOM,i=Flotr.EventAdapter,n=Flotr._,s=Flotr;Graph=function(e,t,o){this._setEl(e),this._initMembers(),this._initPlugins(),i.fire(this.el,"flotr:beforeinit",[this]),this.data=t,this.series=s.Series.getSeries(t),this._initOptions(o),this._initGraphTypes(),this._initCanvas(),this._text=new s.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),i.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(n.bind(function(){i.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){i.fire(this.el,"flotr:destroy"),n.each(this._handles,function(e){i.stopObserving.apply(this,e)}),this._handles=[],this.el.graph=null},observe:e,_observe:e,processColor:function(e,t){var i={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return n.extend(i,t),s.Color.processColor(e,i)},findDataRanges:function(){var e,t,i,o=this.axes;n.each(this.series,function(n){i=n.getRange(),i&&(e=n.xaxis,t=n.yaxis,e.datamin=Math.min(i.xmin,e.datamin),e.datamax=Math.max(i.xmax,e.datamax),t.datamin=Math.min(i.ymin,t.datamin),t.datamax=Math.max(i.ymax,t.datamax),e.used=e.used||i.xused,t.used=t.used||i.yused)},this),o.x.used||o.x2.used||(o.x.used=!0),o.y.used||o.y2.used||(o.y.used=!0),n.each(o,function(e){e.calculateRange()});var r=n.keys(s.graphTypes),a=!1;n.each(this.series,function(e){e.hide||(n.each(r,function(t){e[t]&&e[t].show&&(this.extendRange(t,e),a=!0)},this),a||this.extendRange(this.options.defaultType,e))},this)},extendRange:function(e,t){this[e].extendRange&&this[e].extendRange(t,t.data,t[e],this[e]),this[e].extendYRange&&this[e].extendYRange(t.yaxis,t.data,t[e],this[e]),this[e].extendXRange&&this[e].extendXRange(t.xaxis,t.data,t[e],this[e])},calculateSpacing:function(){var e,t,i=this.axes,s=this.options,o=this.series,r=s.grid.labelMargin,a=this._text,l=i.x,c=i.x2,h=i.y,d=i.y2,u=s.grid.outlineWidth;for(n.each(i,function(e){e.calculateTicks(),e.calculateTextDimensions(a,s)}),t=a.dimensions(s.title,{size:1.5*s.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=t.height,t=a.dimensions(s.subtitle,{size:s.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=t.height,e=0;e<s.length;++e)o[e].points.show&&(u=Math.max(u,o[e].points.radius+o[e].points.lineWidth/2));var f=this.plotOffset;l.options.margin===!1?(f.bottom=0,f.top=0):(f.bottom+=(s.grid.circular?0:l.used&&l.options.showLabels?l.maxLabel.height+r:0)+(l.used&&l.options.title?l.titleSize.height+r:0)+u,f.top+=(s.grid.circular?0:c.used&&c.options.showLabels?c.maxLabel.height+r:0)+(c.used&&c.options.title?c.titleSize.height+r:0)+this.subtitleHeight+this.titleHeight+u),h.options.margin===!1?(f.left=0,f.right=0):(f.left+=(s.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.width+r:0)+(h.used&&h.options.title?h.titleSize.width+r:0)+u,f.right+=(s.grid.circular?0:d.used&&d.options.showLabels?d.maxLabel.width+r:0)+(d.used&&d.options.title?d.titleSize.width+r:0)+u),f.top=Math.floor(f.top),this.plotWidth=this.canvasWidth-f.left-f.right,this.plotHeight=this.canvasHeight-f.bottom-f.top,l.length=c.length=this.plotWidth,h.length=d.length=this.plotHeight,h.offset=d.offset=this.plotHeight,l.setScale(),c.setScale(),h.setScale(),d.setScale()},draw:function(e){var t,n=this.ctx;if(i.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(n.save(),n.translate(this.plotOffset.left,this.plotOffset.top),t=0;t<this.series.length;t++)this.series[t].hide||this.drawSeries(this.series[t]);n.restore(),this.clip()}i.fire(this.el,"flotr:afterdraw",[this.series,this]),e&&e()},drawSeries:function(e){function t(e,t){var i=this.getOptions(e,t);this[t].draw(i)}var i=!1;e=e||this.series,n.each(s.graphTypes,function(n,s){e[s]&&e[s].show&&this[s]&&(i=!0,t.call(this,e,s))},this),i||t.call(this,e,this.options.defaultType)},getOptions:function(e,t){var i=e[t],n=(this[t],e.xaxis),o=e.yaxis,r={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:e.data,color:e.color,shadowSize:e.shadowSize,xScale:n.d2p,yScale:o.d2p,xInverse:n.p2d,yInverse:o.p2d};return r=s.merge(i,r),r.fillStyle=this.processColor(i.fillColor||e.color,{opacity:i.fillOpacity}),r},getEventPosition:function(e){var n,s,o,r=document,a=r.body,l=r.documentElement,c=this.axes,h=this.plotOffset,d=this.lastMousePos,u=i.eventPointer(e),f=u.x-d.pageX,p=u.y-d.pageY;return"ontouchstart"in this.el?(n=t.position(this.overlay),s=u.x-n.left-h.left,o=u.y-n.top-h.top):(n=this.overlay.getBoundingClientRect(),s=e.clientX-n.left-h.left-a.scrollLeft-l.scrollLeft,o=e.clientY-n.top-h.top-a.scrollTop-l.scrollTop),{x:c.x.p2d(s),x2:c.x2.p2d(s),y:c.y.p2d(o),y2:c.y2.p2d(o),relX:s,relY:o,dX:f,dY:p,absX:u.x,absY:u.y,pageX:u.x,pageY:u.y}},clickHandler:function(e){return this.ignoreClick?(this.ignoreClick=!1,this.ignoreClick):(i.fire(this.el,"flotr:click",[this.getEventPosition(e),this]),void 0)},mouseMoveHandler:function(e){if(!this.mouseDownMoveHandler){var t=this.getEventPosition(e);i.fire(this.el,"flotr:mousemove",[e,t,this]),this.lastMousePos=t}},mouseDownHandler:function(e){this.mouseUpHandler||(this.mouseUpHandler=n.bind(function(e){i.stopObserving(document,"mouseup",this.mouseUpHandler),i.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,i.fire(this.el,"flotr:mouseup",[e,this])},this),this.mouseDownMoveHandler=n.bind(function(t){var n=this.getEventPosition(t);i.fire(this.el,"flotr:mousemove",[e,n,this]),this.lastMousePos=n},this),i.observe(document,"mouseup",this.mouseUpHandler),i.observe(document,"mousemove",this.mouseDownMoveHandler),i.fire(this.el,"flotr:mousedown",[e,this]),this.ignoreClick=!1)},drawTooltip:function(e,i,n,s){var o=this.getMouseTrack(),r="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",a=s.position,l=s.margin,c=this.plotOffset;null!==i&&null!==n?(s.relative?("n"==a.charAt(0)?r+="bottom:"+(l-c.top-n+this.canvasHeight)+"px;top:auto;":"s"==a.charAt(0)&&(r+="top:"+(l+c.top+n)+"px;bottom:auto;"),"e"==a.charAt(1)?r+="left:"+(l+c.left+i)+"px;right:auto;":"w"==a.charAt(1)&&(r+="right:"+(l-c.left-i+this.canvasWidth)+"px;left:auto;")):("n"==a.charAt(0)?r+="top:"+(l+c.top)+"px;bottom:auto;":"s"==a.charAt(0)&&(r+="bottom:"+(l+c.bottom)+"px;top:auto;"),"e"==a.charAt(1)?r+="right:"+(l+c.right)+"px;left:auto;":"w"==a.charAt(1)&&(r+="left:"+(l+c.left)+"px;right:auto;")),o.style.cssText=r,t.empty(o),t.insert(o,e),t.show(o)):t.hide(o)},clip:function(e){var t=this.plotOffset,i=this.canvasWidth,n=this.canvasHeight;e=e||this.ctx,s.isIE&&s.isIE<9?(e.save(),e.fillStyle=this.processColor(this.options.ieBackgroundColor),e.fillRect(0,0,i,t.top),e.fillRect(0,0,t.left,n),e.fillRect(0,n-t.bottom,i,t.bottom),e.fillRect(i-t.right,0,t.right,n),e.restore()):(e.clearRect(0,0,i,t.top),e.clearRect(0,0,t.left,n),e.clearRect(0,n-t.bottom,i,t.bottom),e.clearRect(i-t.right,0,t.right,n))},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){n.each(s.graphTypes,function(e,t){this[t]=s.clone(e)},this)},_initEvents:function(){var e,t,s,o=this.el;"ontouchstart"in o?(e=n.bind(function(n){s=!0,i.stopObserving(document,"touchend",e),i.fire(o,"flotr:mouseup",[event,this]),this.multitouches=null,t||this.clickHandler(n)},this),this.observe(this.overlay,"touchstart",n.bind(function(n){t=!1,s=!1,this.ignoreClick=!1,n.touches&&n.touches.length>1&&(this.multitouches=n.touches),i.fire(o,"flotr:mousedown",[event,this]),this.observe(document,"touchend",e)},this)),this.observe(this.overlay,"touchmove",n.bind(function(e){var n=this.getEventPosition(e);this.options.preventDefault&&e.preventDefault(),t=!0,this.multitouches||e.touches&&e.touches.length>1?this.multitouches=e.touches:s||i.fire(o,"flotr:mousemove",[event,n,this]),this.lastMousePos=n},this))):this.observe(this.overlay,"mousedown",n.bind(this.mouseDownHandler,this)).observe(o,"mousemove",n.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",n.bind(this.clickHandler,this)).observe(o,"mouseout",function(){i.fire(o,"flotr:mouseout")})},_initCanvas:function(){function e(e,i){return e||(e=t.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof e.getContext&&FlashCanvas.initElement(e),e.className="flotr-"+i,e.style.cssText="position:absolute;left:0px;top:0px;",t.insert(a,e)),n.each(r,function(n,s){t.show(e),("canvas"!=i||e.getAttribute(s)!==n)&&(e.setAttribute(s,n*l.resolution),e.style[s]=n+"px")}),e.context_=null,e}function i(e){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(e);var t=e.getContext("2d");return window.G_vmlCanvasManager||t.scale(l.resolution,l.resolution),t}var s,o,r,a=this.el,l=this.options,c=a.children,h=[];for(o=c.length;o--;)s=c[o],this.canvas||"flotr-canvas"!==s.className?this.overlay||"flotr-overlay"!==s.className?h.push(s):this.overlay=s:this.canvas=s;for(o=h.length;o--;)a.removeChild(h[o]);if(t.setStyles(a,{position:"relative"}),r={},r.width=a.clientWidth,r.height=a.clientHeight,r.width<=0||r.height<=0||l.resolution<=0)throw"Invalid dimensions for plot, width = "+r.width+", height = "+r.height+", resolution = "+l.resolution;this.canvas=e(this.canvas,"canvas"),this.overlay=e(this.overlay,"overlay"),this.ctx=i(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=i(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=r.height,this.canvasWidth=r.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){n.each(s.plugins,function(e,t){n.each(e.callbacks,function(e,t){this.observe(this.el,t,n.bind(e,this))},this),this[t]=s.clone(e),n.each(this[t],function(e,i){n.isFunction(e)&&(this[t][i]=n.bind(e,this))},this)},this)},_initOptions:function(e){var t=s.clone(s.defaultOptions);t.x2axis=n.extend(n.clone(t.xaxis),t.x2axis),t.y2axis=n.extend(n.clone(t.yaxis),t.y2axis),this.options=s.merge(e||{},t),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),i.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=s.Axis.getAxes(this.options);var o,r,a,l,c=[],h=[],d=this.series.length,u=this.series.length,f=this.options.colors,p=[],g=0;for(r=u-1;r>-1;--r)o=this.series[r].color,o&&(--u,n.isNumber(o)?c.push(o):p.push(s.Color.parse(o)));for(r=c.length-1;r>-1;--r)u=Math.max(u,c[r]+1);for(r=0;h.length<u;){o=f.length==r?new s.Color(100,100,100):s.Color.parse(f[r]);var m=1==g%2?-1:1,v=1+.2*m*Math.ceil(g/2);o.scale(v,v,v),h.push(o),++r>=f.length&&(r=0,++g)}for(r=0,a=0;d>r;++r){l=this.series[r],l.color?n.isNumber(l.color)&&(l.color=h[l.color].toString()):l.color=h[a++].toString(),l.xaxis||(l.xaxis=this.axes.x),1==l.xaxis?l.xaxis=this.axes.x:2==l.xaxis&&(l.xaxis=this.axes.x2),l.yaxis||(l.yaxis=this.axes.y),1==l.yaxis?l.yaxis=this.axes.y:2==l.yaxis&&(l.yaxis=this.axes.y2);for(var _ in s.graphTypes)l[_]=n.extend(n.clone(this.options[_]),l[_]);l.mouse=n.extend(n.clone(this.options.mouse),l.mouse),n.isUndefined(l.shadowSize)&&(l.shadowSize=this.options.shadowSize)}},_setEl:function(e){if(!e)throw"The target container doesn't exist";if(e.graph instanceof Graph)e.graph.destroy();else if(!e.clientWidth)throw"The target container must be visible";e.graph=this,this.el=e}},Flotr.Graph=Graph}(),function(){function e(e){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,s.extend(this,e)}function t(e,t){return e=Math.log(Math.max(e,Number.MIN_VALUE)),t!==Math.E&&(e/=Math.log(t)),e}function n(e,t){return t===Math.E?Math.exp(e):Math.pow(t,e)}var s=Flotr._,o="logarithmic";e.prototype={setScale:function(){var e,i=this.length,s=this.max,r=this.min,a=this.offset,l=this.orientation,c=this.options,h=c.scaling===o;e=h?i/(t(s,c.base)-t(r,c.base)):i/(s-r),this.scale=e,h?(this.d2p=function(i){return a+l*(t(i,c.base)-t(r,c.base))*e},this.p2d=function(i){return n((a+l*i)/e+t(r,c.base),c.base)}):(this.d2p=function(t){return a+l*(t-r)*e},this.p2d=function(t){return(a+l*t)/e+r})},calculateTicks:function(){var e=this.options;this.ticks=[],this.minorTicks=[],e.ticks?(this._cleanUserTicks(e.ticks,this.ticks),this._cleanUserTicks(e.minorTicks||[],this.minorTicks)):"time"==e.mode?this._calculateTimeTicks():"logarithmic"===e.scaling?this._calculateLogTicks():this._calculateTicks(),s.each(this.ticks,function(e){e.label+=""}),s.each(this.minorTicks,function(e){e.label+=""})},calculateRange:function(){if(this.used){var e=this,t=e.options,i=null!==t.min?t.min:e.datamin,n=null!==t.max?t.max:e.datamax,s=t.autoscaleMargin;if("logarithmic"==t.scaling&&(0>=i&&(i=e.datamin),0>=n&&(n=i)),n==i){var o=n?.01:1;null===t.min&&(i-=o),null===t.max&&(n+=o)}if("logarithmic"===t.scaling){0>i&&(i=n/t.base);var r=Math.log(n);t.base!=Math.E&&(r/=Math.log(t.base)),r=Math.ceil(r);var a=Math.log(i);t.base!=Math.E&&(a/=Math.log(t.base)),a=Math.ceil(a),e.tickSize=Flotr.getTickSize(t.noTicks,a,r,null===t.tickDecimals?0:t.tickDecimals),null===t.minorTickFreq&&(t.minorTickFreq=r-a>10?0:r-a>5?2:5)}else e.tickSize=Flotr.getTickSize(t.noTicks,i,n,t.tickDecimals);e.min=i,e.max=n,null===t.min&&t.autoscale&&(e.min-=e.tickSize*s,e.min<0&&e.datamin>=0&&(e.min=0),e.min=e.tickSize*Math.floor(e.min/e.tickSize)),null===t.max&&t.autoscale&&(e.max+=e.tickSize*s,e.max>0&&e.datamax<=0&&e.datamax!=e.datamin&&(e.max=0),e.max=e.tickSize*Math.ceil(e.max/e.tickSize)),e.min==e.max&&(e.max=e.min+1)}},calculateTextDimensions:function(e,t){var i,n,s="";if(this.options.showLabels)for(n=0;n<this.ticks.length;++n)i=this.ticks[n].label.length,i>s.length&&(s=this.ticks[n].label);this.maxLabel=e.dimensions(s,{size:t.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=e.dimensions(this.options.title,{size:1.2*t.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(e,t){var i,n,o,r,a=this,l=this.options;for(s.isFunction(e)&&(e=e({min:a.min,max:a.max})),n=0;n<e.length;++n)r=e[n],"object"==typeof r?(i=r[0],o=r.length>1?r[1]:l.tickFormatter(i,{min:a.min,max:a.max})):(i=r,o=l.tickFormatter(i,{min:this.min,max:this.max})),t[n]={v:i,label:o}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var e,t,n=this,s=n.options,o=Math.log(n.max);s.base!=Math.E&&(o/=Math.log(s.base)),o=Math.ceil(o);var r=Math.log(n.min);for(s.base!=Math.E&&(r/=Math.log(s.base)),r=Math.ceil(r),i=r;o>i;i+=n.tickSize){t=s.base==Math.E?Math.exp(i):Math.pow(s.base,i);var a=t*(s.base==Math.E?Math.exp(n.tickSize):Math.pow(s.base,n.tickSize)),l=(a-t)/s.minorTickFreq;for(n.ticks.push({v:t,label:s.tickFormatter(t,{min:n.min,max:n.max})}),e=t+l;a>e;e+=l)n.minorTicks.push({v:e,label:s.tickFormatter(e,{min:n.min,max:n.max})})}t=s.base==Math.E?Math.exp(i):Math.pow(s.base,i),n.ticks.push({v:t,label:s.tickFormatter(t,{min:n.min,max:n.max})})},_calculateTicks:function(){var e,t,i,n,s,o,r=this,a=r.options,l=r.tickSize,c=r.min,h=r.max,d=l*Math.ceil(c/l);for(a.minorTickFreq&&(t=l/a.minorTickFreq),s=0;(i=n=d+s*l)<=h;++s)if(e=a.tickDecimals,null===e&&(e=1-Math.floor(Math.log(l)/Math.LN10)),0>e&&(e=0),i=i.toFixed(e),r.ticks.push({v:i,label:a.tickFormatter(i,{min:r.min,max:r.max})}),a.minorTickFreq)for(o=0;o<a.minorTickFreq&&h>s*l+o*t;++o)i=n+o*t,r.minorTicks.push({v:i,label:a.tickFormatter(i,{min:r.min,max:r.max})})}},s.extend(e,{getAxes:function(t){return{x:new e({options:t.xaxis,n:1,length:this.plotWidth}),x2:new e({options:t.x2axis,n:2,length:this.plotWidth}),y:new e({options:t.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new e({options:t.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=e}(),function(){function e(e){t.extend(this,e)}var t=Flotr._;e.prototype={getRange:function(){var e,t,i,n=this.data,s=n.length,o=Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=-Number.MAX_VALUE,c=!1,h=!1;if(0>s||this.hide)return!1;for(i=0;s>i;i++)e=n[i][0],t=n[i][1],null!==e&&(o>e&&(o=e,c=!0),e>a&&(a=e,c=!0)),null!==t&&(r>t&&(r=t,h=!0),t>l&&(l=t,h=!0));return{xmin:o,xmax:a,ymin:r,ymax:l,xused:c,yused:h}}},t.extend(e,{getSeries:function(i){return t.map(i,function(i){var n;return i.data?(n=new e,t.extend(n,i)):n=new e({data:i}),n})}}),Flotr.Series=e}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(e){var t,i=e.context,n=e.lineWidth,s=e.shadowSize;
i.save(),i.lineJoin="round",s&&(i.lineWidth=s/2,t=n/2+i.lineWidth/2,i.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,t+s/2,!1),i.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,t,!1)),i.lineWidth=n,i.strokeStyle=e.color,this.plot(e,0,!0),i.restore()},plot:function(e,t,i){function n(){!t&&e.fill&&x&&(s=p(x[0]),d.fillStyle=e.fillStyle,d.lineTo(o,w),d.lineTo(s,w),d.lineTo(s,g(x[1])),d.fill(),e.fillBorder&&d.stroke())}var s,o,r,a,l,c,h,d=e.context,u=e.width,f=e.height,p=e.xScale,g=e.yScale,m=e.data,v=e.stacked?this.stack:!1,_=m.length-1,y=null,b=null,w=g(0),x=null;if(!(1>_)){for(d.beginPath(),h=0;_>h;++h)null!==m[h][1]&&null!==m[h+1][1]?(s=p(m[h][0]),o=p(m[h+1][0]),null===x&&(x=m[h]),v?(l=v.values[m[h][0]]||0,c=v.values[m[h+1][0]]||v.values[m[h][0]]||0,r=g(m[h][1]+l),a=g(m[h+1][1]+c),i&&(v.values[m[h][0]]=m[h][1]+l,h==_-1&&(v.values[m[h+1][0]]=m[h+1][1]+c))):(r=g(m[h][1]),a=g(m[h+1][1])),r>f&&a>f||0>r&&0>a||0>s&&0>o||s>u&&o>u||((y!=s||b!=r+t)&&d.moveTo(s,r+t),y=o,b=a+t,e.steps?(d.lineTo(y+t/2,r+t),d.lineTo(y+t/2,b)):d.lineTo(y,b))):e.fill&&h>0&&m[h][1]&&(d.stroke(),n(),x=null,d.closePath(),d.beginPath());(!e.fill||e.fill&&!e.fillBorder)&&d.stroke(),n(),d.closePath()}},extendYRange:function(e,t,i,n){var s=e.options;if(i.stacked&&(!s.max&&0!==s.max||!s.min&&0!==s.min)){var o,r,a=e.max,l=e.min,c=n.positiveSums||{},h=n.negativeSums||{};for(r=0;r<t.length;r++)o=t[r][0]+"",t[r][1]>0?(c[o]=(c[o]||0)+t[r][1],a=Math.max(a,c[o])):(h[o]=(h[o]||0)+t[r][1],l=Math.min(l,h[o]));n.negativeSums=h,n.positiveSums=c,e.max=a,e.min=l}i.steps&&(this.hit=function(e){var t,i=e.data,n=e.args,s=e.yScale,o=n[0],r=i.length,a=n[1],l=e.xInverse(o.relX),c=o.relY;for(t=0;r-1>t;t++)if(l>=i[t][0]&&l<=i[t+1][0]){Math.abs(s(i[t][1])-c)<8&&(a.x=i[t][0],a.y=i[t][1],a.index=t,a.seriesIndex=e.index);break}},this.drawHit=function(e){var t,i=e.context,n=e.args,s=e.data,o=e.xScale,r=n.index,a=o(n.x),l=e.yScale(n.y);s.length-1>r&&(t=e.xScale(s[r+1][0]),i.save(),i.strokeStyle=e.color,i.lineWidth=e.lineWidth,i.beginPath(),i.moveTo(a,l),i.lineTo(t,l),i.stroke(),i.closePath(),i.restore())},this.clearHit=function(e){var t,i=e.context,n=e.args,s=e.data,o=e.xScale,r=e.lineWidth,a=n.index,l=o(n.x),c=e.yScale(n.y);s.length-1>a&&(t=e.xScale(s[a+1][0]),i.clearRect(l-r,c-r,t-l+2*r,2*r))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var t=e.context;this.current+=1,t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e){var t,i,n,s,o,r,a=e.data,l=e.context,c=e.shadowSize;if(!(a.length<1))for(this.translate(l,e.horizontal),t=0;t<a.length;t++)i=this.getBarGeometry(a[t][0],a[t][1],e),null!==i&&(n=i.left,s=i.top,o=i.width,r=i.height,e.fill&&l.fillRect(n,s,o,r),c&&(l.save(),l.fillStyle="rgba(0,0,0,0.05)",l.fillRect(n+c,s+c,o,r),l.restore()),e.lineWidth&&l.strokeRect(n,s,o,r))},translate:function(e,t){t&&(e.rotate(-Math.PI/2),e.scale(-1,1))},getBarGeometry:function(e,t,i){var n,s,o,r,a,l=i.horizontal,c=i.barWidth,h=i.centered,d=i.stacked?this.stack:!1,u=i.lineWidth,f=h?c/2:0,p=l?i.yScale:i.xScale,g=l?i.xScale:i.yScale,m=l?t:e,v=l?e:t,_=0;return i.grouped&&(this.current/this.groups,m-=f,c/=this.groups,f=c/2,m=m+c*this.current-f),d&&(n=v>0?d.positive:d.negative,_=n[m]||_,n[m]=_+v),s=p(m-f),o=p(m+c-f),r=g(v+_),a=g(_),0>a&&(a=0),null===e||null===t?null:{x:m,y:v,xScale:p,yScale:g,top:r,left:Math.min(s,o)-u/2,width:Math.abs(o-s)-u,height:a-r}},hit:function(e){var t,i,n=e.data,s=e.args,o=s[0],r=s[1],a=e.xInverse(o.relX),l=e.yInverse(o.relY),c=this.getBarGeometry(a,l,e),h=c.width/2,d=c.left,u=c.y;for(i=n.length;i--;)t=this.getBarGeometry(n[i][0],n[i][1],e),(u>0&&u<t.y||0>u&&u>t.y)&&Math.abs(d-t.left)<h&&(r.x=n[i][0],r.y=n[i][1],r.index=i,r.seriesIndex=e.index)},drawHit:function(e){var t=e.context,i=e.args,n=this.getBarGeometry(i.x,i.y,e),s=n.left,o=n.top,r=n.width,a=n.height;t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,this.translate(t,e.horizontal),t.beginPath(),t.moveTo(s,o+a),t.lineTo(s,o),t.lineTo(s+r,o),t.lineTo(s+r,o+a),e.fill&&(t.fillStyle=e.fillStyle,t.fill()),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,i=e.args,n=this.getBarGeometry(i.x,i.y,e),s=n.left,o=n.width,r=n.top,a=n.height,l=2*e.lineWidth;t.save(),this.translate(t,e.horizontal),t.clearRect(s-l,Math.min(r,r+a)-l,o+2*l,Math.abs(a)+2*l),t.restore()},extendXRange:function(e,t,i,n){this._extendRange(e,t,i,n),this.groups=this.groups+1||1,this.current=0},extendYRange:function(e,t,i,n){this._extendRange(e,t,i,n)},_extendRange:function(e,i,n){var s=e.options.max;if(!t.isNumber(s)&&!t.isString(s)){var o,r,a,l=e.min,c=e.max,h=n.horizontal,d=e.orientation,u=this.positiveSums||{},f=this.negativeSums||{};if((1==d&&!h||-1==d&&h)&&n.centered&&(c=Math.max(e.datamax+n.barWidth,c),l=Math.min(e.datamin-n.barWidth,l)),n.stacked&&(1==d&&h||-1==d&&!h))for(a=i.length;a--;)o=i[a][1==d?1:0]+"",r=i[a][1==d?0:1],r>0?(u[o]=(u[o]||0)+r,c=Math.max(c,u[o])):(f[o]=(f[o]||0)+r,l=Math.min(l,f[o]));(1==d&&h||-1==d&&!h)&&n.topPadding&&(e.max===e.datamax||n.stacked&&this.stackMax!==c)&&(c+=n.topPadding*(c-l)),this.stackMin=l,this.stackMax=c,this.negativeSums=f,this.positiveSums=u,e.max=c,e.min=l}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(e){var t=e.context,i=e.shadowSize;t.save(),t.lineWidth=e.lineWidth,t.fillStyle="rgba(0,0,0,0.05)",t.strokeStyle="rgba(0,0,0,0.05)",this.plot(e,i/2),t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i/4),t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e,t){var i,n,s=e.data,o=e.context;for(t=t||0,n=0;n<s.length;++n)i=this.getGeometry(s[n],e),o.beginPath(),o.arc(i.x+t,i.y+t,i.z,0,2*Math.PI,!0),o.stroke(),e.fill&&o.fill(),o.closePath()},getGeometry:function(e,t){return{x:t.xScale(e[0]),y:t.yScale(e[1]),z:e[2]*t.baseRadius}},hit:function(e){var t,n,s,o,r=e.data,a=e.args,l=a[0],c=a[1],h=l.relX,d=l.relY;for(c.best=c.best||Number.MAX_VALUE,i=r.length;i--;)n=this.getGeometry(r[i],e),s=n.x-h,o=n.y-d,t=Math.sqrt(s*s+o*o),t<n.z&&n.z<c.best&&(c.x=r[i][0],c.y=r[i][1],c.index=i,c.seriesIndex=e.index,c.best=n.z)},drawHit:function(e){var t=e.context,i=this.getGeometry(e.data[e.args.index],e);t.save(),t.lineWidth=e.lineWidth,t.fillStyle=e.fillStyle,t.strokeStyle=e.color,t.beginPath(),t.arc(i.x,i.y,i.z,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,i=this.getGeometry(e.data[e.args.index],e),n=i.z+e.lineWidth;t.save(),t.clearRect(i.x-n,i.y-n,2*n,2*n),t.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineCap="butt",t.lineWidth=e.wickLineWidth||e.lineWidth,this.plot(e),t.restore()},plot:function(e){var t,i,n,s,o,r,a,l,c,h,d,u,f,p,g,m=e.data,v=e.context,_=e.xScale,y=e.yScale,b=e.candleWidth/2,w=e.shadowSize,x=e.lineWidth,C=e.wickLineWidth,k=C%2/2;if(!(m.length<1))for(g=0;g<m.length;g++)i=m[g],n=i[0],o=i[1],r=i[2],a=i[3],l=i[4],c=_(n-b),h=_(n+b),d=y(a),u=y(r),f=y(Math.min(o,l)),p=y(Math.max(o,l)),t=e[o>l?"downFillColor":"upFillColor"],e.fill&&!e.barcharts&&(v.fillStyle="rgba(0,0,0,0.05)",v.fillRect(c+w,p+w,h-c,f-p),v.save(),v.globalAlpha=e.fillOpacity,v.fillStyle=t,v.fillRect(c,p+x,h-c,f-p),v.restore()),(x||C)&&(n=Math.floor((c+h)/2)+k,v.strokeStyle=t,v.beginPath(),e.barcharts?(v.moveTo(n,Math.floor(u+b)),v.lineTo(n,Math.floor(d+b)),s=Math.floor(o+b)+.5,v.moveTo(Math.floor(c)+k,s),v.lineTo(n,s),s=Math.floor(l+b)+.5,v.moveTo(Math.floor(h)+k,s),v.lineTo(n,s)):(v.strokeRect(c,p+x,h-c,f-p),v.moveTo(n,Math.floor(p+x)),v.lineTo(n,Math.floor(u+x)),v.moveTo(n,Math.floor(f+x)),v.lineTo(n,Math.floor(d+x))),v.closePath(),v.stroke())},extendXRange:function(e){null===e.options.max&&(e.max=Math.max(e.datamax+.5,e.max),e.min=Math.min(e.datamin-.5,e.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(e){var t=this.ctx,i=e.gantt.barWidth,n=Math.min(e.gantt.lineWidth,i);if(t.save(),t.translate(this.plotOffset.left,this.plotOffset.top),t.lineJoin="miter",t.lineWidth=n,t.strokeStyle=e.color,t.save(),this.gantt.plotShadows(e,i,0,e.gantt.fill),t.restore(),e.gantt.fill){var s=e.gantt.fillColor||e.color;t.fillStyle=this.processColor(s,{opacity:e.gantt.fillOpacity})}this.gantt.plot(e,i,0,e.gantt.fill),t.restore()},plot:function(e,t,i,n){var s=e.data;if(!(s.length<1)){var o,r=e.xaxis,a=e.yaxis,l=this.ctx;for(o=0;o<s.length;o++){var c=s[o][0],h=s[o][1],d=s[o][2],u=!0,f=!0,p=!0;if(null!==h&&null!==d){var g=h,m=h+d,v=c-(e.gantt.centered?t/2:0),_=c+t-(e.gantt.centered?t/2:0);m<r.min||g>r.max||_<a.min||v>a.max||(g<r.min&&(g=r.min,u=!1),m>r.max&&(m=r.max,r.lastSerie!=e&&(f=!1)),v<a.min&&(v=a.min),_>a.max&&(_=a.max,a.lastSerie!=e&&(f=!1)),n&&(l.beginPath(),l.moveTo(r.d2p(g),a.d2p(v)+i),l.lineTo(r.d2p(g),a.d2p(_)+i),l.lineTo(r.d2p(m),a.d2p(_)+i),l.lineTo(r.d2p(m),a.d2p(v)+i),l.fill(),l.closePath()),e.gantt.lineWidth&&(u||p||f)&&(l.beginPath(),l.moveTo(r.d2p(g),a.d2p(v)+i),l[u?"lineTo":"moveTo"](r.d2p(g),a.d2p(_)+i),l[f?"lineTo":"moveTo"](r.d2p(m),a.d2p(_)+i),l[p?"lineTo":"moveTo"](r.d2p(m),a.d2p(v)+i),l.stroke(),l.closePath()))}}}},plotShadows:function(e,t){var i=e.data;if(!(i.length<1)){var n,s,o,r,a=e.xaxis,l=e.yaxis,c=this.ctx,h=this.options.shadowSize;for(n=0;n<i.length;n++)if(s=i[n][0],o=i[n][1],r=i[n][2],null!==o&&null!==r){var d=o,u=o+r,f=s-(e.gantt.centered?t/2:0),p=s+t-(e.gantt.centered?t/2:0);if(!(u<a.min||d>a.max||p<l.min||f>l.max)){d<a.min&&(d=a.min),u>a.max&&(u=a.max),f<l.min&&(f=l.min),p>l.max&&(p=l.max);var g=a.d2p(u)-a.d2p(d)-(a.d2p(u)+h<=this.plotWidth?0:h),m=l.d2p(f)-l.d2p(p)-(l.d2p(f)+h<=this.plotHeight?0:h);c.fillStyle="rgba(0,0,0,0.05)",c.fillRect(Math.min(a.d2p(d)+h,this.plotWidth),Math.min(l.d2p(p)+h,this.plotHeight),g,m)}}}},extendXRange:function(e){if(null===e.options.max){var t,i,n,s,o=e.min,r=e.max,a={},l=null;for(t=0;t<this.series.length;++t)if(n=this.series[t],s=n.gantt,s.show&&n.xaxis==e){for(i=0;i<n.data.length;i++)s.show&&(y=n.data[i][0]+"",a[y]=Math.max(a[y]||0,n.data[i][1]+n.data[i][2]),l=n);for(i in a)r=Math.max(a[i],r)}e.lastSerie=l,e.max=r,e.min=o}},extendYRange:function(e){if(null===e.options.max){var t,i,n,s,o=Number.MIN_VALUE,r=Number.MAX_VALUE,a=null;for(t=0;t<this.series.length;++t)if(n=this.series[t],s=n.gantt,s.show&&!n.hide&&n.yaxis==e){var l=Number.MIN_VALUE,c=Number.MAX_VALUE;for(i=0;i<n.data.length;i++)l=Math.max(l,n.data[i][0]),c=Math.min(c,n.data[i][0]);s.centered?(o=Math.max(l+.5,o),r=Math.min(c-.5,r)):(o=Math.max(l+1,o),r=Math.min(c,r)),s.barWidth+l>o&&(o=e.max+s.barWidth)}e.lastSerie=a,e.max=o,e.min=r,e.tickSize=Flotr.getTickSize(e.options.noTicks,r,o,e.options.tickDecimals)}}}),function(){function e(e){return"object"==typeof e&&e.constructor&&(Image?!0:e.constructor===Image)}Flotr.defaultMarkerFormatter=function(e){return Math.round(100*e.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(e){function t(e,t){return n=d.negative[e]||0,i=d.positive[e]||0,t>0?(d.positive[e]=n+t,n+t):(d.negative[e]=i+t,i+t)}var i,n,s,o,r,a,l,c=e.data,h=e.context,d=e.stacked?e.stack:!1,u=e.stackingType;for(h.save(),h.lineJoin="round",h.lineWidth=e.lineWidth,h.strokeStyle="rgba(0,0,0,0.5)",h.fillStyle=e.fillStyle,o=0;o<c.length;++o)r=c[o][0],a=c[o][1],d&&("b"==u?e.horizontal?a=t(a,r):r=t(r,a):"a"==u&&(s=d.values[r]||0,d.values[r]=s+a,a=s+a)),l=e.labelFormatter({x:r,y:a,index:o,data:c}),this.plot(e.xScale(r),e.yScale(a),l,e);h.restore()},plot:function(t,i,n,s){if(s.context,e(n)&&!n.complete)throw"Marker image not loaded.";this._plot(t,i,n,s)},_plot:function(t,i,n,s){var o,r=s.context,a=2,l=t,c=i;o=e(n)?{height:n.height,width:n.width}:s.text.canvas(n),o.width=Math.floor(o.width+2*a),o.height=Math.floor(o.height+2*a),-1!=s.position.indexOf("c")?l-=o.width/2+a:-1!=s.position.indexOf("l")&&(l-=o.width),-1!=s.position.indexOf("m")?c-=o.height/2+a:-1!=s.position.indexOf("t")?c-=o.height+s.verticalMargin:c+=s.verticalMargin,l=Math.floor(l)+.5,c=Math.floor(c)+.5,s.fill&&r.fillRect(l,c,o.width,o.height),s.stroke&&r.strokeRect(l,c,o.width,o.height),e(n)?r.drawImage(n,l+a,c+a):Flotr.drawText(r,n,l+a,c+a,{textBaseline:"top",textAlign:"left",size:s.fontSize,color:s.color})}})}(),function(){Flotr._,Flotr.defaultPieLabelFormatter=function(e,t){return(100*t/e).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:.8*(Math.PI/2),pie3DspliceThickness:20,epsilon:.1},draw:function(e){var t,i,n,s=e.data,o=e.context,r=o.canvas,a=e.lineWidth,l=e.shadowSize,c=e.sizeRatio,h=e.height,d=e.width,u=e.explode,f=e.color,p=e.fill,g=e.fillStyle,m=Math.min(r.width,r.height)*c/2,v=s[0][1],_=[],y=1,b=2*Math.PI*v/this.total,w=this.startAngle||2*Math.PI*e.startAngle,x=w+b,C=w+b/2,k=e.labelFormatter(this.total,v),T=u+m+4,S=Math.cos(C)*T,D=Math.sin(C)*T,M=0>S?"right":"left",j=D>0?"top":"bottom";if(o.save(),o.translate(d/2,h/2),o.scale(1,y),i=Math.cos(C)*u,n=Math.sin(C)*u,l>0&&(this.plotSlice(i+l,n+l,m,w,x,o),p&&(o.fillStyle="rgba(0,0,0,0.1)",o.fill())),this.plotSlice(i,n,m,w,x,o),p&&(o.fillStyle=g,o.fill()),o.lineWidth=a,o.strokeStyle=f,o.stroke(),t={size:1.2*e.fontSize,color:e.fontColor,weight:1.5},k&&(e.htmlText||!e.textEnabled?(divStyle="position:absolute;"+j+":"+(h/2+("top"===j?D:-D))+"px;",divStyle+=M+":"+(d/2+("right"===M?-S:S))+"px;",_.push('<div style="',divStyle,'" class="flotr-grid-label">',k,"</div>")):(t.textAlign=M,t.textBaseline=j,Flotr.drawText(o,k,S,D,t))),e.htmlText||!e.textEnabled){var E=Flotr.DOM.node('<div style="color:'+e.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(E,_.join("")),Flotr.DOM.insert(e.element,E)}o.restore(),this.startAngle=x,this.slices=this.slices||[],this.slices.push({radius:Math.min(r.width,r.height)*c/2,x:i,y:n,explode:u,start:w,end:x})},plotSlice:function(e,t,i,n,s,o){o.beginPath(),o.moveTo(e,t),o.arc(e,t,i,n,s,!1),o.lineTo(e,t),o.closePath()},hit:function(e){var t=e.data[0],i=e.args,n=e.index,s=i[0],o=i[1],r=this.slices[n],a=s.relX-e.width/2,l=s.relY-e.height/2,c=Math.sqrt(a*a+l*l),h=Math.atan(l/a),d=2*Math.PI,u=r.explode||e.explode,f=r.start%d,p=r.end%d,g=e.epsilon;0>a?h+=Math.PI:a>0&&0>l&&(h+=d),c<r.radius+u&&c>u&&(h>f&&p>h||f>p&&(p>h||h>f)||f===p&&(r.start===r.end&&Math.abs(h-f)<g||r.start!==r.end&&Math.abs(h-f)>g))&&(o.x=t[0],o.y=t[1],o.sAngle=f,o.eAngle=p,o.index=0,o.seriesIndex=n,o.fraction=t[1]/this.total)},drawHit:function(e){var t=e.context,i=this.slices[e.args.seriesIndex];t.save(),t.translate(e.width/2,e.height/2),this.plotSlice(i.x,i.y,i.radius,i.start,i.end,t),t.stroke(),t.restore()},clearHit:function(e){var t=e.context,i=this.slices[e.args.seriesIndex],n=2*e.lineWidth,s=i.radius+n;t.save(),t.translate(e.width/2,e.height/2),t.clearRect(i.x-s,i.y-s,2*s+n,2*s+n),t.restore()},extendYRange:function(e,t){this.total=(this.total||0)+t[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(e){var t=e.context,i=(e.lineWidth,e.shadowSize);t.save(),i>0&&(t.lineWidth=i/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i/2+t.lineWidth/2),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,t.lineWidth/2)),t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e,t){var i,n,s,o=e.data,r=e.context,a=e.xScale,l=e.yScale;for(i=o.length-1;i>-1;--i)s=o[i][1],null!==s&&(n=a(o[i][0]),s=l(s),0>n||n>e.width||0>s||s>e.height||(r.beginPath(),t?r.arc(n,s+t,e.radius,0,Math.PI,!1):(r.arc(n,s,e.radius,0,2*Math.PI,!0),e.fill&&r.fill()),r.stroke(),r.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9},draw:function(e){var t=e.context,i=e.shadowSize;t.save(),t.translate(e.width/2,e.height/2),t.lineWidth=e.lineWidth,t.fillStyle="rgba(0,0,0,0.05)",t.strokeStyle="rgba(0,0,0,0.05)",this.plot(e,i/2),t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i/4),t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e,t){var i,n,s=e.data,o=e.context,r=Math.min(e.height,e.width)*e.radiusRatio/2,a=2*Math.PI/s.length,l=-Math.PI/2;for(t=t||0,o.beginPath(),i=0;i<s.length;++i)n=s[i][1]/this.max,o[0===i?"moveTo":"lineTo"](Math.cos(i*a+l)*r*n+t,Math.sin(i*a+l)*r*n+t);o.closePath(),e.fill&&o.fill(),o.stroke()},extendYRange:function(e){this.max=Math.max(e.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e){var t=e.data,i=e.context,n=e.xScale,s=e.yScale,o=e.barWidth,r=e.lineWidth;Flotr._.each(t,function(e){var t=e[0],a=e[1],l=e[2],c=o,h=Math.ceil(n(t)),d=Math.ceil(n(t+l))-h,u=Math.round(s(a)),f=Math.round(s(a-c))-u,p=h-r/2,g=Math.round(u-f/2)-r/2;i.strokeRect(p,g,d,f),i.fillRect(p,g,d,f)})},extendRange:function(e){var t=e.data,i=e.xaxis,n=e.yaxis,s=e.timeline.barWidth;if(null===i.options.min&&(i.min=i.datamin-s/2),null===i.options.max){var o=i.max;Flotr._.each(t,function(e){o=Math.max(o,e[0]+e[2])},this),i.max=o+s/2}null===n.options.min&&(n.min=n.datamin-s),null===n.options.min&&(n.max=n.datamax+s)}}),function(){var e=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(e,t){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(t))}},drawCrosshair:function(t){var i=this.octx,n=this.options.crosshair,s=this.plotOffset,o=s.left+Math.round(t.relX)+.5,r=s.top+Math.round(t.relY)+.5;return t.relX<0||t.relY<0||t.relX>this.plotWidth||t.relY>this.plotHeight?(this.el.style.cursor=null,e.removeClass(this.el,"flotr-crosshair"),void 0):(n.hideCursor&&(this.el.style.cursor="none",e.addClass(this.el,"flotr-crosshair")),i.save(),i.strokeStyle=n.color,i.lineWidth=1,i.beginPath(),-1!=n.mode.indexOf("x")&&(i.moveTo(o,s.top),i.lineTo(o,s.top+this.plotHeight)),-1!=n.mode.indexOf("y")&&(i.moveTo(s.left,r),i.lineTo(s.left+this.plotWidth,r)),i.stroke(),i.restore(),void 0)},clearCrosshair:function(){var e=this.plotOffset,t=this.lastMousePos,i=this.octx;t&&(i.clearRect(Math.round(t.relX)+e.left,e.top,1,this.plotHeight+1),i.clearRect(e.left,Math.round(t.relY)+e.top,this.plotWidth+1,1))}})}(),function(){function e(e,t){var i="image/"+e,n=t.toDataURL(i),s=new Image;return s.src=n,s}var t=Flotr.DOM,i=Flotr._;Flotr.addPlugin("download",{saveImage:function(n,s,o,r){var a=null;if(Flotr.isIE&&Flotr.isIE<9)return a="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(a);if("jpeg"===n||"png"===n)return a=e(n,this.canvas,s,o),i.isElement(a)&&r?(this.download.restoreCanvas(),t.hide(this.canvas),t.hide(this.overlay),t.setStyles({position:"absolute"}),t.insert(this.el,a),this.saveImageElement=a,void 0):window.open(a.src)},restoreCanvas:function(){t.show(this.canvas),t.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var e=Flotr.EventAdapter,t=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function i(e){for(a=0;a<e.length;++a){var t=e[a].v/r.max;for(l=0;y>=l;++l)c[0===l?"moveTo":"lineTo"](Math.cos(l*b+w)*_*t,Math.sin(l*b+w)*_*t)}}function n(e,i){t.each(t.pluck(e,"v"),function(e){e<=r.min||e>=r.max||(e==r.min||e==r.max)&&d.outlineWidth||i(Math.floor(r.d2p(e))+c.lineWidth/2)})}function s(e){c.moveTo(e,0),c.lineTo(e,m)}function o(e){c.moveTo(0,e),c.lineTo(v,e)}var r,a,l,c=this.ctx,h=this.options,d=h.grid,u=d.verticalLines,f=d.horizontalLines,p=d.minorVerticalLines,g=d.minorHorizontalLines,m=this.plotHeight,v=this.plotWidth;if((u||p||f||g)&&e.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,h,this]),c.save(),c.lineWidth=1,c.strokeStyle=d.tickColor,d.circular){c.translate(this.plotOffset.left+v/2,this.plotOffset.top+m/2);var _=Math.min(m,v)*h.radar.radiusRatio/2,y=this.axes.x.ticks.length,b=2*(Math.PI/y),w=-Math.PI/2;c.beginPath(),r=this.axes.y,f&&i(r.ticks),g&&i(r.minorTicks),u&&t.times(y,function(e){c.moveTo(0,0),c.lineTo(Math.cos(e*b+w)*_,Math.sin(e*b+w)*_)}),c.stroke()}else c.translate(this.plotOffset.left,this.plotOffset.top),d.backgroundColor&&(c.fillStyle=this.processColor(d.backgroundColor,{x1:0,y1:0,x2:v,y2:m}),c.fillRect(0,0,v,m)),c.beginPath(),r=this.axes.x,u&&n(r.ticks,s),p&&n(r.minorTicks,s),r=this.axes.y,f&&n(r.ticks,o),g&&n(r.minorTicks,o),c.stroke();c.restore(),(u||p||f||g)&&e.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,h,this])},drawOutline:function(){var e,t,n,s,o=this,r=o.options,a=r.grid,l=a.outline,c=o.ctx,h=a.backgroundImage,d=o.plotOffset,u=d.left,f=d.top,p=o.plotWidth,g=o.plotHeight;if(a.outlineWidth){if(c.save(),a.circular){c.translate(u+p/2,f+g/2);var m=Math.min(g,p)*r.radar.radiusRatio/2,v=this.axes.x.ticks.length,_=2*(Math.PI/v),y=-Math.PI/2;for(c.beginPath(),c.lineWidth=a.outlineWidth,c.strokeStyle=a.color,c.lineJoin="round",i=0;v>=i;++i)c[0===i?"moveTo":"lineTo"](Math.cos(i*_+y)*m,Math.sin(i*_+y)*m);c.stroke()}else{c.translate(u,f);var b=a.outlineWidth,w=.5-b+(b+1)%2/2,x="lineTo",C="moveTo";c.lineWidth=b,c.strokeStyle=a.color,c.lineJoin="miter",c.beginPath(),c.moveTo(w,w),p-=b/2%1,g+=b/2,c[-1!==l.indexOf("n")?x:C](p,w),c[-1!==l.indexOf("e")?x:C](p,g),c[-1!==l.indexOf("s")?x:C](w,g),c[-1!==l.indexOf("w")?x:C](w,w),c.stroke(),c.closePath()}c.restore(),h&&(t=h.src||h,n=(parseInt(h.left,10)||0)+d.left,s=(parseInt(h.top,10)||0)+d.top,e=new Image,e.onload=function(){c.save(),h.alpha&&(c.globalAlpha=h.alpha),c.globalCompositeOperation="destination-over",c.drawImage(e,0,0,e.width,e.height,n,s,p,g),c.restore()},e.src=t)}}})}(),function(){var e=Flotr.DOM,t=Flotr._,i=Flotr,n="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(e,t){this.hit.track(t)},"flotr:click":function(e){var i=this.hit.track(e);t.defaults(e,i)},"flotr:mouseout":function(){this.hit.clearHit()},"flotr:destroy":function(){this.mouseTrack=null}},track:function(e){return this.options.mouse.track||t.any(this.series,function(e){return e.mouse&&e.mouse.track})?this.hit.hit(e):void 0},executeOnType:function(e,n,s){function o(e,o){t.each(t.keys(i.graphTypes),function(t){e[t]&&e[t].show&&this[t][n]&&(r=this.getOptions(e,t),r.fill=!!e.mouse.fillColor,r.fillStyle=this.processColor(e.mouse.fillColor||"#ffffff",{opacity:e.mouse.fillOpacity}),r.color=e.mouse.lineColor,r.context=this.octx,r.index=o,s&&(r.args=s),this[t][n].call(this[t],r),a=!0)},this)}var r,a=!1;return t.isArray(e)||(e=[e]),t.each(e,o,this),a},drawHit:function(e){var t=this.octx,i=e.series;if(i.mouse.lineColor){if(t.save(),t.lineWidth=i.points?i.points.lineWidth:1,t.strokeStyle=i.mouse.lineColor,t.fillStyle=this.processColor(i.mouse.fillColor||"#ffffff",{opacity:i.mouse.fillOpacity}),t.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(i,"drawHit",e)){var n=e.xaxis,s=e.yaxis;t.beginPath(),t.arc(n.d2p(e.x),s.d2p(e.y),i.points.hitRadius||i.points.radius||i.mouse.radius,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath()}t.restore(),this.clip(t)}this.prevHit=e},clearHit:function(){var t=this.prevHit,i=this.octx,n=this.plotOffset;if(i.save(),i.translate(n.left,n.top),t){if(!this.hit.executeOnType(t.series,"clearHit",this.prevHit)){var s=t.series,o=s.points?s.points.lineWidth:1;offset=(s.points.hitRadius||s.points.radius||s.mouse.radius)+o,i.clearRect(t.xaxis.d2p(t.x)-offset,t.yaxis.d2p(t.y)-offset,2*offset,2*offset)}e.hide(this.mouseTrack),this.prevHit=null}i.restore()},hit:function(e){var i,n,s,o,r,a,l,c=this.options,h=this.prevHit;if(0!==this.series.length)return l={relX:e.relX,relY:e.relY,absX:e.absX,absY:e.absY},c.mouse.trackY&&!c.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[e,l])&&!t.isUndefined(l.seriesIndex)?(o=this.series[l.seriesIndex],l.series=o,l.mouse=o.mouse,l.xaxis=o.xaxis,l.yaxis=o.yaxis):(i=this.hit.closest(e),i&&(i=c.mouse.trackY?i.point:i.x,s=i.seriesIndex,o=this.series[s],r=o.xaxis,a=o.yaxis,n=2*o.mouse.sensibility,(c.mouse.trackAll||i.distanceX<n/r.scale&&(!c.mouse.trackY||i.distanceY<n/a.scale))&&(l.series=o,l.xaxis=o.xaxis,l.yaxis=o.yaxis,l.mouse=o.mouse,l.x=i.x,l.y=i.y,l.dist=i.distance,l.index=i.dataIndex,l.seriesIndex=s))),h&&h.index===l.index&&h.seriesIndex===l.seriesIndex||(this.hit.clearHit(),l.series&&l.mouse&&l.mouse.track&&(this.hit.drawMouseTrack(l),this.hit.drawHit(l),Flotr.EventAdapter.fire(this.el,"flotr:hit",[l,this]))),l},closest:function(e){function t(e){e.distance=s,e.distanceX=o,e.distanceY=r,e.seriesIndex=d,e.dataIndex=u,e.x=c,e.y=h,b=!0}var i,n,s,o,r,a,l,c,h,d,u,f=this.series,p=(this.options,e.relX),g=e.relY,m=Number.MAX_VALUE,v=Number.MAX_VALUE,_={},y={},b=!1;for(d=0;d<f.length;d++)for(i=f[d],n=i.data,a=i.xaxis.p2d(p),l=i.yaxis.p2d(g),u=n.length;u--;)c=n[u][0],h=n[u][1],null!==c&&null!==h&&(c<i.xaxis.min||c>i.xaxis.max||(o=Math.abs(c-a),r=Math.abs(h-l),s=o*o+r*r,m>s&&(m=s,t(_)),v>o&&(v=o,t(y))));return b?{point:_,x:y}:!1},drawMouseTrack:function(t){var i="",s=t.series,o=t.mouse.position,r=t.mouse.margin,a=t.x,l=t.y,c=n,h=this.mouseTrack,d=this.plotOffset,u=d.left,f=d.right,p=d.bottom,g=d.top,m=t.mouse.trackDecimals;if(this.options,h||(h=e.node('<div class="flotr-mouse-value"></div>'),this.mouseTrack=h,e.insert(this.el,h)),t.mouse.relative)if(s.pie&&s.pie.show){var v={x:this.plotWidth/2,y:this.plotHeight/2},_=Math.min(this.canvasWidth,this.canvasHeight)*s.pie.sizeRatio/2,y=t.sAngle<t.eAngle?(t.sAngle+t.eAngle)/2:(t.sAngle+t.eAngle+2*Math.PI)/2;i+="bottom:"+(r-g-v.y-Math.sin(y)*_/2+this.canvasHeight)+"px;top:auto;",i+="left:"+(r+u+v.x+Math.cos(y)*_/2)+"px;right:auto;"}else i+=/n/.test(o)?"bottom:"+(r-g-t.yaxis.d2p(t.y)+this.canvasHeight)+"px;top:auto;":"top:"+(r+g+t.yaxis.d2p(t.y))+"px;bottom:auto;",i+=/w/.test(o)?"right:"+(r-u-t.xaxis.d2p(t.x)+this.canvasWidth)+"px;left:auto;":"left:"+(r+u+t.xaxis.d2p(t.x))+"px;right:auto;";else"n"==o.charAt(0)?i+="top:"+(r+g)+"px;bottom:auto;":"s"==o.charAt(0)&&(i+="bottom:"+(r+p)+"px;top:auto;"),"e"==o.charAt(1)?i+="right:"+(r+f)+"px;left:auto;":"w"==o.charAt(1)&&(i+="left:"+(r+u)+"px;right:auto;");c+=i,h.style.cssText=c,(!m||0>m)&&(m=0),a&&a.toFixed&&(a=a.toFixed(m)),l&&l.toFixed&&(l=l.toFixed(m)),h.innerHTML=t.mouse.trackFormatter({x:a,y:l,series:t.series,index:t.index,nearest:t,fraction:t.fraction}),e.show(h),t.mouse.relative&&(/[ew]/.test(o)?/[ns]/.test(o)||(h.style.top=g+t.yaxis.d2p(t.y)-e.size(h).height/2+"px"):h.style.left=u+t.xaxis.d2p(t.x)-e.size(h).width/2+"px")}})}(),function(){function e(e){return e.which?1===e.which:0===e.button||1===e.button}function t(e,t){return Math.min(Math.max(0,e),t.plotWidth-1)}function i(e,t){return Math.min(Math.max(0,e),t.plotHeight)}var n=(Flotr.DOM,Flotr.EventAdapter),s=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(e){var t=this.options.selection,i=this.selection,n=this.getEventPosition(e);t&&t.mode&&(i.interval&&clearInterval(i.interval),this.multitouches?i.updateSelection():t.pinchOnly||i.setSelectionPos(i.selection.second,n),i.clearSelection(),i.selecting&&i.selectionIsSane()&&(i.drawSelection(),i.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(t){var i=this.options.selection,n=this.selection,o=this.getEventPosition(t);i&&i.mode&&(!i.mode||!e(t)&&s.isUndefined(t.touches)||(i.pinchOnly||n.setSelectionPos(n.selection.first,o),n.interval&&clearInterval(n.interval),this.lastMousePos.pageX=null,n.selecting=!1,n.interval=setInterval(s.bind(n.updateSelection,this),1e3/i.fps)))},"flotr:destroy":function(){clearInterval(this.selection.interval)}},getArea:function(){var e,t,i,n,s=this.selection.selection,o=this.axes;return s.first,s.second,e=o.x.p2d(s.first.x),t=o.x.p2d(s.second.x),i=o.y.p2d(s.first.y),n=o.y.p2d(s.second.y),{x1:Math.min(e,t),y1:Math.min(i,n),x2:Math.max(e,t),y2:Math.max(i,n),xfirst:e,xsecond:t,yfirst:i,ysecond:n}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(e){var t=this.selection.getArea();e=e||"select",t.selection=this.selection.selection,n.fire(this.el,"flotr:"+e,[t,this])},setSelection:function(e,n){var s=this.options,o=this.axes.x,r=this.axes.y,a=r.scale,l=o.scale,c=-1!=s.selection.mode.indexOf("x"),h=-1!=s.selection.mode.indexOf("y"),d=this.selection.selection;this.selection.clearSelection(),d.first.y=i(c&&!h?0:(r.max-e.y1)*a,this),d.second.y=i(c&&!h?this.plotHeight-1:(r.max-e.y2)*a,this),d.first.x=t(h&&!c?0:(e.x1-o.min)*l,this),d.second.x=t(h&&!c?this.plotWidth:(e.x2-o.min)*l,this),this.selection.drawSelection(),n||this.selection.fireSelectEvent()},setSelectionPos:function(e,n){var s=this.options.selection.mode,o=this.selection.selection;e.x=-1==s.indexOf("x")?e==o.first?0:this.plotWidth:t(n.relX,this),e.y=-1==s.indexOf("y")?e==o.first?0:this.plotHeight-1:i(n.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var e=this.selection.selection,t=this.octx,i=this.options,n=this.plotOffset,s=this.selection.prevSelection;if(!s||e.first.x!=s.first.x||e.first.y!=s.first.y||e.second.x!=s.second.x||e.second.y!=s.second.y){t.save(),t.strokeStyle=this.processColor(i.selection.color,{opacity:.8}),t.lineWidth=1,t.lineJoin="miter",t.fillStyle=this.processColor(i.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:e.first.x,y:e.first.y},second:{x:e.second.x,y:e.second.y}};var o=Math.min(e.first.x,e.second.x),r=Math.min(e.first.y,e.second.y),a=Math.abs(e.second.x-e.first.x),l=Math.abs(e.second.y-e.first.y);t.fillRect(o+n.left+.5,r+n.top+.5,a,l),t.strokeRect(o+n.left+.5,r+n.top+.5,a,l),t.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var e=this.selection.prevSelection,t=1,i=this.plotOffset,n=Math.min(e.first.x,e.second.x),s=Math.min(e.first.y,e.second.y),o=Math.abs(e.second.x-e.first.x),r=Math.abs(e.second.y-e.first.y);this.octx.clearRect(n+i.left-t+.5,s+i.top-t,o+2*t+.5,r+2*t+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var e=this.selection.selection;return Math.abs(e.second.x-e.first.x)>=5||Math.abs(e.second.y-e.first.y)>=5}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function t(e,t,i){var n,o=i?t.minorTicks:t.ticks,a=1===t.orientation;for(1===t.n,n={color:t.options.color||p.grid.color,angle:Flotr.toRad(t.options.labelsAngle),textBaseline:"middle"},d=0;d<o.length&&(i?t.options.showMinorLabels:t.options.showLabels);++d)s=o[d],s.label+="",s.label&&s.label.length&&(x=Math.cos(d*l+c)*r,y=Math.sin(d*l+c)*r,n.textAlign=a?Math.abs(x)<.1?"center":0>x?"right":"left":"left",Flotr.drawText(g,s.label,a?x:3,a?y:-(t.ticks[d].v/t.max)*(r-p.fontSize),n))
}function i(e,t,i,n){function o(e){return e.options.showLabels&&e.used}function r(e,t,i,n){return e.plotOffset.left+(t?n:i?-p.grid.labelMargin:p.grid.labelMargin+e.plotWidth)}function a(e,t,i,n){return e.plotOffset.top+(t?p.grid.labelMargin:n)+(t&&i?e.plotHeight:0)}var l,c,h=1===t.orientation,u=1===t.n;for(l={color:t.options.color||p.grid.color,textAlign:i,textBaseline:n,angle:Flotr.toRad(t.options.labelsAngle)},l=Flotr.getBestTextAlign(l.angle,l),d=0;d<t.ticks.length&&o(t);++d)s=t.ticks[d],s.label&&s.label.length&&(c=t.d2p(s.v),0>c||c>(h?e.plotWidth:e.plotHeight)||(Flotr.drawText(g,s.label,r(e,h,u,c),a(e,h,u,c),l),h||u||(g.save(),g.strokeStyle=l.color,g.beginPath(),g.moveTo(e.plotOffset.left+e.plotWidth-8,e.plotOffset.top+t.d2p(s.v)),g.lineTo(e.plotOffset.left+e.plotWidth,e.plotOffset.top+t.d2p(s.v)),g.stroke(),g.restore())))}function n(e,t){var i,n,r=1===t.orientation,a=1===t.n,l="",c=e.plotOffset;if(r||a||(g.save(),g.strokeStyle=t.options.color||p.grid.color,g.beginPath()),t.options.showLabels&&(a?!0:t.used))for(d=0;d<t.ticks.length;++d)s=t.ticks[d],!s.label||!s.label.length||(r?c.left:c.top)+t.d2p(s.v)<0||(r?c.left:c.top)+t.d2p(s.v)>(r?e.canvasWidth:e.canvasHeight)||(n=c.top+(r?(a?1:-1)*(e.plotHeight+p.grid.labelMargin):t.d2p(s.v)-t.maxLabel.height/2),i=r?c.left+t.d2p(s.v)-o/2:0,l="",0===d?l=" first":d===t.ticks.length-1&&(l=" last"),l+=r?" flotr-grid-label-x":" flotr-grid-label-y",u+=['<div style="position:absolute; text-align:'+(r?"center":"right")+"; ","top:"+n+"px; ",(r||a?"left:":"right:")+i+"px; ","width:"+(r?o:(a?c.left:c.right)-p.grid.labelMargin)+"px; ",t.options.color?"color:"+t.options.color+"; ":" ",'" class="flotr-grid-label'+l+'">'+s.label+"</div>"].join(" "),r||a||(g.moveTo(c.left+e.plotWidth-8,c.top+t.d2p(s.v)),g.lineTo(c.left+e.plotWidth,c.top+t.d2p(s.v))))}var s,o,r,a,l,c,h,d,u="",f=0,p=this.options,g=this.ctx,m=this.axes;for({size:p.fontSize},d=0;d<m.x.ticks.length;++d)m.x.ticks[d].label&&++f;o=this.plotWidth/f,p.grid.circular&&(g.save(),g.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),r=this.plotHeight*p.radar.radiusRatio/2+p.fontSize,a=this.axes.x.ticks.length,l=2*(Math.PI/a),c=-Math.PI/2,t(this,m.x,!1),t(this,m.x,!0),t(this,m.y,!1),t(this,m.y,!0),g.restore()),!p.HtmlText&&this.textEnabled?(i(this,m.x,"center","top"),i(this,m.x2,"center","bottom"),i(this,m.y,"right","middle"),i(this,m.y2,"left","middle")):(m.x.options.showLabels||m.x2.options.showLabels||m.y.options.showLabels||m.y2.options.showLabels)&&!p.grid.circular&&(u="",n(this,m.x),n(this,m.x2),n(this,m.y),n(this,m.y2),g.stroke(),g.restore(),h=e.create("div"),e.setStyles(h,{fontSize:"smaller",color:p.grid.color}),h.className="flotr-labels",e.insert(this.el,h),e.insert(h,u))}})}(),function(){var e=Flotr.DOM,t=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(e){return e},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()}},insertLegend:function(){if(this.options.legend.show){var i,n,s,o=this.series,r=this.plotOffset,a=this.options,l=a.legend,c=[],h=!1,d=this.ctx,u=t.filter(o,function(e){return e.label&&!e.hide}).length,f=l.position,p=l.margin,g=l.backgroundOpacity;if(u){var m=l.labelBoxWidth,v=l.labelBoxHeight,_=l.labelBoxMargin,y=r.left+p,b=r.top+p,w=0,x={size:1.1*a.fontSize,color:a.grid.color};for(i=o.length-1;i>-1;--i)o[i].label&&!o[i].hide&&(n=l.labelFormatter(o[i].label),w=Math.max(w,this._text.measureText(n,x).width));var C=Math.round(m+3*_+w),k=Math.round(u*(_+v)+_);if(g||0===g||(g=.1),a.HtmlText||!this.textEnabled||l.container){for(i=0;i<o.length;++i)if(o[i].label&&!o[i].hide){0===i%l.noColumns&&(c.push(h?"</tr><tr>":"<tr>"),h=!0);var T=o[i],S=l.labelBoxWidth,D=l.labelBoxHeight;n=l.labelFormatter(T.label),s="background-color:"+(T.bars&&T.bars.show&&T.bars.fillColor&&T.bars.fill?T.bars.fillColor:T.color)+";",c.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',l.labelBoxBorderColor,';padding:1px">','<div style="width:',S-1,"px;height:",D-1,"px;border:1px solid ",o[i].color,'">','<div style="width:',S,"px;height:",D,"px;",s,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',n,"</td>")}if(h&&c.push("</tr>"),c.length>0){var M='<table style="font-size:smaller;color:'+a.grid.color+'">'+c.join("")+"</table>";if(l.container)e.empty(l.container),e.insert(l.container,M);else{var j={position:"absolute",zIndex:"2",border:"1px solid "+l.labelBoxBorderColor};"n"==f.charAt(0)?(j.top=p+r.top+"px",j.bottom="auto"):"c"==f.charAt(0)?(j.top=p+(this.plotHeight-k)/2+"px",j.bottom="auto"):"s"==f.charAt(0)&&(j.bottom=p+r.bottom+"px",j.top="auto"),"e"==f.charAt(1)?(j.right=p+r.right+"px",j.left="auto"):"w"==f.charAt(1)&&(j.left=p+r.left+"px",j.right="auto");var E=e.create("div");if(E.className="flotr-legend",e.setStyles(E,j),e.insert(E,M),e.insert(this.el,E),!g)return;var F=l.backgroundColor||a.grid.backgroundColor||"#ffffff";t.extend(j,e.size(E),{backgroundColor:F,zIndex:"",border:""}),j.width+="px",j.height+="px",E=e.create("div"),E.className="flotr-legend-bg",e.setStyles(E,j),e.opacity(E,g),e.insert(E," "),e.insert(this.el,E)}}}else{"s"==f.charAt(0)&&(b=r.top+this.plotHeight-(p+k)),"c"==f.charAt(0)&&(b=r.top+this.plotHeight/2-(p+k/2)),"e"==f.charAt(1)&&(y=r.left+this.plotWidth-(p+C)),s=this.processColor(l.backgroundColor,{opacity:g}),d.fillStyle=s,d.fillRect(y,b,C,k),d.strokeStyle=l.labelBoxBorderColor,d.strokeRect(Flotr.toPixel(y),Flotr.toPixel(b),C,k);var A=y+_,O=b+_;for(i=0;i<o.length;i++)o[i].label&&!o[i].hide&&(n=l.labelFormatter(o[i].label),d.fillStyle=o[i].color,d.fillRect(A,O,m-1,v-1),d.strokeStyle=l.labelBoxBorderColor,d.lineWidth=1,d.strokeRect(Math.ceil(A)-1.5,Math.ceil(O)-1.5,m+2,v+2),Flotr.drawText(d,n,A+m+_,O+v,x),O+=v+_)}}}}})}(),function(){function e(e){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(e);var t=i.find(this.axes.x.ticks,function(t){return t.v==e});return t?t.label:e}var t=Flotr.DOM,i=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var e,i=this.spreadsheet,n=t.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),s=t.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),o=t.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>");i.tabsContainer=n,i.tabs={graph:s,data:o},t.insert(n,s),t.insert(n,o),t.insert(this.el,n),e=t.size(o).height+2,this.plotOffset.bottom+=e,t.setStyles(n,{top:this.canvasHeight-e+"px"}),this.observe(s,"click",function(){i.showTab("graph")}).observe(o,"click",function(){i.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&i.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var e=this.series,t={};return i.each(e,function(e,n){i.each(e.data,function(e){var i=e[0],s=e[1],o=t[i];if(o)o[n+1]=s;else{var r=[];r[0]=i,r[n+1]=s,t[i]=r}})}),this.seriesData=i.sortBy(t,function(e,t){return parseInt(t,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var n,s,o,r=this.series,a=this.spreadsheet.loadDataGrid(),l=["<colgroup><col />"],c=['<table class="flotr-datagrid"><tr class="first-row">'];c.push("<th>&nbsp;</th>"),i.each(r,function(e,t){c.push('<th scope="col">'+(e.label||String.fromCharCode(65+t))+"</th>"),l.push("<col />")}),c.push("</tr>"),i.each(a,function(t){c.push("<tr>"),i.times(r.length+1,function(n){var s="td",o=t[n],r=i.isUndefined(o)?"":Math.round(1e5*o)/1e5;if(0===n){s="th";var a=e.call(this,r);a&&(r=a)}c.push("<"+s+("th"==s?' scope="row"':"")+">"+r+"</"+s+">")},this),c.push("</tr>")},this),l.push("</colgroup>"),o=t.node(c.join("")),n=t.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),s=t.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(n,"click",i.bind(this.spreadsheet.downloadCSV,this)).observe(s,"click",i.bind(this.spreadsheet.selectAllData,this));var h=t.node('<div class="flotr-datagrid-toolbar"></div>');t.insert(h,n),t.insert(h,s);var d=this.canvasHeight-t.size(this.spreadsheet.tabsContainer).height-2,u=t.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+d+'px;overflow:auto;z-index:10"></div>');return t.insert(u,h),t.insert(u,o),t.insert(this.el,u),this.spreadsheet.datagrid=o,this.spreadsheet.container=u,o},showTab:function(e){if(this.spreadsheet.activeTab!==e){switch(e){case"graph":t.hide(this.spreadsheet.container),t.removeClass(this.spreadsheet.tabs.data,"selected"),t.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),t.show(this.spreadsheet.container),t.addClass(this.spreadsheet.tabs.data,"selected"),t.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+e}this.spreadsheet.activeTab=e}},selectAllData:function(){if(this.spreadsheet.tabs){var e,t,i,n,s=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(i=s.ownerDocument)&&(n=i.defaultView)&&n.getSelection&&i.createRange&&(e=window.getSelection())&&e.removeAllRanges?(t=i.createRange(),t.selectNode(s),e.removeAllRanges(),e.addRange(t)):document.body&&document.body.createTextRange&&(t=document.body.createTextRange())&&(t.moveToElementText(s),t.select())},0),!0}return!1},downloadCSV:function(){var t="",n=this.series,s=this.options,o=this.spreadsheet.loadDataGrid(),r=encodeURIComponent(s.spreadsheet.csvFileSeparator);if(s.spreadsheet.decimalSeparator===s.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+s.spreadsheet.decimalSeparator+")";i.each(n,function(e,i){t+=r+'"'+(e.label||String.fromCharCode(65+i)).replace(/\"/g,'\\"')+'"'}),t+="%0D%0A",t+=i.reduce(o,function(t,i){var n=e.call(this,i[0])||"";n='"'+(n+"").replace(/\"/g,'\\"')+'"';var o=i.slice(1).join(r);return"."!==s.spreadsheet.decimalSeparator&&(o=o.replace(/\./g,s.spreadsheet.decimalSeparator)),t+n+r+o+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(t=t.replace(new RegExp(r,"g"),decodeURIComponent(r)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(t)):window.open("data:text/csv,"+t)}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var t,i=this.options,n=i.grid.labelMargin,s=this.ctx,o=this.axes;if(!i.HtmlText&&this.textEnabled){var r={size:i.fontSize,color:i.grid.color,textAlign:"center"};i.subtitle&&Flotr.drawText(s,i.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,r),r.weight=1.5,r.size*=1.5,i.title&&Flotr.drawText(s,i.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,r),r.weight=1.8,r.size*=.8,o.x.options.title&&o.x.used&&(r.textAlign=o.x.options.titleAlign||"center",r.textBaseline="top",r.angle=Flotr.toRad(o.x.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(s,o.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+o.x.maxLabel.height+this.plotHeight+2*n,r)),o.x2.options.title&&o.x2.used&&(r.textAlign=o.x2.options.titleAlign||"center",r.textBaseline="bottom",r.angle=Flotr.toRad(o.x2.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(s,o.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-o.x2.maxLabel.height-2*n,r)),o.y.options.title&&o.y.used&&(r.textAlign=o.y.options.titleAlign||"right",r.textBaseline="middle",r.angle=Flotr.toRad(o.y.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(s,o.y.options.title,this.plotOffset.left-o.y.maxLabel.width-2*n,this.plotOffset.top+this.plotHeight/2,r)),o.y2.options.title&&o.y2.used&&(r.textAlign=o.y2.options.titleAlign||"left",r.textBaseline="middle",r.angle=Flotr.toRad(o.y2.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(s,o.y2.options.title,this.plotOffset.left+this.plotWidth+o.y2.maxLabel.width+2*n,this.plotOffset.top+this.plotHeight/2,r))}else{t=[],i.title&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',i.title,"</div>"),i.subtitle&&t.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',i.subtitle,"</div>"),t.push("</div>"),t.push('<div class="flotr-axis-title" style="font-weight:bold;">'),o.x.options.title&&o.x.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+i.grid.labelMargin+o.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",o.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',o.x.options.title,"</div>"),o.x2.options.title&&o.x2.used&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",o.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',o.x2.options.title,"</div>"),o.y.options.title&&o.y.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-o.y.titleSize.height/2,"px;left:0;text-align:",o.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',o.y.options.title,"</div>"),o.y2.options.title&&o.y2.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-o.y.titleSize.height/2,"px;right:0;text-align:",o.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',o.y2.options.title,"</div>"),t=t.join("");var a=e.create("div");e.setStyles({color:i.grid.color}),a.className="flotr-titles",e.insert(this.el,a),e.insert(a,t)}}})}(),Flotr}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){n.trigger("closed").remove()}var n,s=e(this),o=s.attr("data-target");o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),n=e(o),t&&t.preventDefault(),n.length||(n=s.hasClass("alert")?s:s.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,i):i())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),s=n.data("alert");s||n.data("alert",s=new i(this)),"string"==typeof t&&s[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),s=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[s]()),i[s](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),s=n.data("button"),o="object"==typeof i&&i;s||n.data("button",s=new t(this,o)),"toggle"==i?s.toggle():i&&s.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),n=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,i){var n,s=this.$element.find(".item.active"),o=i||s[t](),r=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,r&&this.pause(),o=o.length?o:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:o[0],direction:a}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;o.addClass(t),o[0].offsetWidth,s.addClass(a),o.addClass(a),this.$element.one(e.support.transition.end,function(){o.removeClass([t,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each(function(){var n=e(this),s=n.data("carousel"),o=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),r="string"==typeof i?i:o.slide;s||n.data("carousel",s=new t(this,o)),"number"==typeof i?s.to(i):r?s[r]():o.interval&&s.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,n,s=e(this),o=e(s.attr("data-target")||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},o.data(),s.data());o.carousel(r),(n=s.attr("data-slide-to"))&&o.data("carousel").pause().to(n).cycle(),t.preventDefault()})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,s;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(s=n.data("collapse"),s&&s.transitioning)return;n.collapse("hide"),s||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var s=this,o=function(){"show"==i.type&&s.reset(),s.transitioning=0,s.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),s=n.data("collapse"),o=e.extend({},e.fn.collapse.defaults,n.data(),"object"==typeof i&&i);s||n.data("collapse",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),s=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=e(s).data("collapse")?"toggle":n.data();n[e(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(s).collapse(o)})}(window.jQuery),!function(e){function t(){e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=n&&e(n),i&&i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",s=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(){var n,s,o=e(this);if(!o.is(".disabled, :disabled"))return n=i(o),s=n.hasClass("open"),t(),s||n.toggleClass("open"),o.focus(),!1},keydown:function(t){var s,o,r,a,l;if(/(38|40|27)/.test(t.keyCode)&&(s=e(this),t.preventDefault(),t.stopPropagation(),!s.is(".disabled, :disabled"))){if(r=i(s),a=r.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&r.find(n).focus(),s.click();o=e("[role=menu] li:not(.divider):visible a",r),o.length&&(l=o.index(o.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus())}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,s.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",s.prototype.keydown)}(window.jQuery),!function(e){var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),s=n.data("modal"),o=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);s||n.data("modal",s=new t(this,o)),"string"==typeof i?s[i]():o.show&&s.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),s=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},s.data(),i.data());t.preventDefault(),s.modal(o).one("hide",function(){i.focus()})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var s,o,r,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var t,i,n,s,o,r,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(r,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,s,o,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),i=r[0].offsetWidth,n=r[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,o=!0),"bottom"==t||"top"==t?(s=0,e.left<0&&(s=-2*e.left,e.left=0,r.offset(e),i=r[0].offsetWidth,n=r[0].offsetHeight),this.replaceArrow(s-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&r.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)
};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),s=n.data("popover"),o="object"==typeof i&&i;s||n.data("popover",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){function t(t,i){var n,s=e.proxy(this.process,this),o=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=o.on("scroll.scroll-spy.data-api",s),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),s=/^#\w/.test(n)&&e(n);return s&&s.length&&[[s.position().top+(!e.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),s=this.offsets,o=this.targets,r=this.activeTarget;if(t>=n)return r!=(e=o.last()[0])&&this.activate(e);for(e=s.length;e--;)r!=o[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(o[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),s=n.data("scrollspy"),o="object"==typeof i&&i;s||n.data("scrollspy",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,s=this.element,o=s.closest("ul:not(.dropdown-menu)"),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(t=o.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),s.trigger(n),n.isDefaultPrevented()||(i=e(r),this.activate(s.parent("li"),o),this.activate(i,i.parent(),function(){s.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),r=n&&e.support.transition&&o.hasClass("fade");r?o.one(e.support.transition.end,s):s(),o.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),s=n.data("tab");s||n.data("tab",s=new t(this)),"string"==typeof i&&s[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],s=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):s.push(t):i.push(t);return i.concat(n,s)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=e(t).map(function(t,n){return t=e(i.options.item).attr("data-value",n),t.find("a").html(i.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),i=t.next();i.length||(i=e(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each(function(){var n=e(this),s=n.data("typeahead"),o="object"==typeof i&&i;s||n.data("typeahead",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),!function(e){var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),s=this.$element.offset(),o=this.options.offset,r=o.bottom,a=o.top,l="affix affix-top affix-bottom";"object"!=typeof o&&(r=a=o),"function"==typeof a&&(a=o.top()),"function"==typeof r&&(r=o.bottom()),t=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=r&&s.top+this.$element.height()>=i-r?"bottom":null!=a&&a>=n?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?s.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),s=n.data("affix"),o="object"==typeof i&&i;s||n.data("affix",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var s,o,r,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var t,i,n,s,o,r,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(r,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,s,o,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),i=r[0].offsetWidth,n=r[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,o=!0),"bottom"==t||"top"==t?(s=0,e.left<0&&(s=-2*e.left,e.left=0,r.offset(e),i=r[0].offsetWidth,n=r[0].offsetHeight),this.replaceArrow(s-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&r.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),define("bootstrap-tooltip",["bootstrap"],function(){}),function(e){var t=e.fn.popover,i=function(){t.Constructor.apply(this,arguments)};i.prototype=e.extend({},t.Constructor.prototype,{constructor:i,_super:function(){var i=e.makeArray(arguments);t.Constructor.prototype[i.shift()].apply(this,i)},show:function(){var e,t,i,n,s,o,r;if(this.hasContent&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(o),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),i=this.getPosition(t),n=e[0].offsetWidth,s=e[0].offsetHeight,t?o.split(" ")[1]:o){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-s/2,left:i.left+i.width};break;case"topLeft":r={top:i.top-s,left:i.left+i.width/2-.25*n};break;case"topRight":r={top:i.top-s,left:i.left+i.width/2-.75*n};break;case"rightTop":r={top:i.top+i.height/2-.25*s,left:i.left+i.width};break;case"rightBottom":r={top:i.top+i.height/2-.75*s,left:i.left+i.width};break;case"bottomLeft":r={top:i.top+i.height,left:i.left+i.width/2-.25*n};break;case"bottomRight":r={top:i.top+i.height,left:i.left+i.width/2-.75*n};break;case"leftTop":r={top:i.top+i.height/2-.25*s,left:i.left-n};break;case"leftBottom":r={top:i.top+i.height/2-.75*s,left:i.left-n}}e.css(r).addClass(o).addClass("in")}}}),e.fn.popover=e.extend(function(t){return this.each(function(){var n=e(this),s=n.data("popover"),o="object"==typeof t&&t;s||n.data("popover",s=new i(this,o)),"string"==typeof t&&s[t]()})},t),e(document).find("script").each(function(t,i){-1!=i.src.indexOf("popover-extra-placements.js")?e("head").append('<link rel="stylesheet" href="'+i.src.split("popover-extra-placements.js")[0]+'/popover-extra-placements.css" type="text/css" />'):-1!=i.src.indexOf("popover-extra-placements.min.js")&&e("head").append('<link rel="stylesheet" href="'+i.src.split("popover-extra-placements.min.js")[0]+'/popover-extra-placements.min.css" type="text/css" />')})}(jQuery),define("popover-extra-placements",["bootstrap-tooltip"],function(){}),function(){var e,t=this,i=t.Backbone,n=[],s=n.push,o=n.slice,r=n.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.10";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i)for(var s in i)e[t].apply(e,[s,i[s]].concat(n));else{if(!l.test(i))return!0;for(var o=i.split(l),r=0,a=o.length;a>r;r++)e[t].apply(e,[o[r]].concat(n))}},h=function(e,t){var i,n=-1,s=e.length;switch(t.length){case 0:for(;++n<s;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=e[n]).callback.call(i.ctx,t[0]);return;case 2:for(;++n<s;)(i=e[n]).callback.call(i.ctx,t[0],t[1]);return;case 3:for(;++n<s;)(i=e[n]).callback.call(i.ctx,t[0],t[1],t[2]);return;default:for(;++n<s;)(i=e[n]).callback.apply(i.ctx,t)}},d=e.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var n=this,s=a.once(function(){n.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i),this},off:function(e,t,i){var n,s,o,r,l,h,d,u;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(r=e?[e]:a.keys(this._events),l=0,h=r.length;h>l;l++)if(e=r[l],n=this._events[e]){if(o=[],t||i)for(d=0,u=n.length;u>d;d++)s=n[d],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&o.push(s);this._events[e]=o}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&h(i,t),n&&h(n,arguments),this},listenTo:function(e,t,i){var n=this._listeners||(this._listeners={}),s=e._listenerId||(e._listenerId=a.uniqueId("l"));return n[s]=e,e.on(t,"object"==typeof t?this:i,this),this},stopListening:function(e,t,i){var n=this._listeners;if(n){if(e)e.off(t,"object"==typeof t?this:i,this),t||i||delete n[e._listenerId];else{"object"==typeof t&&(i=this);for(var s in n)n[s].off(t,i,this);this._listeners={}}return this}}};d.bind=d.on,d.unbind=d.off,a.extend(e,d);var u=e.Model=function(e,t){var i,n=e||{};this.cid=a.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};a.extend(u.prototype,d,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,s,o,r,l,c,h,d;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;o=i.unset,l=i.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),d=this.attributes,h=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(n in s)t=s[n],a.isEqual(d[n],t)||r.push(n),a.isEqual(h[n],t)?delete this.changed[n]:this.changed[n]=t,o?delete d[n]:d[n]=t;if(!l){r.length&&(this._pending=!0);for(var u=0,f=r.length;f>u;u++)this.trigger("change:"+r[u],this,d[r[u]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in e)a.isEqual(n[s],t=e[s])||((i||(i={}))[s]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,i,n){return e.set(e.parse(i,n),n)?(t&&t(e,i,n),void 0):!1},this.sync("read",this,e)},save:function(e,t,i){var n,s,o,r,l=this.attributes;return null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,!n||i&&i.wait||this.set(n,i)?(i=a.extend({validate:!0},i),this._validate(n,i)?(n&&i.wait&&(this.attributes=a.extend({},l,n)),void 0===i.parse&&(i.parse=!0),s=i.success,i.success=function(e,t,i){e.attributes=l;var o=e.parse(t,i);return i.wait&&(o=a.extend(n||{},o)),a.isObject(o)&&!e.set(o,i)?!1:(s&&s(e,t,i),void 0)},o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),r=this.sync(o,this,i),n&&i.wait&&(this.attributes=l),r):!1):!1},destroy:function(e){e=e?a.clone(e):{};var t=this,i=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,s){(s.wait||e.isNew())&&n(),i&&i(e,t,s)},this.isNew())return e.success(this,null,e),!1;var s=this.sync("delete",this,e);return e.wait||n(),s},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||F();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,t||{}),!1):!0}});var f=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))};a.extend(f.prototype,d,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,o,l,c,h,d,u,f,p;for(d=[],u=t.at,f=this.comparator&&null==u&&0!=t.sort,p=a.isString(this.comparator)?this.comparator:null,i=0,n=e.length;n>i;i++)(o=this._prepareModel(l=e[i],t))?(c=this.get(o))?t.merge&&(c.set(l===o?o.attributes:l,t),f&&!h&&c.hasChanged(p)&&(h=!0)):(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,l,t);if(d.length&&(f&&(h=!0),this.length+=d.length,null!=u?r.apply(this.models,[u,0].concat(d)):s.apply(this.models,d)),h&&this.sort({silent:!0}),t.silent)return this;for(i=0,n=d.length;n>i;i++)(o=d[i]).trigger("add",o,this,t);return h&&this.trigger("sort",this,t),this},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,s,o;for(i=0,n=e.length;n>i;i++)o=this.get(e[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return a.isEmpty(e)?[]:this.filter(function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return a.invoke(this.models,"get",e)},update:function(e,t){t=a.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var i,n,s,o,r=[],l=[],c={};if(a.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(n=0,s=e.length;s>n;n++)i=e[n],o=this.get(i),t.remove&&o&&(c[o.cid]=!0),(t.add&&!o||t.merge&&o)&&r.push(i);if(t.remove)for(n=0,s=this.models.length;s>n;n++)i=this.models[n],c[i.cid]||l.push(i);return l.length&&this.remove(l,t),r.length&&this.add(r,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,i,n){var s=n.update?"update":"reset";e[s](i,n),t&&t(e,i,n)},this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,n=t.success;return t.success=function(e,t,s){s.wait&&i.add(e,s),n&&n(e,t,s)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof u)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var i=new this.model(e,t);return i._validate(e,t)?i:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,i){t||(t=this.comparator);var n=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,n,i)}});var p=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(p,function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var g=["groupBy","countBy","sortBy"];a.each(g,function(e){f.prototype[e]=function(t,i){var n=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,n,i)}});var m=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},v=/\((.*?)\)/g,_=/(\(\?)?:\w+/g,y=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(m.prototype,d,{initialize:function(){},route:function(t,i,n){return a.isRegExp(t)||(t=this._routeToRegExp(t)),n||(n=this[i]),e.history.route(t,a.bind(function(s){var o=this._extractParameters(t,s);n&&n.apply(this,o),this.trigger.apply(this,["route:"+i].concat(o)),this.trigger("route",i,o),e.history.trigger("route",this,i,o)},this)),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes)for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(b,"\\$&").replace(v,"(?:$1)?").replace(_,function(e,t){return t?e:"([^/]+)"}).replace(y,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var w=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,C=/^\/+|\/+$/g,k=/msie [\w.]+/,T=/\/$/;w.started=!1,a.extend(w.prototype,d,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(T,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return e.replace(x,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,s=k.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(C,"/"),s&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location,r=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!r?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&r&&o.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();
return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!w.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var i=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),e.history=new w;var S=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},D=/^(\S+)\s*(.*)$/,M=["model","collection","el","id","attributes","className","tagName","events"];a.extend(S.prototype,d,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=a.result(this,"events"))){this.undelegateEvents();for(var t in e){var i=e[t];if(a.isFunction(i)||(i=this[e[t]]),!i)throw new Error('Method "'+e[t]+'" does not exist');var n=t.match(D),s=n[1],o=n[2];i=a.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,M)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var i=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}});var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.sync=function(t,i,n){var s=j[t];a.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(n.url||(o.url=a.result(i,"url")||F()),null!=n.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),n.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",n.emulateJSON&&(o.data._method=s);var r=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),r?r.apply(this,arguments):void 0}}"GET"===o.type||n.emulateJSON||(o.processData=!1);var l=n.success;n.success=function(e){l&&l(i,e,n),i.trigger("sync",i,e,n)};var c=n.error;n.error=function(e){c&&c(i,e,n),i.trigger("error",i,e,n)};var h=n.xhr=e.ajax(a.extend(o,n));return i.trigger("request",i,h,n),h},e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=function(e,t){var i,n=this;i=e&&a.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},a.extend(i,n,t);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,e&&a.extend(i.prototype,e),i.__super__=n.prototype,i};u.extend=f.extend=m.extend=S.extend=w.extend=E;var F=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["jquery","underscore"],function(e){return function(){var t;return t||e.Backbone}}(this)),function(e,t,i){var n=t.templateSettings;t.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g};var s=t.template('    <% if (title) { %>      <div class="modal-header">        <% if (allowCancel) { %>          <a class="close">×</a>        <% } %>        <h3>{{title}}</h3>      </div>    <% } %>    <div class="modal-body">{{content}}</div>    <div class="modal-footer">      <% if (allowCancel) { %>        <% if (cancelText) { %>          <a href="#" class="btn cancel">{{cancelText}}</a>        <% } %>      <% } %>      <a href="#" class="btn ok btn-primary">{{okText}}</a>    </div>  ');t.templateSettings=n;var o=i.View.extend({className:"modal",events:{"click .close":function(e){e.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .cancel":function(e){e.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .ok":function(e){e.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this),this.options.okCloses&&this.close()}},initialize:function(e){this.options=t.extend({title:null,okText:"OK",focusOk:!0,okCloses:!0,cancelText:"Cancel",allowCancel:!0,escape:!0,animate:!1,template:s},e)},render:function(){var e=this.$el,t=this.options,i=t.content;return e.html(t.template(t)),this.$content=e.find(".modal-body"),i.$el&&(i.render(),e.find(".modal-body").html(i.$el)),t.animate&&e.addClass("fade"),this.isRendered=!0,this},open:function(i){this.isRendered||this.render(),this.delegateEvents();var n=this,s=this.$el;s.modal(t.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),s.one("shown",function(){n.options.focusOk&&s.find(".btn.ok").focus(),n.options.content&&n.options.content.trigger&&n.options.content.trigger("shown",n),n.trigger("shown")});var r=o.count,a=e(".modal-backdrop:eq("+r+")"),l=parseInt(a.css("z-index"),10),c=parseInt(a.css("z-index"),10)+1;return a.css("z-index",l+r),this.$el.css("z-index",c+r),this.options.allowCancel&&(a.one("click",function(){n.options.content&&n.options.content.trigger&&n.options.content.trigger("cancel",n),n.trigger("cancel")}),e(document).one("keyup.dismiss.modal",function(e){27==e.which&&n.trigger("cancel"),n.options.content&&n.options.content.trigger&&27==e.which&&n.options.content.trigger("shown",n)})),this.once("cancel",function(){n.close()}),o.count++,i&&n.on("ok",i),this},close:function(){var e=this,t=this.$el;return this._preventClose?(this._preventClose=!1,void 0):(t.one("hidden",function i(n){return n.target!==n.currentTarget?t.one("hidden",i):(e.remove(),e.options.content&&e.options.content.trigger&&e.options.content.trigger("hidden",e),e.trigger("hidden"),void 0)}),t.modal("hide"),o.count--,void 0)},preventClose:function(){this._preventClose=!0}},{count:0});return"function"==typeof require&&"undefined"!=typeof module&&exports&&(module.exports=o),"function"==typeof define&&define.amd?define("backbone/bootstrap-modal",[],function(){i.BootstrapModal=o}):(i.BootstrapModal=o,void 0)}(jQuery,_,Backbone),define("oro/app",["jquery","underscore"],function(e,t){return{debug:!1,packToQueryString:function(t){return e.param(t)},unpackFromQueryString:function(e){for(var t=function(e,i,n){if(i.length>1){var s=i.shift();"undefined"==typeof e[s]&&(e[s]=""==i[0]?[]:{}),t(e[s],i,n)}else e instanceof Array?e.push(n):e[i]=n},i=e.split("&"),n={},s=0;s<i.length;s++){var o=i[s].split("="),r=this._decodeComponent(o[0]),a=this._decodeComponent(o[1]),l=r.match(/(^[^\[]+)(\[.*\]$)?/),c=l[1];l=l[2]?l[2].match(/(?=\[(.*)\]$)/)[1].split("]["):[],l.unshift(c),t(n,l,a)}return n},_decodeComponent:function(e){var t=e.replace("+","%20");return t=decodeURIComponent(t)},invertKeys:function(e,i){var n=t.extend({},e);for(var s in i){var o,r;r=s,o=i[s],r in n&&(n[o]=n[r],delete n[r])}return n},isEqualsLoosely:function(e,i){if(t.isObject(e)){if(t.isObject(e)){var n=t.keys(e);t.isObject(i)&&(n=t.unique(n.concat(t.keys(i))));for(var s in n){var o=n[s];if(!t.has(i,o)||!this.isEqualsLoosely(e[o],i[o]))return!1}return!0}return e==i}if(t.isNumber(e)||t.isNumber(i)){var r=function(e){return t.isString(e)&&""==e?0/0:Number(e)};return r(e)==r(i)}return(e||"")==(i||"")},deepClone:function(t){return e.extend(!0,{},t)},isMobile:function(){return e("body").hasClass("mobile-version")}}}),define("oro/modal",["underscore","backbone","oro/translator","backbone/bootstrap-modal"],function(e,t){return t.BootstrapModal.extend({className:"modal",open:function(){t.BootstrapModal.prototype.open.apply(this,arguments),this.once("cancel",e.bind(function(){this.$el.trigger("hidden")},this))}})}),define("oro/delete-confirmation",["underscore","oro/translator","oro/modal"],function(e,t,i){return i.extend({className:"modal oro-modal-danger",okButtonClass:"btn-danger",initialize:function(n){n=e.extend({title:t("Delete Confirmation"),okText:t("Yes, Delete")},n),arguments[0]=n,i.prototype.initialize.apply(this,arguments)}})}),define("oro/error",["underscore","backbone","routing","oro/app","oro/modal"],function(e,t,i,n,s){var o={header:"Server error",message:"Error! Incorrect server response."},r={dispatch:function(t,i,n){var s=r.dispatch;s.init(t,i,e.extend({},o,n))}},a=t.sync;return t.sync=function(i,n,s){s=s||{},e.has(s,"error")||(s.error=r.dispatch),a.call(t,i,n,s)},e.extend(r.dispatch,{init:function(e,t,i){401===t.status?this._processRedirect():4===t.readyState&&this._processModal(t,i)},_processModal:function(e,t){var i,o=t.message;n.debug&&(o+="<br><b>Debug:</b>"+e.responseText),i=new s({title:t.header,content:o,cancelText:!1}),i.open()},_processRedirect:function(){document.location.href=i.generate("oro_user_security_login")}}),r}),define("oro/mediator",["underscore","backbone"],function(e,t){return e.extend({},t.Events)}),define("oro/scrollspy",["require","jquery","oro/app"],function(e){var t=e("jquery"),i=e("oro/app"),n={};return n.init=function(e){return i.isMobile()?(n._replaceWithCollapse(e),void 0):(t(".scrollspy .responsive-section:nth-of-type(1) .scrollspy-title").css("display","none"),e.find('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data()),t(this).scrollspy("refresh"),t(".scrollspy-nav ul.nav li").removeClass("active"),t(".scrollspy-nav ul.nav li:first").addClass("active")}),void 0)},n._replaceWithCollapse=function(e){e.find('[data-spy="scroll"]').each(function(){var e=t(this);e.removeAttr("data-spy").addClass("accordion"),e.find(".scrollspy-title").each(function(e){var i=t(this),n="#"+i.next().attr("id")+"+",s=t(n);i.removeClass("scrollspy-title").addClass("accordion-toggle").attr({"data-toggle":"collapse","data-target":n}),i.parent().addClass("accordion-group"),s.addClass("accordion-body collapse"),i.wrap('<div class="accordion-heading"></div>'),e>0?i.addClass("collapsed"):s.addClass("in").data("toggle",!1),s.on("focusin",function(){s.collapse("show")})})})},n.adjust=function(){i.isMobile()||t('[data-spy="scroll"]').each(function(){var e=t(this),i=e.innerHeight(),n=t(".sf-toolbar").height()||0,s=e.find(".responsive-section").length>1;e.find(".responsive-section:last").each(function(){var e=t(this),o=e.find(".scrollspy-title").outerHeight(),r=(s?o+i:i)-n,a=e.data("originalHeight");a||(a=e.height(),e.data("originalHeight",a)),e.height()!==r&&(a>r&&(r=a),e.outerHeight(r))}),e.scrollspy("refresh")})},n.top=function(){i.isMobile()||t('[data-spy="scroll"]').each(function(){var e=t(this),i=e.data("target"),n=t(i);n.each(function(){var i=t(this),n=i.find("li.active:first a").attr("href"),s=t(n),o=s.position().top;e.scrollTop(o)})})},n}),define("oro/layout",["require","jquery","oro/translator","oro/scrollspy","bootstrap-tooltip","jquery-ui","jquery-ui-timepicker"],function(e){var t=e("jquery");e("oro/translator");var i=e("oro/scrollspy");e("bootstrap-tooltip"),e("jquery-ui"),e("jquery-ui-timepicker");var n={};return n.init=function(e){e=t(e||document.body),this.styleForm(e),i.init(e),e.find('[data-toggle="tooltip"]').tooltip();var n=function(e,i){var s=t(e.relatedTarget).closest(".popover");s.length?s.one("mouseout",function(e){n(e,i)}):i.data("popover-timer",setTimeout(function(){i.popover("hide"),i.data("popover-active",!1)},500))};t('form label [data-toggle="popover"]').popover({animation:!0,delay:{show:0,hide:0},html:!0,trigger:"manual"}).mouseover(function(){var e=t(this);clearTimeout(e.data("popover-timer")),e.data("popover-active")||(e.data("popover-active",!0),t(this).popover("show"))}).mouseout(function(e){var i=t(this);setTimeout(function(){n(e,i)},500)}),setTimeout(function(){i.top()},500)},n.hideProgressBar=function(){var e=t("#progressbar");e.is(":visible")&&(e.hide(),t("#page").show())},n.styleForm=function(e){if(t.isPlainObject(t.uniform)){var i=t(e).find("input:file, select:not(.select2)");i.uniform(),i.trigger("uniformInit")}},n}),define("oro/messenger",["jquery","underscore"],function(e,t){var i={container:"",delay:!1,template:e.noop},n=[],s="flash",o=function(n,s,o){var r=t.extend({},i,o||{}),a=e(r.template({type:n,message:s})).appendTo(r.container),l=r.delay||r.flash&&5e3,c={close:t.bind(a.alert,a,"close")};return l&&t.delay(c.close,l),c},r=function(){var t=localStorage?localStorage.getItem(s):e.cookie(s);return JSON.parse(t)||[]},a=function(t){var i=JSON.stringify(t);return localStorage?localStorage.setItem(s,i):e.cookie(s,i),!0};return{notificationMessage:function(t,s,r){var a=(r||{}).container||i.container,l=Array.prototype.slice.call(arguments),c={close:e.noop};return a&&e(a).length?c=o.apply(null,l):n.push([l,c]),c},notificationFlashMessage:function(e,i,n){return this.notificationMessage(e,i,t.extend({flash:!0},n))},setup:function(s){t.extend(i,s);var l=r();for(e.each(l,function(e,t){n.push(t)}),a([]);n.length;){var c=n.shift();t.extend(c[1],o.apply(null,c[0]))}},addMessage:function(i,s,o){var l=[i,s,t.extend({flash:!0},o)],c={close:e.noop};if(o.hashNavEnabled)n.push([l,c]);else{var h=r();h.push([l,c]),a(h)}}}}),define("oro/loading-mask",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({displayed:!1,liveUpdate:!0,className:"loading-mask",loadingHint:"Loading...",template:t.template('<div id="loading-wrapper" class="loading-wrapper"></div><div id="loading-frame" class="loading-frame"><div class="box well"><div class="loading-content"><%= loadingHint %></div></div></div>'),initialize:function(n){if(n=n||{},t.has(n,"liveUpdate")&&(this.liveUpdate=n.liveUpdate),this.liveUpdate){var s=e.proxy(this.updatePos,this);e(window).resize(s).scroll(s)}i.View.prototype.initialize.apply(this,arguments)},show:function(){return this.$el.show(),this.displayed=!0,this.resetPos().updatePos(),this},updatePos:function(){if(!this.displayed)return this;var t=this.$(".loading-wrapper"),i=this.$(".loading-frame"),n=i.height(),s=i.width(),o=t.outerWidth(),r=t.outerHeight();n>r&&t.css("height",n+"px");var a=n/2,l=r/2-a,c=(o-s)/2,h=e(window).outerHeight(),d=t.offset().top;return h>d&&d+l+n>h&&(l=(h-d)/2-a),l=r-n>l?l:r-n,c=c>0?Math.round(c):0,l=l>0?Math.round(l):0,i.css("top",l+"px"),i.css("left",c+"px"),this},resetPos:function(){return this.$(".loading-wrapper").css("height","100%"),this},hide:function(){return this.$el.hide(),this.displayed=!1,this.resetPos(),this},render:function(){return this.$el.empty(),this.$el.append(this.template({loadingHint:this.loadingHint})),this.hide(),this}})});var Url=function(){var e={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},t=function(t,i){var s=document,o=s.createElement("a"),i=i||s.location.href,r=i.match(/\/\/(.*?)(?::(.*?))?@/)||[];o.href=i;for(var a in e)t[a]=o[e[a]]||"";t.protocol=t.protocol.replace(/:$/,""),t.query=t.query.replace(/^\?/,""),t.hash=t.hash.replace(/^#/,""),t.user=r[1]||"",t.pass=r[2]||"",n(t)},i=function(e){return e=e.replace(/\+/g," "),e=e.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/g,function(e,t,i,n){var s=parseInt(t,16)-224,o=parseInt(i,16)-128;if(0==s&&32>o)return e;var r=parseInt(n,16)-128,a=(s<<12)+(o<<6)+r;return a>65535?e:String.fromCharCode(a)}),e=e.replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/g,function(e,t,i){var n=parseInt(t,16)-192;if(2>n)return e;var s=parseInt(i,16)-128;return String.fromCharCode((n<<6)+s)}),e=e.replace(/%([0-7][0-9A-F])/g,function(e,t){return String.fromCharCode(parseInt(t,16))})},n=function(e){var t=e.query;e.query=new function(e){for(var t,n=/([^=&]+)(=([^&]*))?/g;t=n.exec(e);){var s=decodeURIComponent(t[1].replace(/\+/g," ")),o=t[3]?i(t[3]):"";void 0!==this[s]?(this[s]instanceof Array||(this[s]=[this[s]]),this[s].push(o)):this[s]=o}this.toString=function(){var e="",t=encodeURIComponent;for(var i in this)if(!(this[i]instanceof Function))if(this[i]instanceof Array){var n=this[i].length;if(n)for(var s=0;n>s;s++)e+=e?"&":"",e+=t(i)+"="+t(this[i][s]);else e+=(e?"&":"")+t(i)+"="}else e+=e?"&":"",e+=t(i)+"="+t(this[i]);return e}}(t)};return function(e){this.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&this.user+(this.pass&&":"+this.pass)+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+this.hash)},t(this,e)}}();define("url",function(e){return function(){var t;return t||e.Url}}(this)),define("oro/navigation/pagestate/view",["underscore","backbone","url","routing","oro/navigation","oro/mediator","base64","json"],function(e,t,i,n,s,o){var r;return t.View.extend({needServerRestore:!0,stopCollecting:!1,initialize:function(){this.init(),this.listenTo(this.model,"change:pagestate",this.handleStateChange),o.bind("hash_navigation_request:refresh",function(){this.stopCollecting=!1,this.init()},this),o.bind("hash_navigation_request:start",function(){this.stopCollecting=!0,this.clearTimer()},this)},hasForm:function(){return t.$("form[data-collect=true]").length},init:function(){this.clearTimer(),this.hasForm()&&t.$.get(n.generate("oro_api_get_pagestate_checkid")+"?pageId="+this.filterUrl(),e.bind(function(t){this.clearTimer(),this.model.set({id:t.id,pagestate:t.pagestate}),parseInt(t.id)>0&&this.model.get("restore")&&this.needServerRestore&&this.restore(),r=setInterval(e.bind(this.collect,this),2e3)},this))},clearTimer:function(){r&&clearInterval(r),this.model.set("restore",!1)},handleStateChange:function(){this.model.get("pagestate").pageId&&this.model.save(this.model.get("pagestate"))},collect:function(){if(!this.hasForm()||this.stopCollecting)return this.clearTimer(),void 0;var e=this.filterUrl();if(e){var i={};t.$("form[data-collect=true]").each(function(e,n){i[e]=t.$(n).find("input, textarea, select").not(':input[type=button], :input[type=submit], :input[type=reset], :input[type=password], :input[type=file], :input[name$="[_token]"]').serializeArray()}),this.model.set({pagestate:{pageId:e,data:JSON.stringify(i)}}),o.trigger("pagestate_collected",this.model)}},updateState:function(e){this.model.set({pagestate:{pageId:"",data:e}})},restore:function(){t.$.each(JSON.parse(this.model.get("pagestate").data),function(e,i){var n=t.$("form[data-collect=true]").eq(e);n.find("option").prop("selected",!1),t.$.each(i,function(e,t){var i=n.find('[name="'+t.name+'"]');switch(i.prop("type")){case"checkbox":i.filter('[value="'+t.value+'"]').prop("checked",!0);break;case"select-multiple":i.find('option[value="'+t.value+'"]').prop("selected",!0);break;default:i.val(t.value)}})}),o.trigger("pagestate_restored")},filterUrl:function(){var e=this,n=window.location,s=require("oro/navigation").getInstance();s&&(n=new i(s.getHashUrl()),n.search=n.query.toString(),n.pathname=n.path);var o=n.search.replace("?","").split("&");return 1==o.length&&-1!==o[0].indexOf("restore")?(o="",e.model.set("restore",!0)):o=t.$.grep(o,function(t){return-1==t.indexOf("restore")?!0:(e.model.set("restore",!0),!1)}),base64_encode(n.pathname+(""!=o?"?"+o.join("&"):""))}})}),define("oro/navigation/pagestate/model",["backbone","routing"],function(e,t){return e.Model.extend({defaults:{restore:!1,pagestate:{pageId:"",data:{}}},url:function(){var e=["oro_api_post_pagestate"];return this.id&&(e=["oro_api_put_pagestate",{id:this.id}]),t.generate.apply(t,e)}})}),function(e){if("object"==typeof exports)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define("backbone/pageable-collection",["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,i=Backbone.PageableCollection=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,i}}}(function(e,t){function i(t,i){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t}function n(e){for(var t,i,n,s,o={},r=decodeURIComponent,a=e.split("&"),l=0,c=a.length;c>l;l++){var h=a[l];t=h.split("="),i=t[0],n=t[1]||!0,i=r(i),s=o[i],p(s)?s.push(n):o[i]=s?[s,n]:n}return o}function s(){var t=arguments[0],i=e.toArray(arguments).slice(1),n=t.comparator;t.comparator=null;try{t.reset.apply(t,i)}finally{t.comparator=n,n&&t.sort()}return t}var o=e.extend,r=e.omit,a=e.clone,l=e.each,c=e.pick,h=e.contains,d=e.isEmpty,u=e.pairs,f=e.invert,p=e.isArray,g=e.isFunction,m=e.isObject,v=e.keys,_=e.isUndefined,y=e.result,b=Math.ceil,w=Math.floor,x=Math.max,C=t.Collection.prototype,k=/[\s'"]/g,T=/[<>\s'"]/g,S=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},initialize:function(e,t){t=t||{};var i=this.mode=t.mode||this.mode||D.mode,n=o({},D.queryParams,this.queryParams,t.queryParams||{});n.directions=o({},D.queryParams.directions,this.queryParams.directions,n.directions||{}),this.queryParams=n;var s=this.state=o({},D.state,this.state,t.state||{});s.currentPage=null==s.currentPage?s.firstPage:s.currentPage,p(e)||(e=e?[e]:[]),"server"==i||null!=s.totalRecords||d(e)||(s.totalRecords=e.length),this.switchMode(i,o({fetch:!1,resetState:!1,models:e},t));var r=t.comparator;if(s.sortKey&&!r&&this.setSorting(s.sortKey,s.order,t),"server"!=i){if(r&&t.full){delete this.comparator;var l=this.fullCollection;l.comparator=r,l.sort()}e&&!d(e)&&(this.getPage(s.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(e,i){var n,s,o,r=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(n=0,s=r.length;s>n;n++)o=r[n],_(a[o])||(l[o]=a[o]);var c=new(t.Collection.extend(l))(e,i);for(n=0,s=r.length;s>n;n++)o=r[n],this[o]!==a[o]&&(c[o]=this[o]);return c},_makeCollectionEventHandler:function(e,t){return function(i,n,r,c){var h=e._handlers;l(v(h),function(i){var n=h[i];e.off(i,n),t.off(i,n)});var d=a(e.state),u=d.firstPage,f=0===u?d.currentPage:d.currentPage-1,p=d.pageSize,g=f*p,m=g+p;if("add"==i){var y,w,x,C,c=c||{};if(r==t)w=t.indexOf(n),w>=g&&m>w&&(C=e,y=x=w-g);else{y=e.indexOf(n),w=g+y,C=t;var x=_(c.at)?w:c.at+g}if(++d.totalRecords,e.state=e._checkState(d),C){C.add(n,o({},c||{},{at:x}));var k=y>=p?n:!_(c.at)&&m>x&&e.length>p?e.at(p):null;if(k){var T=r._events.add||[],S={onAdd:!0};if(T.length){var D=T[T.length-1],M=D.callback;D.callback=function(){try{M.apply(this,arguments),e.remove(k,S)}finally{D.callback=M}}}else e.remove(k,S)}}}if("remove"==i)if(c.onAdd)delete c.onAdd;else{if(--d.totalRecords){var j=d.totalPages=b(d.totalRecords/p);d.lastPage=0===u?j-1:j,d.currentPage>j&&(d.currentPage=d.lastPage)}else d.totalRecords=null,d.totalPages=null;e.state=e._checkState(d);var E,F=c.index;r==e?((E=t.at(m))&&e.push(E),t.remove(n)):F>=g&&m>F&&(e.remove(n),E=t.at(f*(p+F)),E&&e.push(E))}if("reset"==i||"sort"==i){if(c=r,r=n,r==e&&"reset"==i){var A=t.models.slice(0,g),O=t.models.slice(g+e.models.length);c=o(c,{silent:!0}),s(t,A.concat(e.models).concat(O),c)}("reset"==i||r==t)&&((d.totalRecords=t.models.length)||(d.totalRecords=null,d.totalPages=null,d.lastPage=d.currentPage=d.firstPage),e.state=e._checkState(d),r==e&&t.trigger(i,t,c),s(e,t.models.slice(g,m),o({},c,{parse:!1})))}l(v(h),function(i){var n=h[i];l([e,t],function(e){e.on(i,n);var t=e._events[i]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,s=e.totalRecords,o=e.pageSize,r=e.currentPage,a=e.firstPage,l=e.totalPages;if(null!=s&&null!=o&&null!=r&&null!=a&&("infinite"==t?n:!0)){if(s=i(s,"totalRecords"),o=i(o,"pageSize"),r=i(r,"currentPage"),a=i(a,"firstPage"),1>o)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=b(s/o),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===a?x(0,l-1):l,"infinite"==t){if(!n[r+""])throw new RangeError("No link found for page "+r)}else if(a>r||l>0&&(a?r>l:r>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+r+".")}return e},setPageSize:function(e,t){return e=i(e,"pageSize"),t=t||{},this.state=this._checkState(o({},this.state,{pageSize:e,totalPages:b(this.state.totalRecords/e)})),this.getPage(this.state.currentPage,t)},switchMode:function(t,i){if(!h(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');i=i||{fetch:!0,resetState:!0};var n=this.state=i.resetState?a(this._initState):this._checkState(o({},this.state));this.mode=t;var s,c=this,d=this.fullCollection,u=this._handlers=this._handlers||{};if("server"==t||d)"server"==t&&d&&(l(v(u),function(e){s=u[e],c.off(e,s),d.off(e,s)}),delete this._handlers,this._fullComparator=d.comparator,delete this.fullCollection);else{d=this._makeFullCollection(i.models||[]),d.pageableCollection=this,this.fullCollection=d;var f=this._makeCollectionEventHandler(this,d);l(["add","remove","reset","sort"],function(t){u[t]=s=e.bind(f,{},t),c.on(t,s),d.on(t,s)}),d.comparator=this._fullComparator}if("infinite"==t)for(var p=this.links={},g=n.firstPage,m=b(n.totalRecords/n.pageSize),_=0===g?x(0,m-1):m||g,y=n.firstPage;_>=y;y++)p[y]=this.url;else this.links&&delete this.links;return i.fetch?this.fetch(r(i,"fetch","resetState")):this},hasPrevious:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNext:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var n=this.mode,a=this.fullCollection;t=t||{fetch:!1};var l=this.state,c=l.firstPage,h=l.currentPage,u=l.lastPage,f=l.pageSize,p=e;switch(e){case"first":p=c;break;case"prev":p=h-1;break;case"next":p=h+1;break;case"last":p=u;break;default:p=i(e,"index")}this.state=this._checkState(o({},l,{currentPage:p}));var g=(0===c?p:p-1)*f,m=a&&a.length?a.models.slice(g,g+f):[];return"client"!=n&&("infinite"!=n||d(m))||t.fetch?("infinite"==n&&(t.url=this.links[p]),this.fetch(r(t,"fetch"))):s(this,m,r(t,"fetch"))},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=i(e);var n=w(e/this.state.pageSize);return 0!==this.state.firstPage&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,i,n){var s=this;if("infinite"==s.mode){var r=n.success,a=s.state.currentPage;n.success=function(e,t,i){var l=s.links,c=s.parseLinks(e,o({xhr:i},n));c.first&&(l[s.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),r&&r(e,t,i)}}return(C.sync||t.sync).call(s,e,i,n)},parseLinks:function(e,t){var i={},s=t.xhr.getResponseHeader("Link");if(s){var o=["first","prev","previous","next","last"];l(s.split(","),function(e){var t=e.split(";"),n=t[0].replace(T,""),s=t.slice(1);l(s,function(e){var t=e.split("="),s=t[0].replace(k,""),r=t[1].replace(k,"");"rel"==s&&h(o,r)&&("previous"==r?i.prev=n:i[r]=n)})});var r,c,d=i.last||"";if(c=(r=d.indexOf("?"))?d.slice(r+1):""){var u=n(c),f=a(this.state),p=this.queryParams,g=f.pageSize,m=1*u[p.totalRecords],v=1*u[p.currentPage],_=u[p.totalPages];m||(v?m=(0===f.firstPage?v+1:v)*g:_&&(m=_*g)),m&&(f.totalRecords=m),this.state=this._checkState(f)}}return delete i.last,i},parse:function(e){var t=this.parseState(e,a(this.queryParams),a(this.state));return t&&(this.state=this._checkState(o({},this.state,t))),this.parseRecords(e)},parseState:function(t,i,n){if(t&&2===t.length&&m(t[0])&&p(t[1])){var s=a(n),o=t[0];return l(u(r(i,"directions")),function(t){var i=t[0],n=t[1],r=o[n];_(r)||e.isNull(r)||(s[i]=o[n])}),o.order&&(s.order=1*f(i.directions)[o.order]),s}},parseRecords:function(e){return e&&2===e.length&&m(e[0])&&p(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),i=this.mode;"infinite"!=i||e.url||(e.url=this.links[t.currentPage]);var l=e.data||{},h=y(e,"url")||y(this,"url")||"",d=h.indexOf("?");-1!=d&&(o(l,n(h.slice(d+1))),h=h.slice(0,d)),e.url=h,e.data=l;var f,p,m,b,w="client"==this.mode?c(this.queryParams,"sortKey","order"):r(c(this.queryParams,v(D.queryParams)),"directions"),x=u(w),k=a(this);for(f=0;f<x.length;f++)p=x[f],m=p[0],b=p[1],b=g(b)?b.call(k):b,null!=t[m]&&null!=b&&(l[b]=t[m]);t.sortKey&&t.order?l[w.order]=this.queryParams.directions[t.order+""]:t.sortKey||delete l[w.order];var T=u(r(this.queryParams,v(D.queryParams)));for(f=0;f<T.length;f++)p=T[f],b=p[1],b=g(b)?b.call(k):b,l[p[0]]=b;var S=this.fullCollection,M=this.links;if("server"!=i){var j=this,E=e.success;return e.success=function(n,r,a){a=a||{},_(e.silent)?delete a.silent:a.silent=e.silent;var l=n.models,c=t.currentPage;if("client"==i)s(S,l,a);else if(M[c]){var h=t.pageSize,d=(0===t.firstPage?c:c-1)*h,u=S.models,f=u.slice(0,d),p=u.slice(d+h);u=f.concat(l).concat(p);var g=S.set||S.update;g.call(S,u,o({silent:!0,sort:!1},a)),S.comparator&&S.sort(),S.trigger("reset",S,a)}else S.add(l,o({at:S.length,silent:!0},a)),S.trigger("reset",S,a);E&&E(n,r,a)},C.fetch.call(j,o({},e,{silent:!0}))}return C.fetch.call(this,e)},_makeComparator:function(e,t){var i=this.state;return e=e||i.sortKey,t=t||i.order,e&&t?function(i,n){var s,o=i.get(e),r=n.get(e);return 1===t&&(s=o,o=r,r=s),o===r?0:r>o?-1:1}:void 0},setSorting:function(e,t,i){var n=this.state;n.sortKey=e,n.order=t=t||n.order;var s=this.fullCollection,r=!1,a=!1;e||(r=a=!0);var l=this.mode;i=o({side:"client"==l?l:"server",full:!0},i);var c=this._makeComparator(e,t),h=i.full,d=i.side;return"client"==d?h?(s&&(s.comparator=c),r=!0):(this.comparator=c,a=!0):"server"!=d||h||(this.comparator=c),r&&delete this.comparator,a&&s&&delete s.comparator,this}}),D=S.prototype;return S}),define("oro/pageable-collection",["underscore","backbone","backbone/pageable-collection","oro/app"],function(e,t,i,n){var s=i.extend({model:t.Model,initialState:{},queryParams:e.extend({},i.prototype.queryParams,{directions:{"-1":"ASC",1:"DESC"},totalRecords:void 0,totalPages:void 0}),stateShortKeys:{currentPage:"i",pageSize:"p",sorters:"s",filters:"f",gridName:"t",gridView:"v"},additionalParameters:{view:"gridView"},multipleSorting:!0,initialize:function(t,s){s=s||{},s.state&&(s.state.sorters&&e.each(s.state.sorters,function(e,t){s.state.sorters[t]=this.getSortDirectionKey(e)},this),e.extend(this.state,s.state)),this.initialState=n.deepClone(this.state),s.url&&(this.url=s.url),s.model&&(this.model=s.model),s.inputName&&(this.inputName=s.inputName),e.extend(this.queryParams,{currentPage:this.inputName+"[_pager][_page]",pageSize:this.inputName+"[_pager][_per_page]",sortBy:this.inputName+"[_sort_by][%field%]",parameters:this.inputName+"[_parameters]"}),this.on("remove",this.onRemove,this),i.prototype.initialize.apply(this,arguments)},onRemove:function(){this.state.totalRecords>0&&this.state.totalRecords--},encodeStateData:function(t){var i=e.pick(t,e.keys(this.stateShortKeys));
return i.gridName=this.inputName,i=n.invertKeys(i,this.stateShortKeys),n.packToQueryString(i)},decodeStateData:function(t){var i=n.unpackFromQueryString(t);return i=n.invertKeys(i,e.invert(this.stateShortKeys))},processFiltersParams:function(t,i,n){return i||(i=this.state),n||(n=this.inputName+"[_filter]"),i.filters&&e.extend(t,this.generateParameterStrings(i.filters,n)),t},processAdditionalParams:function(t){var t=n.deepClone(t);return t.parameters=t.parameters||{},e.each(this.additionalParameters,e.bind(function(i,n){e.isUndefined(t[i])||(t.parameters[n]=t[i])},this)),t},generateParameterStrings:function(t,i){var n={},s=i;return e.each(t,function(t,i){if(i=i.toString(),"__"!=i.substr(0,2)){var o=s+"["+i+"]";e.isObject(t)?e.extend(n,this.generateParameterStrings(t,o)):n[o]=t}},this),n},parse:function(e){return this.state.totalRecords=e.options.totalRecords,this.state=this._checkState(this.state),e.data},reset:function(e,t){this.trigger("beforeReset",this,t),i.prototype.reset.apply(this,arguments)},updateState:function(t){var i=e.extend({},this.state,t);this.state=this._checkState(i),this.trigger("updateState",this,this.state)},_checkState:function(e){var t=this.mode,i=this.links,n=e.totalRecords,s=e.pageSize,o=e.currentPage,r=e.firstPage,a=e.totalPages;if(null!=n&&null!=s&&null!=o&&null!=r&&("infinite"==t?i:!0)){if(e.totalRecords=n=this.finiteInt(n,"totalRecords"),e.pageSize=s=this.finiteInt(s,"pageSize"),e.currentPage=o=this.finiteInt(o,"currentPage"),e.firstPage=r=this.finiteInt(r,"firstPage"),0>s)throw new RangeError("`pageSize` must be >= 0");if(e.totalPages=0==s?1:a=e.totalPages=Math.ceil(n/s),0>r||r>1)throw new RangeError("`firstPage` must be 0 or 1");if(e.lastPage=0===r?a-1:a,o>e.lastPage&&e.pageSize>0&&(e.currentPage=o=e.lastPage),0==e.pageSize&&(e.currentPage=o=1),0==n&&(e.currentPage=o=r),"infinite"==t){if(!i[o+""])throw new RangeError("No link found for page "+o)}else if(a>0){if(0===r&&(r>o||o>=a))throw new RangeError("`currentPage` must be firstPage <= currentPage < totalPages if 0-based. Got "+o+".");if(1===r&&(r>o||o>a))throw new RangeError("`currentPage` must be firstPage <= currentPage <= totalPages if 1-based. Got "+o+".")}else if(o!==r)throw new RangeError("`currentPage` must be "+r+". Got "+o+".")}return e},finiteInt:function(t,i){if(t*=1,!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t},fetch:function(i){this.trigger("beforeFetch",this,i);var s=t.Collection.prototype;i=i||{};var o=this._checkState(this.state),r=this.mode;"infinite"!=r||i.url||(i.url=this.links[o.currentPage]);var a=i.data||{},l=i.url||e.result(this,"url")||"",c=l.indexOf("?");-1!=c&&(e.extend(a,n.unpackFromQueryString(l.slice(c+1))),l=l.slice(0,c)),i.url=l,i.data=a,a=this.processQueryParams(a,o),a=this.processFiltersParams(a,o);var h=this.fullCollection,d=this.links;if("server"!=r){var u=this,f=i.success;return i.success=function(t,n,s){s=s||{},e.isUndefined(i.silent)?delete s.silent:s.silent=i.silent;var a=t.models,l=o.currentPage;if("client"==r)resetQuickly(h,a,s);else if(d[l]){var c=o.pageSize,u=(0===o.firstPage?l:l-1)*c,p=h.models,g=p.slice(0,u),m=p.slice(u+c);p=g.concat(a).concat(m),h.update(p,e.extend({silent:!0,sort:!1},s)),h.comparator&&h.sort(),h.trigger("reset",h,s)}else h.add(a,e.extend({at:h.length,silent:!0},s)),h.trigger("reset",h,s);f&&f(t,n,s)},s.fetch.call(u,e.extend({},i,{silent:!0}))}return s.fetch.call(this,i)},processQueryParams:function(t,i){i=this.processAdditionalParams(i);var n,o,r,a,l=s.prototype,c="client"==this.mode?e.pick(this.queryParams,"sorters"):e.omit(e.pick(this.queryParams,e.keys(l.queryParams)),"directions"),h=e.pairs(c),d=e.clone(this);for(n=0;n<h.length;n++)o=h[n],r=o[0],a=o[1],a=e.isFunction(a)?a.call(d):a,null!=i[r]&&null!=a&&(t[a]=i[r]);i.sorters&&e.each(i.sorters,function(e,i){var n=this.queryParams.sortBy.replace("%field%",i);t[n]=this.queryParams.directions[e]},this);var u=e.pairs(e.omit(this.queryParams,e.keys(l.queryParams)));for(n=0;n<u.length;n++)o=u[n],a=o[1],a=e.isFunction(a)?a.call(d):a,t[o[0]]=a;return delete t[c.order],delete t[c.sortKey],t},getSortDirectionKey:function(t){var i=null;return e.each(this.queryParams.directions,function(e,n){e==t&&(i=n)}),i},setSorting:function(t,i,n){var s=this.state;s.sorters=s.sorters||{},this.multipleSorting?(e.keys(s.sorters).length<=1&&!i&&(i=this.getSortDirectionKey("ASC")),delete s.sorters[t]):s.sorters={},i&&(s.sorters[t]=i);var o=this.fullCollection,r=!1,a=!1;i||(r=a=!0);var l=this.mode;n=e.extend({side:"client"==l?l:"server",full:!0},n);var c=this._makeComparator(t,i),h=n.full,d=n.side;return"client"==d?h?(o&&(o.comparator=c),r=!0):(this.comparator=c,a=!0):"server"!=d||h||(this.comparator=c),r&&delete this.comparator,a&&o&&delete o.comparator,this},clone:function(){var e={};e.url=this.url,e.inputName=this.inputName;var t=new s(this.toJSON(),e);return t.state=n.deepClone(this.state),t}});return s}),define("oro/widget-manager",["oro/mediator"],function(e){var t={widgets:{},aliases:{},resetWidgets:function(){this.widgets={},this.aliases={}},addWidgetInstance:function(t){this.widgets[t.getWid()]=t,e.trigger("widget_registration:wid:"+t.getWid(),t),t.getAlias()&&(this.aliases[t.getAlias()]=t.getWid(),e.trigger("widget_registration:"+t.getAlias(),t))},getWidgetInstance:function(t,i){this.widgets.hasOwnProperty(t)?i(this.widgets[t]):e.once("widget_registration:wid:"+t,i)},getWidgetInstanceByAlias:function(t,i){this.aliases.hasOwnProperty(t)?this.getWidgetInstance(this.aliases[t],i):e.once("widget_registration:"+t,i)},removeWidget:function(e){delete this.widgets[e]}};return e.on("widget_initialize",function(e){t.addWidgetInstance(e)}),e.on("widget_remove",function(e){t.removeWidget(e)}),t}),define("oro/sync",["jquery","underscore","backbone","oro/translator","oro/messenger"],function(e,t,i,n,s){var o,r=[],a=function(e){if(!(t.isObject(e)&&t.isFunction(e.subscribe)&&t.isFunction(e.unsubscribe)))throw new Error("Synchronization service does not fit requirements");o=e;var i=function(){s.notificationFlashMessage("success",n("sync.connection.established"))};for(o.on("connection_lost",function(e){e=e||{};var t=e.retries||0;s.notificationMessage("error",n("sync.connection.lost",e,t),{flash:Boolean(t)}),o.off(null,i).once("connection_established",i)});r.length;)o.subscribe.apply(o,r.shift());return a},l=function(e){e.id&&(e["[[SetCallback]]"]=e["[[SetCallback]]"]||t.bind(e.set,e),a.subscribe(t.result(e,"url"),e["[[SetCallback]]"]),e.on("remove",c))},c=function(e){if(e.id){var i=[t.result(e,"url")];t.isFunction(e["[[SetCallback]]"])&&i.push(e["[[SetCallback]]"]),a.unsubscribe.apply(o,i)}},h={add:l,error:function(e){t.each(e.models,c)},reset:function(e,i){t.each(i.previousModels,function(t){t.urlRoot=e.url,c(t)}),t.each(e.models,l)}};return a.keepRelevant=function(e){return e instanceof i.Collection?(t.each(e.models,l),e.on(h)):e instanceof i.Model&&l(e),this},a.stopTracking=function(e){return e instanceof i.Collection?(t.each(e.models,c),e.off(h)):e instanceof i.Model&&c(e),this},a.reconnect=function(){o.connect()},a.subscribe=function(){var e=t.toArray(arguments);o?o.subscribe.apply(o,e):r.push(e)},a.unsubscribe=function(e,i){var n,s=t.toArray(arguments);o?o.unsubscribe.apply(o,s):(n=i?function(t){return e===t[0]&&i===t[1]}:function(t){return e===t[0]},r=t.reject(r,n))},a}),define("oro/content-manager",["underscore","oro/sync","oro/mediator","oro/messenger","oro/translator"],function(e,t,i,n,s){function o(e){return e.replace(/[\?&]restore=1/g,"")}function r(t){return e.isUndefined(t)||(g.url=o(t),p[g.url]=g.tags),g.url}function a(e){var t=r();f[t]||delete p[t],g.tags=[],r(e)}function l(e){var t=d.getPage(e),i=t?"<b>"+t.titleShort+"</b>":"the";u&&u.close(),u=n.notificationMessage("warning",s("navigation.message.content.outdated",{title:i}))}function c(t){t=h(t),e.each(p,function(n,s){var o,a=[];return e.each(n,function(i){e.intersection(i.tags,t).length&&a.push(i.callback||l)}),a.length?(a=e.uniq(a),s===r()?e.each(a,function(e){e(s)}):(o=function(t){s===t.url&&(e.each(a,function(e){e(s)}),i.off("hash_navigation_request:refresh",o))},i.on("hash_navigation_request:refresh",o)),i.trigger("content-manager:content-outdated",{url:s,isCurrentPage:s===r()}),void 0):!1})}function h(t){return t=e.reject(JSON.parse(t),function(e){return(e.username||null)===m}),e.pluck(t,"tagname")}var d,u,f={},p={},g={tags:[],url:null},m=null;return i.on("hash_navigation_request:start",function(e){a(e.url),u&&u.close()}),t.subscribe("oro/data/update",c),d={init:function(e,t){r(e),m=t},tagContent:function(t,n){var s={tags:e.isArray(t)?t:[t]};n&&(s.callback=n),g.tags.push(s),i.trigger("content-manager:content-tagged",{current:g.tags,added:s})},clearCache:function(t){e.isUndefined(t)?f={}:(t=o(t),delete f[t],delete p[t])},addPage:function(e,t){f[o(e)]=t},getPage:function(e){return f[o(e)]||!1}}}),function(e){function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(i))}function i(t){var i=t.target,n=e(i);if(!n.is("[type=submit],[type=image]")){var s=n.closest("[type=submit]");if(0===s.length)return;i=s[0]}var o=this;if(o.clk=i,"image"==i.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var r=n.offset();o.clk_x=t.pageX-r.left,o.clk_y=t.pageY-r.top}else o.clk_x=t.pageX-i.offsetLeft,o.clk_y=t.pageY-i.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var s={};s.fileapi=void 0!==e("<input type='file'/>").get(0).files,s.formdata=void 0!==window.FormData;var o=!!e.fn.prop;e.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(t){var i,n,s=e.param(t).split("&"),o=s.length,r=[];for(i=0;o>i;i++)s[i]=s[i].replace(/\+/g," "),n=s[i].split("="),r.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return r}function r(n){for(var s=new FormData,o=0;o<n.length;o++)s.append(n[o].name,n[o].value);if(t.extraData){var r=i(t.extraData);for(o=0;o<r.length;o++)r[o]&&s.append(r[o][0],r[o][1])}t.data=null;var a=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(a.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,s=e.total;e.lengthComputable&&(i=Math.ceil(100*(n/s))),t.uploadProgress(e,n,s,i)},!1),e}),a.data=null;var c=a.beforeSend;return a.beforeSend=function(e,t){t.data=s,c&&c.call(this,e,t)},e.ajax(a)}function a(i){function s(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(i){n("cannot get iframe.contentWindow document: "+i)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){n("cannot get iframe.contentDocument: "+i),t=e.document}return t}function r(){function t(){try{var e=s(v).readyState;n("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(i){n("Server abort: ",i," (",i.name,")"),a(S),x&&clearTimeout(x),x=void 0}}var i=d.attr2("target"),o=d.attr2("action");C.setAttribute("target",p),l||C.setAttribute("method","POST"),o!=u.url&&C.setAttribute("action",u.url),u.skipEncodingOverride||l&&!/post/i.test(l)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(x=setTimeout(function(){w=!0,a(T)},u.timeout));var r=[];try{if(u.extraData)for(var c in u.extraData)u.extraData.hasOwnProperty(c)&&(e.isPlainObject(u.extraData[c])&&u.extraData[c].hasOwnProperty("name")&&u.extraData[c].hasOwnProperty("value")?r.push(e('<input type="hidden" name="'+u.extraData[c].name+'">').val(u.extraData[c].value).appendTo(C)[0]):r.push(e('<input type="hidden" name="'+c+'">').val(u.extraData[c]).appendTo(C)[0]));u.iframeTarget||(m.appendTo("body"),v.attachEvent?v.attachEvent("onload",a):v.addEventListener("load",a,!1)),setTimeout(t,15);try{C.submit()}catch(h){var f=document.createElement("form").submit;f.apply(C)}}finally{C.setAttribute("action",o),i?C.setAttribute("target",i):d.removeAttr("target"),e(r).remove()}}function a(t){if(!_.aborted&&!F){if(E=s(v),E||(n("cannot access response document"),t=S),t===T&&_)return _.abort("timeout"),k.reject(_,"timeout"),void 0;if(t==S&&_)return _.abort("server abort"),k.reject(_,"error","server abort"),void 0;if(E&&E.location.href!=u.iframeSrc||w){v.detachEvent?v.detachEvent("onload",a):v.removeEventListener("load",a,!1);var i,o="success";try{if(w)throw"timeout";var r="xml"==u.dataType||E.XMLDocument||e.isXMLDoc(E);if(n("isXml="+r),!r&&window.opera&&(null===E.body||!E.body.innerHTML)&&--A)return n("requeing onLoad callback, DOM not available"),setTimeout(a,250),void 0;var l=E.body?E.body:E.documentElement;_.responseText=l?l.innerHTML:null,_.responseXML=E.XMLDocument?E.XMLDocument:E,r&&(u.dataType="xml"),_.getResponseHeader=function(e){var t={"content-type":u.dataType};return t[e]},l&&(_.status=Number(l.getAttribute("status"))||_.status,_.statusText=l.getAttribute("statusText")||_.statusText);var c=(u.dataType||"").toLowerCase(),h=/(json|script|text)/.test(c);if(h||u.textarea){var d=E.getElementsByTagName("textarea")[0];if(d)_.responseText=d.value,_.status=Number(d.getAttribute("status"))||_.status,_.statusText=d.getAttribute("statusText")||_.statusText;else if(h){var p=E.getElementsByTagName("pre")[0],g=E.getElementsByTagName("body")[0];p?_.responseText=p.textContent?p.textContent:p.innerText:g&&(_.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==c&&!_.responseXML&&_.responseText&&(_.responseXML=O(_.responseText));try{j=I(_,c,u)}catch(y){o="parsererror",_.error=i=y||o}}catch(y){n("error caught: ",y),o="error",_.error=i=y||o}_.aborted&&(n("upload aborted"),o=null),_.status&&(o=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===o?(u.success&&u.success.call(u.context,j,"success",_),k.resolve(_.responseText,"success",_),f&&e.event.trigger("ajaxSuccess",[_,u])):o&&(void 0===i&&(i=_.statusText),u.error&&u.error.call(u.context,_,o,i),k.reject(_,"error",i),f&&e.event.trigger("ajaxError",[_,u,i])),f&&e.event.trigger("ajaxComplete",[_,u]),f&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,_,o),F=!0,u.timeout&&clearTimeout(x),setTimeout(function(){u.iframeTarget||m.remove(),_.responseXML=null},100)}}}var c,h,u,f,p,m,v,_,y,b,w,x,C=d[0],k=e.Deferred();if(i)for(h=0;h<g.length;h++)c=e(g[h]),o?c.prop("disabled",!1):c.removeAttr("disabled");if(u=e.extend(!0,{},e.ajaxSettings,t),u.context=u.context||u,p="jqFormIO"+(new Date).getTime(),u.iframeTarget?(m=e(u.iframeTarget),b=m.attr2("name"),b?p=b:m.attr2("name",p)):(m=e('<iframe name="'+p+'" src="'+u.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(s){}m.attr("src",u.iframeSrc),_.error=i,u.error&&u.error.call(u.context,_,i,t),f&&e.event.trigger("ajaxError",[_,u,i]),u.complete&&u.complete.call(u.context,_,i)}},f=u.global,f&&0===e.active++&&e.event.trigger("ajaxStart"),f&&e.event.trigger("ajaxSend",[_,u]),u.beforeSend&&u.beforeSend.call(u.context,_,u)===!1)return u.global&&e.active--,k.reject(),k;if(_.aborted)return k.reject(),k;y=C.clk,y&&(b=y.name,b&&!y.disabled&&(u.extraData=u.extraData||{},u.extraData[b]=y.value,"image"==y.type&&(u.extraData[b+".x"]=C.clk_x,u.extraData[b+".y"]=C.clk_y)));var T=1,S=2,D=e("meta[name=csrf-token]").attr("content"),M=e("meta[name=csrf-param]").attr("content");M&&D&&(u.extraData=u.extraData||{},u.extraData[M]=D),u.forceSync?r():setTimeout(r,10);var j,E,F,A=50,O=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},N=e.parseJSON||function(e){return window.eval("("+e+")")},I=function(t,i,n){var s=t.getResponseHeader("content-type")||"",o="xml"===i||!i&&s.indexOf("xml")>=0,r=o?t.responseXML:t.responseText;return o&&"parsererror"===r.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(r=n.dataFilter(r,i)),"string"==typeof r&&("json"===i||!i&&s.indexOf("json")>=0?r=N(r):("script"===i||!i&&s.indexOf("javascript")>=0)&&e.globalEval(r)),r};return k}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,h,d=this;"function"==typeof t&&(t={success:t}),l=this.attr2("method"),c=this.attr2("action"),h="string"==typeof c?e.trim(c):"",h=h||window.location.href||"",h&&(h=(h.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:h,success:e.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var u={};if(this.trigger("form-pre-serialize",[this,t,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=t.traditional;void 0===f&&(f=e.ajaxSettings.traditional);var p,g=[],m=this.formToArray(t.semantic,g);if(t.data&&(t.extraData=t.data,p=e.param(t.data,f)),t.beforeSubmit&&t.beforeSubmit(m,this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,t,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(m,f);p&&(v=v?v+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var _=[];if(t.resetForm&&_.push(function(){d.resetForm()}),t.clearForm&&_.push(function(){d.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};_.push(function(i){var n=t.replaceTarget?"replaceWith":"html";e(t.target)[n](i).each(y,arguments)})}else t.success&&_.push(t.success);t.success=function(e,i,n){for(var s=t.context||this,o=0,r=_.length;r>o;o++)_[o].apply(s,[e,i,n||d,d])};var b=e('input[type=file]:enabled[value!=""]',this),w=b.length>0,x="multipart/form-data",C=d.attr("enctype")==x||d.attr("encoding")==x,k=s.fileapi&&s.formdata;n("fileAPI :"+k);var T,S=(w||C)&&!k;t.iframe!==!1&&(t.iframe||S)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){T=a(m)}):T=a(m):T=(w||C)&&k?r(m):e.ajax(t),d.removeData("jqxhr").data("jqxhr",T);for(var D=0;D<g.length;D++)g[D]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(s){if(s=s||{},s.delegation=s.delegation&&e.isFunction(e.fn.on),!s.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!e.isReady&&o.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(o.s,o.c).ajaxForm(s)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return s.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,s,t).on("click.form-plugin",this.selector,s,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",s,t).bind("click.form-plugin",s,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var n=[];if(0===this.length)return n;var o=this[0],r=t?o.getElementsByTagName("*"):o.elements;if(!r)return n;var a,l,c,h,d,u,f;for(a=0,u=r.length;u>a;a++)if(d=r[a],c=d.name,c&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(n.push({name:c,value:e(d).val(),type:d.type}),n.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if(h=e.fieldValue(d,!0),h&&h.constructor==Array)for(i&&i.push(d),l=0,f=h.length;f>l;l++)n.push({name:c,value:h[l]});else if(s.fileapi&&"file"==d.type){i&&i.push(d);var p=d.files;if(p.length)for(l=0;l<p.length;l++)n.push({name:c,value:p[l],type:d.type});else n.push({name:c,value:"",type:d.type})}else null!==h&&"undefined"!=typeof h&&(i&&i.push(d),n.push({name:c,value:h,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),m=g[0];c=m.name,c&&!m.disabled&&"image"==m.type&&(n.push({name:c,value:g.val()}),n.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var n=this.name;if(n){var s=e.fieldValue(this,t);if(s&&s.constructor==Array)for(var o=0,r=s.length;r>o;o++)i.push({name:n,value:s[o]});else null!==s&&"undefined"!=typeof s&&i.push({name:this.name,value:s})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,s=this.length;s>n;n++){var o=this[n],r=e.fieldValue(o,t);null===r||"undefined"==typeof r||r.constructor==Array&&!r.length||(r.constructor==Array?e.merge(i,r):i.push(r))}return i},e.fieldValue=function(t,i){var n=t.name,s=t.type,o=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!t.checked||("submit"==s||"image"==s)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var r=t.selectedIndex;if(0>r)return null;for(var a=[],l=t.options,c="select-one"==s,h=c?r+1:l.length,d=c?r:0;h>d;d++){var u=l[d];if(u.selected){var f=u.value;if(f||(f=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),c)return f;a.push(f)}}return a}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,s=this.tagName.toLowerCase();i.test(n)||"textarea"==s?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==s?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery.form",["jquery"],function(){}),define("oro/navigation",["require","jquery","underscore","backbone","oro/translator","oro/app","oro/mediator","oro/messenger","oro/modal","oro/loading-mask","oro/navigation/pagestate/view","oro/navigation/pagestate/model","oro/pageable-collection","oro/widget-manager","oro/content-manager","jquery.form"],function(e){var t=e("jquery"),i=e("underscore"),n=e("backbone"),s=e("oro/translator"),o=e("oro/app"),r=e("oro/mediator"),a=e("oro/messenger"),l=e("oro/modal"),c=e("oro/loading-mask"),h=e("oro/navigation/pagestate/view"),d=e("oro/navigation/pagestate/model"),u=e("oro/pageable-collection"),f=e("oro/widget-manager"),p=e("oro/content-manager");e("jquery.form");var g,m,v=null,_={state:{},registerStateObject:function(e,t){this.state[e]={},i.each(t,function(t){this.state[e][t]=""},this)},saveObjectCache:function(e,t){i.each(t,function(t,i){this.state[e][i]=t},this)},getObjectCache:function(e){return this.state[e]}};return _.registerStateObject("grid",["collection"]),_.registerStateObject("form",["form_data"]),g=n.Router.extend({enabled:!0,selectors:{links:"a:not([href^=#],[href^=javascript],[href^=mailto],[href^=skype],[href^=ftp],[href^=callto],[href^=tel]),span[data-url]",scrollLinks:"a[href^=#]",content:"#content",userMenu:"#top-page .user-menu",container:"#container",loadingMask:".hash-loading-mask",searchDropdown:"#search-div",menuDropdowns:".pin-menus.dropdown, .nav .dropdown",pinbarHelp:".pin-bar-empty",historyTab:"#history-content",mostViewedTab:"#mostviewed-content",flashMessages:"#flash-messages",menu:"#main-menu",breadcrumb:"#breadcrumb",pinButtonsContainer:"#pin-button-div",gridContainer:".grid-container",pinButtons:".minimize-button, .favorite-button"},selectorCached:{},loadingMask:"",baseUrl:"",headerId:"",headerObject:{},encodedStateData:"",url:"",gridRoute:"",routes:{"(url=*page)(|g/*encodedStateData)":"defaultAction","g/*encodedStateData":"gridChangeStateAction"},useCache:!1,skipAjaxCall:!1,skipGridStateChange:!1,maxCachedPages:10,tempCache:"",formState:"",confirmModal:null,initialize:function(e){var s=this.selectorCached;if(i.each(this.selectors,function(e,i){s[i]=t(e)}),!e.baseUrl||!e.headerId)throw new TypeError("'baseUrl' and 'headerId' are required");this.baseUrl=e.baseUrl,this.headerId=e.headerId,this.headerObject[this.headerId]=!0,this.url=this.getHashUrl(),window.location.hash||(this.skipAjaxCall=!0),this.init(),p.init(this.url,e.userName||!1),n.Router.prototype.initialize.apply(this,arguments)},init:function(){r.bind("grid_load:complete",function(e){if(this.updateCachedContent("grid",{collection:e}),v){var t=v.getItemForCurrentPage(!0);t.length&&this.useCache&&p.addPage(this.getHashUrl(),this.tempCache)}this.processGridLinks()},this),r.bind("datagrid_collection_set_before",function(e){var t=this.getCachedData();if(t.states){var i=t.states.getObjectCache("grid");i.collection&&(e.collection=i.collection.clone())}},this),r.bind("datagrid_collection_set_after",function(e){var t=this.getCachedData();if(t.states){var i=t.states.getObjectCache("grid");i.collection=e}else this.updateCachedContent("grid",{collection:e})},this),r.bind("datagrid_filters:rendered",function(e){this.getCachedData()&&this.encodedStateData&&e.trigger("updateState",e)},this),r.bind("pinbar_item_remove_before",function(e){var t=this.removeGridParams(e.get("url"));p.clearCache(t)},this),r.bind("pinbar_item_minimized",function(){this.useCache=!0,p.addPage(this.getHashUrl(),this.tempCache)},this),r.bind("pagestate_collected",function(e){this.updateCachedContent("form",{form_data:e.get("pagestate").data}),this.useCache&&p.addPage(this.getHashUrl(),this.tempCache)},this),r.bind("grid_action:navigateAction:preExecute",function(e,t){this.setLocation(e.getLink()),t.doExecute=!1},this),r.bind("grid_route:loaded",function(e){this.gridRoute=e,this.skipGridStateChange||this.gridChangeState(),this.processGridLinks()},this),r.bind("navigaion_item:added",function(e){this.processClicks(e.find(this.selectors.links))},this),r.bind("top_search_request:complete",function(){this.processClicks(t(this.selectorCached.searchDropdown).find(this.selectors.links))},this),r.bind("pinbar_help:shown",function(){this.processClicks(this.selectors.pinbarHelp)},this),this.confirmModal=new l({title:s("Refresh Confirmation"),content:s("Your local changes will be lost. Are you sure you want to refresh the page?"),okText:s("Ok, got it."),className:"modal modal-primary",okButtonClass:"btn-primary btn-large",cancelText:s("Cancel")}),this.confirmModal.on("ok",i.bind(function(){this.refreshPage()},this)),t(document).on("click.action.data-api","[data-action=page-refresh]",i.bind(function(e){var t,i=this.getCachedData();e.preventDefault(),i.states&&(t=i.states.getObjectCache("form")),t&&t.form_data.length?this.confirmModal.open():this.refreshPage()},this)),this.processClicks(this.selectorCached.links),this.disableEmptyLinks(this.selectorCached.menu.find(this.selectors.scrollLinks)),this.processForms(this.selectors.forms),this.processAnchors(this.selectorCached.container.find(this.selectors.scrollLinks)),this.loadingMask=new c,this.renderLoadingMask()},defaultAction:function(e,t){this.beforeAction(),this.beforeDefaultAction(),this.encodedStateData=t,this.url=e,this.url||(this.url=window.location.href.replace(this.baseUrl,"")),this.skipAjaxCall||this.loadPage(),this.skipAjaxCall=!1},beforeAction:function(){r.trigger("hash_navigation_request:before",this)},isInAction:function(){return this.loadingMask.displayed},beforeDefaultAction:function(){this.url!==this.getHashUrl(!1,!0)&&(this.getPagestate().needServerRestore=!0)},gridChangeStateAction:function(e){this.encodedStateData=e},gridChangeState:function(){!this.getCachedData()&&this.gridRoute&&this.encodedStateData&&this.encodedStateData.length&&this.gridRoute.changeState(this.encodedStateData)},getPagestate:function(){return this.pagestate||(this.pagestate=new h({model:new d})),this.pagestate},loadPage:function(){if(this.url){this.beforeRequest();var e;if(e=this.getCachedData())f.resetWidgets(),this.tempCache=e,this.handleResponse(e,{fromCache:!0}),this.afterRequest();else{var n=this.baseUrl+this.url,s=[];if(this.skipGridStateChange=!1,this.encodedStateData){var o=u.prototype.decodeStateData(this.encodedStateData),a=new u({},{inputName:o.gridName});s=a.processQueryParams({},o),s=a.processFiltersParams(s,o),r.once("datagrid_filters:rendered",function(e){e.trigger("updateState",e)},this),this.skipGridStateChange=!0}var l=this.useCache;t.ajax({url:n,headers:this.headerObject,data:s,beforeSend:function(e){t.isActive(!1),e.setRequestHeader("X-Requested-With",{toString:function(){return""}})},error:i.bind(this.processError,this),success:i.bind(function(t,i,n){e||(this.handleResponse(t),this.updateDebugToolbar(n),this.afterRequest()),l&&p.addPage(this.getHashUrl(),this.tempCache)},this)})}}},restoreFormState:function(e){var t={},i=this.getPagestate();this.formState?t=this.formState:e.states&&(t=e.states.getObjectCache("form")),t.form_data&&t.form_data.length&&(i.updateState(t.form_data),i.restore(),i.needServerRestore=!1)},updateDebugToolbar:function(e){var n=e.getResponseHeader("x-debug-token"),s=window.location.pathname;if(-1!==s.indexOf(".php")&&(s=s.substr(0,s.indexOf(".php")+4)),n){var o=s+"/_wdt/"+n;t.get(this.baseUrl+o,i.bind(function(e){var i=t('<div class="sf-toolbar" id="sfwdt'+n+'" style="display: block;" data-sfurl="'+o+'"/>');i.html(e);var s=t(".scrollable-container:last"),a=s.length?s:this.selectorCached.container;a.closest("body").length||(a=t(document.body)),t(".sf-toolbar").remove(),a.append(i),r.trigger("layout:adjustHeight")},this))}},savePageToCache:function(e){this.tempCache={},this.tempCache=i.clone(e),this.tempCache.states=o.deepClone(_)},getCachedData:function(e){return p.getPage(i.isUndefined(e)?this.getHashUrl():e)},updateCachedContent:function(e,t){this.tempCache.states&&this.tempCache.states.saveObjectCache(e,t)},beforeRequest:function(){this.loadingMask.show(),this.gridRoute="",this.tempCache="",r.trigger("hash_navigation_request:start",this)},afterRequest:function(){this.formState=""},renderLoadingMask:function(){this.selectorCached.loadingMask.append(this.loadingMask.render().$el),this.loadingMask.hide()},refreshPage:function(){p.clearCache(this.url),this.loadPage(),r.trigger("hash_navigation_request:page_refreshed",{url:this.url,navigationInstance:this})},clearContainer:function(){var e=document.getElementById("container");e?e.innerHTML="":location.reload()},removeGridParams:function(e){return e.split("#g")[0]},getCorrectedData:function(e,n){i.isUndefined(n)&&(n=-1),e=t.trim(e);var s=e.indexOf("{",n+1),o="",r=null;if(s>0){o=e.substr(0,s);var a=e.substr(s);try{r=t.parseJSON(a)}catch(l){return this.getCorrectedData(e,s)}}else{if(0!==s)throw"Unexpected content format";r=t.parseJSON(e)}return o&&(o='<div class="alert alert-info fade in top-messages"><a class="close" data-dismiss="alert" href="#">&times;</a><div class="message">'+o+"</div></div>"),void 0!==r.content&&(r.content=o+r.content),r
},handleResponse:function(e,t){i.isUndefined(t)&&(t={});try{var n=e;if(t.fromCache||(n=0===e.indexOf("http")?{redirect:!0,fullRedirect:!0,location:e}:this.getCorrectedData(e)),i.isObject(n))if(void 0!==n.redirect&&n.redirect)this.processRedirect(n);else{t.fromCache||t.skipCache||this.savePageToCache(n),this.clearContainer();var l=n.content;this.selectorCached.container.html(l),this.selectorCached.menu.html(n.mainMenu),this.selectorCached.userMenu.html(n.userMenu),this.selectorCached.breadcrumb.html(n.breadcrumb),n.scripts.length&&this.selectorCached.container.append(n.scripts),document.title=n.title,this.processClicks(this.selectorCached.menu.find(this.selectors.links)),this.processClicks(this.selectorCached.userMenu.find(this.selectors.links)),this.disableEmptyLinks(this.selectorCached.menu.find(this.selectors.scrollLinks)),this.processClicks(this.selectorCached.container.find(this.selectors.links)),this.processAnchors(this.selectorCached.container.find(this.selectors.scrollLinks)),this.processPinButton(n),this.restoreFormState(this.tempCache),t.fromCache||(this.updateMenuTabs(n),this.addMessages(n.flashMessages)),this.hideActiveDropdowns(),r.trigger("hash_navigation_request:refresh",this),this.loadingMask.hide()}}catch(c){i.isUndefined(console)||console.error(c),o.debug?document.body.innerHTML=e:(a.notificationMessage("error",s("Sorry, page was not loaded correctly")),this.loadingMask.hide())}this.triggerCompleteEvent()},disableEmptyLinks:function(e){t(e).on("click",function(e){e.preventDefault()})},processGridLinks:function(){this.processClicks(t(this.selectors.gridContainer).find(this.selectors.links))},processRedirect:function(e){var i=e.location,n=i.split("url=");if(n[1]&&(i=n[1]),t.isActive(!0),e.fullRedirect){var s="?";-1!==i.indexOf(s)&&(s="&"),window.location.replace(i+s+"_rand="+Math.random())}else p.clearCache(this.url),this.setLocation(i,{clearCache:!0,useCache:this.getCachedData(i)!==!1})},processError:function(e){var t="You do not have permission to this action";if(o.debug)403==e.status?(a.notificationMessage("error",s(t)),this.loadingMask.hide()):document.body.innerHTML=e.responseText,this.updateDebugToolbar(e);else{var i="Sorry, page was not loaded correctly";403==e.status&&(i=t),a.notificationMessage("error",s(i)),this.loadingMask.hide()}},hideActiveDropdowns:function(){this.selectorCached.searchDropdown.removeClass("header-search-focused"),this.selectorCached.menuDropdowns.removeClass("open")},addMessages:function(e){this.selectorCached.flashMessages.find(".flash-messages-holder").empty(),i.each(e,function(e,t){i.each(e,function(e){a.notificationFlashMessage(t,e)})})},processPinButton:function(e){if(e.showPinButton){this.selectorCached.pinButtonsContainer.show();var i=e.titleSerialized;i&&(i=t.parseJSON(i),this.selectorCached.pinButtonsContainer.find(this.selectors.pinButtons).data("title",i)),this.selectorCached.pinButtonsContainer.find(this.selectors.pinButtons).data("title-rendered-short",e.titleShort)}else this.selectorCached.pinButtonsContainer.hide()},updateMenuTabs:function(e){this.selectorCached.historyTab.html(e.history),this.selectorCached.mostViewedTab.html(e.mostviewed),this.processClicks(this.selectorCached.historyTab.find(this.selectors.links)),this.processClicks(this.selectorCached.mostViewedTab.find(this.selectors.links))},triggerCompleteEvent:function(){r.trigger("hash_navigation_request:complete",this)},processClicks:function(e){t(e).not(".no-hash").on("click",i.bind(function(e){if(e.shiftKey||e.ctrlKey||e.metaKey||2===e.which)return!0;var i=e.currentTarget;e.preventDefault();var n="";if(t(i).is("a")?n=t(i).attr("href"):t(i).is("span")&&(n=t(i).attr("data-url")),n){var s={stoppedProcess:!1,hashNavigationInstance:this,link:n};r.trigger("hash_navigation_click",s),s.stoppedProcess===!1&&this.setLocation(n)}return!1},this))},processAnchors:function(e){t(e).each(function(){var e=t(this).attr("href"),n=/^#\w/.test(e)&&t(e);if(n){var s=t._data(t(this).get(0),"events");(i.isUndefined(s)||!s.click)&&t(this).on("click",function(e){e.preventDefault();var i=n.parents().filter(function(){return t(this).get(0).scrollHeight>t(this).innerHeight()});i=i?i.eq(0):t(window),i.scrollTop(n.position().top+i.scrollTop()),t(this).blur()})}})},processForms:function(){t("body").on("submit",i.bind(function(e){var n=t(e.target);if(!n.data("nohash")&&!e.isDefaultPrevented()&&(e.preventDefault(),!n.data("sent"))){var s=n.attr("action");if(this.method=n.attr("method")||"get",s){n.data("sent",!0);var o={form_validate:!0};if(r.trigger("hash_navigation_request:form-start",n.get(0),o),o.form_validate){var a=n.serialize();"get"===this.method?(a&&(s+="?"+a),this.setLocation(s),n.removeData("sent")):(this.beforeRequest(),n.ajaxSubmit({data:this.headerObject,headers:this.headerObject,complete:function(){n.removeData("sent")},error:i.bind(this.processError,this),success:i.bind(function(e){this.handleResponse(e,{skipCache:!0}),this.afterRequest()},this)}))}}return!1}},this))},getHashUrl:function(e,t){var s=this.url;if(!s||t){if(n.history.fragment){var o=n.history.fragment.split("|g/");s=o[0].replace("url=",""),o[1]&&!i.isUndefined(e)&&e===!0&&(s+="#g/"+o[1])}s||(s=window.location.pathname+window.location.search)}return s},checkThirdPartyLink:function(e){var t=new RegExp("^(https?:)?//(?!"+location.host+")");return-1!==e.indexOf("http")&&t.test(e)},setLocation:function(e,t){if(i.isUndefined(t)&&(t={}),this.enabled&&!this.checkThirdPartyLink(e)){if(t.clearCache&&p.clearCache(e),this.useCache=!1,t.useCache&&(this.useCache=t.useCache),e=e.replace(this.baseUrl,"").replace(/^(#\!?|\.)/,""),v){var n=v.getItemForPage(e,!0);n.length&&(e=n[0].get("url"))}e=e.replace("#g/","|g/"),e!==this.getHashUrl()||this.encodedStateData?window.location.hash="#url="+e:this.loadPage()}else window.location.href=e},checkHashForUrl:function(){return-1!==window.location.hash.indexOf("#url=")},back:function(){return window.history.back(),!0}}),g.isEnabled=function(){return Boolean(g.prototype.enabled)},g.getInstance=function(){return m},g.setup=function(e){m=new g(e)},g.registerPinbarView=function(e){v=e},g}),require(["oro/mediator"],function(e){e.once("tab:changed",function(){setTimeout(function(){document["page-rendered"]=!0,e.trigger("page-rendered")},50)})}),require(["jquery","underscore","oro/translator","oro/app","oro/mediator","oro/layout","oro/navigation","oro/delete-confirmation","oro/messenger","oro/scrollspy","bootstrap","jquery-ui","jquery-ui-timepicker"],function(e,t,i,n,s,o,r,a,l,c){e(function(){o.init(),r.isEnabled()&&r.prototype.checkHashForUrl()||(e("#page-title").size()&&(document.title=e("#page-title").text()),o.hideProgressBar()),e("div.side-nav").each(function(){var t=e(this),i=e(t).parent().height()-18;e(t).height(i),e(this).find("span.maximaze-bar").click(function(){if(e(t).hasClass("side-nav-open")||e(t).hasClass("side-nav-locked"))e(t).removeClass("side-nav-locked side-nav-open"),e(t).hasClass("left-panel")?e(t).parent("div.page-container").removeClass("left-locked"):e(t).parent("div.page-container").removeClass("right-locked"),e(t).find(".bar-tools").css({height:"auto",overflow:"visible"});else{e(t).addClass("side-nav-open");var i=e("div.page-container").height()-20,n=e(t).find(".bar-tools").height();e(t).height(i),n>i&&e(t).find(".bar-tools").height(i-20).css({overflow:"auto"})}}),e(this).find("span.lock-bar").click(function(){e(this).hasClass("lock-bar-locked")?(e(t).addClass("side-nav-open").removeClass("side-nav-locked"),e(t).hasClass("left-panel")?e(t).parent("div.page-container").removeClass("left-locked"):e(t).parent("div.page-container").removeClass("right-locked")):(e(t).addClass("side-nav-locked").removeClass("side-nav-open"),e(t).hasClass("left-panel")?e(t).parent("div.page-container").addClass("left-locked"):e(t).parent("div.page-container").addClass("right-locked")),e(this).toggleClass("lock-bar-locked")}),e(this).find(".bar-tools li").each(function(){var t=e(this);e(t).find(".sn-opener").click(function(){e(t).find("div.nav-box").fadeToggle("slow");var i=e("#page").height(),n=e("#page > .wrapper").width();e("#bar-drop-overlay").width(n).height(i),e("#bar-drop-overlay").toggleClass("bar-open-overlay")}),e(t).find("span.close").click(function(){e(t).find("div.nav-box").fadeToggle("slow"),e("#bar-drop-overlay").toggleClass("bar-open-overlay")}),e("#bar-drop-overlay").on({click:function(){e(t).find("div.nav-box").animate({opacity:0,display:"none"},function(){e(this).css({opacity:1,display:"none"})}),e("#bar-drop-overlay").removeClass("bar-open-overlay")}})}),e(t).find("ul.bar-tools > li").each(function(){var t=e(this);e(t).find("span.open-bar-item").click(function(){e(t).find("div.nav-content").slideToggle(),e(t).toggleClass("open-item")})})});var i=e(".oro-dropdown-toggle");i.click(function(){var t=e(this).parent().toggleClass("open");t.hasClass("open")&&t.find("input[type=text]").first().focus().select()}),e("body").on("focus.dropdown.data-api","[data-toggle=dropdown]",t.debounce(function(t){e(t.target).parent().find("input[type=text]").first().focus()},10));var n=".dropdown.open, .dropdown .open, .oro-drop.open, .oro-drop .open";e("html").click(function(t){var i=e(t.target),s=null;s=i.hasClass("dropdown")||i.hasClass("oro-drop")?i:i.closest(".dropdown, .oro-drop"),e(n).not(s).removeClass("open")}),e("#main-menu").mouseover(function(){e(n).removeClass("open")}),e(document).on("click.collapse.data-api",'[data-action^="accordion:"]',function(t){var i=e(t.target),n=i.data("action").slice(10),s={"expand-all":"show","collapse-all":"hide"}[n],o=e(i.attr("data-target")||t.preventDefault()||i.attr("href"));o.find(".collapse").collapse({toggle:!1}).collapse(s)}),e(document).on("shown.collapse.data-api hidden.collapse.data-api",".collapse",function(t){var i=e(t.target).closest(".accordion-group").find("[data-toggle=collapse]").first();i["shown"===t.type?"removeClass":"addClass"]("collapsed")})}),s.bind("hash_navigation_request:complete",function(){o.hideProgressBar(),o.init()}),function(){if(!n.isMobile()){var t=e("#bottom-anchor"),i=!1,o=function(){i||(i=e(".scrollable-container").filter(":parents(.ui-widget)"),n.isMobile()?(i.css("overflow","hidden"),i.last().css("overflow-y","auto")):i.css("overflow","auto"))},r=function(){o();var n=e(".sf-toolbar:visible").height()||0,s=t.position().top,r=e("#footer:visible").height()||0,a=1;e(i.get().reverse()).each(function(t,i){i=e(i),i.height(s-i.position().top-r-n+a)}),c.adjust();var l=2,h=e(".sf-toolbar").height()+e("#footer").height();e("#dialog-extend-fixed-container").css({position:"fixed",bottom:h+l,zIndex:9999}),e(".sidebar").css({"margin-bottom":h})},a=0,l=function(){var t=e(".sf-toolbar");t.children().length?window.setTimeout(r,500):100>a&&(a+=1,window.setTimeout(l,500))},h=function(){i=!1,r()};t.length||(t=e('<div id="bottom-anchor"/>').css({position:"fixed",bottom:"0",left:"0",width:"1px",height:"1px"}).appendTo(e(document.body))),s.once("page-rendered",function(){var t=e(".sf-toolbar");t.length?l():r()}),e(window).on("resize",r),s.bind("hash_navigation_request:complete",h),s.bind("layout:adjustHeight",r),e("body").hasClass("error-page")&&r()}}(),e(document).on("click",".action-button",function(){var t=e('input[name = "input_action"]');t.val(e(this).attr("data-action")),e("#"+t.attr("data-form-id")).submit()}),e(function(){e(document).on("click",".remove-button",function(){var t,n=e(this),s=n.data("message");return t=new a({content:s}),t.on("ok",function(){var t=r.getInstance();t&&t.loadingMask.show(),e.ajax({url:n.data("url"),type:"DELETE",success:function(){n.trigger("removesuccess"),l.addMessage("success",n.data("success-message"),{hashNavEnabled:r.isEnabled()}),n.data("redirect")?(e.isActive(!0),t?t.setLocation(n.data("redirect")):window.location.href=n.data("redirect")):t&&t.loadingMask.hide()},error:function(){t&&t.loadingMask.hide(),l.notificationMessage("error",n.data("error-message")||i("Unexpected error occured. Please contact system administrator."))}})}),t.open(),!1})}),e(document).on("click",".add-list-item",function(t){t.preventDefault();var i=e(this).siblings(".collection-fields-list"),n=i.attr("data-prototype").replace(/__name__/g,i.children().length),s=e("<div/>").html(n);s.children().appendTo(i),o.styleForm(s)}),e(document).on("click",".removeRow",function(t){t.preventDefault(),e(this).parents("*[data-content]").remove()})}),define("oro/init-layout",function(){}),define("oro/tools",["underscore"],function(e){return{loadModules:function(t,i){var n=e.values(t);require(n,function(){e.each(t,e.bind(function(e,i){t[i]=this[e]},e.object(n,e.toArray(arguments)))),i(t)})}}}),define("oro/abstract-widget",["underscore","backbone","oro/mediator","oro/loading-mask","oro/layout","jquery.form"],function(e,t,i,n,s){var o=t.$;return t.View.extend({options:{type:"widget",actionsEl:".widget-actions",url:!1,elementFirst:!0,title:"",alias:null,wid:null,loadingMaskEnabled:!0,loadingElement:null,submitHandler:function(){this.trigger("adoptedFormSubmit",this.form,this)}},loadingElement:null,loadingMask:null,loading:!1,initialize:function(e){e=e||{},this.initializeWidget(e)},setTitle:function(){console.warn("Implement setTitle")},getActionsElement:function(){console.warn("Implement getActionsElement")},remove:function(){this.trigger("widgetRemove",this.$el),i.trigger("widget_remove",this.getWid()),t.View.prototype.remove.call(this)},initializeWidget:function(){this.options.wid&&(this._wid=this.options.wid),this.on("adoptedFormSubmitClick",e.bind(this._onAdoptedFormSubmitClick,this)),this.on("adoptedFormResetClick",e.bind(this._onAdoptedFormResetClick,this)),this.on("adoptedFormSubmit",e.bind(this._onAdoptedFormSubmit,this)),this.options.loadingMaskEnabled&&(this.on("beforeContentLoad",e.bind(this._showLoading,this)),this.on("contentLoad",e.bind(this._hideLoading,this)),this.on("renderStart",e.bind(function(e){this.loadingElement=e},this))),this.actions={},this.firstRun=!0,this.loadingElement=o("body"),i.trigger("widget_initialize",this)},_showLoading:function(){if(this.options.loadingMaskEnabled){var e=this.options.loadingElement||this.loadingElement;e=o(e),e&&e.length&&("body"!==e[0].tagName.toLowerCase()&&"static"==e.css("position")&&e.css("position","relative"),this.loadingMask=new n,e.append(this.loadingMask.render().$el),this.loadingMask.show())}},_hideLoading:function(){this.loadingMask&&(this.loadingMask.remove(),this.loadingMask=null)},getWid:function(){return this._wid||(this._wid=this._getUniqueIdentifier()),this._wid},getAlias:function(){return this.$el.data("alias")||this.options.alias},_getUniqueIdentifier:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),i="x"===e?t:8|3&t;return i.toString(16)})},_adoptWidgetActions:function(){this.actions.adopted={},this.form=null;var t=this._getAdoptedActionsContainer();if(t.length>0){var i=this,n=t.closest("form"),s=t.find("button, input, a");if(n.length>0){this.form=n;var r=this.form.attr("action");r.length>0&&"#"!==r[0]&&(this.options.url=r)}e.each(s,function(e,t){var s=o(e),r=s.data("action-name")||"adopted_action_"+t;switch(e.type.toLowerCase()){case"submit":var a=o('<input type="submit"/>');a.css({position:"absolute",left:"-9999px",width:"1px",height:"1px"}),n.append(a),r="form_submit";break;case"reset":r="form_reset"}i.actions.adopted[r]=s}),t.remove()}},_getAdoptedActionsContainer:function(){if(void 0!==this.options.actionsEl){if("string"==typeof this.options.actionsEl)return this.$el.find(this.options.actionsEl);if(e.isElement(this.options.actionsEl))return this.options.actionsEl}return!1},_onAdoptedFormSubmitClick:function(e){e.submit()},_onAdoptedFormSubmit:function(t){this.loading||(t.find('[type="file"]').length?(this.trigger("beforeContentLoad",this),this.loading=!0,t.ajaxSubmit({data:{_widgetContainer:this.options.type,_wid:this.getWid()},success:e.bind(this._onContentLoad,this),error:e.bind(this._onContentLoadFail,this)})):this.loadContent(t.serialize(),t.attr("method")))},_onAdoptedFormResetClick:function(e){o(e).trigger("reset")},_createWidgetActionsSection:function(e){return o('<div id="'+e+'" class="widget-actions-section"/>')},addAction:function(e,t,i){if(void 0===t&&(t="main"),!this.hasAction(e,t)){this.actions.hasOwnProperty(t)||(this.actions[t]={}),this.actions[t][e]=i;var n=this.getActionsElement().find("#"+t);n.length||(n=this._createWidgetActionsSection(t),n.appendTo(this.getActionsElement())),n.append(i),this.trigger("widget:add:action:"+t+":"+e,o(i))}},getActions:function(){return this.actions},setUrl:function(e){this.options.url=e},removeAction:function(t,i){var n=this,s=function(t,i){e.isElement(n.actions[i])&&n.actions[i].remove(),delete n.actions[i]};this.hasAction(t,i)&&(void 0!==i?s(this.actions[i],t):e.each(this.actions,function(e,i){n.hasAction(t,i)&&s(e,t)}))},hasAction:function(t,i){if(void 0!==i)return this.actions.hasOwnProperty(i)&&this.actions[i].hasOwnProperty(t);var n=!1;return e.each(this.actions,function(e){e.hasOwnProperty(t)&&(n=!0)}),n},getAction:function(t,i,n){if(this.hasAction(t,i)){var s=null;void 0!==i?s=this.actions[i][t]:e.each(this.actions,function(e){e.hasOwnProperty(t)&&(s=e[t])}),n(s)}else this.once("widget:add:action:"+i+":"+t,n)},_renderActions:function(){var t=this;this._clearActionsContainer();var i=this.getActionsElement();i&&e.each(this.actions,function(n,s){var r=t._createWidgetActionsSection(s);e.each(n,function(e,i){t._initActionEvents(e),r.append(e),t.trigger("widget:add:action:"+s+":"+i,o(e))}),i.append(r)})},_bindSubmitHandler:function(){this.$el.parent().on("submit",e.bind(function(e){e.isDefaultPrevented()||this.options.submitHandler.call(this),e.preventDefault()},this))},_initActionEvents:function(e){var t=this,i=o(e).attr("type");if(i)switch(i.toLowerCase()){case"submit":e.on("click",function(){return t.trigger("adoptedFormSubmitClick",t.form,t),!1});break;case"reset":e.on("click",function(){t.trigger("adoptedFormResetClick",t.form,t)})}},_clearActionsContainer:function(){var e=this.getActionsElement();e&&e.empty()},render:function(){var e=!this.options.elementFirst||this.options.elementFirst&&!this.firstRun||0==this.$el.html().length;e&&this.options.url!==!1?this.loadContent():this._show(),this.firstRun=!1},loadContent:function(i,n){this.loading=!0;var s=this.options.url;void 0!==s&&s||(s=window.location.href),(this.firstRun||void 0===n||!n)&&(n="get");var o={url:s,type:n};void 0!==i&&(o.data=i),o.data=(void 0!==o.data?o.data+"&":"")+"_widgetContainer="+this.options.type+"&_wid="+this.getWid(),this.trigger("beforeContentLoad",this),t.$.ajax(o).done(e.bind(this._onContentLoad,this)).fail(e.bind(this._onContentLoadFail,this))},_onContentLoadFail:function(){var e='<div class="widget-content"><div class="alert alert-error">Widget content loading failed</div></div>';this._onContentLoad(e)},_onContentLoad:function(e){this.loading=!1;try{this.trigger("contentLoad",e,this),this.actionsEl=null,this.actions={},this.setElement(o(e).filter(".widget-content")),s.init(this.$el),this._show(),i.trigger("hash_navigation_request:complete")}catch(t){console.warn(t),this.trigger("contentLoadError",this)}},_show:function(){this._adoptWidgetActions(),this.trigger("renderStart",this.$el,this),this.show(),this.trigger("renderComplete",this.$el,this)},show:function(){this.setWidToElement(this.$el),this._renderActions(),this._bindSubmitHandler(),this.trigger("widgetRender",this.$el,this),i.trigger("widget:render:"+this.getWid(),this.$el,this)},setWidToElement:function(e){e.attr("data-wid",this.getWid())}})}),define("oro/block-widget",["underscore","backbone","oro/abstract-widget"],function(e,t,i){return i.extend({options:e.extend({},i.prototype.options,{type:"block",title:null,titleBlock:".title",titleContainer:".widget-title",actionsContainer:".widget-actions-container",contentContainer:".row-fluid",contentClasses:[],template:e.template('<div class="box-type1"><div class="title"<% if (_.isNull(title)) { %>style="display: none;"<% } %>><div class="pull-right widget-actions-container"></div><span class="widget-title"><%- title %></span></div><div class="row-fluid <%= contentClasses.join(\' \') %>"></div></div>')}),initialize:function(i){i=i||{},e.isFunction(this.options.template)||(this.options.template=e.template(this.options.template)),this.widget=t.$(this.options.template({title:this.options.title,contentClasses:this.options.contentClasses})),this.widgetContentContainer=this.widget.find(this.options.contentContainer),this.initializeWidget(i)},setTitle:function(t){e.isNull(this.options.title)&&this._getTitleContainer().closest(this.options.titleBlock).show(),this.options.title=t,this._getTitleContainer().html(this.options.title)},getActionsElement:function(){return void 0===this.actionsContainer&&(this.actionsContainer=this.widget.find(this.options.actionsContainer)),this.actionsContainer},_getTitleContainer:function(){return void 0===this.titleContainer&&(this.titleContainer=this.widget.find(this.options.titleContainer)),this.titleContainer},show:function(){this.$el.data("wid")||(this.$el.parent().length?this._showStatic():this._showRemote()),this.loadingElement=this.widgetContentContainer.parent(),i.prototype.show.apply(this)},_showStatic:function(){var e=t.$("<div/>");e.insertAfter(this.$el),this.widgetContentContainer.append(this.$el),e.replaceWith(t.$(this.widget))},_showRemote:function(){this.widgetContentContainer.empty(),this.widgetContentContainer.append(this.$el)}})}),define("oro/buttons-widget",["underscore","backbone","oro/abstract-widget"],function(e,t,i){return i.extend({options:e.extend(e.extend({},i.prototype.options),{cssClass:"pull-left btn-group icons-holder",type:"buttons",loadingMaskEnabled:!1}),initialize:function(e){e=e||{},this.widget=this.$el,this.widget.addClass(this.options.cssClass),this.initializeWidget(e)},setTitle:function(e){this.widget.attr("title",e)},getActionsElement:function(){return null},show:function(){this.$el.data("wid")||(this.$el.parent().length?this._showStatic():this._showRemote()),i.prototype.show.apply(this)},_showStatic:function(){var e=t.$("<div/>"),i=this.widget.parent();e.insertAfter(i),e.replaceWith(this.widget),i.remove()},_showRemote:function(){this.widget.empty(),this.widget.append(this.$el),this.setElement(this.widget)}})}),define("oro/mobile/page-header",["jquery","oro/mediator","oro/translator"],function(e,t,i){function n(t){var n,s,o,r,a=t.find(".title-buttons-container");a.find(".separator-btn").replaceWith('<li class="divider"></li>'),s=a.find(".btn, .divider"),s.length<=1||(r=s.filter(".main-group:not(.more-group)"),r.length||(r=s.first()),o=s.not(r),o.length>1&&(o=e('<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">'+i("More")+'<span class="caret"></span></a>').add(e('<ul class="dropdown-menu"></ul>').append(o)),o.find(".btn").wrap("<li></li>").removeClass(function(e,t){return(t.match(/\bbtn(-\S+)?/g)||[]).join(" ")})),n=e('<div class="btn-group pull-right"></div>').append(r,o),s.removeClass("pull-right"),a.find(".btn-group").remove().end().prepend(n))}function s(){var t=e(".navigation.navbar-extra");n(t)}return{init:function(){s(),t.on("hash_navigation_request:complete",s)}}}),define("oro/mobile/side-menu",["jquery","backbone","oro/mediator","jquery-ui"],function(e,t,i){e.widget("oro.sideMenu",{options:{menuPrefix:"main-menu-group",toggleSelector:""},_create:function(){this.listener=e.extend({},t.Events),this.listener.listenTo(i,"hash_navigation_request:refresh",e.proxy(this._init,this)),this.listener.listenTo(i,"hash_navigation_request:start",e.proxy(this._hide,this)),this.$toggle=e(this.options.toggleSelector),this._on(this.$toggle,{click:this.onToggle}),this._onOutsideClick=e.proxy(function(t){e.contains(this.element.get(0),t.target)||this._hide()},this)},_destroy:function(){this.listener.stopListening(i)},_init:function(){var t=this;t.element.children("ul").first().attr("id",t._getGroupId(0)),e.each(this.element.find("a[href=#]>span"),function(i){var n=e(this),s=n.parent().next("ul"),o=t._getGroupId(i+1),r=n.closest("ul"),a=r.attr("id");r.addClass("accordion"),s.addClass("accordion-body collapse").attr("id",o),n.addClass("accordion-toggle").attr({"data-toggle":"collapse","data-target":"#"+o,"data-parent":"#"+a}).closest("a").addClass("accordion-heading").closest("li").addClass("accordion-group"),s.closest("li").hasClass("active")?s.addClass("in"):n.addClass("collapsed")})},_show:function(){this.$toggle.addClass("open"),this.element.add(this.element.next()).switchClass("","menu-opened",200),e(document).on("click",this._onOutsideClick)},_hide:function(){this.$toggle.removeClass("open"),this.element.add(this.element.next()).switchClass("menu-opened","",200),e(document).off("click",this._onOutsideClick)},onToggle:function(e){this.$toggle.hasClass("open")?this._hide():this._show(),e.stopPropagation()},_getGroupId:function(e){return this.options.menuPrefix+"_"+e}})}),define("oro/mobile/layout",["require","jquery","oro/mobile/page-header","oro/mobile/side-menu"],function(e){function t(){var e=n("#main-menu");e.insertAfter(n("#oroplatform-header")),e.sideMenu({toggleSelector:"#main-menu-toggle"})}function i(){t(),s.init()}var n=e("jquery"),s=e("oro/mobile/page-header");return e("oro/mobile/side-menu"),{init:function(){n(i)}}}),define("oro/entity-field-choice-view",["underscore","backbone"],function(e,t){var i=t.$;return t.View.extend({options:{fieldsLabel:null,relatedLabel:null,findEntity:null,exclude:void 0},optGroupTemplate:e.template('<optgroup label="<%- label %>"><%= options %></optgroup>'),optionTemplate:e.template('<option value="<%- name %>"<% _.each(_.omit(obj, ["name"]), function (val, key) { %> data-<%- key.replace(/_/g,"-") %>="<%- val %>"<% }) %>><%- label %></option>'),initialize:function(){e.isNull(this.options.findEntity)||(this.$el.data("entity-field-util").findEntity=this.options.findEntity),e.isUndefined(this.options.exclude)||this.$el.find("option").each(e.partial(function(e){e.options.exclude(e.getFieldApplicableConditions(i(this),e.$el.data("entity")))&&i(this).remove()},this))},changeEntity:function(e,t){this.$el.data("entity",e);var i=this.$el.find('option[value=""]');this.$el.empty(),i.length>0&&this.$el.append(this.optionTemplate({name:"",label:i.text()}));var n=this._getSelectContent(t);""!=n&&this.$el.append(n),this.$el.val(this.$el.is("[multiple]")?[]:""),this.$el.trigger("change")},splitValue:function(e){return this.$el.data("entity-field-util").splitValue(e)},_getSelectContent:function(t){var i="",n="",s=!1;if(e.each(t,e.bind(function(t){if(e.isUndefined(t.related_entity_name))(e.isUndefined(this.options.exclude)||!this.options.exclude(this._getFieldApplicableConditions(t,this.$el.data("entity"))))&&(i+=this.optionTemplate(t));else if(e.isUndefined(t.related_entity_fields))n+=this.optionTemplate(t);else{s=!0;var o="";e.each(t.related_entity_fields,e.bind(function(i){var n=e.clone(i);n.name=t.name+","+t.related_entity_name+"::"+n.name,(e.isUndefined(this.options.exclude)||!this.options.exclude(this._getFieldApplicableConditions(i,t.related_entity_name)))&&(o+=this.optionTemplate(n))},this)),n+=this.optGroupTemplate({label:t.label,options:o})}},this)),""==n)return i;var o="";return""!=i&&(o+=this.optGroupTemplate({label:this.options.fieldsLabel,options:i})),o+=s?n:this.optGroupTemplate({label:this.options.relatedLabel,options:n})},getFieldApplicableConditions:function(t,i){var n={entity:i,field:t.val()},s=n.field.split(",");if(e.size(s)>1){var o=e.last(s).split("::");n.entity=e.first(o),n.field=e.last(o)}return e.extend(n,e.pick(t.data(),["type","identifier"])),n},_getFieldApplicableConditions:function(t,i){return e.extend({entity:i,field:t.name},e.pick(t,["type","identifier"]))}})}),define("oro/dialog/state/model",["backbone"],function(e){return e.Model.extend({})}),function(e){e.widget("ui.dialog",e.ui.dialog,{version:"2.0.0",_limitToEl:!1,_resizeTries:0,options:e.extend(e.ui.dialog.options,{minimizeTo:!1,maximizedHeightDecreaseBy:!1,allowClose:!0,allowMaximize:!1,allowMinimize:!1,dblclick:!1,titlebar:!1,icons:{close:"ui-icon-closethick",maximize:"ui-icon-extlink",minimize:"ui-icon-minus",restore:"ui-icon-newwin"},snapshot:null,state:"normal",beforeCollapse:null,beforeMaximize:null,beforeMinimize:null,beforeRestore:null,collapse:null,maximize:null,minimize:null,restore:null}),_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog, .ui-datepicker, .select2-drop").length},_create:function(){this._super(),this._verifySettings(),this._initBottomLine()},_limitTo:function(){return!1===this._limitToEl&&(this._limitToEl=this.options.limitTo?e(this.options.limitTo):this._appendTo()),this._limitToEl},_init:function(){this._super(),this._initButtons(),this._initializeContainer(),this._initializeState(this.options.state),e(window).bind("resize.dialog",e.proxy(this._windowResizeHandler,this))},_makeDraggable:function(){this._super(),this.uiDialog.draggable("option","containment",this.options.limitTo||"parent")},close:function(){e(window).unbind(".dialog"),this._removeMinimizedEl(),this._super()},actionsContainer:function(){return this.uiDialogButtonPane},showActionsContainer:function(){this.uiDialogButtonPane.parent().length||(this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},state:function(){return this.options.state},minimize:function(){this._setOption("state","minimized")},maximize:function(){this._setOption("state","maximized")},collapse:function(){this._setOption("state","collapsed")},restore:function(){this._setOption("state","normal")},_minimize:function(){this._normalize();var e=this.widget();this._trigger("beforeMinimize"),this._saveSnapshot(),this._setState("minimized"),this._toggleButtons(),this._trigger("minimize"),e.hide(),this._getMinimizeTo().show(),this.minimizedEl=e.clone(),this.minimizedEl.css({height:"auto"}),this.minimizedEl.find(".ui-dialog-content").remove(),this.minimizedEl.find(".ui-resizable-handle").remove();var t=this.minimizedEl.find(".ui-dialog-title");t.disableSelection().attr("title",t.text());var i=this;this.minimizedEl.find(".ui-dialog-titlebar").dblclick(function(){i.uiDialogTitlebar.dblclick()});for(var n=["close","maximize","restore"],s=0;s<n.length;s++){var o=".ui-dialog-titlebar-"+n[s];this.minimizedEl.find(o).click(function(t){return function(){return e.find(t).click(),!1}}(o))}return this.minimizedEl.show(),this.minimizedEl.appendTo(this._getMinimizeTo()),this},_collapse:function(){var e=this._getTitleBarHeight();return this._trigger("beforeCollapse"),this._saveSnapshot(),this._setOptions({resizable:!1,height:e,maxHeight:e}),this._setState("collapsed"),this._trigger("collapse"),this},_maximize:function(){return this._normalize(),this._trigger("beforeMaximize"),this._saveSnapshot(),this._calculateNewMaximizedDimensions(e.proxy(function(){this._setState("maximized"),this._toggleButtons(),this._trigger("maximize")},this)),this},_restore:function(){return this._trigger("beforeRestore"),this._restoreWithoutTriggerEvent(),this._setState("normal"),this._toggleButtons(),this._trigger("restore"),this},_normalize:function(){"normal"!=this.state()&&(this.disableStateChangeTrigger=!0,this._setOption("state","normal"),this.disableStateChangeTrigger=!1)},_initBottomLine:function(){return this.bottomLine=e("#dialog-extend-parent-bottom"),this.bottomLine.length||(this.bottomLine=e('<div id="dialog-extend-parent-bottom"></div>'),this.bottomLine.css({position:"fixed",bottom:0,left:0}).appendTo(document.body)),this},_initializeMinimizeContainer:function(){this.options.minimizeTo=e("#dialog-extend-fixed-container"),this.options.minimizeTo.length||(this.options.minimizeTo=e('<div id="dialog-extend-fixed-container"></div>'),this.options.minimizeTo.css({position:"fixed",bottom:1,left:this._limitTo().offset().left,zIndex:9999}).hide().appendTo(this._appendTo()))},_getMinimizeTo:function(){return this.options.minimizeTo===!1&&this._initializeMinimizeContainer(),e(this.options.minimizeTo)},_calculateNewMaximizedDimensions:function(t){if(this._limitTo().is(":visible")){this._resizeTries=0;var i=this._getContainerHeight(),n=this._limitTo().width(),s=this._limitTo().offset();
this._setOptions({resizable:!1,draggable:!1,height:i,width:n,position:[s.left,s.top]}),this.widget().css("position","fixed"),e.isFunction(t)&&t()}else this._resizeTries++,this._resizeTries<100?setTimeout(e.proxy(function(){this._calculateNewMaximizedDimensions(t)},this),500):this._resizeTries=0;return this},_moveToVisible:function(){var e=this.widget();if(e.length>0){var t=e.offset();this._setOptions({position:[t.left,t.top]})}return this},_getTitleBarHeight:function(){return this.uiDialogTitlebar.height()+15},_getContainerHeight:function(){var t=0;this.options.maximizedHeightDecreaseBy&&(t=e.isNumeric(this.options.maximizedHeightDecreaseBy)?this.options.maximizedHeightDecreaseBy:"minimize-bar"===this.options.maximizedHeightDecreaseBy?this._getMinimizeTo().height():e(this.maximizedHeightDecreaseBy).height());var i=this._limitTo().height(),n=this.bottomLine.offset().top-this._limitTo().offset().top,s=i>n?n:i;return s-t},_initButtons:function(t){var i=this;"undefined"==typeof t&&(t=this);var n=e('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(this.uiDialogTitlebar);this._buttons={},this.uiDialogTitlebarClose.css({position:"static",top:"auto",right:"auto",margin:0}).attr("title","close").find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(n).end();var s=["maximize","restore","minimize"];for(var o in s)if("string"==typeof s[o]){var r=s[o],a=this.options.icons[r];"string"==typeof this.options.icons[r]?a='<a class="ui-dialog-titlebar-'+r+' ui-corner-all" href="#" title="'+r+'"><span class="ui-icon '+this.options.icons[r]+'">'+r+"</span></a>":a.addClass("ui-dialog-titlebar-"+r),a=e(a),a.attr("role","button").mouseover(function(){e(this).addClass("ui-state-hover")}).mouseout(function(){e(this).removeClass("ui-state-hover")}).focus(function(){e(this).addClass("ui-state-focus")}).blur(function(){e(this).removeClass("ui-state-focus")}),this._buttons[r]=a,n.append(a)}return this.uiDialogTitlebarClose.toggle(this.options.allowClose),this._buttons.maximize.toggle(this.options.allowMaximize).click(function(e){e.preventDefault(),i.maximize()}),this._buttons.minimize.toggle(this.options.allowMinimize).click(function(e){e.preventDefault(),i.minimize()}),this._buttons.restore.hide().click(function(e){e.preventDefault(),i.restore()}),this.uiDialogTitlebar.dblclick(function(){i.options.dblclick&&i.options.dblclick.length&&("normal"!=i.state()?i.restore():i[i.options.dblclick]())}).select(function(){return!1}),this},_windowResizeHandler:function(e){if(e.target==window)switch(this.state()){case"maximized":this._calculateNewMaximizedDimensions();break;case"normal":this._moveToVisible()}},_createTitlebar:function(){switch(this._super(),this.uiDialogTitlebar.disableSelection(),this.options.titlebar){case!1:break;case"transparent":this.uiDialogTitlebar.css({"background-color":"transparent","background-image":"none",border:0});break;default:e.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}return this},_restoreFromNormal:function(){return this},_restoreFromCollapsed:function(){var e=this._loadSnapshot();return this._setOptions({resizable:e.config.resizable,height:e.size.height-this._getTitleBarHeight(),maxHeight:e.size.maxHeight}),this},_restoreFromMaximized:function(){var e=this._loadSnapshot();return this._setOptions({resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:[e.position.left,e.position.top]}),this},_restoreFromMinimized:function(){this._removeMinimizedEl(),this.widget().show();var e=this._loadSnapshot();return this.widget().css({position:"fixed",left:this._getVisibleLeft(e.position.left,e.size.width),top:this._getVisibleTop(e.position.top,e.size.height)}),this},_removeMinimizedEl:function(){this.minimizedEl&&this.minimizedEl.remove()},_getVisibleLeft:function(e,t){var i=this._limitTo().width();return e+t>i?i-t:e},_getVisibleTop:function(e,t){var i=this.bottomLine.offset().top;return e+t>i?i-t:e},_restoreWithoutTriggerEvent:function(){var t=this.state(),i="_restoreFrom"+t.charAt(0).toUpperCase()+t.slice(1);return e.isFunction(this[i])?this[i]():e.error("jQuery.dialogExtend Error : Cannot restore dialog from unknown state '"+t+"'"),this},_saveSnapshot:function(){return"normal"==this.state()&&this._setOption("snapshot",this.snapshot()),this},snapshot:function(){return{config:{resizable:this.options.resizable,draggable:this.options.draggable},size:{height:this.widget().height(),width:this.options.width,maxHeight:this.options.maxHeight},position:this.widget().offset()}},_loadSnapshot:function(){return this.options.snapshot},_setOption:function(e,t){"state"==e&&this._initializeState(t),this._superApply(arguments),"appendTo"==e&&this._initializeContainer()},_initializeState:function(e){if(!this.widget().hasClass("ui-dialog-"+e))switch(e){case"maximized":this._maximize();break;case"minimized":this._minimize();break;case"collapsed":this._collapse();break;default:this._restore()}},_initializeContainer:function(){var e=this._appendTo();"static"==e.css("position")&&e.css("position","relative")},_setState:function(e){if(this.options.state=e,this.widget().removeClass("ui-dialog-normal ui-dialog-maximized ui-dialog-minimized ui-dialog-collapsed").addClass("ui-dialog-"+e),!this.disableStateChangeTrigger){var t=this._loadSnapshot();t||"normal"!=this.state()||(t=this.snapshot()),this._trigger("stateChange",null,{state:this.state(),snapshot:t})}return this},_toggleButtons:function(){return this._buttons.maximize.toggle("maximized"!=this.state()&&this.options.allowMaximize),this._buttons.minimize.toggle("minimized"!=this.state()&&this.options.allowMinimize),this._buttons.restore.toggle("normal"!=this.state()&&(this.options.allowMaximize||this.options.allowMinimize)).css({right:"maximized"==this.state()?"1.4em":"minimized"==this.state()?this.options.allowMaximize?"2.5em":"1.4em":"-9999em"}),this},_verifySettings:function(){var t=this,i=function(i,n){t.options[i]&&-1==n.indexOf(t.options[i])&&(e.error("jQuery.dialogExtend Error : Invalid <"+i+"> value '"+t.options[i]+"'"),t.options[i]=!1)};return i("dblclick",["maximize","minimize","collapse"]),i("titlebar",["transparent"]),this}})}(jQuery),define("jquery.dialog.extended",["jquery-ui"],function(){}),define("oro/dialog-widget",["underscore","backbone","oro/app","oro/error","oro/abstract-widget","oro/dialog/state/model","jquery.dialog.extended"],function(e,t,i,n,s,o){var r=s.extend({options:e.extend({},s.prototype.options,{type:"dialog",dialogOptions:null,stateEnabled:!0,incrementalPosition:!0}),windowsPerRow:10,windowOffsetX:15,windowOffsetY:15,windowX:0,windowY:0,defaultPos:"center center",openedWindows:0,contentTop:null,initialize:function(t){t=t||{},this.on("adoptedFormResetClick",e.bind(this.remove,this)),this.options.dialogOptions=this.options.dialogOptions||{},this.options.dialogOptions.title=this.options.dialogOptions.title||this.options.title,this.options.dialogOptions.limitTo=this.options.dialogOptions.limitTo||"#container",this.options.stateEnabled&&this._initModel(this.options);var i=function(t){return function(){for(var i=0;i<t.length;i++)e.isFunction(t[i])&&t[i]()}},n=[e.bind(this.closeHandler,this)];void 0!==this.options.dialogOptions.close&&n.push(this.options.dialogOptions.close),this.options.dialogOptions.close=i(n),this.on("widgetRender",e.bind(this._initAdjustHeight,this)),this.on("contentLoadError",e.bind(this.loadErrorHandler,this)),this.initializeWidget(t)},setTitle:function(e){this.widget.dialog("option","title",e)},_initModel:function(i){if(this.model){this.restoreMode=!0;var n=this.model.get("data");if(e.extend(i,n),e.isObject(n.dialogOptions)&&(i.dialogOptions=e.extend(i.dialogOptions,n.dialogOptions)),this.options=i,this.options.el)this.setElement(this.options.el);else if(this.model.get("id")){var s=t.$("#widget-restored-state-"+this.model.get("id"));s.length&&this.setElement(s)}}else this.model=new o},closeHandler:function(){this.model&&this.model.destroy({error:e.bind(function(e,t,s){(404!=t.status||i.debug)&&n.dispatch(e,t,s)},this)}),this._hideLoading(),this.widget.remove(),s.prototype.remove.call(this)},handleStateChange:function(i,n){if(this.options.stateEnabled){if(this.restoreMode)return this.restoreMode=!1,void 0;var s=e.omit(this.options,["dialogOptions","el","model"]);s.url||(s.el=t.$("<div/>").append(this.$el.clone()).html()),s.dialogOptions={},e.each(this.options.dialogOptions,function(t,i){e.isFunction(t)||"position"===i||(s.dialogOptions[i]=t)},this),s.dialogOptions.title=t.$(i.target).dialog("option","title"),s.dialogOptions.state=n.state,s.dialogOptions.snapshot=n.snapshot,this.model&&this.model.save({data:s})}},remove:function(){this.widget.dialog("close")},getWidget:function(){return this.widget},loadErrorHandler:function(){this.model&&this.model.destroy()},getActionsElement:function(){return this.actionsEl||(this.actionsEl=t.$('<div class="pull-right"/>').appendTo(t.$('<div class="form-actions widget-actions"/>').appendTo(this.widget.dialog("actionsContainer")))),this.actionsEl},_clearActionsContainer:function(){this.widget.dialog("actionsContainer").empty()},_renderActions:function(){s.prototype._renderActions.apply(this),this.widget.dialog("showActionsContainer")},show:function(){this.widget?this.widget.html(this.$el):("undefined"==typeof this.options.dialogOptions.position&&(this.options.dialogOptions.position=this._getWindowPlacement()),this.options.dialogOptions.stateChange=e.bind(this.handleStateChange,this),this.widget=t.$("<div/>").append(this.$el).dialog(this.options.dialogOptions)),this.loadingElement=this.$el.closest(".ui-dialog"),s.prototype.show.apply(this)},_initAdjustHeight:function(t){this.widget.off("dialogresize dialogmaximize dialogrestore",e.bind(this._fixScrollableHeight,this));var i=t.find(".scrollable-container");i.length&&(i.css("overflow","auto"),this.widget.on("dialogresize dialogmaximize dialogrestore",e.bind(this._fixScrollableHeight,this)),this._fixScrollableHeight())},_fixScrollableHeight:function(){var t=this.widget;t.find(".scrollable-container").each(e.bind(function(e,i){var n=$(i),s=t.height()-n.position().top;s&&n.height(s)},this))},_getWindowPlacement:function(){if(!this.options.incrementalPosition)return{my:"center center",at:r.prototype.defaultPos};var e="center+"+r.prototype.windowX+" center+"+r.prototype.windowY;if(r.prototype.openedWindows++,0===r.prototype.openedWindows%r.prototype.windowsPerRow){var t=r.prototype.openedWindows/r.prototype.windowsPerRow;r.prototype.windowX=t*r.prototype.windowsPerRow*r.prototype.windowOffsetX,r.prototype.windowY=0}else r.prototype.windowX+=r.prototype.windowOffsetX,r.prototype.windowY+=r.prototype.windowOffsetY;return{my:e,at:r.prototype.defaultPos}}});return r}),define("oro/mapservice/googlemaps",["underscore","backbone","oro/translator"],function(e,t,i){var n=t.$;return t.View.extend({options:{mapOptions:{zoom:17,mapTypeControl:!0,panControl:!1,zoomControl:!0},apiVersion:"3.exp",sensor:!1,apiKey:null,showWeather:!0},mapLocationCache:{},mapsLoadExecuted:!1,initialize:function(){this.$mapContainer=n('<div class="map-visual"/>').appendTo(this.$el),this.$unknownAddress=n('<div class="map-unknown">'+i("map.unknown.location")+"</div>").appendTo(this.$el),this.mapLocationUnknown()},_initMapOptions:function(){e.isUndefined(this.options.mapOptions.mapTypeControlOptions)&&(this.options.mapOptions.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}),e.isUndefined(this.options.mapOptions.zoomControlOptions)&&(this.options.mapOptions.zoomControlOptions={style:google.maps.ZoomControlStyle.SMALL}),e.isUndefined(this.options.mapOptions.mapTypeId)&&(this.options.mapOptions.mapTypeId=google.maps.MapTypeId.ROADMAP)},_initMap:function(t){if(this._initMapOptions(),this.map=new google.maps.Map(this.$mapContainer[0],e.extend({},this.options.mapOptions,{center:t})),this.mapLocationMarker=new google.maps.Marker({draggable:!1,map:this.map,position:t}),this.options.showWeather){var i=new google.maps.weather.WeatherLayer;i.setMap(this.map);var n=new google.maps.weather.CloudLayer;n.setMap(this.map)}},loadGoogleMaps:function(){var t="sensor="+(this.options.sensor?"true":"false");this.options.showWeather&&(t+="&libraries=weather"),this.options.apiKey&&(t+="&key="+this.options.apiKey),n.ajax({url:window.location.protocol+"//www.google.com/jsapi",dataType:"script",cache:!0,success:e.bind(function(){google.load("maps",this.options.apiVersion,{other_params:t,callback:e.bind(this.onGoogleMapsInit,this)})},this)})},updateMap:function(t,i){return this.hasGoogleMaps()||this.mapsLoadExecuted?(this.mapLocationCache.hasOwnProperty(t)?this.updateMapLocation(this.mapLocationCache[t],i):this.getGeocoder().geocode({address:t},e.bind(function(e,n){n==google.maps.GeocoderStatus.OK?(this.mapLocationCache[t]=e[0].geometry.location,this.updateMapLocation(e[0].geometry.location,i)):this.mapLocationUnknown()},this)),void 0):(this.mapsLoadExecuted=!0,this.requestedLocation={address:t,label:i},this.loadGoogleMaps(),void 0)},onGoogleMapsInit:function(){e.isUndefined(this.requestedLocation)||(this.updateMap(this.requestedLocation.address,this.requestedLocation.label),delete this.requestedLocation)},hasGoogleMaps:function(){return!e.isUndefined(window.google)&&google.hasOwnProperty("maps")},mapLocationUnknown:function(){this.$mapContainer.hide(),this.$unknownAddress.show()},mapLocationKnown:function(){this.$mapContainer.show(),this.$unknownAddress.hide()},updateMapLocation:function(e,t){this.mapLocationKnown(),!e||this.location&&e.toString()===this.location.toString()||(this._initMap(e),this.map.setCenter(e),this.mapLocationMarker.setPosition(e),this.mapLocationMarker.setTitle(t),this.location=e)},getGeocoder:function(){return e.isUndefined(this.geocoder)&&(this.geocoder=new google.maps.Geocoder),this.geocoder}})}),define("oro/formatter/name",["oro/locale-settings"],function(e){return{formats:e.getNameFormats(),formatCache:{},format:function(t,i){i||(i=e.getLocale());var n=this.getNameFormat(i),s=n.replace(/%(\w+)%/g,function(e,i){var n=i.toLowerCase(),s="";return t.hasOwnProperty(n)&&(s=t[n],i!==n&&(s=s.toLocaleUpperCase())),s||""});return s.replace(/ +/g," ").replace(/^\s+|\s+$/g,"")},getNameFormat:function(t){if(!this.formatCache.hasOwnProperty(t)){for(var i=e.getLocaleFallback(t),n=null,s=0;s<i.length;s++)if(this.formats.hasOwnProperty(i[s])){n=this.formats[i[s]];break}if(!n)throw new Error("Can't find name format for locale "+t);this.formatCache[t]=n}return this.formatCache[t]}}}),define("oro/formatter/address",["oro/locale-settings","oro/formatter/name"],function(e,t){return{formats:e.getAddressFormats(),format:function(i,n,s){n||(n=e.isFormatAddressByAddressCountry()?i.country_iso2:e.getCountry()),s=s||"<br/>";var o=this.getAddressFormat(n),r=o.replace(/%(\w+)%/g,function(s,o){var r=o.toLowerCase(),a="";return a="name"===r?t.format(i,e.getCountryLocale(n)):"street"==r?i.street+" "+(i.street2||""):"street1"==r?i.street:i[r],a&&o!==r&&(a=a.toLocaleUpperCase()),a||""}),a=r.replace(/ *(\\n)+/g,"\\n").split("\\n");if("function"==typeof s){for(var l=0;l<a.length;l++)a[l]=s(a[l]);r=a.join("")}else r=a.join(s);return r.replace(/ +/g," ")},getAddressFormat:function(t){return this.formats.hasOwnProperty(t)||(t=e.getCountry()),this.formats[t]}}}),define("oro/address/view",["underscore","backbone","oro/translator","oro/formatter/address"],function(e,t,i,n){var s=t.$;return t.View.extend({tagName:"div",attributes:{"class":"map-item"},events:{click:"activate","click button:has(.icon-remove)":"close","click button:has(.icon-pencil)":"edit"},initialize:function(){this.template=e.template(s("#template-addressbook-item").html()),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change:active",this.toggleActive)},activate:function(){this.model.set("active",!0)},toggleActive:function(){this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")},edit:function(){this.trigger("edit",this,this.model)},close:function(){this.model.get("primary")?alert(i("Primary address can not be removed")):this.model.destroy({wait:!0})},render:function(){var e=this.model.toJSON();return e.formatted_address=n.format({prefix:e.namePrefix,suffix:e.nameSuffix,first_name:e.firstName,middle_name:e.middleName,last_name:e.lastName,organization:e.organization,street:e.street,street2:e.street2,city:e.city,country:e.country,country_iso2:e.countryIso2,country_iso3:e.countryIso3,postal_code:e.postalCode,region:e.region||e.regionText,region_code:e.regionCode}),this.$el.append(this.template(e)),this.model.get("primary")&&this.activate(),this}})}),define("oro/address/model",["backbone"],function(e){return e.Model.extend({defaults:{label:"",namePrefix:"",firstName:"",middleName:"",lastName:"",nameSuffix:"",organization:"",street:"",street2:"",city:"",country:"",countryIso2:"",countryIso3:"",postalCode:"",region:"",regionText:"",regionCode:"",primary:!1,types:[],active:!1},getSearchableString:function(){return this.get("country")+", "+this.get("city")+", "+this.get("street")+" "+(this.get("street2")||"")}})}),define("oro/address/collection",["underscore","backbone","oro/address/model"],function(e,t,i){return t.Collection.extend({model:i,initialize:function(){this.on("change:active",this.onActiveChange,this)},onActiveChange:function(t){if(t.get("active")){var i=this.where({active:!0});e.each(i,function(e){e.get("id")!==t.get("id")&&e.set("active",!1)}),this.trigger("activeChange",t)}}})}),define("oro/address-book",["underscore","backbone","oro/translator","oro/mediator","oro/messenger","oro/dialog-widget","oro/mapservice/googlemaps","oro/address/view","oro/address/collection"],function(e,t,i,n,s,o,r,a,l){var c=t.$;return t.View.extend({options:{mapOptions:{zoom:12},template:null,addressListUrl:null,addressCreateUrl:null,addressUpdateUrl:null,mapView:r},attributes:{"class":"map-box"},initialize:function(){this.options.collection=this.options.collection||new l,this.options.collection.url=this._getUrl("addressListUrl"),this.listenTo(this.getCollection(),"activeChange",this.activateAddress),this.listenTo(this.getCollection(),"add",this.addAddress),this.listenTo(this.getCollection(),"reset",this.addAll),this.listenTo(this.getCollection(),"remove",this.onAddressRemove),this.$adressesContainer=c('<div class="map-address-list"/>').appendTo(this.$el),this.$mapContainerFrame=c('<div class="map-visual-frame"/>').appendTo(this.$el),this.mapView=new this.options.mapView({mapOptions:this.options.mapOptions,el:this.$mapContainerFrame})},_getUrl:function(t){return e.isFunction(this.options[t])?this.options[t].apply(this,Array.prototype.slice.call(arguments,1)):this.options[t]},getCollection:function(){return this.options.collection},onAddressRemove:function(){if(!this.getCollection().where({active:!0}).length){var e=this.getCollection().where({primary:!0});e.length?e[0].set("active",!0):this.getCollection().length&&this._activateFirstAddress()}},_activateFirstAddress:function(){this.getCollection().at(0).set("active",!0)},addAll:function(e){this.$adressesContainer.empty(),e.each(function(e){this.addAddress(e)},this),1==e.length?this._activateFirstAddress():this._activatePreviousAddress()},_activatePreviousAddress:function(){if(void 0!==this.activeAddress){var e=this.getCollection().where({id:this.activeAddress.get("id")});e.length&&e[0].set("active",!0)}},addAddress:function(t){var i=new a({model:t});i.on("edit",e.bind(this.editAddress,this)),this.$adressesContainer.append(i.render().$el)},editAddress:function(e,t){this._openAddressEditForm(i("Update Address"),this._getUrl("addressUpdateUrl",t))},createAddress:function(){this._openAddressEditForm(i("Add Address"),this._getUrl("addressCreateUrl"))},_openAddressEditForm:function(t,r){this.addressEditDialog||(this.addressEditDialog=new o({url:r,title:t,regionEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,resizable:!1,width:475,autoResize:!0,close:e.bind(function(){delete this.addressEditDialog},this)}}),this.addressEditDialog.render(),n.on("hash_navigation_request:start",e.bind(function(){this.addressEditDialog&&this.addressEditDialog.remove()},this)),this.addressEditDialog.on("formSave",e.bind(function(){this.addressEditDialog.remove(),s.notificationFlashMessage("success",i("Address saved")),this.reloadAddresses()},this)))},reloadAddresses:function(){this.getCollection().fetch({reset:!0})},activateAddress:function(e){e.get("primary")||(this.activeAddress=e),this.mapView.updateMap(e.getSearchableString(),e.get("label"))}})}),define("oro/region/model",["backbone"],function(e){return e.Model.extend({defaults:{country:"",code:"",name:""}})}),define("oro/region/collection",["backbone","routing","oro/region/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_country_get_regions",url:null,model:i,initialize:function(){this.url=t.generate(this.route)},setCountryId:function(e){this.url=t.generate(this.route,{country:e})}})}),define("oro/region/view",["underscore","backbone","jquery.select2"],function(e,t){var i=t.$;return t.View.extend({events:{change:"selectionChanged"},initialize:function(t){this.target=i(t.target),this.$simpleEl=i(t.simpleEl),this.target.closest(".controls").append(this.$simpleEl),this.uniform=i("#uniform-"+this.target[0].id),this.$simpleEl.attr("type","text"),this.showSelect=t.showSelect,this.template=i("#region-chooser-template").html(),this.displaySelect2(this.showSelect),this.target.on("select2-init",e.bind(function(){this.displaySelect2(this.showSelect)},this)),this.listenTo(this.collection,"reset",this.render)},displaySelect2:function(e){e?(this.addRequiredFlag(this.$simpleEl),this.target.select2("container").show()):(this.target.select2("container").hide(),this.removeRequiredFlag(this.$simpleEl))},addRequiredFlag:function(e){var t=this.getInputLabel(e);t.hasClass("required")||t.addClass("required").prepend("<em>*</em>")},removeRequiredFlag:function(e){var t=this.getInputLabel(e);t.hasClass("required")&&t.removeClass("required").find("em").remove()},getInputLabel:function(e){return e.parent().parent().find("label")},sync:function(){""==this.target.val()&&""!=this.$el.val()&&this.$el.trigger("change")},selectionChanged:function(e){var t=i(e.currentTarget).val();this.collection.setCountryId(t),this.collection.fetch()},render:function(){this.collection.models.length>0?(this.target.show(),this.displaySelect2(!0),this.uniform.show(),this.target.val("").trigger("change"),this.target.find('option[value!=""]').remove(),this.target.append(e.template(this.template,{regions:this.collection.models})),this.$simpleEl.hide(),this.$simpleEl.val("")):(this.target.hide(),this.target.val(""),this.displaySelect2(!1),this.uniform.hide(),this.$simpleEl.show())}})}),function(e,t){function i(t){e.extend(!0,xt,t)}function n(i,n,c){function h(e){st?m()&&(T(),C(e)):d()}function d(){ot=n.theme?"ui":"fc",i.addClass("fc"),n.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),n.theme&&i.addClass("ui-widget"),st=e("<div class='fc-content' style='position:relative'/>").prependTo(i),it=new s(tt,n),nt=it.render(),nt&&i.prepend(nt),_(n.defaultView),n.handleWindowResize&&e(window).resize(D),v()||f()}function f(){setTimeout(function(){!rt.start&&v()&&x()},0)}function p(){rt&&(et("viewDestroy",rt,rt,rt.element),rt.triggerEventDestroy()),e(window).unbind("resize",D),it.destroy(),st.remove(),i.removeClass("fc fc-rtl ui-widget")}function m(){return i.is(":visible")}function v(){return e("body").is(":visible")}function _(e){rt&&e==rt.name||w(e)}function w(t){pt++,rt&&(et("viewDestroy",rt,rt,rt.element),H(),rt.triggerEventDestroy(),X(),rt.element.remove(),it.deactivateButton(rt.name)),it.activateButton(t),rt=new Tt[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(st),tt),x(),J(),pt--}function x(e){(!rt.start||e||gt<rt.start||gt>=rt.end)&&m()&&C(e)}function C(e){pt++,rt.start&&(et("viewDestroy",rt,rt,rt.element),H(),A()),X(),rt.render(gt,e||0),S(),J(),(rt.afterRender||I)(),R(),$(),et("viewRender",rt,rt,rt.element),rt.trigger("viewDisplay",ut),pt--,O()}function k(){m()&&(H(),A(),T(),S(),E())}function T(){lt=n.contentHeight?n.contentHeight:n.height?n.height-(nt?nt.height():0)-F(st):Math.round(st.width()/Math.max(n.aspectRatio,.5))}function S(){lt===t&&T(),pt++,rt.setHeight(lt),rt.setWidth(st.width()),pt--,at=i.outerWidth()}function D(){if(!pt)if(rt.start){var e=++ft;setTimeout(function(){e==ft&&!pt&&m()&&at!=(at=i.outerWidth())&&(pt++,k(),rt.trigger("windowResize",ut),pt--)},200)}else f()}function M(){A(),N()}function j(e){A(),E(e)}function E(e){m()&&(rt.setEventData(mt),rt.renderEvents(mt,e),rt.trigger("eventAfterAllRender"))}function A(){rt.triggerEventDestroy(),rt.clearEvents(),rt.clearEventData()}function O(){!n.lazyFetching||ht(rt.visStart,rt.visEnd)?N():E()}function N(){dt(rt.visStart,rt.visEnd)}function P(e){mt=e,E()}function z(e){j(e)}function R(){it.updateTitle(rt.title)}function $(){var e=new Date;e>=rt.start&&e<rt.end?it.disableButton("today"):it.enableButton("today")}function L(e,i,n){rt.select(e,i,n===t?!0:n)}function H(){rt&&rt.unselect()}function q(){x(-1)}function W(){x(1)}function U(){r(gt,-1),x()}function B(){r(gt,1),x()}function V(){gt=new Date,x()}function Y(e,t,i){e instanceof Date?gt=u(e):g(gt,e,t,i),x()}function G(e,i,n){e!==t&&r(gt,e),i!==t&&a(gt,i),n!==t&&l(gt,n),x()}function K(){return u(gt)}function X(){st.css({width:"100%",height:st.height(),overflow:"hidden"})}function J(){st.css({width:"",height:"",overflow:""})}function Z(){return rt}function Q(e,i){return i===t?n[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=i,k()),void 0)}function et(e,t){return n[e]?n[e].apply(t||ut,Array.prototype.slice.call(arguments,2)):void 0}var tt=this;tt.options=n,tt.render=h,tt.destroy=p,tt.refetchEvents=M,tt.reportEvents=P,tt.reportEventChange=z,tt.rerenderEvents=j,tt.changeView=_,tt.select=L,tt.unselect=H,tt.prev=q,tt.next=W,tt.prevYear=U,tt.nextYear=B,tt.today=V,tt.gotoDate=Y,tt.incrementDate=G,tt.formatDate=function(e,t){return y(e,t,n)},tt.formatDates=function(e,t,i){return b(e,t,i,n)},tt.getDate=K,tt.getView=Z,tt.option=Q,tt.trigger=et,o.call(tt,n,c);var it,nt,st,ot,rt,at,lt,ct,ht=tt.isFetchNeeded,dt=tt.fetchEvents,ut=i[0],ft=0,pt=0,gt=new Date,mt=[];g(gt,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var s=t.target,o=e(s);if(!o.parents(".fc").length){var r=n.dropAccept;(e.isFunction(r)?r.call(s,o):o.is(r))&&(ct=s,rt.dragStart(ct,t,i))}}).bind("dragstop",function(e,t){ct&&(rt.dragStop(ct,e,t),ct=null)})}function s(t,i){function n(){u=i.theme?"ui":"fc";var t=i.header;return t?f=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(o("left")).append(o("center")).append(o("right"))):void 0}function s(){f.remove()}function o(n){var s=e("<td class='fc-header-"+n+"'/>"),o=i.header[n];return o&&e.each(o.split(" "),function(n){n>0&&s.append("<span class='fc-header-space'/>");var o;e.each(this.split(","),function(n,r){if("title"==r)s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(u+"-corner-right"),o=null;else{var a;if(t[r]?a=t[r]:Tt[r]&&(a=function(){h.removeClass(u+"-state-hover"),t.changeView(r)}),a){var l=i.theme?$(i.buttonIcons,r):null,c=$(i.buttonText,r),h=e("<span class='fc-button fc-button-"+r+" "+u+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){h.hasClass(u+"-state-disabled")||a()}).mousedown(function(){h.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){h.removeClass(u+"-state-down")}).hover(function(){h.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){h.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(s);H(h),o||h.addClass(u+"-corner-left"),o=h}}}),o&&o.addClass(u+"-corner-right")}),s}function r(e){f.find("h2").html(e)}function a(e){f.find("span.fc-button-"+e).addClass(u+"-state-active")}function l(e){f.find("span.fc-button-"+e).removeClass(u+"-state-active")}function c(e){f.find("span.fc-button-"+e).addClass(u+"-state-disabled")}function h(e){f.find("span.fc-button-"+e).removeClass(u+"-state-disabled")}var d=this;d.render=n,d.destroy=s,d.updateTitle=r,d.activateButton=a,d.deactivateButton=l,d.disableButton=c,d.enableButton=h;var u,f=e([])}function o(i,n){function s(e,t){return!k||k>e||t>T}function o(e,t){k=e,T=t,N=[];var i=++F,n=E.length;A=n;for(var s=0;n>s;s++)r(E[s],i)}function r(t,n){a(t,function(s){if(n==F){if(s){i.eventDataTransform&&(s=e.map(s,i.eventDataTransform)),t.eventDataTransform&&(s=e.map(s,t.eventDataTransform));for(var o=0;o<s.length;o++)s[o].source=t,y(s[o]);N=N.concat(s)}A--,A||M(N)}})}function a(t,n){var s,o,r=kt.sourceFetchers;for(s=0;s<r.length;s++){if(o=r[s](t,k,T,n),o===!0)return;if("object"==typeof o)return a(o,n),void 0}var l=t.events;if(l)e.isFunction(l)?(v(),l(u(k),u(T),function(e){n(e),_()})):e.isArray(l)?n(l):n();else{var c=t.url;if(c){var h,d=t.success,f=t.error,p=t.complete;h=e.isFunction(t.data)?t.data():t.data;var g=e.extend({},h||{}),m=B(t.startParam,i.startParam),y=B(t.endParam,i.endParam);m&&(g[m]=Math.round(+k/1e3)),y&&(g[y]=Math.round(+T/1e3)),v(),e.ajax(e.extend({},St,t,{data:g,success:function(t){t=t||[];var i=U(d,this,arguments);e.isArray(i)&&(t=i),n(t)},error:function(){U(f,this,arguments),n()},complete:function(){U(p,this,arguments),_()}}))}else n()}}function l(e){e=c(e),e&&(A++,r(e,F))}function c(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(b(t),E.push(t),t):void 0}function h(t){E=e.grep(E,function(e){return!w(e,t)}),N=e.grep(N,function(e){return!w(e.source,t)}),M(N)}function d(e){var t,i,n=N.length,s=D().defaultEventEnd,o=e.start-e._start,r=e.end?e.end-(e._end||s(e)):0;for(t=0;n>t;t++)i=N[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+o),i.end=e.end?i.end?new Date(+i.end+r):new Date(+s(i)+r):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroundColor=e.backgroundColor,i.borderColor=e.borderColor,i.textColor=e.textColor,y(i));y(e),M(N)}function f(e,t){y(e),e.source||(t&&(j.events.push(e),e.source=j),N.push(e)),M(N)}function p(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}N=e.grep(N,t,!0);for(var n=0;n<E.length;n++)e.isArray(E[n].events)&&(E[n].events=e.grep(E[n].events,t,!0))}else{N=[];for(var n=0;n<E.length;n++)e.isArray(E[n].events)&&(E[n].events=[])}M(N)}function g(t){return e.isFunction(t)?e.grep(N,t):t?(t+="",e.grep(N,function(e){return e._id==t})):N}function v(){O++||S("loading",null,!0,D())}function _(){--O||S("loading",null,!1,D())}function y(e){var n=e.source||{},s=B(n.ignoreTimezone,i.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+Dt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=u(e.start=m(e.start,s)),e.end=m(e.end,s),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?u(e.end):null,e.allDay===t&&(e.allDay=B(n.allDayDefault,i.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function b(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=kt.sourceNormalizers,i=0;i<t.length;i++)t[i](e)}function w(e,t){return e&&t&&x(e)==x(t)}function x(e){return("object"==typeof e?e.events||e.url:"")||e}var C=this;C.isFetchNeeded=s,C.fetchEvents=o,C.addEventSource=l,C.removeEventSource=h,C.updateEvent=d,C.renderEvent=f,C.removeEvents=p,C.clientEvents=g,C.normalizeEvent=y;for(var k,T,S=C.trigger,D=C.getView,M=C.reportEvents,j={events:[]},E=[j],F=0,A=0,O=0,N=[],I=0;I<n.length;I++)c(n[I])}function r(e,t,i){return e.setFullYear(e.getFullYear()+t),i||d(e),e}function a(e,t,i){if(+e){var n=e.getMonth()+t,s=u(e);for(s.setDate(1),s.setMonth(n),e.setMonth(n),i||d(e);e.getMonth()!=s.getMonth();)e.setDate(e.getDate()+(s>e?1:-1))}return e}function l(e,t,i){if(+e){var n=e.getDate()+t,s=u(e);s.setHours(9),s.setDate(n),e.setDate(n),i||d(e),c(e,s)
}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Et)}function h(e,t){return e.setMinutes(e.getMinutes()+t),e}function d(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function u(e,t){return t?d(new Date(+e)):new Date(+e)}function f(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function p(e,t){return Math.round((u(e,!0)-u(t,!0))/jt)}function g(e,i,n,s){i!==t&&i!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(i)),n!==t&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),s!==t&&e.setDate(s)}function m(e,i){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(i===t&&(i=!0),v(e,i)||(e?new Date(e):null)):null}function v(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var s=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),s.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),s.setDate(i[5])),c(n,s),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,s)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var o=60*Number(i[16])+(i[18]?Number(i[18]):0);o*="-"==i[15]?1:-1,n=new Date(+n+1e3*60*o)}return n}function _(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function y(e,t,i){return b(e,null,t,i)}function b(e,t,i,n){n=n||xt;var s,o,r,a,l=e,c=t,h=i.length,d="";for(s=0;h>s;s++)if(o=i.charAt(s),"'"==o){for(r=s+1;h>r;r++)if("'"==i.charAt(r)){l&&(d+=r==s+1?"'":i.substring(s+1,r),s=r);break}}else if("("==o){for(r=s+1;h>r;r++)if(")"==i.charAt(r)){var u=y(l,i.substring(s+1,r),n);parseInt(u.replace(/\D/,""),10)&&(d+=u),s=r;break}}else if("["==o){for(r=s+1;h>r;r++)if("]"==i.charAt(r)){var f=i.substring(s+1,r),u=y(l,f,n);u!=y(c,f,n)&&(d+=u),s=r;break}}else if("{"==o)l=t,c=e;else if("}"==o)l=e,c=t;else{for(r=h;r>s;r--)if(a=At[i.substring(s,r)]){l&&(d+=a(l,n)),s=r-1;break}r==s&&l&&(d+=o)}return d}function w(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1}function x(e){return e.end?C(e.end,e.allDay):l(u(e.start),1)}function C(e,t){return e=u(e),t||e.getHours()||e.getMinutes()?l(e,1):d(e)}function k(i,n,s){i.unbind("mouseover").mouseover(function(i){for(var o,r,a,l=i.target;l!=this;)o=l,l=l.parentNode;(r=o._fci)!==t&&(o._fci=t,a=n[r],s(a.event,a.element,a),e(i.target).trigger(i)),i.stopPropagation()})}function T(t,i,n){for(var s,o=0;o<t.length;o++)s=e(t[o]),s.width(Math.max(0,i-D(s,n)))}function S(t,i,n){for(var s,o=0;o<t.length;o++)s=e(t[o]),s.height(Math.max(0,i-F(s,n)))}function D(e,t){return M(e)+E(e)+(t?j(e):0)}function M(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function j(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function E(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function F(e,t){return A(e)+N(e)+(t?O(e):0)}function A(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function O(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function N(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function I(){}function P(e,t){return e-t}function z(e){return Math.max.apply(Math,e)}function R(e){return(10>e?"0":"")+e}function $(e,i){if(e[i]!==t)return e[i];for(var n,s=i.split(/(?=[A-Z])/),o=s.length-1;o>=0;o--)if(n=e[s[o].toLowerCase()],n!==t)return n;return e[""]}function L(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function H(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function q(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function W(e,t){var i=e.source||{},n=e.color,s=i.color,o=t("eventColor"),r=e.backgroundColor||n||i.backgroundColor||s||t("eventBackgroundColor")||o,a=e.borderColor||n||i.borderColor||s||t("eventBorderColor")||o,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return r&&c.push("background-color:"+r),a&&c.push("border-color:"+a),l&&c.push("color:"+l),c.join(";")}function U(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var s,o;for(s=0;s<t.length;s++)o=t[s].apply(i,n)||o;return o}}function B(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function V(e,t){function i(e,t){t&&(a(e,t),e.setDate(1));var i=s("firstDay"),d=u(e,!0);d.setDate(1);var f=a(u(d),1),g=u(d);l(g,-((g.getDay()-i+7)%7)),r(g);var m=u(f);l(m,(7-m.getDay()+i)%7),r(m,-1,!0);var v=c(),_=Math.round(p(m,g)/7);"fixed"==s("weekMode")&&(l(m,7*(6-_)),_=6),n.title=h(d,s("titleFormat")),n.start=d,n.end=f,n.visStart=g,n.visEnd=m,o(_,v,!0)}var n=this;n.render=i,K.call(n,e,t,"month");var s=n.opt,o=n.renderBasic,r=n.skipHiddenDays,c=n.getCellsPerWeek,h=t.formatDate}function Y(e,t){function i(e,t){t&&l(e,7*t);var i=l(u(e),-((e.getDay()-s("firstDay")+7)%7)),h=l(u(i),7),d=u(i);r(d);var f=u(h);r(f,-1,!0);var p=a();n.start=i,n.end=h,n.visStart=d,n.visEnd=f,n.title=c(d,l(u(f),-1),s("titleFormat")),o(1,p,!1)}var n=this;n.render=i,K.call(n,e,t,"basicWeek");var s=n.opt,o=n.renderBasic,r=n.skipHiddenDays,a=n.getCellsPerWeek,c=t.formatDates}function G(e,t){function i(e,t){t&&l(e,t),r(e,0>t?-1:1);var i=u(e,!0),c=l(u(i),1);n.title=a(e,s("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,o(1,1,!1)}var n=this;n.render=i,K.call(n,e,t,"basicDay");var s=n.opt,o=n.renderBasic,r=n.skipHiddenDays,a=t.formatDate}function K(t,i,n){function s(e,t,i){tt=e,it=t,nt=i,o(),W||r(),a()}function o(){lt=pt("theme")?"ui":"fc",ct=pt("columnFormat"),ht=pt("weekNumbers"),ut=pt("weekNumberTitle"),ft="iso"!=pt("weekNumberCalculation")?"w":"W"}function r(){K=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function a(){var i=c();z&&z.remove(),z=e(i).appendTo(t),R=z.find("thead"),$=R.find(".fc-day-header"),W=z.find("tbody"),U=W.find("tr"),B=W.find(".fc-day"),V=U.find("td:first-child"),Y=U.eq(0).find(".fc-day > div"),G=U.eq(0).find(".fc-day-content > div"),q(R.add(R.find("tr"))),q(U),U.eq(0).addClass("fc-first"),U.filter(":last").addClass("fc-last"),B.each(function(t,i){var n=kt(Math.floor(t/it),t%it);gt("dayRender",P,n,e(i))}),_(B)}function c(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+h()+f()+"</table>";return e}function h(){var e,t,i=lt+"-widget-header",n="";for(n+="<thead><tr>",ht&&(n+="<th class='fc-week-number "+i+"'>"+L(ut)+"</th>"),e=0;it>e;e++)t=kt(0,e),n+="<th class='fc-day-header fc-"+Mt[t.getDay()]+" "+i+"'>"+L(Dt(t,ct))+"</th>";return n+="</tr></thead>"}function f(){var e,t,i,n=lt+"-widget-content",s="";for(s+="<tbody>",e=0;tt>e;e++){for(s+="<tr class='fc-week'>",ht&&(i=kt(e,0),s+="<td class='fc-week-number "+n+"'>"+"<div>"+L(Dt(i,ft))+"</div>"+"</td>"),t=0;it>t;t++)i=kt(e,t),s+=p(i);s+="</tr>"}return s+="</tbody>"}function p(e){var t=lt+"-widget-content",i=P.start.getMonth(),n=d(new Date),s="",o=["fc-day","fc-"+Mt[e.getDay()],t];return e.getMonth()!=i&&o.push("fc-other-month"),+e==+n?o.push("fc-today",lt+"-state-highlight"):n>e?o.push("fc-past"):o.push("fc-future"),s+="<td class='"+o.join(" ")+"'"+" data-date='"+Dt(e,"yyyy-MM-dd")+"'"+">"+"<div>",nt&&(s+="<div class='fc-day-number'>"+e.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(t){Z=t;var i,n,s,o=Z-R.height();"variable"==pt("weekMode")?i=n=Math.floor(o/(1==tt?2:6)):(i=Math.floor(o/tt),n=o-i*(tt-1)),V.each(function(t,o){tt>t&&(s=e(o),s.find("> div").css("min-height",(t==tt-1?n:i)-F(s)))})}function m(e){J=e,rt.clear(),at.clear(),et=0,ht&&(et=R.find("th.fc-week-number").outerWidth()),Q=Math.floor((J-et)/it),T($.slice(0,-1),Q)}function _(e){e.click(y).mousedown(Ct)}function y(t){if(!pt("selectable")){var i=v(e(this).data("date"));gt("dayClick",this,i,!0,t)}}function b(e,t,i){i&&st.build();for(var n=St(e,t),s=0;s<n.length;s++){var o=n[s];_(w(o.row,o.leftCol,o.row,o.rightCol))}}function w(e,i,n,s){var o=st.rect(e,i,n,s,t);return bt(o,t)}function x(e){return u(e)}function C(e,t){b(e,l(u(t),1),!0)}function k(){xt()}function S(e,t,i){var n=Tt(e),s=B[n.row*it+n.col];gt("dayClick",s,e,t,i)}function D(e,t){ot.start(function(e){xt(),e&&w(e.row,e.col,e.row,e.col)},t)}function M(e,t,i){var n=ot.stop();if(xt(),n){var s=kt(n);gt("drop",e,s,!0,t,i)}}function j(e){return u(e.start)}function E(e){return rt.left(e)}function A(e){return rt.right(e)}function O(e){return at.left(e)}function N(e){return at.right(e)}function I(e){return U.eq(e)}var P=this;P.renderBasic=s,P.setHeight=g,P.setWidth=m,P.renderDayOverlay=b,P.defaultSelectionEnd=x,P.renderSelection=C,P.clearSelection=k,P.reportDayClick=S,P.dragStart=D,P.dragStop=M,P.defaultEventEnd=j,P.getHoverListener=function(){return ot},P.colLeft=E,P.colRight=A,P.colContentLeft=O,P.colContentRight=N,P.getIsCellAllDay=function(){return!0},P.allDayRow=I,P.getRowCnt=function(){return tt},P.getColCnt=function(){return it},P.getColWidth=function(){return Q},P.getDaySegmentContainer=function(){return K},dt.call(P,t,i,n),vt.call(P),mt.call(P),X.call(P);var z,R,$,W,U,B,V,Y,G,K,J,Z,Q,et,tt,it,nt,st,ot,rt,at,lt,ct,ht,ut,ft,pt=P.opt,gt=P.trigger,bt=P.renderOverlay,xt=P.clearOverlays,Ct=P.daySelectionMousedown,kt=P.cellToDate,Tt=P.dateToCell,St=P.rangeToSegments,Dt=i.formatDate;H(t.addClass("fc-grid")),st=new _t(function(t,i){var n,s,o;$.each(function(t,r){n=e(r),s=n.offset().left,t&&(o[1]=s),o=[s],i[t]=o}),o[1]=s+n.outerWidth(),U.each(function(i,r){tt>i&&(n=e(r),s=n.offset().top,i&&(o[1]=s),o=[s],t[i]=o)}),o[1]=s+n.outerHeight()}),ot=new yt(st),rt=new wt(function(e){return Y.eq(e)}),at=new wt(function(e){return G.eq(e)})}function X(){function e(e,t){i.renderDayEvents(e,t)}function t(){i.getDaySegmentContainer().empty()}var i=this;i.renderEvents=e,i.clearEvents=t,ut.call(i)}function J(e,t){function i(e,t){t&&l(e,7*t);var i=l(u(e),-((e.getDay()-s("firstDay")+7)%7)),h=l(u(i),7),d=u(i);r(d);var f=u(h);r(f,-1,!0);var p=a();n.title=c(d,l(u(f),-1),s("titleFormat")),n.start=i,n.end=h,n.visStart=d,n.visEnd=f,o(p)}var n=this;n.render=i,Q.call(n,e,t,"agendaWeek");var s=n.opt,o=n.renderAgenda,r=n.skipHiddenDays,a=n.getCellsPerWeek,c=t.formatDates}function Z(e,t){function i(e,t){t&&l(e,t),r(e,0>t?-1:1);var i=u(e,!0),c=l(u(i),1);n.title=a(e,s("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,o(1)}var n=this;n.render=i,Q.call(n,e,t,"agendaDay");var s=n.opt,o=n.renderAgenda,r=n.skipHiddenDays,a=t.formatDate}function Q(i,n,s){function o(e){Nt=e,r(),Q?c():a()}function r(){Lt=Gt("theme")?"ui":"fc",Ht=Gt("isRTL"),qt=_(Gt("minTime")),Wt=_(Gt("maxTime")),Ut=Gt("columnFormat"),Bt=Gt("weekNumbers"),Vt=Gt("weekNumberTitle"),Yt="iso"!=Gt("weekNumberCalculation")?"w":"W",Ft=Gt("snapMinutes")||Gt("slotMinutes")}function a(){var t,n,s,o,r,a=Lt+"-widget-header",l=Lt+"-widget-content",d=0==Gt("slotMinutes")%15;for(c(),ct=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Gt("allDaySlot")?(ht=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ct),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+a+" fc-agenda-axis'>"+Gt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+a+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ut=e(t).appendTo(ct),ft=ut.find("tr"),x(ft.find("td")),ct.append("<div class='fc-agenda-divider "+a+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ht=e([]),pt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ct),gt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(pt),bt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(gt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=f(),o=h(u(n),Wt),h(n,qt),It=0,s=0;o>n;s++)r=n.getMinutes(),t+="<tr class='fc-slot"+s+" "+(r?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+a+"'>"+(d&&r?"&nbsp;":oi(n,Gt("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",h(n,Gt("slotMinutes")),It++;t+="</tbody></table>",xt=e(t).appendTo(gt),C(xt.find("td"))}function c(){var t=p();Q&&Q.remove(),Q=e(t).appendTo(i),tt=Q.find("thead"),it=tt.find("th").slice(1,-1),nt=Q.find("tbody"),st=nt.find("td").slice(0,-1),ot=st.find("> div"),rt=st.find(".fc-day-content > div"),at=st.eq(0),lt=ot.eq(0),q(tt.add(tt.find("tr"))),q(nt.add(nt.find("tr")))}function p(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+m()+"</table>";return e}function g(){var e,t,i,n=Lt+"-widget-header",s="";for(s+="<thead><tr>",Bt?(e=ii(0,0),t=oi(e,Yt),Ht?t+=Vt:t=Vt+t,s+="<th class='fc-agenda-axis fc-week-number "+n+"'>"+L(t)+"</th>"):s+="<th class='fc-agenda-axis "+n+"'>&nbsp;</th>",i=0;Nt>i;i++)e=ii(0,i),s+="<th class='fc-"+Mt[e.getDay()]+" fc-col"+i+" "+n+"'>"+L(oi(e,Ut))+"</th>";return s+="<th class='fc-agenda-gutter "+n+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function m(){var e,t,i,n,s,o=Lt+"-widget-header",r=Lt+"-widget-content",a=d(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",i="",t=0;Nt>t;t++)e=ii(0,t),s=["fc-col"+t,"fc-"+Mt[e.getDay()],r],+e==+a?s.push(Lt+"-state-highlight","fc-today"):a>e?s.push("fc-past"):s.push("fc-future"),n="<td class='"+s.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",i+=n;return l+=i,l+="<td class='fc-agenda-gutter "+r+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function v(e){e===t&&(e=Tt),Tt=e,ri={};var i=nt.position().top,n=pt.position().top,s=Math.min(e-i,xt.height()+n+1);lt.height(s-F(at)),ct.css("top",i),pt.height(s-n-1),Et=xt.find("tr:first").height()+1,At=Gt("slotMinutes")/Ft,Ot=Et/At}function y(t){kt=t,Rt.clear(),$t.clear();var i=tt.find("th:first");ut&&(i=i.add(ut.find("th:first"))),i=i.add(xt.find("th:first")),St=0,T(i.width("").each(function(t,i){St=Math.max(St,e(i).outerWidth())}),St);var n=Q.find(".fc-agenda-gutter");ut&&(n=n.add(ut.find("th.fc-agenda-gutter")));var s=pt[0].clientWidth;jt=pt.width()-s,jt?(T(n,jt),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),Dt=Math.floor((s-St)/Nt),T(it.slice(0,-1),Dt)}function b(){function e(){pt.scrollTop(n)}var t=f(),i=u(t);i.setHours(Gt("firstHour"));var n=R(t,i)+1;e(),setTimeout(e,0)}function w(){b()}function x(e){e.click(k).mousedown(ei)}function C(e){e.click(k).mousedown(G)}function k(e){if(!Gt("selectable")){var t=Math.min(Nt-1,Math.floor((e.pageX-Q.offset().left-St)/Dt)),i=ii(0,t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var s=parseInt(n[1])*Gt("slotMinutes"),o=Math.floor(s/60);i.setHours(o),i.setMinutes(s%60+qt),Kt("dayClick",st[t],i,!1,e)}else Kt("dayClick",st[t],i,!0,e)}}function D(e,t,i){i&&Pt.build();for(var n=si(e,t),s=0;s<n.length;s++){var o=n[s];x(M(o.row,o.leftCol,o.row,o.rightCol))}}function M(e,t,i,n){var s=Pt.rect(e,t,i,n,ct);return Xt(s,ct)}function j(e,t){for(var i=0;Nt>i;i++){var n=ii(0,i),s=l(u(n),1),o=new Date(Math.max(n,e)),r=new Date(Math.min(s,t));if(r>o){var a=Pt.rect(0,i,0,i,gt),c=R(n,o),h=R(n,r);a.top=c,a.height=h-c,C(Xt(a,gt))}}}function E(e){return Rt.left(e)}function A(e){return $t.left(e)}function O(e){return Rt.right(e)}function N(e){return $t.right(e)}function I(e){return Gt("allDaySlot")&&!e.row}function z(e){var t=ii(0,e.col),i=e.row;return Gt("allDaySlot")&&i--,i>=0&&h(t,qt+i*Ft),t}function R(e,i){if(e=u(e,!0),i<h(u(e),qt))return 0;if(i>=h(u(e),Wt))return xt.height();var n=Gt("slotMinutes"),s=60*i.getHours()+i.getMinutes()-qt,o=Math.floor(s/n),r=ri[o];return r===t&&(r=ri[o]=xt.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+Et*(s%n/n)))}function $(){return ft}function W(e){var t=u(e.start);return e.allDay?t:h(t,Gt("defaultEventMinutes"))}function U(e,t){return t?u(e):h(u(e),Gt("slotMinutes"))}function B(e,t,i){i?Gt("allDaySlot")&&D(e,l(u(t),1),!0):V(e,t)}function V(t,i){var n=Gt("selectHelper");if(Pt.build(),n){var s=ni(t).col;if(s>=0&&Nt>s){var o=Pt.rect(0,s,0,s,gt),r=R(t,t),a=R(t,i);if(a>r){if(o.top=r,o.height=a-r,o.left+=2,o.width-=5,e.isFunction(n)){var l=n(t,i);l&&(o.position="absolute",Ct=e(l).css(o).appendTo(gt))}else o.isStart=!0,o.isEnd=!0,Ct=e(ti({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},o)),Ct.css("opacity",Gt("dragOpacity"));Ct&&(C(Ct),gt.append(Ct),T(Ct,o.width,!0),S(Ct,o.height,!0))}}}else j(t,i)}function Y(){Jt(),Ct&&(Ct.remove(),Ct=null)}function G(t){if(1==t.which&&Gt("selectable")){Qt(t);var i;zt.start(function(e,t){if(Y(),e&&e.col==t.col&&!I(e)){var n=z(t),s=z(e);i=[n,h(u(n),Ft),s,h(u(s),Ft)].sort(P),V(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){zt.stop(),i&&(+i[0]==+i[1]&&K(i[0],!1,e),Zt(i[0],i[3],!1,e))})}}function K(e,t,i){Kt("dayClick",st[ni(e).col],e,t,i)}function X(e,t){zt.start(function(e){if(Jt(),e)if(I(e))M(e.row,e.col,e.row,e.col);else{var t=z(e),i=h(u(t),Gt("defaultEventMinutes"));j(t,i)}},t)}function J(e,t,i){var n=zt.stop();Jt(),n&&Kt("drop",e,z(n),I(n),t,i)}var Z=this;Z.renderAgenda=o,Z.setWidth=y,Z.setHeight=v,Z.afterRender=w,Z.defaultEventEnd=W,Z.timePosition=R,Z.getIsCellAllDay=I,Z.allDayRow=$,Z.getCoordinateGrid=function(){return Pt},Z.getHoverListener=function(){return zt},Z.colLeft=E,Z.colRight=O,Z.colContentLeft=A,Z.colContentRight=N,Z.getDaySegmentContainer=function(){return ht},Z.getSlotSegmentContainer=function(){return bt},Z.getMinMinute=function(){return qt},Z.getMaxMinute=function(){return Wt},Z.getSlotContainer=function(){return gt},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Nt},Z.getColWidth=function(){return Dt},Z.getSnapHeight=function(){return Ot},Z.getSnapMinutes=function(){return Ft},Z.defaultSelectionEnd=U,Z.renderDayOverlay=D,Z.renderSelection=B,Z.clearSelection=Y,Z.reportDayClick=K,Z.dragStart=X,Z.dragStop=J,dt.call(Z,i,n,s),vt.call(Z),mt.call(Z),et.call(Z);var Q,tt,it,nt,st,ot,rt,at,lt,ct,ht,ut,ft,pt,gt,bt,xt,Ct,kt,Tt,St,Dt,jt,Et,Ft,At,Ot,Nt,It,Pt,zt,Rt,$t,Lt,Ht,qt,Wt,Ut,Bt,Vt,Yt,Gt=Z.opt,Kt=Z.trigger,Xt=Z.renderOverlay,Jt=Z.clearOverlays,Zt=Z.reportSelection,Qt=Z.unselect,ei=Z.daySelectionMousedown,ti=Z.slotSegHtml,ii=Z.cellToDate,ni=Z.dateToCell,si=Z.rangeToSegments,oi=n.formatDate,ri={};H(i.addClass("fc-agenda")),Pt=new _t(function(t,i){function n(e){return Math.max(l,Math.min(c,e))}var s,o,r;it.each(function(t,n){s=e(n),o=s.offset().left,t&&(r[1]=o),r=[o],i[t]=r}),r[1]=o+s.outerWidth(),Gt("allDaySlot")&&(s=ft,o=s.offset().top,t[0]=[o,o+s.outerHeight()]);for(var a=gt.offset().top,l=pt.offset().top,c=l+pt.outerHeight(),h=0;It*At>h;h++)t.push([n(a+Ot*h),n(a+Ot*(h+1))])}),zt=new yt(Pt),Rt=new wt(function(e){return ot.eq(e)}),$t=new wt(function(e){return rt.eq(e)})}function et(){function i(e,t){var i,n=e.length,o=[],r=[];for(i=0;n>i;i++)e[i].allDay?o.push(e[i]):r.push(e[i]);_("allDaySlot")&&(et(o,t),M()),a(s(r),t)}function n(){j().empty(),E().empty()}function s(t){var i,n,s,a,l,c=H(),d=N(),f=O(),p=e.map(t,r),g=[];for(n=0;c>n;n++)for(i=$(0,n),h(i,d),l=o(t,p,i,h(u(i),f-d)),l=tt(l),s=0;s<l.length;s++)a=l[s],a.col=n,g.push(a);return g}function o(e,t,i,n){var s,o,r,a,l,c,h,d,f=[],p=e.length;for(s=0;p>s;s++)o=e[s],r=o.start,a=t[s],a>i&&n>r&&(i>r?(l=u(i),h=!1):(l=r,h=!0),a>n?(c=u(n),d=!1):(c=a,d=!0),f.push({event:o,start:l,end:c,isStart:h,isEnd:d}));return f.sort(ht)}function r(e){return e.end?u(e.end):h(u(e.start),_("defaultEventMinutes"))}function a(i,n){var s,o,r,a,l,h,u,f,p,g,m,v,b,w,x,C,T=i.length,S="",M=E(),j=_("isRTL");for(s=0;T>s;s++)o=i[s],r=o.event,a=I(o.start,o.start),l=I(o.start,o.end),h=z(o.col),u=R(o.col),f=u-h,u-=.025*f,f=u-h,p=f*(o.forwardCoord-o.backwardCoord),_("slotEventOverlap")&&(p=Math.max(2*(p-10),p)),j?(m=u-o.backwardCoord*f,g=m-p):(g=h+o.backwardCoord*f,m=g+p),g=Math.max(g,h),m=Math.min(m,u),p=m-g,o.top=a,o.left=g,o.outerWidth=p,o.outerHeight=l-a,S+=c(r,o);for(M[0].innerHTML=S,v=M.children(),s=0;T>s;s++)o=i[s],r=o.event,b=e(v[s]),w=y("eventRender",r,r,b),w===!1?b.remove():(w&&w!==!0&&(b.remove(),b=e(w).css({position:"absolute",top:o.top,left:o.left}).appendTo(M)),o.element=b,r._id===n?d(r,b,o):b[0]._fci=s,Y(r,b));for(k(M,i,d),s=0;T>s;s++)o=i[s],(b=o.element)&&(o.vsides=F(b,!0),o.hsides=D(b,!0),x=b.find(".fc-event-title"),x.length&&(o.contentTop=x[0].offsetTop));for(s=0;T>s;s++)o=i[s],(b=o.element)&&(b[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",C=Math.max(0,o.outerHeight-o.vsides),b[0].style.height=C+"px",r=o.event,o.contentTop!==t&&C-o.contentTop<10&&(b.find("div.fc-event-time").text(nt(r.start,_("timeFormat"))+" - "+r.title),b.find("div.fc-event-title").remove()),y("eventAfterRender",r,r,b))}function c(e,t){var i="<",n=e.url,s=W(e,_),o=["fc-event","fc-event-vert"];return b(e)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(e.className),e.source&&(o=o.concat(e.source.className||[])),i+=n?"a href='"+L(e.url)+"'":"div",i+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+s+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+L(st(e.start,e.end,_("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+L(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&w(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"}function d(e,t,i){var n=t.find("div.fc-event-time");b(e)&&g(e,t,n),i.isEnd&&w(e)&&m(e,t,n),T(e,t)}function f(e,t,i){function n(){c||(t.width(s).height("").draggable("option","grid",null),c=!0)}var s,o,r,a=i.isStart,c=!0,h=A(),d=q(),f=U(),g=B(),m=N();t.draggable({opacity:_("dragOpacity","month"),revertDuration:_("dragRevertDuration"),start:function(i,m){y("eventDragStart",t,e,i,m),K(e,t),s=t.width(),h.start(function(i,s){if(Q(),i){o=!1;var h=$(0,s.col),m=$(0,i.col);r=p(m,h),i.row?a?c&&(t.width(d-10),S(t,f*Math.round((e.end?(e.end-e.start)/Ft:_("defaultEventMinutes"))/g)),t.draggable("option","grid",[d,1]),c=!1):o=!0:(Z(l(u(e.start),r),l(x(e),r)),n()),o=o||c&&!r}else n(),o=!0;t.draggable("option","revert",o)},i,"drag")},stop:function(i,s){if(h.stop(),Q(),y("eventDragStop",t,e,i,s),o)n(),t.css("filter",""),G(e,t);else{var a=0;c||(a=Math.round((t.offset().top-V().offset().top)/f)*g+m-(60*e.start.getHours()+e.start.getMinutes())),X(this,e,r,a,c,i,s)}}})}function g(e,t,i){function n(){Q(),a&&(d?(i.hide(),t.draggable("option","grid",null),Z(l(u(e.start),b),l(x(e),b))):(s(w),i.css("display",""),t.draggable("option","grid",[S,D])))}function s(t){var n,s=h(u(e.start),t);e.end&&(n=h(u(e.end),t)),i.text(st(s,n,_("timeFormat")))}var o,r,a,c,d,f,g,m,b,w,C,k=v.getCoordinateGrid(),T=H(),S=q(),D=U(),M=B();t.draggable({scroll:!1,grid:[S,D],axis:1==T?"y":!1,opacity:_("dragOpacity"),revertDuration:_("dragRevertDuration"),start:function(i,n){y("eventDragStart",t,e,i,n),K(e,t),k.build(),o=t.position(),r=k.cell(i.pageX,i.pageY),a=c=!0,d=f=P(r),g=m=0,b=0,w=C=0},drag:function(e,i){var s=k.cell(e.pageX,e.pageY);if(a=!!s){if(d=P(s),g=Math.round((i.position.left-o.left)/S),g!=m){var l=$(0,r.col),h=r.col+g;h=Math.max(0,h),h=Math.min(T-1,h);var u=$(0,h);b=p(u,l)}d||(w=Math.round((i.position.top-o.top)/D)*M)}(a!=c||d!=f||g!=m||w!=C)&&(n(),c=a,f=d,m=g,C=w),t.draggable("option","revert",!a)},stop:function(i,s){Q(),y("eventDragStop",t,e,i,s),a&&(d||b||w)?X(this,e,b,d?0:w,d,i,s):(a=!0,d=!1,g=0,b=0,w=0,n(),t.css("filter",""),t.css(o),G(e,t))}})}function m(e,t,i){var n,s,o=U(),r=B();t.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(i,o){n=s=0,K(e,t),y("eventResizeStart",this,e,i,o)},resize:function(a,l){n=Math.round((Math.max(o,t.height())-l.originalSize.height)/o),n!=s&&(i.text(st(e.start,n||e.end?h(C(e),r*n):null,_("timeFormat"))),s=n)},stop:function(i,s){y("eventResizeStop",this,e,i,s),n?J(this,e,0,r*n,i,s):G(e,t)}})}var v=this;v.renderEvents=i,v.clearEvents=n,v.slotSegHtml=c,ut.call(v);var _=v.opt,y=v.trigger,b=v.isEventDraggable,w=v.isEventResizable,C=v.eventEnd,T=v.eventElementHandlers,M=v.setHeight,j=v.getDaySegmentContainer,E=v.getSlotSegmentContainer,A=v.getHoverListener,O=v.getMaxMinute,N=v.getMinMinute,I=v.timePosition,P=v.getIsCellAllDay,z=v.colContentLeft,R=v.colContentRight,$=v.cellToDate,H=v.getColCnt,q=v.getColWidth,U=v.getSnapHeight,B=v.getSnapMinutes,V=v.getSlotContainer,Y=v.reportEventElement,G=v.showEvents,K=v.hideEvents,X=v.eventDrop,J=v.eventResize,Z=v.renderDayOverlay,Q=v.clearOverlays,et=v.renderDayEvents,it=v.calendar,nt=it.formatDate,st=it.formatDates;v.draggableDayEvent=f}function tt(e){var t,i=it(e),n=i[0];if(nt(i),n){for(t=0;t<n.length;t++)st(n[t]);for(t=0;t<n.length;t++)ot(n[t],0,0)}return rt(i)}function it(e){var t,i,n,s=[];for(t=0;t<e.length;t++){for(i=e[t],n=0;n<s.length&&at(i,s[n]).length;n++);(s[n]||(s[n]=[])).push(i)}return s}function nt(e){var t,i,n,s,o;for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(s=i[n],s.forwardSegs=[],o=t+1;o<e.length;o++)at(s,e[o],s.forwardSegs)}function st(e){var i,n,s=e.forwardSegs,o=0;if(e.forwardPressure===t){for(i=0;i<s.length;i++)n=s[i],st(n),o=Math.max(o,1+n.forwardPressure);e.forwardPressure=o}}function ot(e,i,n){var s,o=e.forwardSegs;if(e.forwardCoord===t)for(o.length?(o.sort(ct),ot(o[0],i+1,n),e.forwardCoord=o[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(i+1),s=0;s<o.length;s++)ot(o[s],0,e.forwardCoord)}function rt(e){var t,i,n,s=[];for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)s.push(i[n]);return s}function at(e,t,i){i=i||[];for(var n=0;n<t.length;n++)lt(e,t[n])&&i.push(t[n]);return i}function lt(e,t){return e.end>t.start&&e.start<t.end}function ct(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ht(e,t)}function ht(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function dt(i,n,s){function o(t,i){var n=Y[t];return e.isPlainObject(n)?$(n,i||s):n}function r(e,t){return n.trigger.apply(n,[e,t||R].concat(Array.prototype.slice.call(arguments,2),[R]))}function a(e){var t=e.source||{};return B(e.startEditable,t.startEditable,o("eventStartEditable"),e.editable,t.editable,o("editable"))&&!o("disableDragging")}function c(e){var t=e.source||{};return B(e.durationEditable,t.durationEditable,o("eventDurationEditable"),e.editable,t.editable,o("editable"))&&!o("disableResizing")}function d(e){W={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],W[i._id]?W[i._id].push(i):W[i._id]=[i]}function f(){W={},U={},V=[]}function g(e){return e.end?u(e.end):L(e)}function m(e,t){V.push({event:e,element:t}),U[e._id]?U[e._id].push(t):U[e._id]=[t]}function v(){e.each(V,function(e,t){R.trigger("eventDestroy",t.event,t.event,t.element)})}function _(e,t){t.click(function(i){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:r("eventClick",this,e,i)}).hover(function(t){r("eventMouseover",this,e,t)},function(t){r("eventMouseout",this,e,t)})}function y(e,t){w(e,t,"show")}function b(e,t){w(e,t,"hide")}function w(e,t,i){var n,s=U[e._id],o=s.length;for(n=0;o>n;n++)t&&s[n][0]==t[0]||s[n][i]()}function x(e,t,i,n,s,o,a){var l=t.allDay,c=t._id;k(W[c],i,n,s),r("eventDrop",e,t,i,n,s,function(){k(W[c],-i,-n,l),q(c)},o,a),q(c)}function C(e,t,i,n,s,o){var a=t._id;T(W[a],i,n),r("eventResize",e,t,i,n,function(){T(W[a],-i,-n),q(a)},s,o),q(a)}function k(e,i,n,s){n=n||0;for(var o,r=e.length,a=0;r>a;a++)o=e[a],s!==t&&(o.allDay=s),h(l(o.start,i,!0),n),o.end&&(o.end=h(l(o.end,i,!0),n)),H(o,Y)}function T(e,t,i){i=i||0;for(var n,s=e.length,o=0;s>o;o++)n=e[o],n.end=h(l(g(n),t,!0),i),H(n,Y)}function S(e){return"object"==typeof e&&(e=e.getDay()),X[e]}function D(){return G}function M(e,t,i){for(t=t||1;X[(e.getDay()+(i?t:0)+7)%7];)l(e,t)}function j(){var e=E.apply(null,arguments),t=F(e),i=A(t);return i}function E(e,t){var i=R.getColCnt(),n=Q?-1:1,s=Q?i-1:0;"object"==typeof e&&(t=e.col,e=e.row);var o=e*i+(t*n+s);return o}function F(e){var t=R.visStart.getDay();return e+=J[t],7*Math.floor(e/G)+Z[(e%G+G)%G]-t}function A(e){var t=u(R.visStart);return l(t,e),t}function O(e){var t=N(e),i=I(t),n=P(i);return n}function N(e){return p(e,R.visStart)}function I(e){var t=R.visStart.getDay();return e+=t,Math.floor(e/7)*G+J[(e%7+7)%7]-J[t]}function P(e){var t=R.getColCnt(),i=Q?-1:1,n=Q?t-1:0,s=Math.floor(e/t),o=(e%t+t)%t*i+n;return{row:s,col:o}}function z(e,t){for(var i=R.getRowCnt(),n=R.getColCnt(),s=[],o=N(e),r=N(t),a=I(o),l=I(r)-1,c=0;i>c;c++){var h=c*n,d=h+n-1,u=Math.max(a,h),f=Math.min(l,d);if(f>=u){var p=P(u),g=P(f),m=[p.col,g.col].sort(),v=F(u)==o,_=F(f)+1==r;s.push({row:c,leftCol:m[0],rightCol:m[1],isStart:v,isEnd:_})}}return s}var R=this;R.element=i,R.calendar=n,R.name=s,R.opt=o,R.trigger=r,R.isEventDraggable=a,R.isEventResizable=c,R.setEventData=d,R.clearEventData=f,R.eventEnd=g,R.reportEventElement=m,R.triggerEventDestroy=v,R.eventElementHandlers=_,R.showEvents=y,R.hideEvents=b,R.eventDrop=x,R.eventResize=C;var L=R.defaultEventEnd,H=n.normalizeEvent,q=n.reportEventChange,W={},U={},V=[],Y=n.options;R.isHiddenDay=S,R.skipHiddenDays=M,R.getCellsPerWeek=D,R.dateToCell=O,R.dateToDayOffset=N,R.dayOffsetToCellOffset=I,R.cellOffsetToCell=P,R.cellToDate=j,R.cellToCellOffset=E,R.cellOffsetToDayOffset=F,R.dayOffsetToDate=A,R.rangeToSegments=z;var G,K=o("hiddenDays")||[],X=[],J=[],Z=[],Q=o("isRTL");!function(){o("weekends")===!1&&K.push(0,6);for(var t=0,i=0;7>t;t++)J[t]=i,X[t]=-1!=e.inArray(t,K),X[t]||(Z[i]=t,i++);if(G=i,!G)throw"invalid hiddenDays"}()}function ut(){function t(e,t){var i=n(e,!1,!0);pt(i,function(e,t){A(e.event,t)}),y(i,t),pt(i,function(e,t){M("eventAfterRender",e.event,e.event,t)})}function i(e,t,i){var s=n([e],!0,!1),o=[];return pt(s,function(e,n){e.row===t&&n.css("top",i),o.push(n[0])}),o}function n(t,i,n){var o,l,c=K(),u=i?e("<div/>"):c,f=s(t);return r(f),o=a(f),u[0].innerHTML=o,l=u.children(),i&&c.append(l),h(f,l),pt(f,function(e,t){e.hsides=D(t,!0)}),pt(f,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),pt(f,function(e,t){e.outerHeight=t.outerHeight(!0)}),d(f,n),f}function s(e){for(var t=[],i=0;i<e.length;i++){var n=o(e[i]);t.push.apply(t,n)}return t}function o(e){for(var t=e.start,i=x(e),n=tt(t,i),s=0;s<n.length;s++)n[s].event=e;return n}function r(e){for(var t=S("isRTL"),i=0;i<e.length;i++){var n=e[i],s=(t?n.isEnd:n.isStart)?Y:B,o=(t?n.isStart:n.isEnd)?G:V,r=s(n.leftCol),a=o(n.rightCol);n.left=r,n.outerWidth=a-r}}function a(e){for(var t="",i=0;i<e.length;i++)t+=c(e[i]);return t}function c(e){var t="",i=S("isRTL"),n=e.event,s=n.url,o=["fc-event","fc-event-hori"];j(n)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(n.className),n.source&&(o=o.concat(n.source.className||[]));var r=W(n,S);return t+=s?"<a href='"+L(s)+"'":"<div",t+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+r+"'"+">"+"<div class='fc-event-inner'>",!n.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+L(X(n.start,n.end,S("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+L(n.title||"")+"</span>"+"</div>",e.isEnd&&E(n)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(s?"a":"div")+">"
}function h(t,i){for(var n=0;n<t.length;n++){var s=t[n],o=s.event,r=i.eq(n),a=M("eventRender",o,o,r);a===!1?r.remove():(a&&a!==!0&&(a=e(a).css({position:"absolute",left:s.left}),r.replaceWith(a),r=a),s.element=r)}}function d(e,t){var i=f(e),n=_(),s=[];if(t)for(var o=0;o<n.length;o++)n[o].height(i[o]);for(var o=0;o<n.length;o++)s.push(n[o].position().top);pt(e,function(e,t){t.css("top",s[e.row]+e.top)})}function f(e){for(var t=$(),i=q(),n=[],s=g(e),o=0;t>o;o++){for(var r=s[o],a=[],l=0;i>l;l++)a.push(0);for(var c=0;c<r.length;c++){var h=r[c];h.top=z(a.slice(h.leftCol,h.rightCol+1));for(var l=h.leftCol;l<=h.rightCol;l++)a[l]=h.top+h.outerHeight}n.push(z(a))}return n}function g(e){var t,i,n,s=$(),o=[];for(t=0;t<e.length;t++)i=e[t],n=i.row,i.element&&(o[n]?o[n].push(i):o[n]=[i]);for(n=0;s>n;n++)o[n]=m(o[n]||[]);return o}function m(e){for(var t=[],i=v(e),n=0;n<i.length;n++)t.push.apply(t,i[n]);return t}function v(e){e.sort(gt);for(var t=[],i=0;i<e.length;i++){for(var n=e[i],s=0;s<t.length&&ft(n,t[s]);s++);t[s]?t[s].push(n):t[s]=[n]}return t}function _(){var e,t=$(),i=[];for(e=0;t>e;e++)i[e]=U(e).find("div.fc-day-content > div");return i}function y(e,t){var i=K();pt(e,function(e,i,n){var s=e.event;s._id===t?b(s,i,e):i[0]._fci=n}),k(i,e,b)}function b(e,t,i){j(e)&&T.draggableDayEvent(e,t,i),i.isEnd&&E(e)&&T.resizableDayEvent(e,t,i),O(e,t)}function w(e,t){var i,n=et();t.draggable({delay:50,opacity:S("dragOpacity"),revertDuration:S("dragRevertDuration"),start:function(s,o){M("eventDragStart",t,e,s,o),I(e,t),n.start(function(n,s,o,r){if(t.draggable("option","revert",!n||!o&&!r),Z(),n){var a=it(s),c=it(n);i=p(c,a),J(l(u(e.start),i),l(x(e),i))}else i=0},s,"drag")},stop:function(s,o){n.stop(),Z(),M("eventDragStop",t,e,s,o),i?P(this,e,i,0,e.allDay,s,o):(t.css("filter",""),N(e,t))}})}function C(t,n,s){var o=S("isRTL"),r=o?"w":"e",a=n.find(".ui-resizable-"+r),c=!1;H(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),a.mousedown(function(o){function a(i){M("eventResizeStop",this,t,i),e("body").css("cursor",""),h.stop(),Z(),d&&R(this,t,d,0,i),setTimeout(function(){c=!1},0)}if(1==o.which){c=!0;var h=et();$(),q();var d,u,f=n.css("top"),p=e.extend({},t),g=rt(ot(t.start));Q(),e("body").css("cursor",r+"-resize").one("mouseup",a),M("eventResizeStart",this,t,o),h.start(function(n,o){if(n){var a=nt(o),c=nt(n);if(c=Math.max(c,g),d=st(c)-st(a)){p.end=l(F(t),d,!0);var h=u;u=i(p,s.row,f),u=e(u),u.find("*").css("cursor",r+"-resize"),h&&h.remove(),I(t)}else u&&(N(t),u.remove(),u=null);Z(),J(t.start,l(x(t),d))}},o)}})}var T=this;T.renderDayEvents=t,T.draggableDayEvent=w,T.resizableDayEvent=C;var S=T.opt,M=T.trigger,j=T.isEventDraggable,E=T.isEventResizable,F=T.eventEnd,A=T.reportEventElement,O=T.eventElementHandlers,N=T.showEvents,I=T.hideEvents,P=T.eventDrop,R=T.eventResize,$=T.getRowCnt,q=T.getColCnt;T.getColWidth;var U=T.allDayRow,B=T.colLeft,V=T.colRight,Y=T.colContentLeft,G=T.colContentRight;T.dateToCell;var K=T.getDaySegmentContainer,X=T.calendar.formatDates,J=T.renderDayOverlay,Z=T.clearOverlays,Q=T.clearSelection,et=T.getHoverListener,tt=T.rangeToSegments,it=T.cellToDate,nt=T.cellToCellOffset,st=T.cellOffsetToDayOffset,ot=T.dateToDayOffset,rt=T.dayOffsetToCellOffset}function ft(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol)return!0}return!1}function pt(e,t){for(var i=0;i<e.length;i++){var n=e[i],s=n.element;s&&t(n,s,i)}}function gt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function mt(){function t(e,t,s){i(),t||(t=l(e,s)),c(e,t,s),n(e,t,s)}function i(e){d&&(d=!1,h(),a("unselect",null,e))}function n(e,t,i,n){d=!0,a("select",null,e,t,i,n)}function s(t){var s=o.cellToDate,a=o.getIsCellAllDay,l=o.getHoverListener(),d=o.reportDayClick;if(1==t.which&&r("selectable")){i(t);var u;l.start(function(e,t){h(),e&&a(e)?(u=[s(t),s(e)].sort(P),c(u[0],u[1],!0)):u=null},t),e(document).one("mouseup",function(e){l.stop(),u&&(+u[0]==+u[1]&&d(u[0],!0,e),n(u[0],u[1],!0,e))})}}var o=this;o.select=t,o.unselect=i,o.reportSelection=n,o.daySelectionMousedown=s;var r=o.opt,a=o.trigger,l=o.defaultSelectionEnd,c=o.renderSelection,h=o.clearSelection,d=!1;r("selectable")&&r("unselectAuto")&&e(document).mousedown(function(t){var n=r("unselectCancel");n&&e(t.target).parents(n).length||i(t)})}function vt(){function t(t,i){var n=o.shift();return n||(n=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),s.push(n.css(t).show()),n}function i(){for(var e;e=s.shift();)o.push(e.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=i;var s=[],o=[]}function _t(e){var t,i,n=this;n.build=function(){t=[],i=[],e(t,i)},n.cell=function(e,n){var s,o=t.length,r=i.length,a=-1,l=-1;for(s=0;o>s;s++)if(n>=t[s][0]&&n<t[s][1]){a=s;break}for(s=0;r>s;s++)if(e>=i[s][0]&&e<i[s][1]){l=s;break}return a>=0&&l>=0?{row:a,col:l}:null},n.rect=function(e,n,s,o,r){var a=r.offset();return{top:t[e][0]-a.top,left:i[n][0]-a.left,width:i[o][1]-i[n][0],height:t[s][1]-t[e][0]}}}function yt(t){function i(e){bt(e);var i=t.cell(e.pageX,e.pageY);(!i!=!r||i&&(i.row!=r.row||i.col!=r.col))&&(i?(o||(o=i),s(i,o,i.row-o.row,i.col-o.col)):s(i,o),r=i)}var n,s,o,r,a=this;a.start=function(a,l,c){s=a,o=r=null,t.build(),i(l),n=c||"mousemove",e(document).bind(n,i)},a.stop=function(){return e(document).unbind(n,i),r}}function bt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function wt(e){function i(t){return s[t]=s[t]||e(t)}var n=this,s={},o={},r={};n.left=function(e){return o[e]=o[e]===t?i(e).position().left:o[e]},n.right=function(e){return r[e]=r[e]===t?n.left(e)+i(e).width():r[e]},n.clear=function(){s={},o={},r={}}}var xt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Ct={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},kt=e.fullCalendar={version:"1.6.4"},Tt=kt.views={};e.fn.fullCalendar=function(i){if("string"==typeof i){var s,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var r=n[i].apply(n,o);s===t&&(s=r),"destroy"==i&&e.removeData(this,"fullCalendar")}}),s!==t?s:this}i=i||{};var r=i.eventSources||[];return delete i.eventSources,i.events&&(r.push(i.events),delete i.events),i=e.extend(!0,{},xt,i.isRTL||i.isRTL===t&&xt.isRTL?Ct:{},i),this.each(function(t,s){var o=e(s),a=new n(o,i,r);o.data("fullCalendar",a),a.render()}),this},kt.sourceNormalizers=[],kt.sourceFetchers=[];var St={dataType:"json",cache:!1},Dt=1;kt.addDays=l,kt.cloneDate=u,kt.parseDate=m,kt.parseISO8601=v,kt.parseTime=_,kt.formatDate=y,kt.formatDates=b;var Mt=["sun","mon","tue","wed","thu","fri","sat"],jt=864e5,Et=36e5,Ft=6e4,At={s:function(e){return e.getSeconds()},ss:function(e){return R(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return R(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return R(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return R(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return R(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return R(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return y(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return w(e)}};kt.dateFormatters=At,kt.applyAll=U,Tt.month=V,Tt.basicWeek=Y,Tt.basicDay=G,i({weekMode:"fixed"}),Tt.agendaWeek=J,Tt.agendaDay=Z,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),define("jquery.fullcalendar",["jquery","jquery-ui"],function(){}),define("oro/calendar/event/model",["backbone","routing"],function(e,t){return e.Model.extend({route:"oro_api_get_calendarevents",urlRoot:null,defaults:{id:null,title:null,start:null,end:null,allDay:!1,reminder:!1,editable:!1,removable:!1},initialize:function(){this.urlRoot=t.generate(this.route)}})}),define("oro/calendar/event/collection",["backbone","routing","oro/calendar/event/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_get_calendarevents",url:null,model:i,calendar:null,subordinate:!1,setRange:function(e,i){this.url=t.generate(this.route,{calendar:this.calendar,start:e,end:i,subordinate:this.subordinate})},setCalendar:function(e){this.calendar=e},getCalendar:function(){return this.calendar}})}),define("oro/form-validation",["jquery","underscore","oro/translator","oro/app"],function(e,t,i,n){return{handleErrors:function(s,o,r){t.isString(s)&&(s=e(s)),this.removeErrors(s);var a=[];t.isString(o)&&a.push(o),t.isUndefined(o.message)||(n.debug?(a.push(o.message),t.isUndefined(console)||console.error(t.isUndefined(o.stack)?o:o.stack)):a.push(i("Unexpected error was occurred"))),!t.isUndefined(o.errors)&&t.isArray(o.errors)&&t.each(o.errors,function(e){a.push(i(e))}),this.addErrors(s,a),t.isUndefined(o.children)||(t.isUndefined(r)&&(r=this.getFormFieldPrefix(s)),t.each(o.children,t.bind(function(e,n){var o=s.find("#"+r+n);this.removeFieldErrors(o),!t.isUndefined(e.errors)&&t.isArray(e.errors)&&this.addFieldErrors(o,t.map(e.errors,function(e){return i(e)}))},this)),this.setFocusOnFirstErrorField(s))},getFormFieldPrefix:function(e){var i="",n=null;return n="form"===e.prop("tagName").toLowerCase()?e:e.find("form"),t.isNull(n)||(i=n.attr("id"),t.isUndefined(i)?i="":i+="_"),i},removeFieldErrors:function(i){var n=t.isString(i)?e(i):i;n.parent().filter(".error").length&&(n=n.parent()),n.siblings(".validation-faled").remove(),n.removeClass("error").parent().filter(".controls").removeClass("validation-error")},addFieldErrors:function(i,n){var s=t.isString(i)?e(i):i;(s.parent().filter(".selector").length||s.parent().filter(".uploader").length)&&(s=s.parent()),s.siblings(".validation-faled").length||e('<span class="validation-faled"></span>').insertAfter(s),s.siblings(".validation-faled").text(t.isArray(n)?n.join("; "):n),s.addClass("error").parent().filter(".controls").addClass("validation-error")},removeErrors:function(i){t.isString(i)&&(i=e(i));var n=i.find(".alert-error");if(n.length>0){n.hide();var s=n.find("ul");s.empty()}},addErrors:function(i,n){t.isString(i)&&(i=e(i));var s=i.find(".alert-error");if(s.length>0){var o=s.find("ul");t.size(n)>0&&(0===o.length&&(o=e("<ul>"),s.append(o)),t.each(n,function(t){this.append(e("<li>").text(t))},o),s.show())}},setFocusOnFirstErrorField:function(i){t.isString(i)&&(i=e(i)),i.find(".error>:input,:input.error").first().focus()}}}),define("oro/calendar/event/view",["underscore","backbone","oro/translator","oro/dialog-widget","oro/loading-mask","oro/form-validation","oro/delete-confirmation","oro/calendar/event/model"],function(e,t,i,n,s,o,r,a){var l=t.$;return t.View.extend({selectors:{loadingMaskContent:".loading-content"},options:{formTemplateSelector:null,calendar:null},initialize:function(){var t=l(this.options.formTemplateSelector).html();this.template=e.template(t),this.listenTo(this.model,"sync",this.onModelSave),this.listenTo(this.model,"destroy",this.onModelDelete)},remove:function(){this.trigger("remove"),this._hideMask(),t.View.prototype.remove.apply(this,arguments)},onModelSave:function(){this.trigger("addEvent",this.model),this.eventDialog.remove(),this.remove()},onModelDelete:function(){this.eventDialog.remove(),this.remove()},render:function(){this.model||(this.model=new a);var t=this.model.toJSON(),o=this.template(t);o=this.fillForm(o,t),this.eventDialog=new n({el:o,title:this.model.isNew()?i("Add New Event"):i("Edit Event"),stateEnabled:!1,incrementalPosition:!1,loadingMaskEnabled:!1,dialogOptions:{modal:!0,resizable:!1,width:475,autoResize:!0,close:e.bind(this.remove,this)},submitHandler:e.bind(function(){this.saveModel()},this)}),this.eventDialog.render();var c=e.bind(function(t){t.preventDefault();var i=l(t.target),n=new r({content:i.data("message")});n.on("ok",e.bind(this.deleteModel,this)),n.open()},this);return this.eventDialog.getAction("delete","adopted",function(e){e.on("click",c)}),this.loadingMask=new s,this.eventDialog.$el.closest(".ui-dialog").append(this.loadingMask.render().$el),this},saveModel:function(){this.showSavingMask();try{var t=this.getEventFormData();t.calendar=this.options.calendar,this.model.save(t,{wait:!0,error:e.bind(this._handleResponseError,this)})}catch(i){this.showError(i)}},deleteModel:function(){this.showDeletingMask();try{this.model.destroy({wait:!0,error:e.bind(this._handleResponseError,this)})}catch(t){this.showError(t)}},showSavingMask:function(){this._showMask(i("Saving..."))},showDeletingMask:function(){this._showMask(i("Deleting..."))},_showMask:function(e){this.loadingMask&&(this.loadingMask.$el.find(this.selectors.loadingMaskContent).text(e),this.loadingMask.show())},_hideMask:function(){this.loadingMask&&this.loadingMask.hide()},_handleResponseError:function(e,t){this.showError(t.responseJSON)},showError:function(e){this._hideMask(),this.eventDialog&&o.handleErrors(this.eventDialog.$el.parent(),e)},fillForm:function(t,i){return t=l(t),e.each(i,function(e,i){var n=t.find('[name$="['+i+']"]');n.length&&(n.is(":checkbox")?n.prop("checked",e):n.val(e),n.change())}),t},getEventFormData:function(){var t=/\[(\w+)\]$/,i={},n=this.eventDialog.form.serializeArray();return n=n.concat(this.eventDialog.form.find("input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:!1}}).get()),e.each(n,function(e){var n=t.exec(e.name);n&&2==n.length&&(i[n[1]]=e.value)}),i}})}),define("oro/calendar/connection/model",["backbone","oro/calendar/connection/collection"],function(e,t){return e.Model.extend({idAttribute:"calendar",collection:t,defaults:{color:null,backgroundColor:null,calendar:null,calendarName:null,owner:null,removable:!1}})}),define("oro/calendar/connection/collection",["backbone","routing","oro/calendar/connection/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_get_calendar_connections",url:null,model:i,setCalendar:function(e){this.url=t.generate(this.route,{id:e})}})}),define("oro/calendar/connection/view",["jquery","underscore","backbone","oro/translator","oro/app","oro/messenger","oro/calendar/connection/collection","oro/calendar/connection/model"],function(e,t,i,n,s,o,r,a){return i.View.extend({attrs:{calendar:"data-calendar",owner:"data-owner",color:"data-color",backgroundColor:"data-bg-color"},selectors:{container:".calendars",itemContainer:".connection-container",item:".connection-item",lastItem:".connection-item:last",findItemByCalendar:function(e){return'.connection-item[data-calendar="'+e+'"]'},findItemByOwner:function(e){return'.connection-item[data-owner="'+e+'"]'},removeButton:".remove-connection-button",newOwnerSelector:"#new_calendar_owner"},initialize:function(){this.options.collection=this.options.collection||new r,this.options.collection.setCalendar(this.options.calendar),this.template=t.template(e(this.options.itemTemplateSelector).html()),this.getCollection().each(t.bind(function(e){this.onModelAdded(e)},this)),this.listenTo(this.getCollection(),"add",this.onModelAdded),this.listenTo(this.getCollection(),"change",this.onModelChanged),this.listenTo(this.getCollection(),"destroy",this.onModelDeleted);var i=this.$el.closest(this.selectors.container);i.find(this.selectors.newOwnerSelector).on("change",t.bind(function(t){this.addModel(t.val),e(t.target).select2("val","")},this))},getCollection:function(){return this.options.collection},onModelAdded:function(i){var n=i.toJSON();this.options.colorManager.applyColors(n,t.bind(function(){return this.$el.find(this.selectors.lastItem).attr(this.attrs.backgroundColor)},this)),this.options.colorManager.setCalendarColors(n.calendar,n.color,n.backgroundColor);var s=e(this.template(n));t.each(this.attrs,function(e,t){s.attr(e,n[t])}),s.on("click",this.selectors.removeButton,t.bind(function(t){this.deleteModel(e(t.currentTarget).closest(this.selectors.item).attr(this.attrs.calendar))},this)),this.$el.find(this.selectors.itemContainer).append(s),this.trigger("connectionAdd",i)},onModelChanged:function(e){this.options.colorManager.setCalendarColors(e.get("calendar"),e.get("color"),e.get("backgroundColor")),this.trigger("connectionChange",e)},onModelDeleted:function(e){this.options.colorManager.removeCalendarColors(e.get("calendar")),this.$el.find(this.selectors.findItemByCalendar(e.get("calendar"))).remove(),this.trigger("connectionRemove",e)},addModel:function(e){var i=this.$el.find(this.selectors.findItemByOwner(e));if(i.length>0)o.notificationFlashMessage("warning",n("This calendar already exists."));else{var s=o.notificationMessage("warning",n("Adding the calendar, please wait ..."));try{var r=new a;r.set("owner",e),this.getCollection().create(r,{wait:!0,success:t.bind(function(){s.close(),o.notificationFlashMessage("success",n("The calendar was added."))},this),error:t.bind(function(e,t){s.close(),this.showAddError(t.responseJSON)},this)})}catch(l){s.close(),this.showError(l)}}},deleteModel:function(e){var i=o.notificationMessage("warning",n("Excluding the calendar, please wait ..."));try{var s=this.getCollection().get(e);s.destroy({wait:!0,success:t.bind(function(){i.close(),o.notificationFlashMessage("success",n("The calendar was excluded."))},this),error:t.bind(function(e,t){i.close(),this.showDeleteError(t.responseJSON)},this)})}catch(r){i.close(),this.showError(r)}},showAddError:function(e){this._showError(e,n("Sorry, the calendar adding was failed"))},showDeleteError:function(e){this._showError(e,n("Sorry, the calendar excluding was failed"))},showError:function(e){this._showError(e,n("Sorry, unexpected error was occurred"))},_showError:function(e,i){t.isUndefined(console)||console.error(t.isUndefined(e.stack)?e:e.stack);var n=i;s.debug&&(t.isUndefined(e.message)?!t.isUndefined(e.errors)&&t.isArray(e.errors)?n+=": "+e.errors.join():t.isString(e)&&(n+=": "+e):n+=": "+e.message),o.notificationFlashMessage("error",n)}})}),define("oro/calendar/color-manager",["underscore"],function(e){var t={colors:[["FFFFFF","AC725E"],["FFFFFF","D06B64"],["FFFFFF","F83A22"],["000000","FA573C"],["000000","FF7537"],["000000","FFAD46"],["000000","42D692"],["FFFFFF","16A765"],["000000","7BD148"],["000000","B3DC6C"],["000000","FBE983"],["000000","FAD165"],["000000","92E1C0"],["000000","9FE1E7"],["000000","9FC6E7"],["FFFFFF","4986E7"],["000000","9A9CFF"],["000000","B99AFF"],["000000","C2C2C2"],["000000","CABDBF"],["000000","CCA6AC"],["000000","F691B2"],["FFFFFF","CD74E6"],["FFFFFF","A47AE2"]],defaultColors:null,calendarColors:null,initialize:function(){this.defaultColors=this.findColors("4986E7"),this.calendarColors={}},setCalendarColors:function(e,t,i){this.calendarColors[e]={color:"#"+t,backgroundColor:"#"+i}},removeCalendarColors:function(t){e.isUndefined(this.calendarColors[t])||delete this.calendarColors[t]},getCalendarColors:function(e){return this.calendarColors[e]},applyColors:function(t,i){if(e.isEmpty(t.color)&&e.isEmpty(t.backgroundColor)){var n=this.findNextColors(i());t.color=n[0],t.backgroundColor=n[1]}else e.isEmpty(t.color)?t.color=this.defaultColors[0]:e.isEmpty(t.backgroundColor)&&(t.backgroundColor=this.defaultColors[1])},findColors:function(t){if(e.isEmpty(t))return this.findColors(this.defaultColors[1]);t=t.toUpperCase();var i=e.find(this.colors,function(e){return e[1]===t});return e.isUndefined(i)&&(i=this.findColors(this.defaultColors[1])),i},findNextColors:function(t){if(e.isEmpty(t))return this.findColors(this.defaultColors[1]);t=t.toUpperCase();var i=-1;return e.each(this.colors,function(e,n){e[1]===t&&(i=n)}),-1===i?this.findColors(this.defaultColors[1]):i+1===e.size(this.colors)?e.first(this.colors):this.colors[i+1]}};return function(){var i=e.extend({},t);return i.initialize(),i}}),function(e){function t(e,t){return function(i){return l(e.call(this,i),t)}}function i(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function n(){}function s(e){b(e),r(this,e)}function o(e){var t=p(e),i=t.year||0,n=t.month||0,s=t.week||0,o=t.day||0,r=t.hour||0,a=t.minute||0,l=t.second||0,c=t.millisecond||0;this._input=e,this._milliseconds=+c+1e3*l+6e4*a+36e5*r,this._days=+o+7*s,this._months=+n+12*i,this._data={},this._bubble()}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}function c(e,t,i,n){var s,o,r=t._milliseconds,a=t._days,l=t._months;r&&e._d.setTime(+e._d+r*i),(a||l)&&(s=e.minute(),o=e.hour()),a&&e.date(e.date()+a*i),l&&e.month(e.month()+l*i),r&&!n&&tt.updateOffset(e),(a||l)&&(e.minute(s),e.hour(o))}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){return"[object Date]"===Object.prototype.toString.call(e)}function u(e,t,i){var n,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(n=0;s>n;n++)(i&&e[n]!==t[n]||!i&&m(e[n])!==m(t[n]))&&r++;return r+o}function f(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=It[e]||Pt[t]||t}return e}function p(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=f(i),t&&(n[t]=e[i]));return n}function g(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}tt[t]=function(s,o){var r,a,l=tt.fn._lang[t],c=[];if("number"==typeof s&&(o=s,s=e),a=function(e){var t=tt().utc().set(n,e);return l.call(tt.fn._lang,t,s||"")},null!=o)return a(o);for(r=0;i>r;r++)c.push(a(r));return c}}function m(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function v(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function _(e){return y(e)?366:365}function y(e){return 0===e%4&&0!==e%100||0===e%400}function b(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[rt]<0||e._a[rt]>11?rt:e._a[at]<1||e._a[at]>v(e._a[ot],e._a[rt])?at:e._a[lt]<0||e._a[lt]>23?lt:e._a[ct]<0||e._a[ct]>59?ct:e._a[ht]<0||e._a[ht]>59?ht:e._a[dt]<0||e._a[dt]>999?dt:-1,e._pf._overflowDayOfYear&&(ot>t||t>at)&&(t=at),e._pf.overflow=t)}function w(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function x(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function C(e){return e?e.toLowerCase().replace("_","-"):e}function k(e,t){return t.abbr=e,ut[e]||(ut[e]=new n),ut[e].set(t),ut[e]}function T(e){delete ut[e]}function S(e){var t,i,n,s,o=0,r=function(e){if(!ut[e]&&ft)try{require("./lang/"+e)}catch(t){}return ut[e]};if(!e)return tt.fn._lang;if(!h(e)){if(i=r(e))return i;e=[e]}for(;o<e.length;){for(s=C(e[o]).split("-"),t=s.length,n=C(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=r(s.slice(0,t).join("-")))return i;if(n&&n.length>=t&&u(s,n,!0)>=t-1)break;t--}o++}return tt.fn._lang}function D(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function M(e){var t,i,n=e.match(vt);for(t=0,i=n.length;i>t;t++)n[t]=Lt[n[t]]?Lt[n[t]]:D(n[t]);return function(s){var o="";for(t=0;i>t;t++)o+=n[t]instanceof Function?n[t].call(s,e):n[t];return o}}function j(e,t){return e.isValid()?(t=E(t,e.lang()),zt[t]||(zt[t]=M(t)),zt[t](e)):e.lang().invalidDate()}function E(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(_t.lastIndex=0;n>=0&&_t.test(e);)e=e.replace(_t,i),_t.lastIndex=0,n-=1;return e}function F(e,t){var i;switch(e){case"DDDD":return wt;case"YYYY":case"GGGG":case"gggg":return xt;case"YYYYY":case"GGGGG":case"ggggg":return Ct;case"S":case"SS":case"SSS":case"DDD":return bt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return kt;case"a":case"A":return S(t._l)._meridiemParse;case"X":return Dt;case"Z":case"ZZ":return Tt;case"T":return St;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return yt;default:return i=new RegExp($(R(e.replace("\\","")),"i"))}}function A(e){var t=(Tt.exec(e)||[])[0],i=(t+"").match(At)||["-",0,0],n=+(60*i[1])+m(i[2]);return"+"===i[0]?-n:n}function O(e,t,i){var n,s=i._a;switch(e){case"M":case"MM":null!=t&&(s[rt]=m(t)-1);break;case"MMM":case"MMMM":n=S(i._l).monthsParse(t),null!=n?s[rt]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[at]=m(t));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=m(t));break;case"YY":s[ot]=m(t)+(m(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":s[ot]=m(t);break;case"a":case"A":i._isPm=S(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":s[lt]=m(t);break;case"m":case"mm":s[ct]=m(t);break;case"s":case"ss":s[ht]=m(t);break;case"S":case"SS":case"SSS":s[dt]=m(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=A(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=t)}}function N(e){var t,i,n,s,o,r,a,l,c,h,d=[];if(!e._d){for(n=P(e),e._w&&null==e._a[at]&&null==e._a[rt]&&(o=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[ot]?tt().weekYear():e._a[ot]},r=e._w,null!=r.GG||null!=r.W||null!=r.E?a=K(o(r.GG),r.W||1,r.E,4,1):(l=S(e._l),c=null!=r.d?B(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,h=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&h++,a=K(o(r.gg),h,c,l._week.doy,l._week.dow)),e._a[ot]=a.year,e._dayOfYear=a.dayOfYear),e._dayOfYear&&(s=null==e._a[ot]?n[ot]:e._a[ot],e._dayOfYear>_(s)&&(e._pf._overflowDayOfYear=!0),i=U(s,0,e._dayOfYear),e._a[rt]=i.getUTCMonth(),e._a[at]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=d[t]=n[t];for(;7>t;t++)e._a[t]=d[t]=null==e._a[t]?2===t?1:0:e._a[t];d[lt]+=m((e._tzm||0)/60),d[ct]+=m((e._tzm||0)%60),e._d=(e._useUTC?U:W).apply(null,d)}}function I(e){var t;e._d||(t=p(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],N(e))}function P(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function z(e){e._a=[],e._pf.empty=!0;var t,i,n,s,o,r=S(e._l),a=""+e._i,l=a.length,c=0;for(n=E(e._f,r).match(vt)||[],t=0;t<n.length;t++)s=n[t],i=(F(s,e).exec(a)||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),c+=i.length),Lt[s]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(s),O(s,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-c,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[lt]<12&&(e._a[lt]+=12),e._isPm===!1&&12===e._a[lt]&&(e._a[lt]=0),N(e),b(e)}function R(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s})}function $(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function L(e){var t,i,n,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(s=0;s<e._f.length;s++)o=0,t=r({},e),w(t),t._f=e._f[s],z(t),x(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==n||n>o)&&(n=o,i=t));r(e,i||t)}function H(e){var t,i=e._i,n=Mt.exec(i);if(n){for(e._pf.iso=!0,t=4;t>0;t--)if(n[t]){e._f=Et[t-1]+(n[6]||" ");break}for(t=0;4>t;t++)if(Ft[t][1].exec(i)){e._f+=Ft[t][0];break}Tt.exec(i)&&(e._f+="Z"),z(e)}else e._d=new Date(i)}function q(t){var i=t._i,n=pt.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?H(t):h(i)?(t._a=i.slice(0),N(t)):d(i)?t._d=new Date(+i):"object"==typeof i?I(t):t._d=new Date(i)}function W(e,t,i,n,s,o,r){var a=new Date(e,t,i,n,s,o,r);return 1970>e&&a.setFullYear(e),a}function U(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function B(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function V(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function Y(e,t,i){var n=st(Math.abs(e)/1e3),s=st(n/60),o=st(s/60),r=st(o/24),a=st(r/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",st(r/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=i,V.apply({},l)}function G(e,t,i){var n,s=i-t,o=i-e.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=tt(e).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function K(e,t,i,n,s){var o,r,a=new Date(Date.UTC(e,0)).getUTCDay();return i=null!=i?i:s,o=s-a+(a>n?7:0),r=7*(t-1)+(i-s)+o+1,{year:r>0?e:e-1,dayOfYear:r>0?r:_(e-1)+r}}function X(e){var t=e._i,i=e._f;return"undefined"==typeof e._pf&&w(e),null===t?tt.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=S().preparse(t)),tt.isMoment(t)?(e=r({},t),e._d=new Date(+t._d)):i?h(i)?L(e):z(e):q(e),new s(e))}function J(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var i=this._isUTC?"UTC":"";return null!=e?(this._d["set"+i+t](e),tt.updateOffset(this),this):this._d["get"+i+t]()}}function Z(e){tt.duration.fn[e]=function(){return this._data[e]}}function Q(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(){"undefined"==typeof ender&&(this.moment=tt)}for(var tt,it,nt="2.3.1",st=Math.round,ot=0,rt=1,at=2,lt=3,ct=4,ht=5,dt=6,ut={},ft="undefined"!=typeof module&&module.exports,pt=/^\/?Date\((\-?\d+)/i,gt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,mt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,_t=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,yt=/\d\d?/,bt=/\d{1,3}/,wt=/\d{3}/,xt=/\d{1,4}/,Ct=/[+\-]?\d{1,6}/,kt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Tt=/Z|[\+\-]\d\d:?\d\d/i,St=/T/i,Dt=/[\+\-]?\d+(\.\d{1,3})?/,Mt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,jt="YYYY-MM-DDTHH:mm:ssZ",Et=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ft=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],At=/([\+\-]|\d\d)/gi,Ot="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Nt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},It={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Pt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},zt={},Rt="DDD w W M D d".split(" "),$t="M D H h m s w W".split(" "),Lt={M:function(){return this.month()+1
},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return m(this.milliseconds()/100)},SS:function(){return l(m(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(m(e/60),2)+":"+l(m(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(m(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ht=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Rt.length;)it=Rt.pop(),Lt[it+"o"]=i(Lt[it],it);for(;$t.length;)it=$t.pop(),Lt[it+it]=t(Lt[it],2);for(Lt.DDDD=t(Lt.DDD,3),r(n.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=tt.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=tt([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(e,t,i,n):s.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return G(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tt=function(t,i,n,s){return"boolean"==typeof n&&(s=n,n=e),X({_i:t,_f:i,_l:n,_strict:s,_isUTC:!1})},tt.utc=function(t,i,n,s){var o;return"boolean"==typeof n&&(s=n,n=e),o=X({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:i,_strict:s}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var i,n,s,r=tt.isDuration(e),a="number"==typeof e,l=r?e._input:a?{}:e,c=null;return a?t?l[t]=e:l.milliseconds=e:(c=gt.exec(e))?(i="-"===c[1]?-1:1,l={y:0,d:m(c[at])*i,h:m(c[lt])*i,m:m(c[ct])*i,s:m(c[ht])*i,ms:m(c[dt])*i}):(c=mt.exec(e))&&(i="-"===c[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},l={y:s(c[2]),M:s(c[3]),d:s(c[4]),h:s(c[5]),m:s(c[6]),s:s(c[7]),w:s(c[8])}),n=new o(l),r&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},tt.version=nt,tt.defaultFormat=jt,tt.updateOffset=function(){},tt.lang=function(e,t){var i;return e?(t?k(C(e),t):null===t?(T(e),e="en"):ut[e]||S(e),i=tt.duration.fn._lang=tt.fn._lang=S(e),i._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),S(e)},tt.isMoment=function(e){return e instanceof s},tt.isDuration=function(e){return e instanceof o},it=Ht.length-1;it>=0;--it)g(Ht[it]);for(tt.normalizeUnits=function(e){return f(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?r(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},r(tt.fn=s.prototype,{clone:function(){return tt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return j(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&u(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},parsingFlags:function(){return r({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=j(this,e||tt.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;return i="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,i,1),this},subtract:function(e,t){var i;return i="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,i,-1),this},diff:function(e,t,i){var n,s,o=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),r=6e4*(this.zone()-o.zone());return t=f(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-tt(this).startOf("month")-(o-tt(o).startOf("month")))/n,s-=6e4*(this.zone()-tt(this).startOf("month").zone()-(o.zone()-tt(o).startOf("month").zone()))/n,"year"===t&&(s/=12)):(n=this-o,s="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?s:a(s)},from:function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(tt(),e)},calendar:function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=B(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,i=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+i+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(e){switch(e=f(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=f(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)},min:function(e){return e=tt.apply(null,arguments),this>e?this:e},max:function(e){return e=tt.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=A(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,tt.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(e){var t=st((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=G(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=G(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=G(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=f(e),this[e]()},set:function(e,t){return e=f(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=S(t),this)}}),it=0;it<Ot.length;it++)J(Ot[it].toLowerCase().replace(/s$/,""),Ot[it]);J("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,r(tt.duration.fn=o.prototype,{_bubble:function(){var e,t,i,n,s=this._milliseconds,o=this._days,r=this._months,l=this._data;l.milliseconds=s%1e3,e=a(s/1e3),l.seconds=e%60,t=a(e/60),l.minutes=t%60,i=a(t/60),l.hours=i%24,o+=a(i/24),l.days=o%30,r+=a(o/30),l.months=r%12,n=a(r/12),l.years=n},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*m(this._months/12)},humanize:function(e){var t=+this,i=Y(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},add:function(e,t){var i=tt.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=tt.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=f(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=f(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:tt.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"}});for(it in Nt)Nt.hasOwnProperty(it)&&(Q(it,Nt[it]),Z(it.toLowerCase()));Q("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},tt.lang("en",{ordinal:function(e){var t=e%10,i=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),ft?(module.exports=tt,et()):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,t,i){return i.config().noGlobal!==!0&&et(),tt}):et()}.call(this),define("oro/moment-l10n",["moment","oro/translator","oro/locale-settings"],function(e,t,i){var n=i.getLocale();return e.lang(n,{months:i.getCalendarMonthNames("wide",!0),monthsShort:i.getCalendarMonthNames("abbreviated",!0),weekdays:i.getCalendarDayOfWeekNames("wide",!0),weekdaysShort:i.getCalendarDayOfWeekNames("abbreviated",!0),weekdaysMin:i.getCalendarDayOfWeekNames("short",!0),week:{dow:i.getCalendarFirstDayOfWeek()-1},meridiem:function(e,i,n){return e>11?n?t("pm"):t("PM"):n?t("am"):t("AM")}}),e}),define("oro/formatter/datetime",["oro/locale-settings","moment"],function(e,t){var i="moment";return{frontendFormats:{date:e.getVendorDateTimeFormat(i,"date"),time:e.getVendorDateTimeFormat(i,"time"),datetime:e.getVendorDateTimeFormat(i,"datetime")},backendFormats:{date:"YYYY-MM-DD",time:"HH:mm:ss",datetime:"YYYY-MM-DD[T]HH:mm:ssZZ"},timezoneOffset:e.getTimeZoneOffset(),getDateFormat:function(){return this.frontendFormats.date},getTimeFormat:function(){return this.frontendFormats.time},getDateTimeFormat:function(){return this.frontendFormats.datetime},isDateValid:function(e){return t(e,this.getDateFormat()).isValid()},isTimeValid:function(e){return t(e,this.getTimeFormat()).isValid()},isDateTimeValid:function(e){return t(e,this.getDateTimeFormat()).isValid()},formatDate:function(e){return this.getMomentForBackendDate(e).format(this.getDateFormat())},unformatBackendDate:function(e){return this.getMomentForBackendDate(e).toDate()},getMomentForBackendDate:function(e){var i=t.utc(e);if(!i.isValid())throw new Error("Invalid backend date "+e);return i},formatTime:function(e){return this.getMomentForBackendTime(e).format(this.getTimeFormat())},unformatBackendTime:function(e){return this.getMomentForBackendTime(e).toDate()},getMomentForBackendTime:function(e){var i=t.utc(e,["HH:mm:ss","HH:mm"]);if(!i.isValid())throw new Error("Invalid backend time "+e);return i},formatDateTime:function(e){return this.getMomentForBackendDateTime(e).format(this.getDateTimeFormat())},unformatBackendDateTime:function(e){return this.getMomentForBackendDateTime(e).toDate()},getMomentForBackendDateTime:function(e){var i=t.utc(e).zone(this.timezoneOffset);if(!i.isValid())throw new Error("Invalid backend datetime "+e);return i},convertDateToBackendFormat:function(e){return this.getMomentForFrontendDate(e).format(this.backendFormats.date)},convertTimeToBackendFormat:function(e){return this.getMomentForFrontendTime(e).format(this.backendFormats.time)},convertDateTimeToBackendFormat:function(e,t){return this.getMomentForFrontendDateTime(e,t).format(this.backendFormats.datetime)},getMomentForFrontendDate:function(e){if(this.isDateObject(e))return this.formatDate(e);if(!this.isDateValid(e))throw new Error("Invalid frontend date "+e);return t.utc(e,this.getDateFormat())},unformatDate:function(e){return this.getMomentForFrontendDate(e).toDate()},getMomentForFrontendTime:function(e){if(this.isDateObject(e))e=this.formatTime(e);else if(!this.isTimeValid(e))throw new Error("Invalid frontend time "+e);return t.utc(e,this.getTimeFormat())},unformatTime:function(e){return this.getMomentForFrontendTime(e).toDate()},getMomentForFrontendDateTime:function(e,i){if(this.isDateObject(e))e=this.formatDateTime(e);else if(!this.isDateTimeValid(e))throw new Error("Invalid frontend datetime "+e);i=i||this.timezoneOffset;var n=this.getDateTimeFormat();return-1===n.indexOf("Z")&&(n+=" Z",e+=" "+i),t.utc(e,n).zone(i)},unformatDateTime:function(e,t){return this.getMomentForFrontendDateTime(e,t).toDate()},isDateObject:function(e){return"[object Date]"==Object.prototype.toString.call(e)}}}),define("oro/calendar",["underscore","backbone","oro/translator","oro/app","oro/messenger","oro/loading-mask","oro/calendar/event/collection","oro/calendar/event/model","oro/calendar/event/view","oro/calendar/connection/collection","oro/calendar/connection/view","oro/calendar/color-manager","oro/formatter/datetime","jquery.fullcalendar"],function(e,t,i,n,s,o,r,a,l,c,h,d,u){var f=t.$;return t.View.extend({eventsTemplate:e.template('<div><div class="calendar-container"><div class="calendar"></div><div class="loading-mask"></div></div></div>'),selectors:{calendar:".calendar",loadingMask:".loading-mask",loadingMaskContent:".loading-content"},options:{eventsOptions:{editable:!0,removable:!0,collection:null,itemFormTemplateSelector:null,itemFormDeleteButtonSelector:null,calendar:null},connectionsOptions:{collection:null,containerTemplateSelector:null}},enableEventLoading:!1,fullCalendar:null,eventView:null,loadingMask:null,colorManager:null,initialize:function(){this.options.collection=this.options.collection||new r,this.options.collection.setCalendar(this.options.calendar),this.options.collection.subordinate=this.options.eventsOptions.subordinate,this.options.newEventEditable=this.options.eventsOptions.editable,this.options.newEventRemovable=this.options.eventsOptions.removable,this.listenTo(this.getCollection(),"add",this.onEventAdded),this.listenTo(this.getCollection(),"change",this.onEventChanged),this.listenTo(this.getCollection(),"destroy",this.onEventDeleted),this.colorManager=new d},getEventsView:function(e){return this.eventView||(this.eventView=new l({model:e,calendar:this.options.calendar,formTemplateSelector:this.options.eventsOptions.itemFormTemplateSelector}),this.listenTo(this.eventView,"addEvent",this.handleEventViewAdd),this.listenTo(this.eventView,"remove",this.handleEventViewRemove)),this.eventView},handleEventViewRemove:function(){this.eventView=null},getLoadingMask:function(){return this.loadingMask||(this.loadingMask=new o,this.$el.find(this.selectors.loadingMask).append(this.loadingMask.render().$el)),this.loadingMask},getCollection:function(){return this.options.collection},getCalendarElement:function(){return this.fullCalendar||(this.fullCalendar=this.$el.find(this.selectors.calendar)),this.fullCalendar},handleEventViewAdd:function(e){this.getCollection().add(e)},onEventAdded:function(e){var t=e.toJSON();this.prepareViewModel(t),this.getCalendarElement().fullCalendar("renderEvent",t)},onEventChanged:function(t){var i=this.getCalendarElement().fullCalendar("clientEvents",t.get("id"))[0];i=e.extend(i,e.pick(t.attributes,e.keys(e.omit(i,["id"])))),this.prepareViewModel(i),this.getCalendarElement().fullCalendar("updateEvent",i)},onEventDeleted:function(e){this.getCalendarElement().fullCalendar("removeEvents",e.id)},onConnectionAddedOrDeleted:function(){this.getCalendarElement().fullCalendar("refetchEvents")},onConnectionChanged:function(){},select:function(e,t){if(!this.eventView)try{var i=new a({start:this.formatDateTimeForModel(e),end:this.formatDateTimeForModel(t),editable:this.options.newEventEditable,removable:this.options.newEventRemovable});this.getEventsView(i).render()}catch(n){this.showError(n)}},eventClick:function(e){if(!this.eventView)try{var t=this.getCollection().get(e.id);this.getEventsView(t).render()}catch(i){this.showError(i)}},eventDropOrResize:function(t){this.showSavingMask();try{this.getCollection().get(t.id).save({start:this.formatDateTimeForModel(t.start),end:this.formatDateTimeForModel(e.isNull(t.end)?t.start:t.end)},{success:e.bind(this._hideMask,this),error:e.bind(function(e,t){this.showSaveEventError(t.responseJSON)},this)})}catch(i){this.showLoadEventsError(i)}},loadEvents:function(t,i,n){var s=e.bind(function(){var e=this.getCollection().toJSON();this.prepareViewModels(e),this._hideMask(),n(e)},this);try{this.getCollection().setRange(this.formatDateTimeForModel(t),this.formatDateTimeForModel(i)),this.enableEventLoading?this.getCollection().fetch({success:s,error:e.bind(function(e,t){n({}),this.showLoadEventsError(t.responseJSON)},this)}):s()}catch(o){n({}),this.showLoadEventsError(o)}},prepareViewModels:function(t){e.each(t,this.prepareViewModel,this)},prepareViewModel:function(e){e.start=u.unformatBackendDateTime(e.start),e.end=u.unformatBackendDateTime(e.end);var t=this.colorManager.getCalendarColors(e.calendar);e.textColor=t.color,e.color=t.backgroundColor},formatDateTimeForModel:function(e){return u.convertDateTimeToBackendFormat(e)},showSavingMask:function(){this._showMask(i("Saving..."))},showLoadingMask:function(){this._showMask(i("Loading..."))},_showMask:function(e){if(this.enableEventLoading){var t=this.getLoadingMask();t.$el.find(this.selectors.loadingMaskContent).text(e),t.show()}},_hideMask:function(){this.loadingMask&&this.loadingMask.hide()},showLoadEventsError:function(e){this._showError(e,i("Sorry, calendar events were not loaded correctly"))},showSaveEventError:function(e){this._showError(e,i("Sorry, calendar event was not saved correctly"))},showError:function(e){this._showError(e,i("Sorry, unexpected error was occurred"))},_showError:function(t,i){this._hideMask(),e.isUndefined(console)||console.error(e.isUndefined(t.stack)?t:t.stack);var o=i;n.debug&&(e.isUndefined(t.message)?!e.isUndefined(t.errors)&&e.isArray(t.errors)?o+=": "+t.errors.join():e.isString(t)&&(o+=": "+t):o+=": "+t.message),s.notificationFlashMessage("error",o)},initCalendarContainer:function(){var e=this.$el.find(this.options.eventsOptions.containerSelector);if(0===e.length)throw new Error("Cannot find '"+this.options.eventsOptions.containerSelector+"' element.");e.empty(),e.append(f(this.eventsTemplate()))},initializeFullCalendar:function(){var t={selectHelper:!0,events:e.bind(this.loadEvents,this),select:e.bind(this.select,this),eventClick:e.bind(this.eventClick,this),eventDrop:e.bind(this.eventDropOrResize,this),eventResize:e.bind(this.eventDropOrResize,this),loading:e.bind(function(e){e?this.showLoadingMask():this._hideMask()},this)},i=["date","defaultView","editable","selectable","header","allDayText","allDaySlot","buttonText","titleFormat","columnFormat","timeFormat","axisFormat","slotMinutes","snapMinutes","minTime","maxTime","slotEventOverlap","firstDay","firstHour","monthNames","monthNamesShort","dayNames","dayNamesShort","contentHeight"];e.extend(t,e.pick(this.options.eventsOptions,i)),e.isUndefined(t.date)||(e.isString(t.date)&&(t.date=f.fullCalendar.parseISO8601(t.date,!0)),t.year=t.date.getFullYear(),t.month=t.date.getMonth(),t.date=t.date.getDate()),t.viewRender=e.bind(function(e){"month"!==e.name?this.getCalendarElement().fullCalendar("option","aspectRatio",1):this.getCalendarElement().fullCalendar("option","aspectRatio",1.35)},this);var n=this;t.viewDisplay=function(){n.setTimeline(),setInterval(function(){n.setTimeline()},3e5)},t.windowResize=function(){n.setTimeline()},this.getCalendarElement().fullCalendar(t),this.enableEventLoading=!0},initializeConnectionsView:function(){var t=this.$el.find(this.options.connectionsOptions.containerSelector);if(0===t.length)throw new Error("Cannot find '"+this.options.connectionsOptions.containerSelector+"' element.");t.empty();var i=e.template(f(this.options.connectionsOptions.containerTemplateSelector).html());t.append(f(i())),this.connectionsView=new h({el:t,collection:this.options.connectionsOptions.collection,calendar:this.options.calendar,itemTemplateSelector:this.options.connectionsOptions.itemTemplateSelector,colorManager:this.colorManager}),this.listenTo(this.connectionsView,"connectionAdd",this.onConnectionAddedOrDeleted),this.listenTo(this.connectionsView,"connectionChange",this.onConnectionChanged),this.listenTo(this.connectionsView,"connectionRemove",this.onConnectionAddedOrDeleted)},loadConnectionColors:function(){var t=null;this.options.connectionsOptions.collection.each(e.bind(function(e){var i=e.toJSON();this.colorManager.applyColors(i,function(){return t}),this.colorManager.setCalendarColors(i.calendar,i.color,i.backgroundColor),t=i.backgroundColor},this))},render:function(){return this.initCalendarContainer(),e.isUndefined(this.options.connectionsOptions.containerTemplateSelector)?(this.loadConnectionColors(),delete this.options.connectionsOptions):this.initializeConnectionsView(),this.initializeFullCalendar(),this},setTimeline:function(){var e=this.getCalendarElement(),t=new Date;if(t=new Date(t.getTime()+6e4*t.getTimezoneOffset()+6e4*this.options.eventsOptions.timezoneOffset),0==t.getHours()&&t.getMinutes()<=5){var i=e.find(".fc-today");i.removeClass("fc-today"),i.removeClass("fc-state-highlight"),i.next().addClass("fc-today"),i.next().addClass("fc-state-highlight")}var n=e.find(".fc-agenda-slots:visible").parent(),s=n.children(".timeline");0==s.length&&(s=f("<hr>").addClass("timeline"),n.prepend(s));var o=e.fullCalendar("getView");o.visStart<t&&o.visEnd>t?s.show():s.hide();var r=60*60*t.getHours()+60*t.getMinutes()+t.getSeconds(),a=r/86400,l=Math.floor(n.height()*a);if(s.css("top",l+"px"),"agendaWeek"==o.name){var c=e.find(".fc-today:visible");null!=c.position()&&s.css({left:c.position().left-1+"px",width:c.width()+2+"px"})}}})}),define("oro/form/state",["underscore","backbone","oro/mediator","oro/translator"],function(e,t,i,n){var s=t.$,o=function(){this.initialize.apply(this,arguments)};return e.extend(o.prototype,{UNLOAD_EVENT:"beforeunload.configFormState",LOAD_EVENT:"ready.configFormState",CONFIRMATION_MESSAGE:n("You have unsaved changes, are you sure that you want to leave?"),data:null,form:null,initialize:function(){i.once("hash_navigation_request:start",this._onDestroyHandler,this),this.form=s(".system-configuration-container").parents("form"),s(window).on(this.LOAD_EVENT,e.bind(this._collectHandler,this)),this._collectHandler(),s(window).on(this.UNLOAD_EVENT,e.bind(function(){return this.isChanged()?this.CONFIRMATION_MESSAGE:void 0},this)),i.on("hash_navigation_click",this._confirmHashChange,this)},isChanged:function(){return e.isNull(this.data)?!1:this.data!=this.getState()},getState:function(){return this.form.length?JSON.stringify(e.reject(this.form.serializeArray(),function(e){return"input_action"==e.name})):!1},_confirmHashChange:function(e){this.isChanged()&&(e.stoppedProcess=!confirm(this.CONFIRMATION_MESSAGE))},_collectHandler:function(){this.data=this.getState()},_onDestroyHandler:function(){e.isNull(this.data)?i.off("hash_navigation_request:complete",this._collectHandler,this):this.data=null,i.off("hash_navigation_click",this._confirmHashChange,this),s(window).off(this.UNLOAD_EVENT),s(document).off(this.LOAD_EVENT)}}),o}),function(e,t,i,n){function s(e){return String.fromCharCode(e.charCodeAt(0)-32)+e.slice(1)}function o(e,t,i){var n=t-(e+"").length;n=0>n?0:n;for(var s="",o=0;n>o;o++)s+=i;return s+e}var r="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||r.trim()){r="["+r+"]";var a=new RegExp("^"+r+r+"*"),l=new RegExp(r+r+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(a,"").replace(l,"")}}var c=e.Backgrid={VERSION:"0.2.6",Extension:{},requireOptions:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];if(i.isUndefined(e[s]))throw new TypeError("'"+s+"' is required")}},resolveNameToClass:function(e,t){if(i.isString(e)){var n=i.map(e.split("-"),function(e){return s(e)}).join("")+t,o=c[n]||c.Extension[n];if(i.isUndefined(o))throw new ReferenceError("Class '"+n+"' not found");return o}return e}};i.extend(c,n.Events);var h=c.Command=function(e){i.extend(this,{altKey:!!e.altKey,"char":e.char,charCode:e.charCode,ctrlKey:!!e.ctrlKey,key:e.key,keyCode:e.keyCode,locale:e.locale,location:e.location,metaKey:!!e.metaKey,repeat:!!e.repeat,shiftKey:!!e.shiftKey,which:e.which})};i.extend(h.prototype,{moveUp:function(){return 38==this.keyCode},moveDown:function(){return 40===this.keyCode},moveLeft:function(){return this.shiftKey&&9===this.keyCode},moveRight:function(){return!this.shiftKey&&9===this.keyCode},save:function(){return 13===this.keyCode},cancel:function(){return 27===this.keyCode},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var d=c.CellFormatter=function(){};i.extend(d.prototype,{fromRaw:function(e){return e},toRaw:function(e){return e}});var u=c.NumberFormatter=function(e){if(e=e?i.clone(e):{},i.extend(this,this.defaults,e),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};u.prototype=new d,i.extend(u.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(e){if(i.isNull(e)||i.isUndefined(e))return"";e=e.toFixed(~~this.decimals);var t=e.split("."),n=t[0],s=t[1]?(this.decimalSeparator||".")+t[1]:"";return n.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+s},toRaw:function(e){for(var t="",n=e.trim().split(this.orderSeparator),s=0;s<n.length;s++)t+=n[s];var o=t.split(this.decimalSeparator);t="";for(var s=0;s<o.length;s++)t=t+o[s]+".";"."===t[t.length-1]&&(t=t.slice(0,t.length-1));var r=1*(1*t).toFixed(~~this.decimals);return i.isNumber(r)&&!i.isNaN(r)?r:void 0}});var f=c.DatetimeFormatter=function(e){if(e=e?i.clone(e):{},i.extend(this,this.defaults,e),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};f.prototype=new d,i.extend(f.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(e,t){var n,s=null;if(i.isNumber(e)){var r=new Date(e);n=o(r.getUTCFullYear(),4,0)+"-"+o(r.getUTCMonth()+1,2,0)+"-"+o(r.getUTCDate(),2,0),s=o(r.getUTCHours(),2,0)+":"+o(r.getUTCMinutes(),2,0)+":"+o(r.getUTCSeconds(),2,0)}else{e=e.trim();var a=e.split(this.ISO_SPLITTER_RE)||[];n=this.DATE_RE.test(a[0])?a[0]:"",s=n&&a[1]?a[1]:this.TIME_RE.test(a[0])?a[0]:""}var l=this.DATE_RE.exec(n)||[],c=this.TIME_RE.exec(s)||[];if(t){if(this.includeDate&&i.isUndefined(l[0]))return;if(this.includeTime&&i.isUndefined(c[0]))return;if(!this.includeDate&&n)return;if(!this.includeTime&&s)return}var r=new Date(Date.UTC(1*l[1]||0,1*l[2]-1||0,1*l[3]||0,1*c[1]||null,1*c[2]||null,1*c[3]||null,1*c[5]||null)),h="";return this.includeDate&&(h=o(r.getUTCFullYear(),4,0)+"-"+o(r.getUTCMonth()+1,2,0)+"-"+o(r.getUTCDate(),2,0)),this.includeTime&&(h=h+(this.includeDate?"T":"")+o(r.getUTCHours(),2,0)+":"+o(r.getUTCMinutes(),2,0)+":"+o(r.getUTCSeconds(),2,0),this.includeMilli&&(h=h+"."+o(r.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(h+="Z"),h},fromRaw:function(e){return i.isNull(e)||i.isUndefined(e)?"":this._convert(e)},toRaw:function(e){return this._convert(e,!0)}});var p=c.StringFormatter=function(){};p.prototype=new d,i.extend(p.prototype,{fromRaw:function(e){return i.isUndefined(e)||i.isNull(e)?"":e+""}});var g=c.EmailFormatter=function(){};g.prototype=new d,i.extend(g.prototype,{toRaw:function(e){var t=e.trim().split("@");return 2===t.length&&i.all(t)?e:void 0}});var m=c.SelectFormatter=function(){};m.prototype=new d,i.extend(m.prototype,{fromRaw:function(e){return i.isArray(e)?e:null!=e?[e]:[]}});var v=c.CellEditor=n.View.extend({initialize:function(e){c.requireOptions(e,["formatter","column","model"]),this.formatter=e.formatter,this.column=e.column,this.column instanceof T||(this.column=new T(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)
},postRender:function(e,t){return(null==t||t.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),_=c.InputCellEditor=v.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(e){v.prototype.initialize.apply(this,arguments),e.placeholder&&this.$el.attr("placeholder",e.placeholder)},render:function(){return this.$el.val(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this},saveOrCancel:function(e){var t=this.formatter,n=this.model,s=this.column,o=new h(e),r="blur"===e.type;if(o.moveUp()||o.moveDown()||o.moveLeft()||o.moveRight()||o.save()||r){e.preventDefault(),e.stopPropagation();var a=this.$el.val(),l=t.toRaw(a);i.isUndefined(l)?n.trigger("backgrid:error",n,s,a):(n.set(s.get("name"),l),n.trigger("backgrid:edited",n,s,o))}else o.cancel()&&(e.stopPropagation(),n.trigger("backgrid:edited",n,s,o))},postRender:function(e,t){if(null==t||t.get("name")==this.column.get("name"))if("right"===this.$el.css("text-align")){var i=this.$el.val();this.$el.focus().val(null).val(i)}else this.$el.focus();return this}}),y=c.Cell=n.View.extend({tagName:"td",formatter:new d,editor:_,events:{click:"enterEditMode"},initialize:function(e){c.requireOptions(e,["model","column"]),this.column=e.column,this.column instanceof T||(this.column=new T(this.column)),this.formatter=c.resolveNameToClass(this.column.get("formatter")||this.formatter,"Formatter"),this.editor=c.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(this.model,"change:"+this.column.get("name"),function(){this.$el.hasClass("editor")||this.render()}),this.listenTo(this.model,"backgrid:error",this.renderError)},render:function(){return this.$el.empty(),this.$el.text(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this.delegateEvents(),this},enterEditMode:function(){var e=this.model,t=this.column;t.get("editable")&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),e.trigger("backgrid:edit",e,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),e.trigger("backgrid:editing",e,t,this,this.currentEditor))},renderError:function(e,t){(null==t||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this,arguments),delete this.currentEditor),n.View.prototype.remove.apply(this,arguments)}}),b=c.StringCell=y.extend({className:"string-cell",formatter:new p});c.UriCell=y.extend({className:"uri-cell",render:function(){this.$el.empty();var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.append(t("<a>",{tabIndex:-1,href:e,title:e,target:"_blank"}).text(e)),this.delegateEvents(),this}}),c.EmailCell=b.extend({className:"email-cell",formatter:new g,render:function(){this.$el.empty();var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.append(t("<a>",{tabIndex:-1,href:"mailto:"+e,title:e}).text(e)),this.delegateEvents(),this}});var w=c.NumberCell=y.extend({className:"number-cell",decimals:u.prototype.defaults.decimals,decimalSeparator:u.prototype.defaults.decimalSeparator,orderSeparator:u.prototype.defaults.orderSeparator,formatter:u,initialize:function(){y.prototype.initialize.apply(this,arguments),this.formatter=new this.formatter({decimals:this.decimals,decimalSeparator:this.decimalSeparator,orderSeparator:this.orderSeparator})}});c.IntegerCell=w.extend({className:"integer-cell",decimals:0});var x=c.DatetimeCell=y.extend({className:"datetime-cell",includeDate:f.prototype.defaults.includeDate,includeTime:f.prototype.defaults.includeTime,includeMilli:f.prototype.defaults.includeMilli,formatter:f,initialize:function(){y.prototype.initialize.apply(this,arguments),this.formatter=new this.formatter({includeDate:this.includeDate,includeTime:this.includeTime,includeMilli:this.includeMilli});var e=this.includeDate?"YYYY-MM-DD":"";e+=this.includeDate&&this.includeTime?"T":"",e+=this.includeTime?"HH:mm:ss":"",e+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:i.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:e})})}});c.DateCell=x.extend({className:"date-cell",includeTime:!1}),c.TimeCell=x.extend({className:"time-cell",includeDate:!1});var C=c.BooleanCellEditor=v.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.prop("checked",e),this},enterOrExitEditMode:function(e){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new h(e))}},saveOrCancel:function(e){var t=this.model,i=this.column,n=this.formatter,s=new h(e);if(s.passThru()&&"change"!=e.type)return!0;s.cancel()&&(e.stopPropagation(),t.trigger("backgrid:edited",t,i,s));var o=this.$el;if(s.save()||s.moveLeft()||s.moveRight()||s.moveUp()||s.moveDown()){e.preventDefault(),e.stopPropagation();var r=n.toRaw(o.prop("checked"));t.set(i.get("name"),r),t.trigger("backgrid:edited",t,i,s)}else if("change"==e.type){var r=n.toRaw(o.prop("checked"));t.set(i.get("name"),r),o.focus()}}});c.BooleanCell=y.extend({className:"boolean-cell",editor:C,events:{click:"enterEditMode"},render:function(){return this.$el.empty(),this.$el.append(t("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(this.model.get(this.column.get("name")))})),this.delegateEvents(),this}});var k=c.SelectCellEditor=v.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:i.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>'),setOptionValues:function(e){this.optionValues=e},setMultiple:function(e){this.multiple=e,this.$el.prop("multiple",e)},_renderOptions:function(e,t){for(var i="",n=0;n<e.length;n++)i+=this.template({text:e[n][0],value:e[n][1],selected:t.indexOf(e[n][1])>-1});return i},render:function(){this.$el.empty();var e=i.result(this,"optionValues"),n=this.formatter.fromRaw(this.model.get(this.column.get("name")));if(!i.isArray(e))throw TypeError("optionValues must be an array");for(var s=null,o=null,s=null,r=null,a=null,l=0;l<e.length;l++){var s=e[l];if(i.isArray(s))o=s[0],s=s[1],this.$el.append(this.template({text:o,value:s,selected:n.indexOf(s)>-1}));else{if(!i.isObject(s))throw TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");r=s.name,a=t("<optgroup></optgroup>",{label:r}),a.append(this._renderOptions(s.values,n)),this.$el.append(a)}}return this.delegateEvents(),this},save:function(e){var t=this.model,i=this.column;t.set(i.get("name"),this.formatter.toRaw(this.$el.val())),t.trigger("backgrid:edited",t,i,new h(e))},close:function(e){var t=this.model,i=this.column,n=new h(e);n.cancel()?(e.stopPropagation(),t.trigger("backgrid:edited",t,i,new h(e))):(n.save()||n.moveLeft()||n.moveRight()||n.moveUp()||n.moveDown()||"blur"==e.type)&&(e.preventDefault(),e.stopPropagation(),"blur"==e.type&&1===this.$el.find("option").length&&t.set(i.get("name"),this.formatter.toRaw(this.$el.val())),t.trigger("backgrid:edited",t,i,new h(e)))}});c.SelectCell=y.extend({className:"select-cell",editor:k,multiple:!1,formatter:new m,optionValues:void 0,delimiter:", ",initialize:function(){y.prototype.initialize.apply(this,arguments),c.requireOptions(this,["optionValues"]),this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")==this.column.get("name")&&(n.setOptionValues(this.optionValues),n.setMultiple(this.multiple))})},render:function(){this.$el.empty();var e=this.optionValues,t=this.formatter.fromRaw(this.model.get(this.column.get("name"))),n=[];try{if(!i.isArray(e)||i.isEmpty(e))throw new TypeError;for(var s=0;s<t.length;s++)for(var o=t[s],r=0;r<e.length;r++){var a=e[r];if(i.isArray(a)){var l=a[0],a=a[1];a==o&&n.push(l)}else{if(!i.isObject(a))throw new TypeError;for(var c=a.values,h=0;h<c.length;h++){var d=c[h];d[1]==o&&n.push(d[0])}}}this.$el.append(n.join(this.delimiter))}catch(u){if(u instanceof TypeError)throw TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw u}return this.delegateEvents(),this}});var T=c.Column=n.Model.extend({defaults:{name:void 0,label:void 0,sortable:!0,editable:!0,renderable:!0,formatter:void 0,cell:void 0,headerCell:void 0},initialize:function(e){c.requireOptions(e,["cell","name"]),this.has("label")||this.set({label:this.get("name")},{silent:!0});var t=c.resolveNameToClass(this.get("headerCell"),"HeaderCell"),i=c.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:i,headerCell:t},{silent:!0})}}),S=c.Columns=n.Collection.extend({model:T}),D=c.Row=n.View.extend({tagName:"tr",requiredOptions:["columns","model"],initialize:function(e){c.requireOptions(e,this.requiredOptions);var t=this.columns=e.columns;t instanceof n.Collection||(t=this.columns=new S(t));for(var i=this.cells=[],s=0;s<t.length;s++)i.push(this.makeCell(t.at(s),e));this.listenTo(t,"change:renderable",function(e,t){for(var n=0;n<i.length;n++){var s=i[n];s.column.get("name")==e.get("name")&&(t?s.$el.show():s.$el.hide())}}),this.listenTo(t,"add",function(t,n){var s=n.indexOf(t),o=this.makeCell(t,e);i.splice(s,0,o),o.column.get("renderable")||o.$el.hide();var r=this.$el;0===s?r.prepend(o.render().$el):s===n.length-1?r.append(o.render().$el):r.children().eq(s).before(o.render().$el)}),this.listenTo(t,"remove",function(e,t,n){i[n.index].remove(),i.splice(n.index,1)})},makeCell:function(e){return new(e.get("cell"))({column:e,model:this.model})},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.cells.length;t++){var i=this.cells[t];e.appendChild(i.render().el),i.column.get("renderable")||i.$el.hide()}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.cells.length;e++){var t=this.cells[e];t.remove.apply(t,arguments)}return n.View.prototype.remove.apply(this,arguments)}}),M=c.EmptyRow=n.View.extend({tagName:"tr",emptyText:null,initialize:function(e){c.requireOptions(e,["emptyText","columns"]),this.emptyText=e.emptyText,this.columns=e.columns},render:function(){this.$el.empty();var e=document.createElement("td");return e.setAttribute("colspan",this.columns.length),e.textContent=this.emptyText,this.el.setAttribute("class","empty"),this.el.appendChild(e),this}}),j=c.HeaderCell=n.View.extend({tagName:"th",events:{"click a":"onClick"},_direction:null,initialize:function(e){c.requireOptions(e,["column","collection"]),this.column=e.column,this.column instanceof T||(this.column=new T(this.column)),this.listenTo(this.collection,"backgrid:sort",this._resetCellDirection)},direction:function(e){return arguments.length&&(this._direction&&this.$el.removeClass(this._direction),e&&this.$el.addClass(e),this._direction=e),this._direction},_resetCellDirection:function(e,t,i,n){n==this.collection&&(e!==this.column.get("name")?this.direction(null):this.direction(t))},onClick:function(e){e.preventDefault();var t=this.column.get("name");this.column.get("sortable")&&("ascending"===this.direction()?this.sort(t,"descending",function(e,i){var n=e.get(t),s=i.get(t);return n===s?0:n>s?-1:1}):"descending"===this.direction()?this.sort(t,null):this.sort(t,"ascending",function(e,i){var n=e.get(t),s=i.get(t);return n===s?0:s>n?-1:1}))},sort:function(e,t,i){i=i||this._cidComparator;var s=this.collection;if(n.PageableCollection&&s instanceof n.PageableCollection){var o;o="ascending"===t?-1:"descending"===t?1:null,s.setSorting(o?e:null,o),"client"==s.mode?(s.fullCollection.comparator||(s.fullCollection.comparator=i),s.fullCollection.sort()):s.fetch({reset:!0})}else s.comparator=i,s.sort();this.collection.trigger("backgrid:sort",e,t,i,this.collection)},_cidComparator:function(e,t){var n=e.cid,s=t.cid;if(!i.isUndefined(n)&&!i.isUndefined(s)){if(n=1*n.slice(1),s=1*s.slice(1),s>n)return-1;if(n>s)return 1}return 0},render:function(){this.$el.empty();var e=t("<a>").text(this.column.get("label")).append("<b class='sort-caret'></b>");return this.$el.append(e),this.delegateEvents(),this}});c.HeaderRow=c.Row.extend({requiredOptions:["columns","collection"],initialize:function(){c.Row.prototype.initialize.apply(this,arguments)},makeCell:function(e,t){var i=e.get("headerCell")||t.headerCell||j;return i=new i({column:e,collection:this.collection})}});var E=c.Header=n.View.extend({tagName:"thead",initialize:function(e){c.requireOptions(e,["columns","collection"]),this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new S(this.columns)),this.row=new c.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),n.View.prototype.remove.apply(this,arguments)}}),F=c.Body=n.View.extend({tagName:"tbody",initialize:function(e){c.requireOptions(e,["columns","collection"]),this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new S(this.columns)),this.row=e.row||D,this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this.emptyText=e.emptyText,this._unshiftEmptyRowMayBe();var t=this.collection;this.listenTo(t,"add",this.insertRow),this.listenTo(t,"remove",this.removeRow),this.listenTo(t,"sort",this.refresh),this.listenTo(t,"reset",this.refresh),this.listenTo(t,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){0===this.rows.length&&null!=this.emptyText&&this.rows.unshift(new M({emptyText:this.emptyText,columns:this.columns}))},insertRow:function(e,t,s){if(this.rows[0]instanceof M&&this.rows.pop().remove(),!(t instanceof n.Collection||s))return this.collection.add(e,s=t),void 0;s=i.extend({render:!0},s||{});var o=new this.row({columns:this.columns,model:e}),r=t.indexOf(e);this.rows.splice(r,0,o);var a=this.$el,l=a.children(),c=o.render().$el;s.render&&(r>=l.length?a.append(c):l.eq(r).before(c))},removeRow:function(e,t,n){return n?((i.isUndefined(n.render)||n.render)&&this.rows[n.index].remove(),this.rows.splice(n.index,1),this._unshiftEmptyRowMayBe(),void 0):(this.collection.remove(e,n=t),this._unshiftEmptyRowMayBe(),void 0)},refresh:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].remove();return this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.rows.length;t++){var i=this.rows[t];e.appendChild(i.render().el)}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];t.remove.apply(t,arguments)}return n.View.prototype.remove.apply(this,arguments)},moveToNextCell:function(e,t,i){var n=this.collection.indexOf(e),s=this.columns.indexOf(t);if(i.moveUp()||i.moveDown()||i.moveLeft()||i.moveRight()||i.save()){var o=this.columns.length,r=o*this.collection.length;if(i.moveUp()||i.moveDown()){var a=this.rows[n+(i.moveUp()?-1:1)];a&&a.cells[s].enterEditMode()}else if(i.moveLeft()||i.moveRight())for(var l=i.moveRight(),c=n*o+s+(l?1:-1);c>=0&&r>c;l?c++:c--){var h=~~(c/o),d=c-h*o,u=this.rows[h].cells[d];if(u.column.get("renderable")&&u.column.get("editable")){u.enterEditMode();break}}}this.rows[n].cells[s].exitEditMode()}});c.Footer=n.View.extend({tagName:"tfoot",initialize:function(e){c.requireOptions(e,["columns","collection"]),this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new c.Columns(this.columns))}}),c.Grid=n.View.extend({tagName:"table",className:"backgrid",header:E,body:F,footer:null,initialize:function(e){c.requireOptions(e,["columns","collection"]),e.columns instanceof n.Collection||(e.columns=new S(e.columns)),this.columns=e.columns;var t=i.omit(e,["el","id","attributes","className","tagName","events"]);this.header=e.header||this.header,this.header=new this.header(t),this.body=e.body||this.body,this.body=new this.body(t),this.footer=e.footer||this.footer,this.footer&&(this.footer=new this.footer(t)),this.listenTo(this.columns,"reset",function(){this.header=new(this.header.remove().constructor)(t),this.body=new(this.body.remove().constructor)(t),this.footer&&(this.footer=new(this.footer.remove().constructor)(t)),this.render()})},insertRow:function(e,t,i){return this.body.insertRow(e,t,i)},removeRow:function(e,t,i){return this.body.removeRow(e,t,i)},insertColumn:function(e,t){return t=t||{render:!0},this.columns.add(e,t),this},removeColumn:function(e,t){return this.columns.remove(e,t),this},render:function(){return this.$el.empty(),this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),n.View.prototype.remove.apply(this,arguments)}})}(this,jQuery,_,Backbone),define("backgrid",["jquery","underscore","backbone"],function(e){return function(){var t;return t||e.Backgrid}}(this)),define("oro/datagrid/action-launcher",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({enabled:!0,tagName:"a",onClickReturnValue:!0,action:void 0,label:void 0,icon:void 0,iconClassName:void 0,className:void 0,link:"javascript:void(0);",runAction:!0,template:t.template('<<%= tagName %> href="<%= link %>" class="action<%= className ? " " + className : "" %><%= !enabled ? " disabled" : "" %>" <%= attributesTemplate({attributes: attributes}) %> title="<%= label %>"><% if (icon) { %><i class="icon-<%= icon %> hide-text"><%= label %></i><% } else { %><% if (iconClassName) { %><i class="<%= iconClassName %>"></i><% } %> <%= label %><% } %></<%= tagName %>>'),attributesTemplate:t.template('<% _.each(attributes, function(attribute, name) { %><%= name %>="<%= attribute %>" <% }) %>'),events:{click:"onClick"},initialize:function(e){if(e=e||{},!e.action)throw new TypeError("'action' is required");e.template&&(this.template=e.template),e.label&&(this.label=e.label),e.icon&&(this.icon=e.icon),e.link&&(this.link=e.link),e.iconClassName&&(this.iconClassName=e.iconClassName),e.className&&(this.className=e.className),t.has(e,"runAction")&&(this.runAction=e.runAction),t.has(e,"onClickReturnValue")&&(this.onClickReturnValue=e.onClickReturnValue),this.action=e.action,i.View.prototype.initialize.apply(this,arguments)},render:function(){this.$el.empty();var t=e(this.template({label:this.label||this.action.label,icon:this.icon,className:this.className,iconClassName:this.iconClassName,link:this.link,action:this.action,attributes:this.attributes,attributesTemplate:this.attributesTemplate,enabled:this.enabled,tagName:this.tagName}));return this.setElement(t),this},onClick:function(){return this.enabled?(this.trigger("click",this),this.runAction?(this.action.run(),!1):this.onClickReturnValue):this.onClickReturnValue},disable:function(){return this.enabled=!1,this.$el.addClass("disabled"),this},enable:function(){return this.enabled=!0,this.$el.removeClass("disabled"),this}})}),define("oro/datagrid/abstract-action",["jquery","underscore","backbone","routing","oro/navigation","oro/translator","oro/mediator","oro/messenger","oro/error","oro/modal","oro/datagrid/action-launcher"],function(e,t,i,n,s,o,r,a,l,c,h){return i.View.extend({launcherPrototype:h,launcherOptions:void 0,name:null,datagrid:null,route:null,route_parameters:null,confirmation:!1,confirmModal:void 0,frontend_type:null,frontend_handle:null,frontend_options:null,identifierFieldName:"id",messages:{},dispatched:!1,defaultMessages:{confirm_title:o("Execution Confirmation"),confirm_content:o("Are you sure you want to do this?"),confirm_ok:o("Yes, do it"),success:o("Action performed."),error:o("Action is not performed."),empty_selection:o("Please, select item to perform action.")},initialize:function(e){if(e=e||{},!e.datagrid)throw new TypeError("'datagrid' is required");this.datagrid=e.datagrid,t.defaults(this.messages,this.defaultMessages),e.launcherOptions&&(this.launcherOptions=t.extend({},this.launcherOptions,e.launcherOptions)),this.launcherOptions=t.extend({action:this},this.launcherOptions),i.View.prototype.initialize.apply(this,arguments)},createLauncher:function(e){return e=e||{},t.isUndefined(e.icon)&&!t.isUndefined(this.icon)&&(e.icon=this.icon),t.defaults(e,this.launcherOptions),new this.launcherPrototype(e)},run:function(){var e={doExecute:!0};this.trigger("preExecute",this,e),e.doExecute&&(this.execute(),this.trigger("postExecute",this,e))},execute:function(){var e=this.getEventName();r.off(e,this.executeConfiguredAction),r.once(e,this.executeConfiguredAction,this),this._confirmationExecutor(t.bind(function(){r.trigger(e,this)},this))},getEventName:function(){return"grid_action_execute:"+this.datagrid.name+":"+this.name},executeConfiguredAction:function(e){"ajax"==e.frontend_handle?this._handleAjax(e):"redirect"==e.frontend_handle?this._handleRedirect(e):this._handleWidget(e)},_confirmationExecutor:function(e){this.confirmation?this.getConfirmDialog(e).open():e()},_handleWidget:function(e){e.dispatched||(e.frontend_options.url=e.frontend_options.url||this.getLinkWithParameters(),e.frontend_options.title=e.frontend_options.title||this.label,require(["oro/"+e.frontend_handle+"-widget"],function(t){var i=new t(e.frontend_options);i.render()}))},_handleRedirect:function(e){if(!e.dispatched){var t=e.getLinkWithParameters(),i=s.getInstance();i?i.processRedirect({fullRedirect:!1,location:t}):location.href=t}},_handleAjax:function(t){t.dispatched||(t.datagrid.showLoading(),e.ajax({url:t.getLink(),data:t.getActionParameters(),context:t,dataType:"json",error:t._onAjaxError,success:t._onAjaxSuccess}))},_onAjaxError:function(e){l.dispatch(null,e),this.datagrid.hideLoading()},_onAjaxSuccess:function(e){this.datagrid.hideLoading(),this.datagrid.collection.fetch();var t=e.successful?this.messages.success:this.messages.error,i=e.message||t;i&&a.notificationFlashMessage(e.successful?"success":"error",i)},getLink:function(e){return t.isUndefined(e)&&(e={}),n.generate(this.route,t.extend(this.route_parameters,e))},getLinkWithParameters:function(){return this.getLink(this.getActionParameters())},getActionParameters:function(){return{}},getConfirmDialog:function(e){return this.confirmModal||(this.confirmModal=new c({title:this.messages.confirm_title,content:this.messages.confirm_content,okText:this.messages.confirm_ok}).on("ok",e)),this.confirmModal}})}),define("oro/datagrid/model-action",["underscore","oro/datagrid/abstract-action"],function(e,t){return t.extend({model:null,link:void 0,backUrl:!1,backUrlParameter:"back",initialize:function(i){if(i=i||{},!i.model)throw new TypeError("'model' is required");this.model=i.model,e.has(i,"backUrl")&&(this.backUrl=i.backUrl),e.has(i,"backUrlParameter")&&(this.backUrlParameter=i.backUrlParameter),t.prototype.initialize.apply(this,arguments)},getLink:function(){if(!this.link)throw new TypeError("'link' is required");var t;if(t=this.model.has(this.link)?this.model.get(this.link):this.link,this.backUrl){var i=e.isBoolean(this.backUrl)?window.location.href:this.backUrl;i=encodeURIComponent(i),t=this.addUrlParameter(t,this.backUrlParameter,i)}return t},addUrlParameter:function(e,t,i){var n,s,o=!0;if(e.indexOf("#")>0){var r=e.indexOf("#");n=e.substring(e.indexOf("#"),e.length)}else n="",r=e.length;s=e.substring(0,r);var a=s.split("?"),l="";if(a.length>1)for(var c=a[1].split("&"),h=0;h<c.length;h++){var d=c[h].split("=");o&&d[0]==t||(""==l?l="?":l+="&",l+=d[0]+"="+(d[1]?d[1]:""))}return""==l&&(l="?"),""!==l&&"?"!=l&&(l+="&"),l+=t+"="+(i?i:""),a[0]+l+n}})}),define("oro/datagrid/delete-action",["underscore","oro/messenger","oro/translator","oro/delete-confirmation","oro/modal","oro/datagrid/model-action"],function(e,t,i,n,s,o){return o.extend({errorModal:void 0,confirmModal:void 0,execute:function(){this.getConfirmDialog().open()},doDelete:function(){var e=this;this.model.destroy({url:this.getLink(),wait:!0,error:function(){e.getErrorDialog().open()},success:function(){var e=i("Item deleted");t.notificationFlashMessage("success",e)}})},getConfirmDialog:function(){return this.confirmModal||(this.confirmModal=new n({content:i("Are you sure you want to delete this item?")}),this.confirmModal.on("ok",e.bind(this.doDelete,this))),this.confirmModal},getErrorDialog:function(){return this.errorModal||(this.errorModal=new s({title:i("Delete Error"),content:i("Cannot delete item."),cancelText:!1})),this.errorModal}})}),define("oro/datagrid/ajax-action",["oro/datagrid/model-action"],function(e){return e.extend()}),define("oro/datagrid/mass-action",["underscore","oro/messenger","oro/translator","oro/modal","oro/datagrid/abstract-action"],function(e,t,i,n,s){return s.extend({messages:{},defaultMessages:{confirm_title:i("Mass Action Confirmation"),confirm_content:i("Are you sure you want to do this?"),confirm_ok:i("Yes, do it"),success:i("Mass action performed."),error:i("Mass action is not performed."),empty_selection:i("Please, select items to perform mass action.")},initialize:function(){s.prototype.initialize.apply(this,arguments),this.route_parameters=e.extend(this.route_parameters,{gridName:this.datagrid.name,actionName:this.name})},execute:function(){var i=this.datagrid.getSelectionState();e.isEmpty(i.selectedModels)&&i.inset?t.notificationFlashMessage("warning",this.messages.empty_selection):s.prototype.execute.call(this)},getActionParameters:function(){var t=this.datagrid.getSelectionState(),i=this.datagrid.collection,n=e.map(t.selectedModels,function(e){return e.get(this.identifierFieldName)},this),s={inset:t.inset?1:0,values:n.join(",")};return s=i.processFiltersParams(s,null,"filters")},_onAjaxSuccess:function(){this.datagrid.resetSelectionState(),s.prototype._onAjaxSuccess.apply(this,arguments)}})}),define("oro/datagrid/delete-mass-action",["underscore","oro/translator","oro/delete-confirmation","oro/datagrid/mass-action"],function(e,t,i,n){return n.extend({messages:{},defaultMessages:{confirm_title:t("Delete Confirmation"),confirm_content:t("Are you sure you want to do remove selected items?"),confirm_ok:t("Yes, Delete"),success:t("Selected items were removed."),error:t("Selected items were not removed."),empty_selection:t("Please, select items to remove.")},initialize:function(){n.prototype.initialize.apply(this,arguments)},getConfirmDialog:function(e){return this.confirmModal||(this.confirmModal=new i({title:this.messages.confirm_title,content:this.messages.confirm_content,okText:this.messages.confirm_ok}),this.confirmModal.on("ok",e)),this.confirmModal}})}),define("oro/datagrid/navigate-action",["underscore","oro/mediator","oro/datagrid/model-action"],function(e,t,i){return i.extend({useDirectLauncherLink:!0,initialize:function(t){i.prototype.initialize.apply(this,arguments),t.useDirectLauncherLink&&(this.useDirectLauncherLink=t.useDirectLauncherLink),this.on("preExecute",e.bind(this._preExecuteSubscriber,this)),this.useDirectLauncherLink&&(this.launcherOptions=e.extend({link:this.getLink(),runAction:!1},this.launcherOptions))},execute:function(){window.location.href=this.getLink()},_preExecuteSubscriber:function(e,i){t.trigger("grid_action:navigateAction:preExecute",e,i)}})}),define("oro/datagrid/refresh-collection-action",["oro/datagrid/abstract-action"],function(e){return e.extend({collection:void 0,initialize:function(t){if(t=t||{},!t.datagrid)throw new TypeError("'datagrid' is required");this.collection=t.datagrid.collection,e.prototype.initialize.apply(this,arguments)},execute:function(){this.datagrid.setAdditionalParameter("refresh",!0),this.collection.fetch(),this.datagrid.removeAdditionalParameter("refresh")}})}),define("oro/datagrid/reset-collection-action",["oro/datagrid/abstract-action"],function(e){return e.extend({collection:void 0,initialize:function(t){if(t=t||{},!t.datagrid)throw new TypeError("'datagrid' is required");this.collection=t.datagrid.collection,e.prototype.initialize.apply(this,arguments)},execute:function(){this.collection.updateState(this.collection.initialState),this.collection.fetch()}})}),define("oro/datagrid/actions-panel",["underscore","backbone"],function(e,t){return t.View.extend({className:"btn-group",actions:[],launchers:[],initialize:function(e){e=e||{},e.actions&&this.setActions(e.actions),t.View.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.empty(),e.each(this.launchers,function(e){this.$el.append(e.render().$el)},this),this},setActions:function(t){this.actions=[],this.launchers=[],e.each(t,function(e){this.addAction(e)},this)},addAction:function(e){this.actions.push(e),this.launchers.push(e.createLauncher())},disable:function(){return e.each(this.launchers,function(e){e.disable()}),this},enable:function(){return e.each(this.launchers,function(e){e.enable()}),this}})}),define("oro/datagrid/action-cell",["jquery","underscore","backgrid"],function(e,t,i){return i.Cell.extend({className:"action-cell",actions:void 0,launchers:void 0,template:t.template('<div class="more-bar-holder"><div class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle" href="javascript:void(0);">...</a><ul class="dropdown-menu pull-right launchers-dropdown-menu"></ul></div></div>'),launchersListTemplate:t.template('<% if (withIcons) { %><li><ul class="nav nav-pills icons-holder launchers-list"></ul></li><% } else { %><li class="well-small"><ul class="unstyled launchers-list"></ul></li><% } %>'),launcherItemTemplate:t.template('<li class="launcher-item"></li>'),events:{click:"_onCellClick"},initialize:function(){i.Cell.prototype.initialize.apply(this,arguments),this.actions=this.createActions(),t.each(this.actions,function(e){e.on("run",this.onActionRun,this)},this),this.launchers=this.createLaunchers()},onActionRun:function(){this.$(".dropdown.open").removeClass("open")},createActions:function(){var e=[],i=this.column.get("actions"),n=this.model.get("action_configuration");return t.each(i,function(i,s){(t.isUndefined(n)||t.isUndefined(n[s])||n[s])&&e.push(this.createAction(i))},this),e},createAction:function(e){return new e({model:this.model,datagrid:this.column.get("datagrid")})},createLaunchers:function(){var e=[];return t.each(this.actions,function(t){var i={},n=t.createLauncher(i);e.push(n)},this),e},render:function(){if(t.isEmpty(this.launchers))return this.$el.empty(),this;this.$el.empty().append(this.template());var e=this.getLaunchersByIcons(),i=this.$(".launchers-dropdown-menu");return e.withIcons.length&&this.renderLaunchersList(e.withIcons,{withIcons:!0}).appendTo(i),e.withIcons.length&&e.withoutIcons.length&&i.append('<li class="divider"></li>'),e.withoutIcons.length&&this.renderLaunchersList(e.withoutIcons,{withIcons:!1}).appendTo(i),this},renderLaunchersList:function(i,n){n=n||{};var s=e(this.launchersListTemplate(n)),o=s.filter(".launchers-list").length?s:e(".launchers-list",s);return t.each(i,function(e){o.append(this.renderLauncherItem(e))},this),s},renderLauncherItem:function(t,i){i=i||{};var n=e(this.launcherItemTemplate(i)),s=n.filter(".launcher-item").length?n:e(".launcher-item",n);return s.append(t.render().$el),n},getLaunchersByIcons:function(){var e={withIcons:[],withoutIcons:[]};return t.each(this.launchers,function(t){t.icon?e.withIcons.push(t):e.withoutIcons.push(t)
},this),e},_onCellClick:function(e){this.$(".dropdown-toggle").dropdown("toggle"),e.stopPropagation()}})}),define("oro/datagrid/action-column",["underscore","backgrid","oro/datagrid/action-cell"],function(e,t,i){return t.Column.extend({defaults:e.extend({},t.Column.prototype.defaults,{name:"",label:"",editable:!1,cell:i,headerCell:t.HeaderCell.extend({className:"action-column"}),sortable:!1,actions:[]}),initialize:function(i){i=i||{},i.cell||(i.cell=this.defaults.cell),i.name||(i.name=this.defaults.name),(!i.actions||e.isEmpty(i.actions))&&this.set("renderable",!1),t.Column.prototype.initialize.apply(this,arguments)}})}),define("oro/datagrid/row",["jquery","underscore","backgrid"],function(e,t,i){return i.Row.extend({events:{click:"onClick"},clickData:{counter:0,timeout:100,hasSelectedText:!1},onClick:function(i){var n=i.target,s=e(i.target).parent().get(0);(!this.el!=n||!this.el!=s)&&(this.clickData.counter++,1!=this.clickData.counter||this._hasSelectedText()?this.clickData.counter=0:t.delay(t.bind(function(){this._hasSelectedText()||1!=this.clickData.counter||this.trigger("clicked",this,i),this.clickData.counter=0},this),this.clickData.timeout))},_hasSelectedText:function(){var e="";return t.isFunction(window.getSelection)?e=window.getSelection().toString():t.isUndefined(document.selection)||"Text"!=document.selection.type||(e=document.selection.createRange().text),!t.isEmpty(e)},makeCell:function(e){var t=new(e.get("cell"))({column:e,model:this.model});return this._listenToCellEvents(t),t},_listenToCellEvents:function(e){e.listenRowClick&&t.isFunction(e.onRowClicked)&&this.on("clicked",t.bind(e.onRowClicked,e))}})}),define("oro/datagrid/body",["underscore","backgrid","oro/datagrid/row"],function(e,t,i){return t.Body.extend({row:i,rowClassName:void 0,initialize:function(e){e=e||{},e.row||(e.row=this.row),e.rowClassName&&(this.rowClassName=e.rowClassName),t.Body.prototype.initialize.apply(this,arguments),this._listenToRowsEvents(this.rows)},refresh:function(){return t.Body.prototype.refresh.apply(this,arguments),this._listenToRowsEvents(this.rows),this},insertRow:function(e,i){t.Body.prototype.insertRow.apply(this,arguments);var n=i.indexOf(e);n<this.rows.length&&this._listenToOneRowEvents(this.rows[n])},_listenToRowsEvents:function(t){e.each(t,function(e){this._listenToOneRowEvents(e)},this)},_listenToOneRowEvents:function(e){this.listenTo(e,"clicked",function(e,t){this.trigger("rowClicked",e,t)})},render:function(){return t.Body.prototype.render.apply(this,arguments),this.rowClassName&&this.$("> *").addClass(this.rowClassName),this}})}),define("oro/datagrid/boolean-cell",["jquery","underscore","backgrid"],function(e,t,i){return i.BooleanCell.extend({listenRowClick:!0,render:function(){return i.BooleanCell.prototype.render.apply(this,arguments),this.$input=this.$el.find("input"),this.column.get("editable")||this.$input.attr("disabled","disabled"),this},enterEditMode:function(){if(i.BooleanCell.prototype.enterEditMode.apply(this,arguments),this.column.get("editable")){var e=this.currentEditor.$el;e.prop("checked",!e.prop("checked")).change()}},onRowClicked:function(e,t){this.$input.is(t.target)||this.$el.is(t.target)||this.$el.has(t.target).length||this.enterEditMode(t)}})}),define("oro/datagrid/cell-formatter",["underscore","backgrid"],function(e,t){var i=function(){};return i.prototype=new t.CellFormatter,e.extend(i.prototype,{fromRaw:function(e){return null==e?"":t.CellFormatter.prototype.fromRaw.apply(this,arguments)}}),i}),define("oro/datagrid/string-cell",["backgrid","oro/datagrid/cell-formatter"],function(e,t){return e.StringCell.extend({formatter:new t,enterEditMode:function(t){return this.column.get("editable")&&t.stopPropagation(),e.StringCell.prototype.enterEditMode.apply(this,arguments)}})}),define("oro/datagrid/html-cell",["oro/datagrid/string-cell"],function(e){return e.extend({render:function(){return this.$el.empty().html(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this}})}),define("oro/datagrid/datetime-formatter",["underscore","backgrid","oro/formatter/datetime"],function(e,t,i){var n=function(t){e.extend(this,t)};return n.prototype=new t.CellFormatter,e.extend(n.prototype,{type:"dateTime",fromRaw:function(e){return null==e||""==e?"":this._getFormatterFunction("format").call(i,e)},toRaw:function(e){return null==e||""==e?null:this._getFormatterFunction("convert","ToBackendFormat").call(i,e)},_getFormatterFunction:function(e,t){function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}t=t||"";var s=e+n(this.type)+t;if(!i.hasOwnProperty(s)||"function"!=typeof i[s])throw new Error("Can't use formatter function with name "+s);return i[s]}}),n}),define("oro/datagrid/datetime-cell",["oro/datagrid/string-cell","oro/datagrid/datetime-formatter"],function(e,t){return e.extend({formatterPrototype:t,type:"dateTime",initialize:function(){e.prototype.initialize.apply(this,arguments),this.formatter=this.createFormatter()},createFormatter:function(){return new this.formatterPrototype({type:this.type})}})}),define("oro/datagrid/date-cell",["oro/datagrid/datetime-cell"],function(e){return e.extend({type:"date"})}),function(){function e(e){this._value=e}function t(e,t,i){var n,s,o=Math.pow(10,t);return s=(Math.round(e*o)/o).toFixed(t),i&&(n=new RegExp("0{1,"+i+"}$"),s=s.replace(n,"")),s}function i(e,t){var i;return i=t.indexOf("$")>-1?s(e,t):t.indexOf("%")>-1?o(e,t):t.indexOf(":")>-1?r(e,t):l(e._value,t)}function n(e,t){var i,n,s,o,r,l=t,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],h=!1;if(t.indexOf(":")>-1)e._value=a(t);else if(t===p)e._value=0;else{for("."!==u[f].delimiters.decimal&&(t=t.replace(/\./g,"").replace(u[f].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+u[f].abbreviations.thousand+"(?:\\)|(\\"+u[f].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+u[f].abbreviations.million+"(?:\\)|(\\"+u[f].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+u[f].abbreviations.billion+"(?:\\)|(\\"+u[f].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+u[f].abbreviations.trillion+"(?:\\)|(\\"+u[f].currency.symbol+")?(?:\\))?)?$"),r=0;r<=c.length&&!(h=t.indexOf(c[r])>-1?Math.pow(1024,r+1):!1);r++);e._value=(h?h:1)*(l.match(i)?Math.pow(10,3):1)*(l.match(n)?Math.pow(10,6):1)*(l.match(s)?Math.pow(10,9):1)*(l.match(o)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=h?Math.ceil(e._value):e._value}return e._value}function s(e,t){var i,n=t.indexOf("$")<=1?!0:!1,s="";return t.indexOf(" $")>-1?(s=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(s=" ",t=t.replace("$ ","")):t=t.replace("$",""),i=l(e._value,t),n?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),i.splice(1,0,u[f].currency.symbol+s),i=i.join("")):i=u[f].currency.symbol+s+i:i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,s+u[f].currency.symbol),i=i.join("")):i=i+s+u[f].currency.symbol,i}function o(e,t){var i,n="",s=100*e._value;return t.indexOf(" %")>-1?(n=" ",t=t.replace(" %","")):t=t.replace("%",""),i=l(s,t),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,n+"%"),i=i.join("")):i=i+n+"%",i}function r(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*60*t)/60),n=Math.round(e._value-60*60*t-60*i);return t+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function a(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*60*Number(t[0]),i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function l(e,i){var n,s,o,r,a,l,c=!1,h=!1,d=!1,g="",m="",v="",_=Math.abs(e),y=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],b="",w=!1;if(0===e&&null!==p)return p;if(i.indexOf("(")>-1?(c=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(h=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(i.indexOf(" a")>-1?(g=" ",i=i.replace(" a","")):i=i.replace("a",""),_>=Math.pow(10,12)?(g+=u[f].abbreviations.trillion,e/=Math.pow(10,12)):_<Math.pow(10,12)&&_>=Math.pow(10,9)?(g+=u[f].abbreviations.billion,e/=Math.pow(10,9)):_<Math.pow(10,9)&&_>=Math.pow(10,6)?(g+=u[f].abbreviations.million,e/=Math.pow(10,6)):_<Math.pow(10,6)&&_>=Math.pow(10,3)&&(g+=u[f].abbreviations.thousand,e/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(m=" ",i=i.replace(" b","")):i=i.replace("b",""),o=0;o<=y.length;o++)if(n=Math.pow(1024,o),s=Math.pow(1024,o+1),e>=n&&s>e){m+=y[o],n>0&&(e/=n);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(v=" ",i=i.replace(" o","")):i=i.replace("o",""),v+=u[f].ordinal(e)),i.indexOf("[.]")>-1&&(d=!0,i=i.replace("[.]",".")),r=e.toString().split(".")[0],a=i.split(".")[1],l=i.indexOf(","),a?(a.indexOf("[")>-1?(a=a.replace("]",""),a=a.split("["),b=t(e,a[0].length+a[1].length,a[1].length)):b=t(e,a.length),r=b.split(".")[0],b=b.split(".")[1].length?u[f].delimiters.decimal+b.split(".")[1]:"",d&&0===Number(b.slice(1))&&(b="")):r=t(e,null),r.indexOf("-")>-1&&(r=r.slice(1),w=!0),l>-1&&(r=r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+u[f].delimiters.thousands)),0===i.indexOf(".")&&(r=""),(c&&w?"(":"")+(!c&&w?"-":"")+(!w&&h?"+":"")+r+b+(v?v:"")+(g?g:"")+(m?m:"")+(c&&w?")":"")}function c(e,t){u[e]=t}var h,d="1.5.1",u={},f="en",p=null,g="0,0",m="undefined"!=typeof module&&module.exports;h=function(t){return h.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=h.fn.unformat(t)),new e(Number(t))},h.version=d,h.isNumeral=function(t){return t instanceof e},h.language=function(e,t){if(!e)return f;if(e&&!t){if(!u[e])throw new Error("Unknown language : "+e);f=e}return(t||!u[e])&&c(e,t),h},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(e){p="string"==typeof e?e:null},h.defaultFormat=function(e){g="string"==typeof e?e:"0.0"},h.fn=e.prototype={clone:function(){return h(this)},format:function(e){return i(this,e?e:g)},unformat:function(e){return n(this,e?e:g)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){return this._value=this._value+Number(e),this},subtract:function(e){return this._value=this._value-Number(e),this},multiply:function(e){return this._value=this._value*Number(e),this},divide:function(e){return this._value=this._value/Number(e),this},difference:function(e){var t=this._value-Number(e);return 0>t&&(t=-t),t}},m&&(module.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define("numeral",[],function(){return h})}.call(this),define("oro/formatter/number",["numeral","oro/locale-settings"],function(e,t){var i=function(){var i=function(e){var t=e.grouping_used?"0,0":"0";if(e.max_fraction_digits>0){t+=".";for(var i=0;i<e.max_fraction_digits;++i)e.min_fraction_digits==i&&(t+="["),t+="0";-1!==t.indexOf("[")&&(t+="]")}return"percent"==e.style&&(t+="%"),t},n={numeralFormat:function(t,n){e.language(),e.language("en");var s=e(t).format(i(n));return"0"===s&&(s=n.zero_digit_symbol),e.language("en"),s},addPrefixSuffix:function(e,t,i){var n="",s="";return i>=0?(n=t.positive_prefix,s=t.positive_suffix):0>i&&(e=e.replace("-",""),n=t.negative_prefix,s=t.negative_suffix),n+e+s},replaceSeparator:function(e,t){var i=",",n=".";return i!=t.grouping_separator_symbol&&(e=e.replace(i,t.grouping_separator_symbol)),n!=t.decimal_separator_symbol&&(e=e.replace(n,t.decimal_separator_symbol)),e},replaceMonetarySeparator:function(e,t){var i=",",n=".";return i!=t.monetary_grouping_separator_symbol&&(e=e.replace(i,t.monetary_grouping_separator_symbol)),n!=t.monetary_separator_symbol&&(e=e.replace(n,t.monetary_separator_symbol)),e},clearPercent:function(e){return e.replace("%","")},replaceCurrency:function(e,i){return e.replace(i.currency_symbol,t.getCurrencySymbol(i.currency_code))}},s=function(e,t,i){for(var n=e,s=0;s<i.length;++s){var o=i[s];n=o.call(this,n,t,e)}return n};return{formatDecimal:function(e){var i=t.getNumberFormats("decimal");i.style="decimal";var o=[n.numeralFormat,n.replaceSeparator,n.addPrefixSuffix];return s(e,i,o)},formatInteger:function(e){var i=t.getNumberFormats("decimal");i.style="integer",i.max_fraction_digits=0,i.min_fraction_digits=0;var o=[n.numeralFormat,n.replaceSeparator,n.addPrefixSuffix];return s(e,i,o)},formatPercent:function(e){var i=t.getNumberFormats("percent");i.style="percent";var o=[n.numeralFormat,n.replaceSeparator,n.clearPercent,n.addPrefixSuffix];return s(e,i,o)},formatCurrency:function(e,i){var o=t.getNumberFormats("currency");i||(i=t.getCurrency()),o.style="currency",o.currency_code=i;var r=[n.numeralFormat,n.replaceSeparator,n.addPrefixSuffix,n.replaceCurrency];return s(e,o,r)},unformat:function(i){var n=t.getNumberFormats("decimal"),s=String(i),o=",",r=".";s=s.replace(n.grouping_separator_symbol,o),s=s.replace(n.decimal_separator_symbol,r);var a=e.language();return s=e().unformat(s),e.language(a),s}}},n=i();return n}),define("oro/datagrid/number-formatter",["underscore","oro/datagrid/cell-formatter","oro/formatter/number"],function(e,t,i){var n=function(t){t=t?e.clone(t):{},e.extend(this,t),this.formatter=s(this.style)},s=function(t){var n="format"+t.charAt(0).toUpperCase()+t.slice(1);if(!e.isFunction(i[n]))throw new Error("Formatter doesn't support '"+t+"' number style");return i[n]};return n.prototype=new t,e.extend(n.prototype,{style:"decimal",fromRaw:function(e){return null===e||""===e?"":this.formatter.apply(this,arguments)},toRaw:function(e){return null===e||""===e?null:i.unformat(e)}}),n}),define("oro/datagrid/number-cell",["underscore","backgrid","oro/datagrid/number-formatter"],function(e,t,i){return t.NumberCell.extend({formatterPrototype:i,style:"decimal",initialize:function(i){e.extend(this,i),t.Cell.prototype.initialize.apply(this,arguments),this.formatter=this.createFormatter()},createFormatter:function(){return new this.formatterPrototype({style:this.style})},enterEditMode:function(e){return this.column.get("editable")&&e.stopPropagation(),t.NumberCell.prototype.enterEditMode.apply(this,arguments)}})}),define("oro/datagrid/select-cell",["underscore","backgrid"],function(e,t){return t.SelectCell.extend({initialize:function(){this.choices&&(this.optionValues=[],e.each(this.choices,function(e,t){this.optionValues.push([e,t])},this)),t.SelectCell.prototype.initialize.apply(this,arguments)},enterEditMode:function(e){return this.column.get("editable")&&e.stopPropagation(),t.StringCell.prototype.enterEditMode.apply(this,arguments)}})}),define("oro/datagrid/select-row-cell",["jquery","backbone","backgrid"],function(e,t,i){return t.View.extend({className:"select-row-cell",tagName:"td",events:{"change :checkbox":"onChange",click:"enterEditMode"},initialize:function(e){this.column=e.column,this.column instanceof i.Column||(this.column=new i.Column(this.column)),this.listenTo(this.model,"backgrid:select",function(e,t){this.$el.find(":checkbox").prop("checked",t).change()})},enterEditMode:function(e){var t=this.$el.find(":checkbox").focus();t[0]!==e.target&&t.prop("checked",!t.prop("checked")).change(),e.stopPropagation()},exitEditMode:function(){this.$el.find(":checkbox").blur()},onChange:function(t){this.model.trigger("backgrid:selected",this.model,e(t.target).prop("checked"))},render:function(){var e={selected:!1};return this.$el.empty().append('<input tabindex="-1" type="checkbox" />'),this.model.trigger("backgrid:isSelected",this.model,e),e.selected&&this.$el.find(":checkbox").prop("checked","checked"),this.delegateEvents(),this}})}),define("oro/datagrid/header-cell",["jquery","underscore","backbone","backgrid","oro/pageable-collection"],function(e,t,i,n,s){return n.HeaderCell.extend({template:t.template('<% if (sortable) { %><a href="#"><%= label %> <span class="caret"></span></a><% } else { %><span><%= label %></span><% } %>'),allowNoSorting:!0,initialize:function(){this.allowNoSorting=this.collection.multipleSorting,n.HeaderCell.prototype.initialize.apply(this,arguments),this._initCellDirection(this.collection),this.collection.on("reset",this._initCellDirection,this)},_resetCellDirection:function(){},_initCellDirection:function(e){if(e==this.collection){var i=e.state,n=null,s=this.column.get("name");this.column.get("sortable")&&t.has(i.sorters,s)&&(1==i.sorters[s]?n="descending":-1==i.sorters[s]&&(n="ascending")),n!=this.direction()&&this.direction(n)}},render:function(){return this.$el.empty(),this.$el.append(e(this.template({label:this.column.get("label"),sortable:this.column.get("sortable")}))),this.column.has("width")&&this.$el.width(this.column.get("width")),this},onClick:function(e){e.preventDefault();var t=this.column.get("name");this.column.get("sortable")&&("ascending"===this.direction()?this.sort(t,"descending",function(e,i){var n=e.get(t),s=i.get(t);return n===s?0:n>s?-1:1}):this.allowNoSorting&&"descending"===this.direction()?this.sort(t,null):this.sort(t,"ascending",function(e,i){var n=e.get(t),s=i.get(t);return n===s?0:s>n?-1:1}))},sort:function(e,t,n){n=n||this._cidComparator;var o=this.collection;if(o instanceof s){var r;r="ascending"===t?-1:"descending"===t?1:null,o.setSorting(e,r),"client"==o.mode?(o.fullCollection.comparator||(o.fullCollection.comparator=n),o.fullCollection.sort()):o.fetch()}else o.comparator=n,o.sort();i.trigger("backgrid:sort",e,t,n,this.collection)}})}),define("oro/datagrid/header",["backbone","backgrid","oro/datagrid/header-cell"],function(e,t,i){return t.Header.extend({tagName:"thead",row:t.HeaderRow,headerCell:i,initialize:function(i){if(!i.collection)throw new TypeError("'collection' is required");if(!i.columns)throw new TypeError("'columns' is required");this.columns=i.columns,this.columns instanceof e.Collection||(this.columns=new t.Columns(this.columns)),this.row=new this.row({columns:this.columns,collection:this.collection,headerCell:this.headerCell})}})}),define("oro/datagrid/pagination",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({windowSize:10,enabled:!0,hidden:!1,template:"#template-datagrid-toolbar-pagination",events:{"click a":"onChangePage"},fastForwardHandleConfig:{prev:{label:"Prev",wrapClass:"icon-chevron-left hide-text"},next:{label:"Next",wrapClass:"icon-chevron-right hide-text"}},initialize:function(n){if(n=n||{},!n.collection)throw new TypeError("'collection' is required");this.collection=n.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"reset",this.render),this.hidden=1==n.hide,this.template=t.template(e(n.template||this.template).html()),i.View.prototype.initialize.call(this,n)},disable:function(){return this.enabled=!1,this.render(),this},enable:function(){return this.enabled=!0,this.render(),this},onChangePage:function(i){if(i.preventDefault(),this.enabled){var n=e.trim(e(i.target).text()),s=this.fastForwardHandleConfig,o=this.collection,r=o.state;if(s){var a=t.has(s.prev,"label")?s.prev.label:void 0,l=t.has(s.next,"label")?s.next.label:void 0;switch(n){case a:return o.hasPrevious()&&o.getPreviousPage(),void 0;case l:return o.hasNext()&&o.getNextPage(),void 0}}var c=1*e(i.target).text()-r.firstPage;o.getPage(0===r.firstPage?c:c+1)}},makeHandles:function(e){e=e||[];var i=this.collection,n=i.state,s=n.lastPage?n.lastPage:n.firstPage;s=0===n.firstPage?s:s-1;var o=0===n.firstPage?n.currentPage:n.currentPage-1,r=Math.floor(o/this.windowSize)*this.windowSize,a=r+this.windowSize;if(a=s>=a?a:s+1,"infinite"!==i.mode)for(var l=r;a>l;l++)e.push({label:l+1,title:"No. "+(l+1),className:o===l?"active":void 0});var c=this.fastForwardHandleConfig;return c.prev&&e.unshift({label:t.has(c.prev,"label")?c.prev.label:void 0,wrapClass:t.has(c.prev,"wrapClass")?c.prev.wrapClass:void 0,className:i.hasPrevious()?void 0:"disabled"}),c.next&&e.push({label:t.has(c.next,"label")?c.next.label:void 0,wrapClass:t.has(c.next,"wrapClass")?c.next.wrapClass:void 0,className:i.hasNext()?void 0:"disabled"}),e},render:function(){this.$el.empty();var t=this.collection.state;return this.$el.append(e(this.template({disabled:!this.enabled||!t.totalRecords,handles:this.makeHandles(),state:t}))),this.hidden&&this.$el.hide(),this}})}),define("oro/datagrid/pagination-input",["jquery","underscore","oro/datagrid/pagination","jquery.numeric"],function(e,t,i){return i.extend({template:"#template-datagrid-toolbar-pagination-input",events:{"click a":"onChangePage","blur input":"onChangePageByInput","change input":"onChangePageByInput","keyup input":function(e){13==e.which&&this.onChangePageByInput(e)}},windowSize:0,onChangePageByInput:function(i){i.preventDefault();var n=parseInt(e(i.target).val()),s=this.collection,o=s.state;return t.isNaN(n)?(e(i.target).val(o.currentPage),void 0):(n=0==o.firstPage?n-1:n,n<o.firstPage?(n=o.firstPage,e(i.target).val(0==o.firstPage?o.firstPage+1:o.firstPage)):o.lastPage<=n&&(n=o.lastPage,e(i.target).val(0==o.firstPage?o.lastPage+1:o.lastPage)),o.currentPage!==n&&s.getPage(n),void 0)},makeHandles:function(){var e=[];return this.collection,this.fastForwardHandleConfig,e.push({type:"input"}),i.prototype.makeHandles.call(this,e)},render:function(){return i.prototype.render.apply(this,arguments),this.$("input").numeric({decimal:!1,negative:!1}),this}})}),define("oro/datagrid/page-size",["jquery","underscore","backbone","oro/translator"],function(e,t,i){return i.View.extend({template:"#template-datagrid-toolbar-page-size",events:{"click a":"onChangePageSize"},items:[10,25,50,100],enabled:!0,hidden:!1,initialize:function(n){if(n=n||{},!n.collection)throw new TypeError("'collection' is required");n.items&&(this.items=n.items),this.template=t.template(e(n.template||this.template).html()),this.collection=n.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"reset",this.render),this.enabled=0!=n.enable,this.hidden=1==n.hide,i.View.prototype.initialize.call(this,n)},disable:function(){return this.enabled=!1,this.render(),this},enable:function(){return this.enabled=!0,this.render(),this},onChangePageSize:function(t){t.preventDefault();var i=parseInt(e(t.target).data("size"));i!==this.collection.state.pageSize&&this.changePageSize(i)},changePageSize:function(e){return this.collection.state.pageSize=e,this.collection.fetch(),this},render:function(){this.$el.empty();var i=t.filter(this.items,t.bind(function(e){return void 0==e.size?this.collection.state.pageSize==e:this.collection.state.pageSize==e.size},this));return i=void 0==i[0].label?i[0]:i[0].label,this.$el.append(e(this.template({disabled:!this.enabled||!this.collection.state.totalRecords,collectionState:this.collection.state,items:this.items,currentSizeLabel:i}))),this.hidden&&this.$el.hide(),this}})}),define("oro/datagrid/toolbar",["underscore","backbone","oro/translator","oro/datagrid/pagination-input","oro/datagrid/page-size","oro/datagrid/actions-panel"],function(e,t,i,n,s,o){var r=t.$;return t.View.extend({template:"#template-datagrid-toolbar",pagination:n,pageSize:s,actionsPanel:o,massActionsPanel:o,initialize:function(i){if(i=i||{},!i.collection)throw new TypeError("'collection' is required");this.collection=i.collection,this.pagination=new this.pagination(e.extend({},i.pagination,{collection:this.collection})),i.pageSize=i.pageSize||{},this.pageSize=new this.pageSize(e.extend({},i.pageSize,{collection:this.collection})),this.actionsPanel=new this.actionsPanel(e.extend({},i.actionsPanel)),i.actions&&this.actionsPanel.setActions(i.actions),0==i.enable&&this.disable(),1==i.hide&&this.hide(),this.massActionsPanel=new this.massActionsPanel,i.massActions&&this.massActionsPanel.setActions(i.massActions),this.template=e.template(r(i.template||this.template).html()),t.View.prototype.initialize.call(this,i)},enable:function(){return this.pagination.enable(),this.pageSize.enable(),this.actionsPanel.enable(),this.massActionsPanel.enable(),this},disable:function(){return this.pagination.disable(),this.pageSize.disable(),this.actionsPanel.disable(),this.massActionsPanel.disable(),this},hide:function(){return this.$el.hide(),this},render:function(){this.$el.empty(),this.$el.append(this.template());var e=this.pagination.render().$el.attr("class",this.$(".pagination").attr("class"));return this.$(".pagination").replaceWith(e),this.$(".page-size").append(this.pageSize.render().$el),this.$(".actions-panel").append(this.actionsPanel.render().$el),this.$(".mass-actions-panel").append(this.massActionsPanel.render().$el),this}})}),define("oro/datagrid/select-all-header-cell",["jquery","underscore","backgrid","oro/datagrid/select-row-cell"],function(e,t,i,n){return n.extend({className:"select-all-header-cell",tagName:"th",events:{},initialize:function(n){this.column=n.column,this.column instanceof i.Column||(this.column=new i.Column(this.column)),this.initialState(),this.listenTo(this.collection,{remove:this.removeModel,updateState:this.initialState,"backgrid:selected":this.selectModel,"backgrid:selectAll":this.selectAll,"backgrid:selectAllVisible":this.selectAllVisible,"backgrid:selectNone":this.selectNone,"backgrid:isSelected":t.bind(function(t,i){e.isPlainObject(i)&&(i.selected=this.isSelectedModel(t))},this),"backgrid:getSelected":t.bind(function(i){e.isEmptyObject(i)&&(i.selected=t.keys(this.selectedModels),i.inset=this.inset)},this)})},initialState:function(){this.selectedModels={},this.inset=!0},getSelectionState:function(){return{selectedModels:this.selectedModels,inset:this.inset}},isSelectedModel:function(e){return this.inset===t.has(this.selectedModels,e.id||e.cid)},removeModel:function(e){delete this.selectedModels[e.id||e.cid]},selectModel:function(e,t){t===this.inset?this.selectedModels[e.id||e.cid]=e:this.removeModel(e)},selectAll:function(){this.initialState(),this.inset=!1,this._selectAll()},selectNone:function(){this.initialState(),this.inset=!0,this._selectNone()},selectAllVisible:function(){this.inset||this.initialState(),this._selectAll()},_selectAll:function(){this.collection.each(function(e){e.trigger("backgrid:select",e,!0)})},_selectNone:function(){this.collection.each(function(e){e.trigger("backgrid:select",e,!1)})},render:function(){return this.$el.empty().append('<div class="btn-group">                <button type="button" class="btn btn-default btn-small" data-select-all>All</button>                <button type="button" class="btn btn-default btn-small dropdown-toggle" data-toggle="dropdown">                    <i class="caret"></i>                </button>                <ul class="dropdown-menu">                    <li><a href="#" data-select-all-visible>All visible</a></li>                    <li><a href="#" data-select-none>None</a></li>                </ul>            </div>'),this.$el.find("[data-select-all]").on("click",t.bind(function(e){this.collection.trigger("backgrid:selectAll"),e.preventDefault()},this)),this.$el.find("[data-select-all-visible]").on("click",t.bind(function(e){this.collection.trigger("backgrid:selectAllVisible"),e.preventDefault()},this)),this.$el.find("[data-select-none]").on("click",t.bind(function(e){this.collection.trigger("backgrid:selectNone"),e.preventDefault()},this)),this}})}),define("oro/datagrid/grid",["jquery","underscore","backgrid","oro/translator","oro/mediator","oro/loading-mask","oro/datagrid/header","oro/datagrid/body","oro/datagrid/toolbar","oro/datagrid/action-column","oro/datagrid/select-row-cell","oro/datagrid/select-all-header-cell","oro/datagrid/refresh-collection-action","oro/datagrid/reset-collection-action"],function(e,t,i,n,s,o,r,a,l,c,h,d,u,f){return i.Grid.extend({name:"datagrid",tagName:"div",requestsCount:0,className:"clearfix",template:t.template('<div class="toolbar"></div><div class="container-fluid"><div class="grid-container"><table class="grid table-hover table table-bordered table-condensed"></table><div class="no-data"></div><div class="loading-mask"></div></div></div>'),noDataTemplate:t.template("<span><%= hint %><span>"),selectors:{grid:".grid",toolbar:".toolbar",noDataBlock:".no-data",loadingMask:".loading-mask",filterBox:".filter-box"},header:r,body:a,toolbar:l,loadingMask:o,actionsColumn:c,noColumnsFlag:!1,defaults:{rowClickActionClass:"row-click-action",rowClassName:"",toolbarOptions:{addResetAction:!0,addRefreshAction:!0},rowClickAction:void 0,multipleSorting:!0,rowActions:[],massActions:[]},initialize:function(e){if(e=e||{},!e.collection)throw new TypeError("'collection' is required");if(this.collection=e.collection,!e.columns)throw new TypeError("'columns' is required");0==e.columns.length&&(this.noColumnsFlag=!0),t.extend(this,this.defaults,e),this.toolbarOptions={},t.extend(this.toolbarOptions,this.defaults.toolbarOptions,e.toolbarOptions),this.collection.multipleSorting=this.multipleSorting,this._initRowActions(),this.rowClickAction&&(e.rowClassName=this.rowClickActionClass+" "+this.rowClassName),e.columns.push(this._createActionsColumn()),e.columns.unshift(this._getMassActionsColumn()),this.loadingMask=this._createLoadingMask(),this.toolbar=this._createToolbar(this.toolbarOptions),i.Grid.prototype.initialize.apply(this,arguments),this._listenToCollectionEvents(),this._listenToBodyEvents(),this._listenToCommands()},_initRowActions:function(){this.rowClickAction||(this.rowClickAction=t.find(this.rowActions,function(e){return Boolean(e.prototype.rowAction)}))},_createActionsColumn:function(){return new this.actionsColumn({actions:this.rowActions,datagrid:this})},_getMassActionsColumn:function(){return this.massActionsColumn||(this.massActionsColumn=new i.Column({name:"massAction",label:n("Selected Rows"),renderable:!t.isEmpty(this.massActions),sortable:!1,editable:!1,cell:h,headerCell:d})),this.massActionsColumn},getSelectionState:function(){var e=this.header.row.cells[0];return e.getSelectionState()},resetSelectionState:function(){var e=this.header.row.cells[0];return e.selectNone()},_createLoadingMask:function(){return new this.loadingMask},_createToolbar:function(e){return new this.toolbar(t.extend({},e,{collection:this.collection,actions:this._getToolbarActions(),massActions:this._getToolbarMassActions()}))},_getToolbarActions:function(){var e=[];return this.toolbarOptions.addRefreshAction&&e.push(this.getRefreshAction()),this.toolbarOptions.addResetAction&&e.push(this.getResetAction()),e},_getToolbarMassActions:function(){var e=[];return t.each(this.massActions,function(t){e.push(this.createMassAction(t))},this),e},createMassAction:function(e){return new e({datagrid:this,launcherOptions:{className:"btn"}})},getRefreshAction:function(){var e=this;return e.refreshAction||(e.refreshAction=new u({datagrid:e,launcherOptions:{label:"Refresh",className:"btn",iconClassName:"icon-refresh"}}),s.on("datagrid:doRefresh:"+e.name,function(){e.refreshAction.execute()}),e.refreshAction.on("preExecute",function(t,i){e.$el.trigger("preExecute:refresh:"+e.name,[t,i])})),e.refreshAction},getResetAction:function(){var e=this;return e.resetAction||(e.resetAction=new f({datagrid:e,launcherOptions:{label:"Reset",className:"btn",iconClassName:"icon-repeat"}}),s.on("datagrid:doReset:"+e.name,function(){e.resetAction.execute()}),e.resetAction.on("preExecute",function(t,i){e.$el.trigger("preExecute:reset:"+e.name,[t,i])})),e.resetAction},_listenToCollectionEvents:function(){this.collection.on("request",function(e,t){this._beforeRequest();var i=this,n=t.always;t.always=function(){n.apply(this,arguments),i._afterRequest()}},this),this.collection.on("remove",this._onRemove,this);var e=this;this.collection.on("change",function(t){e.$el.trigger("datagrid:change:"+e.name,t)})},_listenToBodyEvents:function(){this.listenTo(this.body,"rowClicked",function(e){this.trigger("rowClicked",this,e),this._runRowClickAction(e)})},_runRowClickAction:function(e){if(this.rowClickAction){var t=new this.rowClickAction({datagrid:this,model:e.model}),i=e.model.get("action_configuration");i&&i[t.name]===!1||t.run()}},_listenToCommands:function(){var e=this;s.on("datagrid:setParam:"+e.name,function(t,i){e.setAdditionalParameter(t,i)
}),s.on("datagrid:restoreState:"+e.name,function(i,n,s,o){e.collection.each(function(e){-1!==t.indexOf(s,e.get(n))&&e.set(i,!0),-1!==t.indexOf(o,e.get(n))&&e.set(i,!1)})})},render:function(){return this.$el.empty(),this.$el=this.$el.append(e(this.template())),this.renderToolbar(),this.renderGrid(),this.renderNoDataBlock(),this.renderLoadingMask(),this.trigger("rendered"),this},renderGrid:function(){var e=this.$(this.selectors.grid);e.append(this.header.render().$el),this.footer&&e.append(this.footer.render().$el),e.append(this.body.render().$el)},renderToolbar:function(){this.$(this.selectors.toolbar).append(this.toolbar.render().$el)},renderLoadingMask:function(){this.$(this.selectors.loadingMask).append(this.loadingMask.render().$el),this.loadingMask.hide()},renderNoDataBlock:function(){var i={entityHint:(this.entityHint||n("oro.datagrid.entityHint")).toLowerCase()},s=t.isEmpty(this.collection.state.filters)?"oro.datagrid.noentities":"oro.datagrid.noresults",s=this.noColumnsFlag?"oro.datagrid.nocolumns":s;this.$(this.selectors.noDataBlock).html(e(this.noDataTemplate({hint:n(s,i).replace("\n","<br />")}))).hide(),this._updateNoDataBlock()},_beforeRequest:function(){this.requestsCount+=1,this.showLoading()},_afterRequest:function(){this.requestsCount-=1,0===this.requestsCount&&(this.hideLoading(),this.renderNoDataBlock(),s.trigger("grid_load:complete",this.collection))},showLoading:function(){this.loadingMask.show(),this.toolbar.disable()},hideLoading:function(){this.loadingMask.hide(),this.toolbar.enable()},_updateNoDataBlock:function(){this.collection.models.length>0&&!this.noColumnsFlag?(this.$(this.selectors.toolbar).show(),this.$(this.selectors.grid).show(),this.$(this.selectors.filterBox).show(),this.$(this.selectors.noDataBlock).hide()):(this.$(this.selectors.grid).hide(),this.$(this.selectors.toolbar).hide(),this.$(this.selectors.filterBox).hide(),this.$(this.selectors.noDataBlock).show())},_onRemove:function(){this.collection.fetch()},setAdditionalParameter:function(e,i){var n=this.collection.state;t.has(n,"parameters")||(n.parameters={}),n.parameters[e]=i},removeAdditionalParameter:function(e){var i=this.collection.state;t.has(i,"parameters")&&delete i.parameters[e]}})}),define("oro/datagrid/abstract-listener",["underscore","jquery","backbone"],function(e,t,i){return i.Model.extend({columnName:"id",dataField:"id",initialize:function(t){if(!e.has(t,"columnName"))throw new Error("Data column name is not specified");if(this.columnName=t.columnName,t.dataField&&(this.dataField=t.dataField),i.Model.prototype.initialize.apply(this,arguments),!t.$gridContainer)throw new Error("gridSelector is not specified");this.$gridContainer=t.$gridContainer,this.gridName=t.gridName,this.setDatagridAndSubscribe()},setDatagridAndSubscribe:function(){this.$gridContainer.on("datagrid:change:"+this.gridName,this._onModelEdited.bind(this))},_onModelEdited:function(t,i){if(i.hasChanged(this.columnName)){var n=i.get(this.dataField);e.isUndefined(n)||this._processValue(n,i)}},_processValue:function(){throw new Error("_processValue method is abstract and must be implemented")}})}),define("oro/datagrid/column-form-listener",["jquery","underscore","oro/translator","oro/mediator","oro/modal","oro/datagrid/abstract-listener"],function(e,t,i,n,s,o){var r=o.extend({selectors:{included:null,excluded:null},initialize:function(e){if(!t.has(e,"selectors"))throw new Error("Field selectors is not specified");this.selectors=e.selectors,o.prototype.initialize.apply(this,arguments)},setDatagridAndSubscribe:function(){o.prototype.setDatagridAndSubscribe.apply(this,arguments),this.$gridContainer.on("preExecute:refresh:"+this.gridName,this._onExecuteRefreshAction.bind(this)),this.$gridContainer.on("preExecute:reset:"+this.gridName,this._onExecuteResetAction.bind(this)),this._clearState(),this._restoreState(),n.bind("pagestate_restored",function(){this._restoreState()},this)},_processValue:function(e,i){var n,s=this.get("original"),o=this.get("included"),r=this.get("excluded"),a=i.get(this.columnName);t.has(s,e)?n=s[e]:(n=!a,s[e]=n),a?(o=n?t.without(o,[e]):t.union(o,[e]),r=t.without(r,e)):(o=t.without(o,e),r=n?t.union(r,[e]):t.without(r,[e])),this.set("included",o),this.set("excluded",r),this.set("original",s),this._synchronizeState()},_clearState:function(){this.set("included",[]),this.set("excluded",[]),this.set("original",{})},_synchronizeState:function(){var t=this.get("included"),i=this.get("excluded");this.selectors.included&&e(this.selectors.included).val(t.join(",")),this.selectors.excluded&&e(this.selectors.excluded).val(i.join(",")),n.trigger("datagrid:setParam:"+this.gridName,"data_in",t),n.trigger("datagrid:setParam:"+this.gridName,"data_not_in",i)},_explode:function(e){return e?t.map(e.split(","),function(e){return e?parseInt(e,10):null}):[]},_restoreState:function(){var t="",i="";this.selectors.included&&e(this.selectors.included).length&&(t=this._explode(e(this.selectors.included).val()),this.set("included",t)),this.selectors.excluded&&e(this.selectors.excluded).length&&(i=this._explode(e(this.selectors.excluded).val()),this.set("excluded",i)),(t||i)&&(n.trigger("datagrid:setParam:"+this.gridName,"data_in",t),n.trigger("datagrid:setParam:"+this.gridName,"data_not_in",i),n.trigger("datagrid:restoreState:"+this.gridName,this.columnName,this.dataField,t,i))},_onExecuteRefreshAction:function(e,t,n){this._confirmAction(t,n,"refresh",{title:i("Refresh Confirmation"),content:i("Your local changes will be lost. Are you sure you want to refresh grid?")})},_onExecuteResetAction:function(e,t,n){this._confirmAction(t,n,"reset",{title:i("Reset Confirmation"),content:i("Your local changes will be lost. Are you sure you want to reset grid?")})},_confirmAction:function(e,t,i,n){this.confirmed=this.confirmed||{},!this.confirmed[i]&&this._hasChanges()&&(t.doExecute=!1,this._openConfirmDialog(i,n,function(){this.confirmed[i]=!0,this._clearState(),this._synchronizeState(),e.run()})),this.confirmed[i]=!1},_hasChanges:function(){return!t.isEmpty(this.get("included"))||!t.isEmpty(this.get("excluded"))},_openConfirmDialog:function(e,n,o){this.confirmModal=this.confirmModal||{},this.confirmModal[e]||(this.confirmModal[e]=new s(t.extend({title:i("Confirmation"),okText:i("Ok, got it."),className:"modal modal-primary",okButtonClass:"btn-primary btn-large"},n)),this.confirmModal[e].on("ok",t.bind(o,this))),this.confirmModal[e].open()}});return r.init=function(e,i){var n=e.data("metadata"),s=n.options||{};s.columnListener&&new r(t.extend({$gridContainer:e,gridName:i},s.columnListener))},r}),define("oro/datagrid/callback-listener",["oro/datagrid/abstract-listener"],function(e){return e.extend({processCallback:null,initialize:function(t){if(!_.has(t,"processCallback"))throw new Error("Process callback is not specified");this.processCallback=t.processCallback,e.prototype.initialize.apply(this,arguments)},_processValue:function(e,t){this.processCallback(e,t,this)}})}),define("oro/datagrid/grid-views/model",["backbone","underscore"],function(e,t){return e.Model.extend({idAttribute:"name",defaults:{filters:[],sorters:[]},directions:{ASC:"-1",DESC:"1"},initialize:function(e){if(!e.name)throw new TypeError("'name' is required");t.each(e.sorters,t.bind(function(t,i){e.sorters[i]=this.directions[t]},this))},toGridState:function(){return{filters:this.get("filters"),sorters:this.get("sorters"),gridView:this.get("name")}}})}),define("oro/datagrid/grid-views/collection",["backbone","oro/datagrid/grid-views/model"],function(e,t){return e.Collection.extend({model:t})}),define("oro/datagrid/grid-views/view",["backbone","underscore","oro/translator","oro/datagrid/grid-views/collection"],function(e,t,i,n){return e.View.extend({events:{"click a":"onChange"},template:t.template('<div class="btn-group "><button data-toggle="dropdown" class="btn dropdown-toggle <% if (disabled) { %>disabled<% } %>"><%=  current %><span class="caret"></span></button><ul class="dropdown-menu pull-right"><% _.each(choices, function (choice) { %><li><a href="#" data-value="<%= choice.value %>"><%= choice.label %></a></li><% }); %></ul></div>'),enabled:!0,choices:[],viewsCollection:n,initialize:function(i){if(i=i||{},!i.collection)throw new TypeError("'collection' is required");i.choices&&(this.choices=t.union(this.choices,i.choices)),this.collection=i.collection,this.enabled=0!=i.enable,this.listenTo(this.collection,"updateState",this.render),this.listenTo(this.collection,"beforeFetch",this.render),i.views=i.views||[],this.viewsCollection=new this.viewsCollection(i.views),e.View.prototype.initialize.call(this,i)},disable:function(){return this.enabled=!1,this.render(),this},enable:function(){return this.enabled=!0,this.render(),this},onChange:function(e){e.preventDefault();var t=$(e.target).data("value");t!==this.collection.state.gridView&&this.changeView(t)},changeView:function(e){var i=this.viewsCollection.get(e);if(i){var n=t.extend({},this.collection.initialState,i.toGridState());this.collection.updateState(n),this.collection.fetch()}return this},render:function(){if(this.$el.empty(),this.choices.length>0){var e=t.filter(this.choices,t.bind(function(e){return e.value==this.collection.state.gridView},this)),n=e.length?t.first(e).label:i("Please select view");this.$el.append($(this.template({disabled:!this.enabled,choices:this.choices,current:n})))}return this}})}),define("oro/datagrid/router",["underscore","backbone","oro/navigation","oro/mediator"],function(e,t,i,n){return t.Router.extend({routes:{"g/*encodedStateData":"changeState"},collection:null,_initState:null,initialize:function(i){if(i=i||{},!i.collection)throw new TypeError("'collection' is required");this.collection=i.collection,this._initState=e.clone(this.collection.state),this.collection.on("beforeReset",this._handleStateChange,this),t.Router.prototype.initialize.apply(this,arguments),n.trigger("grid_route:loaded",this)},_handleStateChange:function(e,t){if(t=t||{},!t.ignoreSaveStateInUrl){var n=e.encodeStateData(e.state),s="",o=i.getInstance();s=o?"url="+o.getHashUrl()+"|g/"+n:"g/"+n,this.navigate(s)}},changeState:function(e){var t=null;t=e?this.collection.decodeStateData(e):this._initState,this.collection.updateState(t),this.collection.fetch({ignoreSaveStateInUrl:!0})}})}),define("oro/datagrid-builder",["require","jquery","underscore","oro/translator","oro/tools","oro/mediator","oro/loading-mask","oro/pageable-collection","oro/datagrid/grid","oro/datagrid/router","oro/datagrid/grid-views/view"],function(e){var t=e("jquery"),i=e("underscore");e("oro/translator");var n=e("oro/tools"),s=e("oro/mediator");e("oro/loading-mask");var o=e("oro/pageable-collection"),r=e("oro/datagrid/grid"),a=e("oro/datagrid/router"),l=e("oro/datagrid/grid-views/view"),c='[data-type="datagrid"]:not([data-rendered])',h=".page-title > .navbar-extra .span9:last",d="oro/datagrid/{{type}}-cell",u="oro/datagrid/{{type}}-action",f={integer:"number",decimal:"number",percent:"number"},p={cellType:function(e){return e+"Cell"},actionType:function(e){return e+"Action"}},g={initBuilder:function(e){var t=this;t.metadata=i.extend({columns:[],options:{},state:{},rowActions:{},massActions:{}},t.$el.data("metadata")),t.modules={},g.collectModules.call(t),n.loadModules(t.modules,function(){g.buildGrid.call(t),e(),g.afterBuild.call(t)})},collectModules:function(){var e=this.modules,t=this.metadata,n=function(e,t){return e.replace("{{type}}",t)};i.each(t.columns,function(t){var i=t.type;e[p.cellType(i)]=n(d,f[i]||i)}),i.each(i.values(t.rowActions),function(t){e[p.actionType(t.frontend_type)]=n(u,t.frontend_type)}),i.each(i.values(t.massActions),function(t){e[p.actionType(t.frontend_type)]=n(u,t.frontend_type)})},buildGrid:function(){var e,n,c,d;s.trigger("datagrid_collection_set_before",d={}),d.collection?n=d.collection:(e=g.combineCollectionOptions.call(this),n=new o(this.$el.data("data"),e)),e=g.combineGridOptions.call(this),c=new r(i.extend({collection:n},e)),this.grid=c,this.$el.append(c.render().$el),e.routerEnabled!==!1&&new a({collection:n}),e=g.combineGridViewsOptions.call(this),t(h).append(new l(i.extend({collection:n},e)).render().$el)},afterBuild:function(){s.trigger("datagrid_collection_set_after",this.grid.collection,this.$el)},combineCollectionOptions:function(){return i.extend({inputName:this.metadata.options.gridName,parse:!0,url:"/user/json",state:i.extend({filters:{},sorters:{}},this.metadata.state)},this.metadata.options)},combineGridOptions:function(){var e,t={},n={},s={sortable:!1},o=this.modules,r=this.metadata;return e=i.map(r.columns,function(e){var t=["name","label","renderable","editable","sortable"],n=i.extend({},s,i.pick.apply(null,[e].concat(t))),r=i.omit.apply(null,[e].concat(t.concat("type"))),a=o[p.cellType(e.type)];return i.isEmpty(r)||(a=a.extend(r)),n.cell=a,n}),i.each(r.rowActions,function(e,i){t[i]=o[p.actionType(e.frontend_type)].extend(e)}),i.each(r.massActions,function(e,t){n[t]=o[p.actionType(e.frontend_type)].extend(e)}),{name:r.options.gridName,columns:e,rowActions:t,massActions:n,toolbarOptions:r.options.toolbarOptions||{},multipleSorting:r.options.multipleSorting||!1,entityHint:r.options.entityHint,routerEnabled:i.isUndefined(r.options.routerEnabled)?!0:r.options.routerEnabled}},combineGridViewsOptions:function(){return this.metadata.gridViews||{}}};return function(e){t(c).each(function(n,s){var o=t(s),r=((o.data("metadata")||{}).options||{}).gridName;r&&(o.attr("data-rendered",!0),g.initBuilder.call({$el:o},function(){i.each(e,function(e){if(!i.has(e,"init")||!t.isFunction(e.init))throw new TypeError("Builder does not have init method");e.init(o,r)})}))}).end()}}),define("oro/email/template/model",["backbone"],function(e){return e.Model.extend({defaults:{entity:"",id:"",name:""}})}),define("oro/email/template/collection",["backbone","routing","oro/email/template/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_get_emailtemplate",url:null,model:i,initialize:function(){this.url=t.generate(this.route,{entityName:null})},setEntityId:function(e){this.url=t.generate(this.route,{entityName:e})}})}),define("oro/email/template/view",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({events:{change:"selectionChanged"},target:null,initialize:function(t){this.template=e("#emailtemplate-chooser-template").html(),this.target=t.target,this.listenTo(this.collection,"reset",this.render)},selectionChanged:function(t){var i=e(t.currentTarget).val();this.collection.setEntityId(i.split("\\").join("_")),i?this.collection.fetch():this.collection.reset()},render:function(){e(this.target).val("").trigger("change"),e(this.target).find('option[value!=""]').remove(),this.collection.models.length>0&&e(this.target).append(t.template(this.template,{entities:this.collection.models}))}})}),define("oro/email/variable/model",["backbone","routing"],function(e,t){return e.Model.extend({defaults:{user:[],entity:[],entityName:null},route:"oro_api_get_emailtemplate_available_variables",url:null,initialize:function(){this.updateUrl(),this.bind("change:entityName",this.updateUrl,this)},updateUrl:function(){this.url=t.generate(this.route,{entityName:this.get("entityName")})}})}),define("oro/email/variable/view",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({events:{"click ul li a":"addVariable"},target:null,lastElement:null,initialize:function(i){this.target=i.target,this.listenTo(this.model,"sync",this.render),this.target.on("change",t.bind(this.selectionChanged,this)),e('input[name*="subject"], textarea[name*="content"]').on("blur",t.bind(this._updateElementsMetaData,this)),this.render()},selectionChanged:function(t){var i=e(t.currentTarget).val();this.model.set("entityName",i.split("\\").join("_")),this.model.fetch()},render:function(){var i=t.template(this.options.template.html(),{userVars:this.model.get("user"),entityVars:this.model.get("entity")});return e(this.el).html(i),this},addVariable:function(i){return!t.isNull(this.lastElement)&&this.lastElement.is(":visible")&&this.lastElement.val(this.lastElement.val()+e(i.currentTarget).html()),this},_updateElementsMetaData:function(t){return this.lastElement=e(t.currentTarget),this}})}),require(["jquery","underscore","oro/dialog-widget"],function(e,t,i){e(function(){e(document).on("click",".view-email-button",function(n){var s=e(this).attr("data-url");t.isUndefined(s)&&(s=e(this).attr("href")),new i({url:s,dialogOptions:{allowMaximize:!0,allowMinimize:!0,dblclick:"maximize",maximizedHeightDecreaseBy:"minimize-bar",width:1e3,title:e(this).attr("title")}}).render(),n.preventDefault()})})}),define("oro/init-email",function(){}),require(["jquery","underscore","oro/translator","oro/modal"],function(e,t,i,n){e(function(){e(document).on("click",".entity-extend-apply",function(){var t=e(this),s=(t.data("message"),function(){o.preventClose(function(){});var i=e(t).attr("href").substr(21),n=e("#progressbar").clone();n.attr("id","confirmUpdateLoading").css({display:"block",margin:"0 auto"}).find("h3").remove(),o.$content.parent().find("a.cancel").hide(),o.$content.parent().find("a.close").hide(),o.$content.parent().find("a.btn-primary").replaceWith(n),e("#confirmUpdateLoading").show(),window.location.href=i}),o=new n({allowCancel:!0,cancelText:i("Cancel"),title:i("Schema update confirmation"),content:"<p>"+i("Your config changes will be applied to schema.")+"</p></p>"+i("It may take few minutes...")+"</p>",okText:i("Yes, Proceed")});return o.on("ok",s),o.open(),!1})})}),define("oro/init-entity-extend-apply",function(){}),require(["jquery","routing"],function(e,t){e(function(){e(document).on("change","form select.extend-rel-target-name",function(){var i=e(this),n=i.find("option:selected").attr("value").replace(/\\/g,"_"),s=t.generate.apply(t,["oro_entityconfig_field_search",{id:n}]),o=e("form select.extend-rel-target-field");return e(o).each(function(t,i){var n="undefined"!=typeof e(i).attr("multiple")&&e(i).attr("multiple")!==!1;n?e(i).empty().append('<option value="">Loading...</option>'):e(i).prev("span").text("loading...")}),e.getJSON(s,function(t){e(o).each(function(i,n){var s=[];e.each(t,function(e,t){s.push("<option value='"+e+"'>"+t+"</option>")}),e(n).empty().append(s.join("")),e(n).prev("span").text("Please choice target field...")})}),!1})})}),define("oro/init-entity-extend-relation",function(){}),function(e){var t=0,i=e(document);e.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var i=this.element.hide(),n=this.options;this.speed=e.fx.speeds._default,this._isOpen=!1,this._namespaceID=this.eventNamespace||"multiselect"+t;var s=(this.button=e('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(n.classes).attr({title:i.attr("title"),"aria-haspopup":!0,tabIndex:i.attr("tabIndex")}).insertAfter(i),o=((this.buttonlabel=e("<span />")).html(n.noneSelectedText).appendTo(s),(this.menu=e("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(n.classes).appendTo(document.body)),r=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(o);(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){return n.header===!0?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+n.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+n.uncheckAllText+"</span></a></li>":"string"==typeof n.header?"<li>"+n.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(r),(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(o),this._bindEvents(),this.refresh(!0),n.multiple||o.addClass("ui-multiselect-single"),t++},_init:function(){this.options.header===!1&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(i){var n=this.element,s=this.options,o=this.menu,r=this.checkboxContainer,a=[],l="",c=n.attr("id")||t++;n.find("option").each(function(t){e(this);var i,n=this.parentNode,o=this.innerHTML,r=this.title,h=this.value,d="ui-multiselect-"+(this.id||c+"-option-"+t),u=this.disabled,f=this.selected,p=["ui-corner-all"],g=(u?"ui-multiselect-disabled ":" ")+this.className;"OPTGROUP"===n.tagName&&(i=n.getAttribute("label"),-1===e.inArray(i,a)&&(l+='<li class="ui-multiselect-optgroup-label '+n.className+'"><a href="#">'+i+"</a></li>",a.push(i))),u&&p.push("ui-state-disabled"),f&&!s.multiple&&p.push("ui-state-active"),l+='<li class="'+g+'">',l+='<label for="'+d+'" title="'+r+'" class="'+p.join(" ")+'">',l+='<input id="'+d+'" name="multiselect_'+c+'" type="'+(s.multiple?"checkbox":"radio")+'" value="'+h+'" title="'+o+'"',f&&(l+=' checked="checked"',l+=' aria-selected="true"'),u&&(l+=' disabled="disabled"',l+=' aria-disabled="true"'),l+=" /><span>"+o+"</span></label></li>"}),r.html(l),this.labels=o.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),i||this._trigger("refresh")},update:function(){var t,i=this.options,n=this.inputs,s=n.filter(":checked"),o=s.length;return t=0===o?i.noneSelectedText:e.isFunction(i.selectedText)?i.selectedText.call(this,o,n.length,s.get()):/\d/.test(i.selectedList)&&i.selectedList>0&&o<=i.selectedList?s.map(function(){return e(this).next().html()}).get().join(", "):i.selectedText.replace("#",o).replace("#",n.length),this._setButtonValue(t),t},_setButtonValue:function(e){this.buttonlabel.text(e)},_bindEvents:function(){function t(){return n[n._isOpen?"close":"open"](),!1}var n=this,s=this.button;s.find("span").bind("click.multiselect",t),s.bind({click:t,keypress:function(e){switch(e.which){case 27:case 38:case 37:n.close();break;case 39:case 40:n.open()}},mouseenter:function(){s.hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){s.hasClass("ui-state-disabled")||e(this).addClass("ui-state-focus")},blur:function(){e(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(t){e(this).hasClass("ui-multiselect-close")?n.close():n[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),t.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(t){t.preventDefault();var i=e(this),s=i.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),o=s.get(),r=i.parent().text();n._trigger("beforeoptgrouptoggle",t,{inputs:o,label:r})!==!1&&(n._toggleChecked(s.filter(":checked").length!==s.length,s),n._trigger("optgrouptoggle",t,{inputs:o,label:r,checked:o[0].checked}))}).delegate("label","mouseenter.multiselect",function(){e(this).hasClass("ui-state-disabled")||(n.labels.removeClass("ui-state-hover"),e(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(t){switch(t.preventDefault(),t.which){case 9:case 27:n.close();break;case 38:case 40:case 37:case 39:n._traverse(t.which,this);break;case 13:e(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(t){var i=e(this),s=this.value,o=this.checked,r=n.element.find("option");return this.disabled||n._trigger("click",t,{value:s,text:this.title,checked:o})===!1?(t.preventDefault(),void 0):(i.focus(),i.attr("aria-selected",o),r.each(function(){this.value===s?this.selected=o:n.options.multiple||(this.selected=!1)}),n.options.multiple||(n.labels.removeClass("ui-state-active"),i.closest("label").toggleClass("ui-state-active",o),n.close()),n.element.trigger("change"),setTimeout(e.proxy(n.update,n),10),void 0)}),i.bind("mousedown."+this._namespaceID,function(t){var i=t.target;!n._isOpen||e.contains(n.menu[0],i)||e.contains(n.button[0],i)||i===n.button[0]||i===n.menu[0]||n.close()}),e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(n.refresh,n),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;/\d/.test(t.minWidth)&&e<t.minWidth&&(e=t.minWidth),this.button.outerWidth(e)},_setMenuWidth:function(){var e=this.menu;e.outerWidth(this.button.outerWidth())},_traverse:function(t,i){var n=e(i),s=38===t||37===t;if($next=n.parent()[s?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[s?"last":"first"](),$next.length)$next.find("label").trigger("mouseover");else{var o=this.menu.find("ul").last();this.menu.find("label")[s?"last":"first"]().trigger("mouseover"),o.scrollTop(s?o.height():0)}},_toggleState:function(e,t){return function(){this.disabled||(this[e]=t),t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var n=i&&i.length?i:this.inputs,s=this;n.each(this._toggleState("checked",t)),n.eq(0).focus(),this.update();var o=n.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&e.inArray(this.value,o)>-1&&s._toggleState("selected",t).call(this)}),n.length&&this.element.trigger("change")},_toggleDisabled:function(t){this.button.attr({disabled:t,"aria-disabled":t})[t?"addClass":"removeClass"]("ui-state-disabled");var i=this.menu.find("input"),n="ech-multiselect-disabled";i=t?i.filter(":enabled").data(n,!0):i.filter(function(){return e.data(this,n)===!0}).removeData(n),i.attr({disabled:t,"arial-disabled":t}).parent()[t?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:t,"aria-disabled":t})},open:function(){var t=this,i=this.button,n=this.menu,s=this.speed,o=this.options,r=[];if(this._trigger("beforeopen")!==!1&&!i.hasClass("ui-state-disabled")&&!this._isOpen){var a=n.find("ul").last(),l=o.show;e.isArray(o.show)&&(l=o.show[0],s=o.show[1]||t.speed),l&&(r=[l,s]),a.scrollTop(0).height(o.height),this.position(),e.fn.show.apply(n,r),this.labels.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),i.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(this._trigger("beforeclose")!==!1){var t=this.options,i=t.hide,n=this.speed,s=[];e.isArray(t.hide)&&(i=t.hide[0],n=t.hide[1]||this.speed),i&&(s=[i,n]),e.fn.hide.apply(this.menu,s),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return e.Widget.prototype.destroy.call(this),i.unbind(this._namespaceID),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},position:function(){var t=this.options;if(e.ui.position&&!e.isEmptyObject(t.position))t.position.of=t.position.of||this.button,this.menu.show().position(t.position).hide();else{var i=this.button.offset();this.menu.css({top:i.top+this.button.outerHeight(),left:i.left})}},_setOption:function(t,i){var n=this.menu;switch(t){case"header":n.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":n.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":n.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":n.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i,this.update();break;case"classes":n.add(this.button).removeClass(this.options.classes).addClass(i);break;case"multiple":n.toggleClass("ui-multiselect-single",!i),this.options.multiple=i,this.element[0].multiple=i,this.refresh();break;case"position":this.position()}e.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery),define("jquery.multiselect",["jquery-ui"],function(){}),function(e){var t=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;e.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var t=this.options,i=e(this.element),n=this.instance=i.data("echMultiselect")||i.data("multiselect");this.header=n.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");var s=this.wrapper=e('<div class="ui-multiselect-filter">'+(t.label.length?t.label:"")+'<input placeholder="'+t.placeholder+'" type="search"'+(/\d/.test(t.width)?'style="width:'+t.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=n.menu.find('input[type="checkbox"], input[type="radio"]'),this.input=s.find("input").bind({keydown:function(e){13===e.which&&e.preventDefault()},keyup:e.proxy(this._handler,this),click:e.proxy(this._handler,this)}),this.updateCache(),n._toggleChecked=function(t,i){var s=i&&i.length?i:this.labels.find("input"),o=this,r=n._isOpen?":disabled, :hidden":":disabled";s=s.not(r).each(this._toggleState("checked",t)),this.update();var a=s.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&e.inArray(this.value,a)>-1&&o._toggleState("selected",t).call(this)}),s.length&&this.element.trigger("change")};var o=e(document).bind("multiselectrefresh",e.proxy(function(){this.updateCache(),this._handler()},this));this.options.autoReset&&o.bind("multiselectclose",e.proxy(this._reset,this))},_handler:function(i){var n=e.trim(this.input[0].value.toLowerCase()),s=this.rows,o=this.inputs,r=this.cache;if(n){s.hide();var a=new RegExp(n.replace(t,"\\$&"),"gi");this._trigger("filter",i,e.map(r,function(e,t){return-1!==e.search(a)?(s.eq(t).show(),o.get(t)):null}))}else s.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var t=e(this),i=t.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==e.css(this,"display")}).length;t[i?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)"),this.cache=this.element.children().map(function(){var t=e(this);return"optgroup"===this.tagName.toLowerCase()&&(t=t.children()),t.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){e.Widget.prototype.destroy.call(this),this.input.val("").trigger("keyup"),this.wrapper.remove()}})}(jQuery),define("jquery.multiselect.filter",["jquery.multiselect"],function(){}),define("oro/datafilter/abstract-filter",["jquery","underscore","backbone","oro/app"],function(e,t,i,n){return i.View.extend({tagName:"div",className:"btn-group filter-item oro-drop",canDisable:!0,enabled:!1,defaultEnabled:!1,name:"input_name",placeholder:"All",label:"Input Label",showLabel:!0,buttonActiveClass:"open-filter",nullLink:"javascript:void(0);",initialize:function(e){e=e||{},t.has(e,"enabled")&&(this.enabled=e.enabled),t.has(e,"canDisable")&&(this.canDisable=e.canDisable),t.has(e,"placeholder")&&(this.placeholder=e.placeholder),t.has(e,"showLabel")&&(this.showLabel=e.showLabel),this.defaultEnabled=this.enabled,t.isUndefined(this.emptyValue)&&(this.emptyValue={}),this.value=t.clone(this.emptyValue),i.View.prototype.initialize.apply(this,arguments)
},enable:function(){return this.enabled||(this.enabled=!0,this.show(),this.trigger("enable",this)),this},disable:function(){return this.enabled&&(this.enabled=!1,this.hide(),this.trigger("disable",this),this.reset()),this},show:function(){return this.$el.css("display","inline-block"),this},hide:function(){return this.$el.hide(),this},reset:function(){return this.setValue(this.emptyValue),this},getValue:function(){return n.deepClone(this.value)},setValue:function(e){if(!n.isEqualsLoosely(this.value,e)){var t=this.value;this.value=n.deepClone(e),this._updateDOMValue(),this._onValueUpdated(this.value,t)}return this},_formatRawValue:function(e){return e},_formatDisplayValue:function(e){return e},_onValueUpdated:function(e,t){this._triggerUpdate(e,t)},_triggerUpdate:function(){this.trigger("update")},isEmpty:function(){return n.isEqualsLoosely(this.getValue(),this.emptyValue)},isEmptyValue:function(){return t.has(this.emptyValue,"value")&&t.has(this.value,"value")?n.isEqualsLoosely(this.value.value,this.emptyValue.value):!0},_getInputValue:function(t){var i=void 0,n=this.$(t);switch(n.attr("type")){case"radio":n.each(function(){e(this).is(":checked")&&(i=e(this).val())});break;default:i=n.val()}return i},_setInputValue:function(t,i){var n=this.$(t);switch(n.attr("type")){case"radio":n.each(function(){var t=e(this);t.attr("value")==i?(t.attr("checked",!0),t.click()):e(this).removeAttr("checked")});break;default:n.val(i)}return this},_updateDOMValue:function(){return this._writeDOMValue(this._getDisplayValue())},_getCriteriaHint:function(){return""},_getDisplayValue:function(){var e=arguments.length>0?arguments[0]:this.getValue();return this._formatDisplayValue(e)},_writeDOMValue:function(){throw new Error("Method _writeDOMValue is abstract and must be implemented")},_readDOMValue:function(){throw new Error("Method _readDOMValue is abstract and must be implemented")},_setButtonPressed:function(e,t){t?e.parent().addClass(this.buttonActiveClass):e.parent().removeClass(this.buttonActiveClass)},_preventEnterProcessing:function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation())}})}),define("oro/datafilter/none-filter",["jquery","underscore","oro/translator","oro/datafilter/abstract-filter"],function(e,t,i,n){return n.extend({template:t.template('<button type="button" class="btn filter-criteria-selector oro-drop-opener oro-dropdown-toggle"><% if (showLabel) { %><%= label %>: <% } %><strong class="filter-criteria-hint"><%= criteriaHint %></strong><span class="caret"></span></button><% if (canDisable) { %><a href="<%= nullLink %>" class="disable-filter"><i class="icon-remove hide-text"><%- _.__("Close") %></i></a><% } %><div class="filter-criteria dropdown-menu" />'),popupCriteriaTemplate:t.template("<div><%= popupHint %></div>"),popupCriteriaShowed:!1,criteriaHintSelector:".filter-criteria-hint",criteriaSelector:".filter-criteria",popupHint:"Choose a value first",events:{"click .filter-criteria-selector":"_onClickCriteriaSelector","click .filter-criteria .filter-criteria-hide":"_onClickCloseCriteria","click .disable-filter":"_onClickDisableFilter"},initialize:function(e){e=e||{},t.has(e,"popupHint")&&(this.popupHint=e.popupHint),this.label="None",n.prototype.initialize.apply(this,arguments)},ensurePopupCriteriaClosed:function(){this.popupCriteriaShowed&&this._hideCriteria()},_onClickCriteriaSelector:function(t){t.stopPropagation(),e("body").trigger("click"),this.popupCriteriaShowed?this._hideCriteria():this._showCriteria()},_onClickCloseCriteria:function(){this._hideCriteria(),this._updateDOMValue()},_onClickDisableFilter:function(e){e.preventDefault(),this.disable()},_onClickOutsideCriteria:function(e){var t=this.$(this.criteriaSelector);t.get(0)===e.target||t.has(e.target).length||(this._hideCriteria(),e.stopPropagation())},render:function(){return this.$el.empty(),this.$el.append(this.template({label:this.label,showLabel:this.showLabel,criteriaHint:this._getCriteriaHint(),nullLink:this.nullLink,canDisable:this.canDisable})),this._renderCriteria(this.$(this.criteriaSelector)),this._clickOutsideCriteriaCallback=t.bind(function(e){this.popupCriteriaShowed&&this._onClickOutsideCriteria(e)},this),e("body").on("click",this._clickOutsideCriteriaCallback),this},_renderCriteria:function(t){return e(t).append(this.popupCriteriaTemplate({popupHint:this._getPopupHint()})),this},remove:function(){return e("body").off("click",this._clickOutsideCriteriaCallback),n.prototype.remove.call(this),this},_showCriteria:function(){this.$(this.criteriaSelector).show(),this._setButtonPressed(this.$(this.criteriaSelector),!0),setTimeout(t.bind(function(){this.popupCriteriaShowed=!0},this),100)},_hideCriteria:function(){this.$(this.criteriaSelector).hide(),this._setButtonPressed(this.$(this.criteriaSelector),!1),setTimeout(t.bind(function(){this.popupCriteriaShowed=!1},this),100)},_writeDOMValue:function(){return this},_readDOMValue:function(){return{}},_getPopupHint:function(){return this.popupHint?this.popupHint:this.popupHint},_getCriteriaHint:function(){return this.criteriaHint?this.criteriaHint:this.placeholder}})}),define("oro/datafilter/text-filter",["jquery","underscore","oro/translator","oro/datafilter/abstract-filter"],function(e,t,i,n){return n.extend({template:t.template('<button type="button" class="btn filter-criteria-selector oro-drop-opener oro-dropdown-toggle"><% if (showLabel) { %><%= label %>: <% } %><strong class="filter-criteria-hint"><%= criteriaHint %></strong><span class="caret"></span></button><% if (canDisable) { %><a href="<%= nullLink %>" class="disable-filter"><i class="icon-remove hide-text"><%- _.__("Close") %></i></a><% } %><div class="filter-criteria dropdown-menu" />'),popupCriteriaTemplate:t.template('<div><div><input type="text" name="value" value=""/></div><div class="oro-action"><div class="btn-group"><button type="button" class="btn btn-primary filter-update"><%- _.__("Update") %></button></div></div></div>'),popupCriteriaShowed:!1,criteriaHintSelector:".filter-criteria-hint",criteriaSelector:".filter-criteria",criteriaValueSelectors:{value:'input[name="value"]',nested:{end:"input"}},events:{"keyup input":"_onReadCriteriaInputKey",'keydown [type="text"]':"_preventEnterProcessing","click .filter-update":"_onClickUpdateCriteria","click .filter-criteria-selector":"_onClickCriteriaSelector","click .filter-criteria .filter-criteria-hide":"_onClickCloseCriteria","click .disable-filter":"_onClickDisableFilter"},initialize:function(){t.isUndefined(this.emptyValue)&&(this.emptyValue={value:""}),n.prototype.initialize.apply(this,arguments)},ensurePopupCriteriaClosed:function(){this.popupCriteriaShowed&&(this._hideCriteria(),this.setValue(this._formatRawValue(this._readDOMValue())))},_onReadCriteriaInputKey:function(e){13==e.which&&(this._hideCriteria(),this.setValue(this._formatRawValue(this._readDOMValue())))},_onClickUpdateCriteria:function(){this._hideCriteria(),this.setValue(this._formatRawValue(this._readDOMValue()))},_onClickCriteriaSelector:function(t){t.stopPropagation(),e("body").trigger("click"),this.popupCriteriaShowed?this._hideCriteria():this._showCriteria()},_onClickCloseCriteria:function(){this._hideCriteria(),this._updateDOMValue()},_onClickDisableFilter:function(e){e.preventDefault(),this.disable()},_onClickOutsideCriteria:function(e){var t=this.$(this.criteriaSelector);t.get(0)===e.target||t.has(e.target).length||(this._hideCriteria(),this.setValue(this._formatRawValue(this._readDOMValue())),e.stopPropagation())},render:function(){return this.$el.empty(),this.$el.append(this.template({label:this.label,showLabel:this.showLabel,criteriaHint:this._getCriteriaHint(),nullLink:this.nullLink,canDisable:this.canDisable})),this._renderCriteria(this.$(this.criteriaSelector)),this._clickOutsideCriteriaCallback=t.bind(function(e){this.popupCriteriaShowed&&this._onClickOutsideCriteria(e)},this),e("body").on("click",this._clickOutsideCriteriaCallback),this},_renderCriteria:function(t){return e(t).append(this.popupCriteriaTemplate()),this},remove:function(){return e("body").off("click",this._clickOutsideCriteriaCallback),n.prototype.remove.call(this),this},_showCriteria:function(){this.$(this.criteriaSelector).show(),this._focusCriteria(),this._setButtonPressed(this.$(this.criteriaSelector),!0),setTimeout(t.bind(function(){this.popupCriteriaShowed=!0},this),100)},_hideCriteria:function(){this.$(this.criteriaSelector).hide(),this._setButtonPressed(this.$(this.criteriaSelector),!1),setTimeout(t.bind(function(){this.popupCriteriaShowed=!1},this),100)},_focusCriteria:function(){this.$(this.criteriaSelector+" input").focus().select()},_writeDOMValue:function(e){return this._setInputValue(this.criteriaValueSelectors.value,e.value),this},_readDOMValue:function(){return{value:this._getInputValue(this.criteriaValueSelectors.value)}},_onValueUpdated:function(){n.prototype._onValueUpdated.apply(this,arguments),this._updateCriteriaHint()},_updateCriteriaHint:function(){return this.$(this.criteriaHintSelector).html(this._getCriteriaHint()),this},_getCriteriaHint:function(){var e=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue();return e.value?'"'+e.value+'"':this.placeholder}})}),define("oro/datafilter/choice-filter",["jquery","underscore","oro/translator","oro/app","oro/datafilter/text-filter"],function(e,t,i,n,s){return s.extend({popupCriteriaTemplate:t.template('<div class="choicefilter"><div class="input-prepend"><div class="btn-group"><button class="btn dropdown-toggle" data-toggle="dropdown"><%= selectedChoiceLabel %><span class="caret"></span></button><ul class="dropdown-menu"><% _.each(choices, function (option) { %><li<% if (selectedChoice == option.value) { %> class="active"<% } %>><a class="choice_value" href="#" data-value="<%= option.value %>"><%= option.label %></a></li><% }); %></ul><input type="text" name="value" value=""><input class="name_input" type="hidden" name="<%= name %>" id="<%= name %>" value="<%= selectedChoice %>"/></div></div><button class="btn btn-primary filter-update" type="button"><%- _.__("Update") %></button></div></div>'),criteriaValueSelectors:{value:'input[name="value"]',type:'input[type="hidden"]'},events:{"keyup input":"_onReadCriteriaInputKey",'keydown [type="text"]':"_preventEnterProcessing","click .filter-update":"_onClickUpdateCriteria","click .filter-criteria-selector":"_onClickCriteriaSelector","click .filter-criteria .filter-criteria-hide":"_onClickCloseCriteria","click .disable-filter":"_onClickDisableFilter","click .choice_value":"_onClickChoiceValue"},initialize:function(){t.isUndefined(this.choices)&&(this.choices=[]),e.isPlainObject(this.choices)&&(this.choices=t.map(this.choices,function(e,t){return{value:t.toString(),label:e}})),t.isUndefined(this.emptyValue)&&(this.emptyValue={type:t.isEmpty(this.choices)?"":t.first(this.choices).value,value:""}),s.prototype.initialize.apply(this,arguments)},_renderCriteria:function(i){var n=this.emptyValue.type,s="";if(!t.isEmpty(this.choices)){var o=t.find(this.choices,function(e){return e.value==n});s=o.label}return e(i).append(this.popupCriteriaTemplate({name:this.name,choices:this.choices,selectedChoice:n,selectedChoiceLabel:s})),this},_getCriteriaHint:function(){var e,t,i=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue();return i.value?(e=this._getChoiceOption(i.type),t=(e?e.label+" ":"")+'"'+i.value+'"'):t=this.placeholder,t},_getChoiceOption:function(e){return t.findWhere(this.choices,{value:e.toString()})},_writeDOMValue:function(e){return this._setInputValue(this.criteriaValueSelectors.value,e.value),this._setInputValue(this.criteriaValueSelectors.type,e.type),this},_readDOMValue:function(){return{value:this._getInputValue(this.criteriaValueSelectors.value),type:this._getInputValue(this.criteriaValueSelectors.type)}},_triggerUpdate:function(e,t){n.isEqualsLoosely(e,t)||this.trigger("update")},_onValueUpdated:function(t,i){var n=this.$(".choicefilter .dropdown-menu");n.find("li a").each(function(){var s=e(this);s.data("value")==i.type&&s.parent().hasClass("active")?s.parent().removeClass("active"):s.data("value")!=t.type||s.parent().hasClass("active")||(s.parent().addClass("active"),n.parent().find("button").html(s.html()+'<span class="caret"></span>'))}),s.prototype._onValueUpdated.apply(this,arguments)},_onClickChoiceValue:function(t){e(t.currentTarget).parent().parent().find("li").each(function(){e(this).removeClass("active")}),e(t.currentTarget).parent().addClass("active");var i=e(t.currentTarget).parent().parent().parent();i.find(".name_input").val(e(t.currentTarget).attr("data-value")),i.find("button").html(e(t.currentTarget).html()+'<span class="caret"></span>'),t.preventDefault()}})}),define("oro/datafilter/date-filter",["jquery","underscore","oro/translator","oro/datafilter/choice-filter","oro/locale-settings"],function(e,t,i,n,s){return n.extend({popupCriteriaTemplate:t.template('<div><div class="horizontal clearfix"><select name="<%= name %>" class="filter-select-oro"><% _.each(choices, function (option) { %><option value="<%= option.value %>"<% if (option.value == selectedChoice) { %> selected="selected"<% } %>><%= option.label %></option><% }); %></select></div><div><input type="text" class="<%= inputClass %>" value="" name="start" placeholder="from"><span class="filter-separator">-</span><input type="text" class="<%= inputClass %>" value="" name="end" placeholder="to"></div><div class="oro-action"><div class="btn-group"><button class="btn btn-primary filter-update" type="button"><%- _.__("Update") %></button></div></div></div>'),criteriaValueSelectors:{type:"select",value:{start:'input[name="start"]',end:'input[name="end"]'}},inputClass:"date-visual-element",dateWidgetOptions:{changeMonth:!0,changeYear:!0,yearRange:"-80:+1",dateFormat:s.getVendorDateTimeFormat("jquery_ui","date","mm/dd/yy"),altFormat:"yy-mm-dd",className:"date-filter-widget",showButtonPanel:!0},externalWidgetOptions:{},dateWidgets:{start:null,end:null},typeValues:{between:1,notBetween:2,moreThan:3,lessThan:4},dateWidgetSelector:"div#ui-datepicker-div.ui-datepicker",initialize:function(){t.extend(this.dateWidgetOptions,this.externalWidgetOptions),t.isUndefined(this.emptyValue)&&(this.emptyValue={type:t.isEmpty(this.choices)?"":t.first(this.choices).value,value:{start:"",end:""}}),n.prototype.initialize.apply(this,arguments)},changeFilterType:function(e){var t=this.$el.find(e.currentTarget),i=t.val();this.$el.find(".filter-separator").show().end().find("input").show(),this.typeValues.moreThan==parseInt(i)?this.$el.find(".filter-separator").hide().end().find(this.criteriaValueSelectors.value.end).hide():this.typeValues.lessThan==parseInt(i)&&this.$el.find(".filter-separator").hide().end().find(this.criteriaValueSelectors.value.start).hide()},_renderCriteria:function(i){return e(i).append(this.popupCriteriaTemplate({name:this.name,choices:this.choices,selectedChoice:this.emptyValue.type,inputClass:this.inputClass})),e(i).find("select:first").bind("change",t.bind(this.changeFilterType,this)),t.each(this.criteriaValueSelectors.value,function(e,t){this.dateWidgets[t]=this._initializeDateWidget(e)},this),this},_initializeDateWidget:function(t){this.$(t).datepicker(this.dateWidgetOptions);var i=this.$(t).datepicker("widget");return i.addClass(this.dateWidgetOptions.className),e(this.dateWidgetSelector).on("click",function(e){e.stopImmediatePropagation()}),i},_getCriteriaHint:function(){var e,t,n,s,o="",r=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue();if(r.value){switch(t=r.value.start,n=r.value.end,s=r.type?r.type.toString():""){case this.typeValues.moreThan.toString():o+=[i("more than"),t].join(" ");break;case this.typeValues.lessThan.toString():o+=[i("less than"),n].join(" ");break;case this.typeValues.notBetween.toString():t&&n?(e=this._getChoiceOption(this.typeValues.notBetween),o+=[e.label,t,i("and"),n].join(" ")):t?o+=[i("before"),t].join(" "):n&&(o+=[i("after"),n].join(" "));break;case this.typeValues.between.toString():default:t&&n?(e=this._getChoiceOption(this.typeValues.between),o+=[e.label,t,i("and"),n].join(" ")):t?o+=[i("from"),t].join(" "):n&&(o+=[i("to"),n].join(" "))}if(o)return o}return this.placeholder},_formatDisplayValue:function(e){var t=this.dateWidgetOptions.altFormat,i=this.dateWidgetOptions.dateFormat;return this._formatValueDates(e,t,i)},_formatRawValue:function(e){var t=this.dateWidgetOptions.dateFormat,i=this.dateWidgetOptions.altFormat;return this._formatValueDates(e,t,i)},_formatValueDates:function(e,t,i){return e.value&&e.value.start&&(e.value.start=this._formatDate(e.value.start,t,i)),e.value&&e.value.end&&(e.value.end=this._formatDate(e.value.end,t,i)),e},_formatDate:function(t,i,n){var s=e.datepicker.parseDate(i,t);return s||(s=e.datepicker.parseDate(n,t))?e.datepicker.formatDate(n,s):t},_writeDOMValue:function(e){return this._setInputValue(this.criteriaValueSelectors.value.start,e.value.start),this._setInputValue(this.criteriaValueSelectors.value.end,e.value.end),this._setInputValue(this.criteriaValueSelectors.type,e.type),this},_readDOMValue:function(){return{type:this._getInputValue(this.criteriaValueSelectors.type),value:{start:this._getInputValue(this.criteriaValueSelectors.value.start),end:this._getInputValue(this.criteriaValueSelectors.value.end)}}},_focusCriteria:function(){},_hideCriteria:function(){n.prototype._hideCriteria.apply(this,arguments)},_triggerUpdate:function(e,t){e=e.value,t=t.value,(e&&(e.start||e.end)||t&&(t.start||t.end))&&this.trigger("update")}})}),define("oro/datafilter/datetime-filter",["jquery","underscore","oro/datafilter/date-filter","oro/locale-settings"],function(e,t,i,n){return i.extend({inputClass:"datetime-visual-element",dateWidgetOptions:t.extend({timeFormat:n.getVendorDateTimeFormat("jquery_ui","time","HH:mm"),altFieldTimeOnly:!1,altSeparator:" ",altTimeFormat:"HH:mm"},i.prototype.dateWidgetOptions),_initializeDateWidget:function(t){this.$(t).datetimepicker(this.dateWidgetOptions);var i=this.$(t).datetimepicker("widget");return i.addClass(this.dateWidgetOptions.className),e(this.dateWidgetSelector).on("click",function(e){e.stopImmediatePropagation()}),i},_formatDisplayValue:function(e){var t=this.dateWidgetOptions.altFormat,i=this.dateWidgetOptions.dateFormat,n=this.dateWidgetOptions.altTimeFormat,s=this.dateWidgetOptions.timeFormat;return this._formatValueDatetimes(e,t,i,n,s)},_formatRawValue:function(e){var t=this.dateWidgetOptions.dateFormat,i=this.dateWidgetOptions.altFormat,n=this.dateWidgetOptions.timeFormat,s=this.dateWidgetOptions.altTimeFormat;return this._formatValueDatetimes(e,t,i,n,s)},_formatValueDatetimes:function(e,t,i,n,s){return e.value&&e.value.start&&(e.value.start=this._formatDatetime(e.value.start,t,i,n,s)),e.value&&e.value.end&&(e.value.end=this._formatDatetime(e.value.end,t,i,n,s)),e},_formatDatetime:function(e,t,i,n,s){var o=this._formatDate(e,t,i),r=this._formatDate(o,i,t),a=e.substr(r.length+this.dateWidgetOptions.altSeparator.length);return a=this._formatTime(a,n,s),o+this.dateWidgetOptions.altSeparator+a},_formatTime:function(t,i,n){var s=e.datepicker.parseTime(i,t);return s||(s=e.datepicker.parseTime(n,t))?e.datepicker.formatTime(n,s):t}})}),define("oro/multiselect-decorator",["jquery","underscore","oro/mediator","jquery.multiselect","jquery.multiselect.filter"],function(e,t,i){var n=function(e){this.initialize(e)};return n.prototype={element:null,parameters:{height:"auto"},contextSearch:!0,initialize:function(e){if(!e.element)throw new Error("Select element must be defined");this.element=e.element,e.parameters&&t.extend(this.parameters,e.parameters),t.has(e,"contextSearch")&&(this.contextSearch=e.contextSearch),this.multiselect(this.parameters),this.contextSearch&&this.multiselectfilter({label:"",placeholder:"",autoReset:!0}),i.once("hash_navigation_request:start",function(){this.element.closest("body").length&&(this.multiselect("destroy"),this.element.hide())},this)},setViewDesign:function(e){e.$(".ui-multiselect").removeClass("ui-widget").removeClass("ui-state-default"),e.$(".ui-multiselect span.ui-icon").remove()},_setDropdownDesign:function(){var e=this.getWidget();e.addClass("dropdown-menu"),e.removeClass("ui-widget-content"),e.removeClass("ui-widget"),e.find(".ui-widget-header").removeClass("ui-widget-header"),e.find(".ui-multiselect-filter").removeClass("ui-multiselect-filter"),e.find("ul li label").removeClass("ui-corner-all")},onOpenDropdown:function(){this._setDropdownDesign(),this.getWidget().find('input[type="search"]').focus(),e("body").trigger("click")},getMinimumDropdownWidth:function(){var i=0,n=this.getWidget().find(".ui-multiselect-checkboxes li");return t.each(n,function(t){var n=this._getTextWidth(e(t).find("label"));n>i&&(i=n)},this),i},_getTextWidth:function(e){var t=e.html(),i="<span>"+t+"</span>";e.html(i);var n=e.find("span:first").width();return e.html(t),n},getWidget:function(){return this.multiselect("widget")},multiselect:function(e){return this.element.multiselect(e)},multiselectfilter:function(e){return this.element.multiselectfilter(e)},updateDropdownPosition:function(e){var t=e.offset();this.getWidget().css({top:t.top+e.outerHeight(),left:t.left})}},n}),define("oro/datafilter/select-filter",["underscore","oro/translator","oro/datafilter/abstract-filter","oro/multiselect-decorator"],function(e,t,i,n){return i.extend({template:e.template('<div class="btn filter-select filter-criteria-selector"><% if (showLabel) { %><%= label %>: <% } %><select><% _.each(options, function (option) { %><option value="<%= option.value %>"<% if (option.value == emptyValue.type) { %> selected="selected"<% } %>><%= option.label %></option><% }); %></select></div><% if (canDisable) { %><a href="<%= nullLink %>" class="disable-filter"><i class="icon-remove hide-text"><%- _.__("Close") %></i></a><% } %>'),populateDefault:!0,containerSelector:".filter-select",disableSelector:".disable-filter",buttonSelector:".select-filter-widget.ui-multiselect:first",inputSelector:"select",selectWidget:null,minimumWidth:null,widgetOptions:{multiple:!1,classes:"select-filter-widget"},selectDropdownOpened:!1,contextSearch:!0,events:{"keydown select":"_preventEnterProcessing","click .filter-select":"_onClickFilterArea","click .disable-filter":"_onClickDisableFilter","change select":"_onSelectChange"},initialize:function(){e.isUndefined(this.choices)&&(this.choices=[]),this.choices=e.map(this.choices,function(t,i){return e.isString(t)?{value:i,label:t}:t}),e.isUndefined(this.emptyValue)&&(this.emptyValue={value:""}),i.prototype.initialize.apply(this,arguments)},render:function(){var e=this.choices.slice(0);return this.$el.empty(),this.populateDefault&&e.unshift({value:"",label:this.placeholder}),this.$el.append(this.template({label:this.label,showLabel:this.showLabel,options:e,placeholder:this.placeholder,nullLink:this.nullLink,canDisable:this.canDisable,emptyValue:this.emptyValue})),this._initializeSelectWidget(),this},_initializeSelectWidget:function(){this.selectWidget=new n({element:this.$(this.inputSelector),parameters:e.extend({noneSelectedText:this.placeholder,selectedText:e.bind(function(e,t,i){return this._getSelectedText(i)},this),position:{my:"left top+2",at:"left bottom",of:this.$(this.containerSelector)},open:e.bind(function(){this.selectWidget.onOpenDropdown(),this._setDropdownWidth(),this._setButtonPressed(this.$(this.containerSelector),!0),this.selectDropdownOpened=!0},this),close:e.bind(function(){this._setButtonPressed(this.$(this.containerSelector),!1),setTimeout(e.bind(function(){this.selectDropdownOpened=!1},this),100)},this)},this.widgetOptions),contextSearch:this.contextSearch}),this.selectWidget.setViewDesign(this),this.$(this.buttonSelector).append('<span class="caret"></span>')},_getSelectedText:function(t){if(e.isEmpty(t))return this.placeholder;var i=[];return e.each(t,function(e){var t=e.getAttribute("title");t&&i.push(t)}),i.join(", ")},_getCriteriaHint:function(){var t=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue(),i=e.find(this.choices,function(e){return e.value==t.value});return e.isUndefined(i)?this.placeholder:i.label},_setDropdownWidth:function(){this.minimumWidth||(this.minimumWidth=this.selectWidget.getMinimumDropdownWidth()+22);var e=this.selectWidget.getWidget(),t=this.$(this.containerSelector).width(),i=Math.max(t+10,this.minimumWidth);e.width(i).css("min-width",i+"px"),e.find('input[type="search"]').width(i-22)},_onClickFilterArea:function(t){this.selectDropdownOpened?setTimeout(e.bind(function(){this.selectWidget.multiselect("close")},this),50):setTimeout(e.bind(function(){this.selectWidget.multiselect("open")},this),50),t.stopPropagation()},_onSelectChange:function(){this.setValue(this._formatRawValue(this._readDOMValue()));var e=this.$(this.containerSelector);this.selectWidget.updateDropdownPosition(e)},_onClickDisableFilter:function(e){e.preventDefault(),this.disable()},_onValueUpdated:function(){i.prototype._onValueUpdated.apply(this,arguments),this.selectWidget.multiselect("refresh")},_writeDOMValue:function(e){return this._setInputValue(this.inputSelector,e.value),this},_readDOMValue:function(){return{value:this._getInputValue(this.inputSelector)}}})}),define("oro/datafilter/multiselect-filter",["underscore","oro/translator","oro/datafilter/select-filter"],function(e,t,i){return i.extend({template:e.template('<div class="btn filter-select filter-criteria-selector"><% if (showLabel) { %><%= label %>: <% } %><select multiple><% _.each(options, function (option) { %><option value="<%= option.value %>"><%= option.label %></option><% }); %></select></div><% if (canDisable) { %><a href="<%= nullLink %>" class="disable-filter"><i class="icon-remove hide-text"><%- _.__("Close") %></i></a><% } %>'),widgetOptions:{multiple:!0,classes:"select-filter-widget multiselect-filter-widget"},_onSelectChange:function(){i.prototype._onSelectChange.apply(this,arguments),this._setDropdownWidth()}})}),define("oro/datafilter/abstract-formatter",[],function(){var e=function(){};return e.prototype={fromRaw:function(e){return e},toRaw:function(e){return e}},e}),define("oro/datafilter/number-formatter",["underscore","oro/datafilter/abstract-formatter"],function(e,t){var i=function(t){if(t=t?e.clone(t):{},e.extend(this,this.defaults,t),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};return i.prototype=new t,e.extend(i.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(e){if(isNaN(e)||null===e)return"";e=e.toFixed(~~this.decimals);var t=e.split("."),i=t[0],n=t[1]?(this.decimalSeparator||".")+t[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+n},toRaw:function(t){for(var i="",n=t.trim().split(this.orderSeparator),s=0;s<n.length;s++)i+=n[s];var o=i.split(this.decimalSeparator);i="";for(var s=0;s<o.length;s++)i=i+o[s]+".";"."===i[i.length-1]&&(i=i.slice(0,i.length-1));var r=1*(1*i).toFixed(~~this.decimals);return e.isNumber(r)&&!e.isNaN(r)?r:void 0}}),i}),define("oro/datafilter/number-filter",["underscore","oro/datafilter/choice-filter","oro/datafilter/number-formatter"],function(e,t,i){return t.extend({initialize:function(n){n=n||{},e.isUndefined(this.formatterOptions)&&(this.formatterOptions={}),this.formatter=new i(this.formatterOptions),t.prototype.initialize.apply(this,arguments)},_formatRawValue:function(e){return e.value=""===e.value?void 0:this.formatter.toRaw(String(e.value)),e},_formatDisplayValue:function(t){return e.isNumber(t.value)&&(t.value=this.formatter.fromRaw(t.value)),t}})}),define("oro/datafilter/select-row-filter",["underscore","backbone","oro/datafilter/select-filter"],function(e,t,i){return i.extend({getValue:function(){return this._formatRawValue(e.omit(this.value,"in","out"))},_formatRawValue:function(t){if((e.has(t,"in")||e.has(t,"out"))&&this._initialSelection(t),""!==t.value){var i,n=this._getSelection();e.isArray(n.selected)&&(i=n.inset===Boolean(parseInt(t.value,10))?"in":"out",t[i]=n.selected.join(","))}return t},_formatDisplayValue:function(t){return e.omit(t,"in","out")},_getSelection:function(){var t={};return this.collection.trigger("backgrid:getSelected",t),e.defaults(t,{inset:!0,selected:[]})},_initialSelection:function(i){var n=!0;Boolean(parseInt(i.value,10))!==e.has(i,"in")&&(this.collection.trigger("backgrid:selectAll"),n=!1),e.each(e.values(e.pick(i,"in","out"))[0].split(",")||[],e.partial(function(e,i){var s=e.get(i);s instanceof t.Model&&s.trigger("backgrid:select",s,n)},this.collection))}})}),define("oro/datafilter/filters-manager",["jquery","underscore","backbone","oro/mediator","oro/multiselect-decorator","oro/app"],function(e,t,i,n,s,o){return i.View.extend({filters:{},templateSelector:"#filter-container",template:null,filterSelector:"#add-filter-select",addButtonHint:"Manage filters",selectWidget:null,buttonSelector:".ui-multiselect.filter-list",events:{"change #add-filter-select":"_onChangeFilterSelect","click #reset-filter-button":"_onReset","click a.dropdown-toggle":"_onDropdownToggle"},initialize:function(s){this.template=t.template(e(this.templateSelector).html()),s.filters&&(this.filters=s.filters),t.each(this.filters,function(e){this.listenTo(e,"update",this._onFilterUpdated),this.listenTo(e,"disable",this._onFilterDisabled)},this),s.addButtonHint&&(this.addButtonHint=s.addButtonHint),i.View.prototype.initialize.apply(this,arguments),n.once("hash_navigation_request:start",function(){t.each(this.filters,function(e){this.stopListening(e,"update",this._onFilterUpdated),this.stopListening(e,"disable",this._onFilterDisabled)},this)},this),o.isMobile()&&this.collection.on("beforeFetch",this.closeDropdown,this)},_onFilterUpdated:function(e){this.trigger("updateFilter",e)},_onFilterDisabled:function(e){this.trigger("disableFilter",e),this.disableFilter(e)},getValues:function(){var e={};return t.each(this.filters,function(t){t.enabled&&(e[t.name]=t.getValue())},this),e},setValues:function(e){t.each(e,function(e,i){t.has(this.filters,i)&&this.filters[i].setValue(e)},this)},_onChangeFilterSelect:function(){this.trigger("updateList",this),this._processFilterStatus()},enableFilter:function(e){return this.enableFilters([e])},disableFilter:function(e){return this.disableFilters([e])},enableFilters:function(e){if(t.isEmpty(e))return this;var i=[];t.each(e,function(e){e.enable(),i.push('option[value="'+e.name+'"]:not(:selected)')},this);var n=this.$(this.filterSelector).find(i.join(","));return n.length&&n.attr("selected",!0),i.length&&this.selectWidget.multiselect("refresh"),this},disableFilters:function(e){if(t.isEmpty(e))return this;var i=[];t.each(e,function(e){e.disable(),i.push('option[value="'+e.name+'"]:selected')},this);var n=this.$(this.filterSelector).find(i.join(","));return n.length&&n.removeAttr("selected"),i.length&&this.selectWidget.multiselect("refresh"),this},render:function(){var i=e(this.template({filters:this.filters}));this.setElement(i);var n=document.createDocumentFragment();return t.each(this.filters,function(e){e.render(),e.enabled||e.hide(),n.appendChild(e.$el.get(0))},this),this.trigger("rendered"),t.isEmpty(this.filters)?i.hide():(i.find(".filter-container").append(n),this._initializeSelectWidget()),this},_initializeSelectWidget:function(){this.selectWidget=new s({element:this.$(this.filterSelector),parameters:{multiple:!0,selectedList:0,selectedText:this.addButtonHint,classes:"filter-list select-filter-widget",open:e.proxy(function(){this.selectWidget.onOpenDropdown(),this._setDropdownWidth(),this._updateDropdownPosition()},this)}}),this.selectWidget.setViewDesign(this),this.$(".filter-list span:first").replaceWith('<a id="add-filter-button" href="javascript:void(0);">'+this.addButtonHint+"</a>")},_setDropdownWidth:function(){var e=this.selectWidget.getWidget(),t=this.selectWidget.getMinimumDropdownWidth()+24;e.width(t).css("min-width",t+"px"),e.find('input[type="search"]').width(t-22)},_processFilterStatus:function(){var e=this.$(this.filterSelector).val();t.each(this.filters,function(i,n){i.enabled||-1==t.indexOf(e,n)?i.enabled&&-1==t.indexOf(e,n)&&this.disableFilter(i):this.enableFilter(i)
},this),this._updateDropdownPosition()},_updateDropdownPosition:function(){var t=this.$(this.buttonSelector),i=t.offset(),n=this.selectWidget.getWidget().outerWidth(),s=e(window).width(),o=i.left;i.left+n>s&&(o=i.left+t.outerWidth()-n),this.selectWidget.getWidget().css({top:i.top+t.outerHeight(),left:o})},_onReset:function(){n.trigger("datagrid:doReset:"+this.collection.inputName)},_onDropdownToggle:function(e){e.preventDefault(),e.stopPropagation(),this.$el.find(".dropdown").toggleClass("oro-open")},closeDropdown:function(){this.$el.find(".dropdown").removeClass("oro-open")}})}),define("oro/datafilter/collection-filters-manager",["underscore","oro/datafilter/filters-manager"],function(e,t){return t.extend({initialize:function(e){this.collection=e.collection,this.collection.on("beforeFetch",this._beforeCollectionFetch,this),this.collection.on("updateState",this._onUpdateCollectionState,this),this.collection.on("reset",this._onCollectionReset,this),t.prototype.initialize.apply(this,arguments)},_onFilterUpdated:function(){this.ignoreFiltersUpdateEvents||(this.collection.state.currentPage=1,this.collection.fetch(),t.prototype._onFilterUpdated.apply(this,arguments))},_beforeCollectionFetch:function(e){e.state.filters=this._createState()},_onUpdateCollectionState:function(e){this.ignoreFiltersUpdateEvents=!0,this._applyState(e.state.filters||{}),this.ignoreFiltersUpdateEvents=!1},_onCollectionReset:function(e){e.state.totalRecords>0&&this.$el.children().length>0&&this.$el.show()},_createState:function(){var t={};return e.each(this.filters,function(e,i){var n="__"+i;e.enabled?e.isEmpty()?e.defaultEnabled||(t[n]=1):t[i]=e.getValue():e.defaultEnabled&&(t[n]=0)},this),t},_applyState:function(t){var i=[],n=[];return e.each(this.filters,function(s,o){var r,a="__"+o;e.has(t,o)?(r=t[o],e.isObject(r)||(r={value:r}),s.setValue(r),i.push(s)):e.has(t,a)?(s.reset(),Number(t[a])?i.push(s):n.push(s)):(s.reset(),s.defaultEnabled?i.push(s):n.push(s))},this),this.enableFilters(i),this.disableFilters(n),this}})}),define("oro/datafilter-builder",["jquery","underscore","oro/tools","oro/mediator","oro/datafilter/collection-filters-manager"],function(e,t,i,n,s){var o=!1,r="oro/datafilter/{{type}}-filter",a={string:"choice",choice:"select",selectrow:"select-row",multichoice:"multiselect","boolean":"select"},l={initBuilder:function(){this.metadata=t.extend({filters:{}},this.$el.data("metadata")),this.modules={},l.collectModules.call(this),i.loadModules(this.modules,t.bind(l.build,this))},collectModules:function(){var e=this.modules;t.each(this.metadata.filters||{}||{},function(t){var i=t.type;e[i]=r.replace("{{type}}",a[i]||i)})},build:function(){var e=l.combineOptions.call(this);e.collection=this.collection;var t=new s(e);this.$el.prepend(t.render().$el),n.trigger("datagrid_filters:rendered",this.collection),0===this.collection.length&&t.$el.hide()},combineOptions:function(){var e={},i=this.modules,n=this.collection;return t.each(this.metadata.filters,function(s){t.has(s,"name")&&t.has(s,"type")&&("selectrow"==s.type&&(s.collection=n),e[s.name]=new(i[s.type].extend(s)))}),{filters:e}}},c=function(e,t){l.initBuilder.call({$el:t,collection:e}),o=!0};return{init:function(){o=!1,n.once("datagrid_collection_set_after",c),n.once("hash_navigation_request:start",function(){o||n.off("datagrid_collection_set_after",c)})}}}),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return i.settings.submitHandler?(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var s=e.data(n.form,"validator").settings,o=s.rules,r=e.validator.staticRules(n);switch(t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,o[n.name]=r,i.messages&&(s.messages[n.name]=e.extend(s.messages[n.name],i.messages));break;case"remove":if(!i)return delete o[n.name],r;var a={};return e.each(i.split(/\s/),function(e,t){a[t]=r[t],delete r[t]}),a}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i=e(t).attr("type"),n=e(t).val();return"radio"===i||"checkbox"===i?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),s=!1,o=this.elementValue(t);for(var r in n){var a={method:r,parameters:n[r]};try{if(i=e.validator.methods[r].call(this,o,t,a.parameters),"dependency-mismatch"===i){s=!0;continue}if(s=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!i)return this.formatAndAdd(t,a),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",l),l}}return s?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return e(t).data("msg-"+i.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),s=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):s.test(n)&&(n=e.validator.format(n.replace(s,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t),s=n[0].getAttribute("type");for(var o in e.validator.methods){var r;"required"===o?(r=n.get(0).getAttribute(o),""===r&&(r=!0),r=!!r):r=n.attr(o),/min|max/.test(o)&&(null===s||/number|range|text/.test(s))&&(r=Number(r)),r?i[o]=r:s===o&&"range"!==s&&(i[o]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i,n,s={},o=e(t);for(i in e.validator.methods)n=o.data("rule-"+i.toLowerCase()),void 0!==n&&(s[i]=n);return s},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,s){if(s===!1)return delete t[n],void 0;if(s.param||s.depends){var o=!0;switch(typeof s.depends){case"string":o=!!e(s.depends,i.form).length;break;case"function":o=s.depends.call(i,i)}o?t[n]=void 0!==s.param?s.param:!0:delete t[n]}}),e.each(t,function(n,s){t[n]=e.isFunction(s)?s(i):s}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var s=e(i).val();return s&&s.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,s=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var r=e.charAt(o);n=parseInt(r,10),s&&(n*=2)>9&&(n-=9),i+=n,s=!s}return 0===i%10},minlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||s>=n},maxlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=s},rangelength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||s>=n[0]&&s<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,n){var s=e(n);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===s.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var s=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===t)return s.valid;s.old=t;var o=this;this.startRequest(i);var r={};return r[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){o.settings.messages[i.name].remote=s.originalMessage;var r=n===!0||"true"===n;if(r){var a=o.formSubmitted;o.prepareElement(i),o.formSubmitted=a,o.successList.push(i),delete o.invalid[i.name],o.showErrors()}else{var l={},c=n||o.defaultMessage(i,"remote");l[i.name]=s.message=e.isFunction(c)?c(t):c,o.invalid[i.name]=!0,o.showErrors(l)}s.valid=r,o.stopRequest(i,r)}},n)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){var s=e.port;"abort"===e.mode&&(t[s]&&t[s].abort(),t[s]=n)});else{var i=e.ajax;e.ajax=function(n){var s=("mode"in n?n:e.ajaxSettings).mode,o=("port"in n?n:e.ajaxSettings).port;return"abort"===s?(t[o]&&t[o].abort(),t[o]=i.apply(this,arguments),t[o]):i.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var s=e(i.target);return s.is(t)?n.apply(s,arguments):void 0})}})}(jQuery),define("jquery.validate",["jquery"],function(){}),define("oro/validate-setup",["jquery","underscore","oro/translator","oro/tools","jquery.validate"],function(e,t,i,n){function s(i){var n=e(i),s=n.parents("form").first(),o=e(s).data("validator");return t.filter(n.add(n.parentsUntil(s)).add(s).toArray(),function(t){var n=e(t);return n.data("validation")&&(n.is(i)||o.elementsOf(n).first().is(i))})}function o(i){var n=t.map(s(i),function(t){return e(t).data("validation")});return n.unshift({}),t.extend.apply(null,n)}function r(i,n){return n=n||e(i).data("violated"),t.find(s(i).reverse(),function(t){return e(t).data("validation").hasOwnProperty(n)})}function a(t){var i=e(r(t));return i.parent().is(".selector, .uploader, .input-append, .input-prepend")&&(i=i.parent()),i}e.validator.attributeRules=function(){return{}},e.validator.classRules=function(){return{}},e.validator.dataRules=function(i){var n={};return t.each(o(i),function(t,s){e.validator.methods[s]?n[s]={param:t}:e(i.form).data("validator").settings.debug&&console.error('Validation method "'+s+'" does not exist')}),t.each(["NotNull","NotBlank"],function(t){if(n[t]){var i={};i[t]=n[t],delete n[t],n=e.extend(i,n)}}),n},e.validator.prototype.elementsOf=function(t){return e(t).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore)},e.validator.prototype.defaultMessage=t.wrap(e.validator.prototype.defaultMessage,function(e){var n=e.apply(this,t.rest(arguments));return t.isString(n)?i(n):n}),e.validator.prototype.formatAndAdd=t.wrap(e.validator.prototype.formatAndAdd,function(i,n,s){return e(n).data("violated",s.method),i.apply(this,t.rest(arguments))}),e.validator.prototype.showLabel=t.wrap(e.validator.prototype.showLabel,function(e,i,n){var s=this.errorsFor(i);return n&&s.length&&this.settings.errorPlacement(s,i),e.apply(this,t.rest(arguments))}),e.validator.prototype.focusInvalid=t.wrap(e.validator.prototype.focusInvalid,function(i){var n=e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]);this.settings.focusInvalid&&n.is(".select2[type=hidden]")?n.parent().find("input.select2-focusser").focus().trigger("focusin"):i.apply(this,t.rest(arguments))}),e.validator.loadMethod=function(i){n.loadModules(e.makeArray(i),function(i){t.each(i,function(t){e.validator.addMethod.apply(e.validator,t)})})},e.validator.setDefaults({errorElement:"span",errorClass:"validation-faled",errorPlacement:function(e,t){e.insertAfter(a(t))},highlight:function(e){this.settings.unhighlight.call(this,e);var t=a(e);t.addClass("error").closest(".controls").addClass("validation-error"),t.closest(".control-group").find("label").addClass("validation-error")},unhighlight:function(t){var i=e(t);i.closest(".error").removeClass("error").closest(".control").removeClass("validation-error"),i.closest(".control-group").find("label").removeClass("validation-error")},ignore:":hidden:not([type=hidden])"});var l=["oro/validator/count","oro/validator/date","oro/validator/email","oro/validator/length","oro/validator/notblank","oro/validator/notnull","oro/validator/range","oro/validator/regex","oro/validator/repeated","oro/validator/url"];e.validator.loadMethod(l),e.validator.dataRules=t.wrap(e.validator.dataRules,function(i,n){var s,o,r=i(n);return e.isEmptyObject(r)||(s=e(n).parents("[data-validation-optional-group]").get(0)),s&&(o=e(n.form).data("validator"),o.settings.unhighlight(n),t.each(r,function(i){i.depends=function(){return t.some(o.elementsOf(s),function(t){return e.validator.methods.required.call(o,o.elementValue(t),t)})}})),r}),e.fn.validateDelegate=t.wrap(e.fn.validateDelegate,function(e,t,i,n){return e.call(this,t,i,function(){return this[0]&&this[0].form&&n.apply(this,arguments)})})}),define("oro/validator/number",["underscore","oro/translator"],function(e,t){function i(t,i,n){var s=!0;return e.isUndefined(i)||i!==n?(e.isUndefined(i)||null===i||(s=t>=parseInt(i,10)||-1),s!==!0||e.isUndefined(n)||null===n||(s=t<=parseInt(n,10)||1)):s=t===parseInt(i,10)||0,s}var n={exactMessage:"",maxMessage:"",minMessage:""};return["Number",function(e,t,n){var s=i(Number(e),n.min,n.max);return s===!0},function(s,o,r){var a,l,c,h={};switch(s=e.extend({},n,s),r=e.isUndefined(r)?this.elementValue(o):r,a=i(Number(r),s.min,s.max)){case 0:l=s.exactMessage,c=s.min;break;case 1:l=s.maxMessage,c=s.max;break;case-1:l=s.minMessage,c=s.min;break;default:return""}return h.limit=c,t(l,h,c)}]}),define("oro/validator/count",["underscore","oro/validator/number"],function(e,t){function i(e,t){return e.findByName(t.name).filter(":checked").length}var n={exactMessage:"This collection should contain exactly {{ limit }} element.|This collection should contain exactly {{ limit }} elements.",maxMessage:"This collection should contain {{ limit }} element or less.|This collection should contain {{ limit }} elements or less.",minMessage:"This collection should contain {{ limit }} element or more.|This collection should contain {{ limit }} elements or more."};return["Count",function(e,n,s){return e=i(this,n),this.optional(n)||t[1].call(this,e,n,s)},function(s,o){var r=i(this,o);return s=e.extend({},n,s),t[2].call(this,s,o,r)}]}),define("oro/validator/date",["underscore","oro/translator","oro/formatter/datetime"],function(e,t,i){var n={message:"This value is not a valid date."};return["Date",function(e,t){return this.optional(t)||i.isDateValid(String(e))},function(i){return i=e.extend({},n,i),t(i.message)}]}),define("oro/validator/email",["jquery","underscore","oro/translator","jquery.validate"],function(e,t,i){var n={message:"This value is not a valid email address."};return["Email",function(){return e.validator.methods.email.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oro/validator/length",["underscore","oro/validator/number"],function(e,t){var i={exactMessage:"This value should have exactly {{ limit }} character.|This value should have exactly {{ limit }} characters.",maxMessage:"This value is too long. It should have {{ limit }} character or less.|This value is too long. It should have {{ limit }} characters or less.",minMessage:"This value is too short. It should have {{ limit }} character or more.|This value is too short. It should have {{ limit }} characters or more."};return["Length",function(e,i,n){return this.optional(i)||t[1].call(this,e.length,i,n)},function(n,s){var o=this.elementValue(s);return n=e.extend({},i,n),t[2].call(this,n,s,o.length)}]}),define("oro/validator/notblank",["jquery","underscore","oro/translator","jquery.validate"],function(e,t,i){var n={message:"This value should not be blank."};return["NotBlank",function(){return e.validator.methods.required.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oro/validator/notnull",["jquery","underscore","oro/translator","jquery.validate"],function(e,t,i){var n={message:"This value should not be null."};return["NotNull",function(){return e.validator.methods.required.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oro/validator/range",["underscore","oro/translator","oro/formatter/number"],function(e,t,i){var n={minMessage:"This value should be {{ limit }} or more.",maxMessage:"This value should be {{ limit }} or less.",invalidMessage:"This value should be a valid number."};return["Range",function(e,t,n){return e=i.unformat(e),this.optional(t)||!(isNaN(e)||null!==n.min&&e<Number(n.min)||null!==n.max&&e>Number(n.max))},function(s,o){var r,a={},l=i.unformat(this.elementValue(o));return s=e.extend({},n,s),isNaN(l)?r=s.invalidMessage:null!==s.min&&l<Number(s.min)?(r=s.minMessage,a.limit=s.min):null!==s.max&&l>Number(s.max)&&(r=s.maxMessage,a.limit=s.max),t(r,a)}]}),define("oro/validator/regex",["underscore","oro/translator"],function(e,t){var i={message:"This value is not valid.",match:!0};
return["Regex",function(t,n,s){var o=s.pattern.match(/^\/(.*?)\/(g?i?m?y?)$/),r=new RegExp(o[1],o[2]);return s=e.extend({},i,s),this.optional(n)||Boolean(s.match)===r.test(t)},function(n){return n=e.extend({},i,n),t(n.message)}]}),define("oro/validator/repeated",["jquery","underscore","oro/translator","jquery.validate"],function(e,t,i){var n={invalid_message:"This value is not valid.",invalid_message_parameters:{}};return["Repeated",function(e,t,i){var n=t.id.slice(0,-(i.second_name||"").length)+(i.first_name||""),s=document.getElementById(n);return this.optional(s)||e===this.elementValue(s)},function(e){return e=t.extend({},n,e),i(e.invalid_message,e.invalid_message_parameters)}]}),define("oro/validator/url",["jquery","underscore","oro/translator","jquery.validate"],function(e,t,i){var n={message:"This value is not a valid URL."};return["Url",function(){return e.validator.methods.url.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oro/select2-config",["jquery","underscore"],function(e,t){var i=function(e,t,i,n,s){this.config=e,this.attachedElementType=t,this.url=i,this.perPage=n,this.excluded=s};return i.prototype={getConfig:function(){var e=this;void 0===this.config.formatResult&&(this.config.formatResult=this.format(this.config.result_template||!1)),void 0===this.config.formatSelection&&(this.config.formatSelection=this.format(this.config.selection_template||!1)),void 0===this.config.initSelection&&"select"!==this.attachedElementType&&(this.config.initSelection=t.bind(this.initSelection,this));var i=function(t){if(e.excluded){for(var i=[],n=t.results,s=0;s<n.length;s++)n[s].hasOwnProperty("id")&&e.excluded.indexOf(n[s].id)>-1&&i.push(s);for(s=0;s<i.length;s++)n.splice(i[s],1);t.results=n}return t};if(void 0===this.config.ajax&&"select"!==this.attachedElementType&&(this.config.ajax={url:this.url,data:function(t,i){return{page:i,per_page:e.perPage,query:t}},results:function(e){return e}}),void 0!==this.config.ajax){var n=this.config.ajax.results;this.config.ajax.results=function(e,t){return i(n(e,t))},void 0===this.config.ajax.quietMillis&&(this.config.ajax.quietMillis=700)}return void 0===this.config.escapeMarkup&&(this.config.escapeMarkup=function(e){return e}),void 0===this.config.dropdownAutoWidth&&(this.config.dropdownAutoWidth=!0),this.config},format:function(i){var n=this;return function(s,o,r){if(e.isEmptyObject(s))return void 0;var a="",l=function(e){return n.highlightSelection(e,r)};if(void 0!==s._html)a=s._html;else if(i){s.highlight=l,void 0!==n.config.formatContext&&(s.context=n.config.formatContext());var c=t.template(i);a=c(s)}else a=l(n.getTitle(s,n.config.properties));return a}},initSelection:function(e,t){this.config.multiple===!0?t(e.data("entities")):t(e.data("entities").pop())},highlightSelection:function(e,t){return e&&t&&t.term?e.replace(new RegExp(t.term,"ig"),'<span class="select2-match">$&</span>'):e},getTitle:function(e,i){var n,s="";return e&&(void 0===i?void 0!==e.text&&(s=e.text):(n=[],t.each(i,function(t){n.push(e[t])}),s=n.join(" "))),s}},i}),define("oro/multiple-entity/view",["underscore","backbone","oro/dialog-widget"],function(e,t,i){return t.View.extend({attributes:{"class":"entity-item clearfix span3 box-type1"},events:{"click .remove-btn":"removeElement","change .default-selector":"defaultSelected"},options:{name:null,hasDefault:!1,defaultRequired:!1,model:null,template:null},initialize:function(){this.template=e.template(this.options.template),this.listenTo(this.model,"destroy",this.remove),this.options.defaultRequired&&this.listenTo(this.model,"change:isDefault",this.toggleDefault)},viewDetails:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=new i({url:this.options.model.get("link"),title:this.options.model.get("label"),dialogOptions:{allowMinimize:!0,width:675,autoResize:!0}});t.render()},removeElement:function(){this.trigger("removal",this.model),this.model.set("id",null),this.model.destroy()},defaultSelected:function(e){this.options.model.set("isDefault",e.target.checked)},toggleDefault:function(){this.options.defaultRequired&&(this.$el.find(".remove-btn")[0].disabled=this.model.get("isDefault"))},render:function(){var t=this.model.toJSON();return t.hasDefault=this.options.hasDefault,t.name=this.options.name,this.$el.append(this.template(t)),this.$el.find("a.entity-info").click(e.bind(this.viewDetails,this)),this.toggleDefault(),this}})}),define("oro/multiple-entity/model",["backbone"],function(e){return e.Model.extend({defaults:{id:null,link:null,label:null,isDefault:!1,extraData:[]}})}),define("oro/multiple-entity",["underscore","backbone","oro/multiple-entity/view","oro/multiple-entity/model","oro/dialog-widget"],function(e,t,i,n,s){var o=t.$;return t.View.extend({options:{template:null,elementTemplate:null,entitiesContainerSelector:".entities",name:null,collection:null,selectionUrl:null,addedElement:null,removedElement:null,defaultElement:null,itemsPerRow:4,selectorWindowTitle:null},events:{"click .add-btn":"addEntities"},initialize:function(){this.template=e.template(this.options.template),this.listenTo(this.getCollection(),"add",this.addEntity),this.listenTo(this.getCollection(),"reset",this.addAll),this.listenTo(this.getCollection(),"remove",this.removeDefault),this.$addedEl=o(this.options.addedElement),this.$removedEl=o(this.options.removedElement),this.options.defaultElement&&(this.listenTo(this.getCollection(),"defaultChange",this.updateDefault),this.$defaultEl=this.$el.closest("form").find('[name$="['+this.options.defaultElement+']"]')),this.render()},handleRemove:function(e){var t=this.$removedEl.val(),i=t?this.$removedEl.val().split(","):[];e.get("id")&&-1===i.indexOf(e.get("id"))&&(i.push(e.get("id")),this.$removedEl.val(i.join(",")))},removeDefault:function(e){e.get("isDefault")&&this.$defaultEl.val("")},updateDefault:function(e){this.$defaultEl.val(e.get("id"))},getCollection:function(){return this.options.collection},addAll:function(e){this._resortCollection(),this.$entitiesContainer.empty(),e.each(function(e){this.addEntity(e)},this)},_resortCollection:function(){this.getCollection().comparator=function(e){return e.get("isDefault")?"A":e.get("label")},this.getCollection().sort()},addEntity:function(t){t.get("id")==this.$defaultEl.val()&&t.set("isDefault",!0);var n=new i({model:t,name:this.options.name,hasDefault:this.options.defaultElement,template:this.options.elementTemplate});n.on("removal",e.bind(this.handleRemove,this)),this.$entitiesContainer.append(n.render().$el)},addEntities:function(){if(!this.selectorDialog){var t=this.options.selectionUrl,i=t.indexOf("?")>-1?"&":"?";this.selectorDialog=new s({url:t+i+"added="+this.$addedEl.val()+"&removed="+this.$removedEl.val()+"&default="+this.$defaultEl.val(),title:this.options.selectorWindowTitle,stateEnabled:!1,dialogOptions:{modal:!0,width:1024,height:500,close:e.bind(function(){this.selectorDialog=null},this)}}),this.selectorDialog.on("completeSelection",e.bind(this.processSelectedEntities,this)),this.selectorDialog.render()}},processSelectedEntities:function(t,i,n){this.$addedEl.val(t.join(",")),this.$removedEl.val(n.join(",")),e.each(i,e.bind(function(e){this.getCollection().add(e)},this));for(var s=0;s<n.length;s++){var o=this.getCollection().get(n[s]);o&&(o.set("id",null),o.destroy())}this.selectorDialog.remove()},render:function(){return this.$el.html(this.template()),this.$entitiesContainer=this.$el.find(this.options.entitiesContainerSelector),this}})}),define("oro/multiple-entity/collection",["backbone","oro/multiple-entity/model"],function(e,t){return e.Collection.extend({model:t,initialize:function(){this.on("change:isDefault",this.onIsDefaultChange,this)},onIsDefaultChange:function(e){if(e.get("isDefault")){var t=this.where({isDefault:!0});_.each(t,function(t){t.get("id")!==e.get("id")&&t.set("isDefault",!1)}),this.trigger("defaultChange",e)}}})}),define("oro/integration/channel-view",["jquery","backbone","underscore","oro/translator","oro/mediator","oro/navigation","oro/delete-confirmation"],function(e,t,i,n,s,o,r){return t.View.extend({UPDATE_MARKER:"formUpdateMarker",fieldsSets:{type:[],transportType:[]},requiredOptions:["transportTypeSelector","typeSelector","fieldsSets","formSelector"],initialize:function(t){var n=this.requiredOptions.filter(function(e){return i.isUndefined(t[e])});if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));i.extend(this.fieldsSets,t.fieldsSets),this.processSelectorState(),e(t.typeSelector).on("change",i.bind(this.changeHandler,this)),e(t.transportTypeSelector).on("change",i.bind(this.changeHandler,this)),this.memoizeValue(t.typeSelector),this.memoizeValue(t.transportTypeSelector)},processSelectorState:function(){var t=e(this.options.transportTypeSelector);t.find("option").length<2&&t.parents(".control-group").hide()},changeHandler:function(t){var s=e(t.currentTarget);if(s.data("cancelled")!==!0){var o=s.data("current");if(this.isEmpty())this.processChange(s);else{var a=new r({title:n("Change Type"),okText:n("Yes, I Agree"),content:n("Are you sure you want to change type?")});a.on("ok",i.bind(function(){this.processChange(s)},this)),a.on("cancel",i.bind(function(){s.data("cancelled",!0).val(o).trigger("change"),this.memoizeValue(s)},this)),a.open()}}else s.data("cancelled",!1)},processChange:function(t){this.memoizeValue(t);var n=o.getInstance();n&&n.loadingMask.show();var r=e(this.options.formSelector),a=r.serializeArray(),l=r.attr("action"),c=t.is(this.options.typeSelector)?this.fieldsSets.type:this.fieldsSets.transportType;a=i.filter(a,function(e){return-1!==i.indexOf(c,e.name)}),a.push({name:this.UPDATE_MARKER,value:1}),e.post(l,a,function(t){var i=e(t).find(r.selector);i.length&&(r.replaceWith(i),i.validate({}),n.processClicks(i.find("a")),s.trigger("hash_navigation_request:complete",this))}).always(function(){n&&n.loadingMask.hide()})},isEmpty:function(){var t=e(this.options.typeSelector).parents("form").find('input[type="text"]:not([name$="[name]"])');return t=t.filter(function(){return""!=this.value}),!t.length},memoizeValue:function(t){var i=e(t);i.data("current",i.val())}})}),define("oro/query-designer/util",["underscore","oro/app"],function(e,t){return{isApplicable:function(t,i){var n=this.matchApplicable(t,i);return!e.isUndefined(n)},matchApplicable:function(i,n){return e.find(i,function(i){var s=!0;return e.each(i,function(i,o){e.has(n,o)&&t.isEqualsLoosely(i,n[o])||(s=!1)}),s})},clearSelect:function(e){var t=e.find('option[value=""]');e.empty(),t.length>0&&e.append(t.get(0))},findSelectOption:function(e,t){return e.find('option[value="'+t.replace(/\\/g,"\\\\").replace(/:/g,"\\:")+'"]')}}}),define("oro/query-designer/column-selector-view",["underscore","backbone","oro/entity-field-choice-view"],function(e,t,i){return t.$,i.extend({options:{columnChainTemplate:null},getLabel:function(e){return this.options.columnChainTemplate(this.splitValue(e))}})}),define("oro/query-designer/abstract-view",["underscore","backbone","oro/translator","oro/query-designer/util","oro/form-validation","oro/delete-confirmation","oro/query-designer/column-selector-view","jquery-outer-html"],function(e,t,i,n,s,o,r){var a=t.$;return t.View.extend({options:{collection:null,entityName:null,itemTemplateSelector:null,itemFormSelector:null,columnChainTemplateSelector:null,fieldsLabel:null,relatedLabel:null,findEntity:null},selectors:{itemContainer:".item-container",cancelButton:".cancel-button",saveButton:".save-button",addButton:".add-button",editButton:".edit-button",deleteButton:".delete-button",columnSelector:'[data-purpose="column-selector"]'},form:null,fieldNames:null,columnSelector:null,fieldLabelGetters:null,itemTemplate:null,initialize:function(){this.options.collection=this.options.collection||new this.collectionClass,this.fieldNames=e.without(e.keys(this.createNewModel().attributes),"id"),this.itemTemplate=e.template(a(this.options.itemTemplateSelector).html()),this.initForm(),this.addFieldLabelGetter(this.getSelectFieldLabel),this.addFieldLabelGetter(this.getColumnFieldLabel),this.listenTo(this.getCollection(),"add",this.onModelAdded),this.listenTo(this.getCollection(),"change",this.onModelChanged),this.listenTo(this.getCollection(),"remove",this.onModelDeleted),this.listenTo(this.getCollection(),"reset",this.onResetCollection)},render:function(){return this.getContainer().empty(),this.getCollection().each(e.bind(function(e){this.onModelAdded(e)},this)),this},initForm:function(){this.form=a(this.options.itemFormSelector),this.columnSelector=new r({el:this.form.find(this.selectors.columnSelector),columnChainTemplate:e.template(a(this.options.columnChainTemplateSelector).html()),fieldsLabel:this.options.fieldsLabel,relatedLabel:this.options.relatedLabel,findEntity:this.options.findEntity});var t=e.bind(function(e){e.preventDefault(),this.handleAddModel()},this);this.$el.find(this.selectors.addButton).on("click",t);var i=e.bind(function(e){e.preventDefault();var t=a(e.currentTarget).data("id");this.handleSaveModel(t)},this);this.$el.find(this.selectors.saveButton).on("click",i);var n=e.bind(function(e){e.preventDefault(),this.handleCancelButton()},this);this.$el.find(this.selectors.cancelButton).on("click",n)},initColumnSorting:function(){this.getContainer().sortable({cursor:"move",delay:100,opacity:.7,revert:10,axis:"y",containment:".query-designer-grid-container",items:"tr",helper:function(e,t){return t.children().each(function(){a(this).width(a(this).width())}),t},stop:e.bind(function(){this.syncCollectionWithUi()},this)}).disableSelection()},getCollection:function(){return this.options.collection},getContainer:function(){return this.$el.find(this.selectors.itemContainer)},changeEntity:function(e){this.options.entityName=e,this.getCollection().reset()},initModel:function(t){t.set("id",e.uniqueId("designer"))},addModel:function(e){this.initModel(e,this.getCollection().size()),this.getCollection().add(e)},deleteModel:function(e){this.getCollection().remove(e)},onModelAdded:function(e){var t=a(this.itemTemplate(this.prepareItemTemplateData(e)));this.bindItemActions(t),this.getContainer().append(t),this.trigger("collection:change")},onModelChanged:function(e){var t=a(this.itemTemplate(this.prepareItemTemplateData(e)));this.bindItemActions(t),this.getContainer().find('[data-id="'+e.id+'"]').outerHTML(t),this.trigger("collection:change")},onModelDeleted:function(e){this.getContainer().find('[data-id="'+e.id+'"]').remove(),this.trigger("collection:change")},onResetCollection:function(){this.getContainer().empty(),this.resetForm(),this.getCollection().each(e.bind(function(e,t){this.initModel(e,t);var i=a(this.itemTemplate(this.prepareItemTemplateData(e)));this.bindItemActions(i),this.getContainer().append(i)},this)),this.trigger("collection:change")},handleAddModel:function(){this.beforeFormSubmit();var e=this.createNewModel();if(this.validateFormData()){var t=this.getFormData();this.clearFormData(),e.set(t),this.addModel(e)}},handleSaveModel:function(e){this.beforeFormSubmit();var t=this.getCollection().get(e);this.validateFormData()&&(t.set(this.getFormData()),this.resetForm())},handleDeleteModel:function(e){var t=this.getCollection().get(e);this.$el.find(this.selectors.saveButton).data("id")==e&&this.resetForm(),this.deleteModel(t)},handleCancelButton:function(){this.resetForm()},updateColumnSelector:function(e){this.columnSelector.changeEntity(this.options.entityName,e)},prepareItemTemplateData:function(t){var i=t.toJSON();return e.each(i,e.bind(function(e,t){i[t]=this.getFieldLabel(t,e)},this)),i},toggleFormButtons:function(t){e.isNull(t)&&(t="");var i=this.$el.find(this.selectors.addButton),n=this.$el.find(this.selectors.saveButton),s=this.$el.find(this.selectors.cancelButton);n.data("id",t),""==t?(s.hide(),n.hide(),i.show()):(i.hide(),s.show(),n.show())},bindItemActions:function(t){var i=e.bind(function(e){e.preventDefault();var t=a(e.currentTarget),i=t.closest("[data-id]").data("id"),n=this.getCollection().get(i);this.setFormData(n.attributes),this.toggleFormButtons(i)},this);t.find(this.selectors.editButton).on("click",i);var n=e.bind(function(t){t.preventDefault();var i=a(t.currentTarget),n=i.closest("[data-id]").data("id"),s=new o({content:i.data("message")});s.on("ok",e.bind(this.handleDeleteModel,this,n)),s.open()},this);t.find(this.selectors.deleteButton).on("click",n)},syncCollectionWithUi:function(){var t=!1,i=this.getCollection();e.each(this.getContainer().find("tr"),function(e,n){var s=a(e).data("id"),o=i.at(n);if(s!==o.id){var r=i.get(s),l=i.indexOf(r);i.remove(o,{silent:!0}),i.remove(r,{silent:!0}),l>n?(i.add(r,{silent:!0,at:n}),i.add(o,{silent:!0,at:l})):(i.add(o,{silent:!0,at:l}),i.add(r,{silent:!0,at:n})),t=!0}},this),t&&this.trigger("collection:change")},resetForm:function(){this.clearFormData(),this.toggleFormButtons(null)},beforeFormSubmit:function(){},validateFormData:function(){var t=!0;return this.iterateFormData(e.bind(function(n,o){s.removeFieldErrors(o);var r=this.validateFormField(n,o);e.isNull(r)||(s.addFieldErrors(o,i("This value should not be blank.")),t=!1)},this)),t},validateFormField:function(e,t){if(t.is("[required]")){var n=t.val();if(""===n)return i("This value should not be blank.")}return null},getFormData:function(){var t={};return this.iterateFormData(e.bind(function(e,i){t[e]=this.getFormFieldValue(e,i)},this)),t},getFormFieldValue:function(e,t){return t.val()},clearFormData:function(){this.iterateFormData(function(e,t){t.val("").trigger("change")})},setFormData:function(t){this.iterateFormData(e.bind(function(e,i){this.setFormFieldValue(e,i,t[e]),i.trigger("change")},this))},setFormFieldValue:function(e,t,i){t.val(i)},iterateFormData:function(t){e.each(this.fieldNames,e.bind(function(e){var i=this.findFormField(e);1===i.length&&t(e,i)},this))},findFormField:function(e){return this.form.find('[name$="\\['+e+'\\]"]')},createNewModel:function(){var e=this.getCollection().model;return new e},getFieldApplicableConditions:function(t){var i={parent_entity:null,entity:this.options.entityName,field:t.val()},n=i.field.split(",");if(e.size(n)>1){var s=e.last(n).split("::");if(i.parent_entity=i.entity,i.entity=e.first(s),i.field=e.last(s),e.size(n)>2){var o=n[e.size(n)-2].split("::");i.parent_entity=e.first(o)}}return e.extend(i,e.pick(t.data(),["type","identifier"])),i},addFieldLabelGetter:function(t){e.isNull(this.fieldLabelGetters)&&(this.fieldLabelGetters=[]),this.fieldLabelGetters.unshift(t)},getFieldLabel:function(e,t){var i=null,n=this.findFormField(e);if(1==n.length)for(var s=0;s<this.fieldLabelGetters.length;s++){var o=this.fieldLabelGetters[s];if(i=o.call(this,n,e,t),null!==i)break}return null!==i?i:t},getSelectFieldLabel:function(e,t,i){if("select"==e.get(0).tagName.toLowerCase()){var s=n.findSelectOption(e,i);if(1===s.length)return s.text()}return null},getColumnFieldLabel:function(e,t,i){return e.attr("name")==this.columnSelector.$el.attr("name")?this.columnSelector.getLabel(i):null}})}),define("oro/query-designer/column/model",["backbone","oro/app"],function(e,t){return e.Model.extend({defaults:{id:null,name:null,label:null,func:null,sorting:null},toJSON:function(){return t.deepClone(this.attributes)}})}),define("oro/query-designer/column/collection",["backbone","oro/query-designer/column/model"],function(e,t){return e.Collection.extend({model:t})}),define("oro/query-designer/grouping/view",["underscore","backbone","oro/app","oro/entity-field-choice-view","jquery-ui"],function(e,t,i,n){return t.View.extend({options:{entityName:null,fieldsLabel:null,relatedLabel:null,findEntity:null},selectors:{columnSelector:'[data-purpose="column-selector"]'},columnSelector:null,grouping:null,initialize:function(){var t=this.$el.closest("[data-metadata]").data("metadata");t=e.extend({grouping:{exclude:[]}},t),this.grouping=t.grouping,this.columnSelector=new n({el:this.$el.find(this.selectors.columnSelector),fieldsLabel:this.options.fieldsLabel,relatedLabel:this.options.relatedLabel,findEntity:this.options.findEntity,exclude:e.bind(this.isFieldAllowedForGrouping,this)}),this.columnSelector.$el.select2("container").find("ul.select2-choices").sortable({cursor:"move",delay:100,opacity:.7,revert:10,containment:"parent",stop:e.bind(function(){this.trigger("grouping:change")},this)}),this.columnSelector.$el.on("change",e.bind(function(){this.trigger("grouping:change")},this))},changeEntity:function(e){this.options.entityName=e},updateColumnSelector:function(e){this.columnSelector.changeEntity(this.options.entityName,e)},isFieldAllowedForGrouping:function(t){var n=e.find(this.grouping.exclude,function(n){var s=!0;return e.each(n,function(n,o){e.has(t,o)&&i.isEqualsLoosely(n,t[o])||(s=!1)}),s});return!e.isUndefined(n)},getGroupingColumns:function(){return e.map(this.columnSelector.$el.select2("data"),function(e){return e.id})},setGroupingColumns:function(e){this.columnSelector.$el.val(e),this.columnSelector.$el.trigger("change")}})}),define("oro/query-designer/function-manager",["jquery","underscore","backbone","oro/query-designer/util"],function(e,t,i,n){return i.View.extend({optionTemplate:t.template('<option value="<%- name %>" title="<%- title %>" data-group_name="<%- group_name %>" data-group_type="<%- group_type %>"><%- label %></option>'),converters:null,aggregates:null,activeFunctionGroupKey:null,isVisible:!1,initialize:function(){this._getContainer().hide();var e=this.$el.closest("[data-metadata]").data("metadata");e=t.extend({converters:[],aggregates:[]},e),this.converters=e.converters,this.aggregates=e.aggregates,i.View.prototype.initialize.apply(this,arguments)},setActiveFunctions:function(e,i){t.isUndefined(i)&&(i=!1);var s=[];t.each(this.converters,function(t,i){n.isApplicable(t.applicable,e)&&s.push({group_name:i,group_type:"converters"})}),i||t.each(this.aggregates,function(t,i){n.isApplicable(t.applicable,e)&&s.push({group_name:i,group_type:"aggregates"})});var o=null;if(t.isEmpty(s)||(o="",t.each(s,function(e){o+=e.group_type+":"+e.group_name+";"})),!t.isNull(o)&&o!==this.activeFunctionGroupKey){n.clearSelect(this.$el);var r="",a=[];t.each(s,function(e){t.each(this[e.group_type][e.group_name].functions,function(i){var n=-1;if(t.any(a,function(e,t){return e.name===i.name?(n=t,!0):!1}),-1!=n){var s=a[n].label,o=a[n].title;a[n]=t.extend({},e,i),t.isNull(a[n].label)&&(a[n].label=s),t.isNull(a[n].title)&&(a[n].title=o)}else a.push(t.extend({},e,i))},this)},this),t.each(a,function(e){r+=this.optionTemplate(e)},this),""!=r&&this.$el.append(r),this.activeFunctionGroupKey=o}this.isVisible?t.isNull(o)&&(this._getContainer().hide(),this.isVisible=!1):t.isNull(o)||(this._getContainer().show(),this.isVisible=!0),this.isVisible&&(this.$el.val(""),this.$el.trigger("change"))},getFunctionLabel:function(e,i,n){var s=n,o=this[e][i];if(!t.isUndefined(o)){var r=t.findWhere(o.functions,{name:n});t.isUndefined(r)||(s=r.label)}return s},_getContainer:function(){return this.$el.closest(".control-group")}})}),define("oro/query-designer/column/view",["underscore","backbone","oro/query-designer/util","oro/query-designer/abstract-view","oro/query-designer/column/collection","oro/query-designer/grouping/view","oro/query-designer/function-manager","jquery-ui"],function(e,t,i,n,s,o,r){var a=t.$;return n.extend({options:{groupingFormSelector:null},collectionClass:s,groupingColumnsSelector:null,functionManager:null,sortingSelector:null,initialize:function(){n.prototype.initialize.apply(this,arguments),this.addFieldLabelGetter(this.getFunctionFieldLabel),this.addFieldLabelGetter(this.getSortingFieldLabel)},initForm:function(){n.prototype.initForm.apply(this,arguments),this.groupingColumnsSelector=new o({el:this.$el.find(this.options.groupingFormSelector),entityName:this.options.entityName,fieldsLabel:this.options.fieldsLabel,relatedLabel:this.options.relatedLabel,findEntity:this.options.findEntity}),this.listenTo(this.groupingColumnsSelector,"grouping:change",e.bind(function(){this.trigger("grouping:change")},this)),this.functionManager=new r({el:this.$el.find('[data-purpose="function-selector"]')}),this.columnSelector.$el.on("change",e.bind(function(t){if(!e.isUndefined(t.added)){var n=this.form.find('[data-purpose="label"]');(""==n.val()||!e.isUndefined(t.removed)&&!e.isUndefined(t.removed.text)&&n.val()==t.removed.text)&&n.val(t.added.text)}var s=a(t.currentTarget),o=s.val();this.functionManager.setActiveFunctions(e.isNull(o)||""==o?{}:this.getFieldApplicableConditions(i.findSelectOption(s,o)))},this)),this.sortingSelector=this.form.find('[data-purpose="sorting-selector"]'),this.initColumnSorting()},changeEntity:function(e){n.prototype.changeEntity.apply(this,arguments),this.groupingColumnsSelector.changeEntity(e)},updateColumnSelector:function(e){n.prototype.updateColumnSelector.apply(this,arguments),this.groupingColumnsSelector.updateColumnSelector(e)},getGroupingColumns:function(){return this.groupingColumnsSelector.getGroupingColumns()},setGroupingColumns:function(e){this.groupingColumnsSelector.setGroupingColumns(e)},getFunctionFieldLabel:function(t,i,n){return t.attr("name")==this.functionManager.$el.attr("name")?e.isNull(n)||""==n?"":this.functionManager.getFunctionLabel(n.group_type,n.group_name,n.name):null},getSortingFieldLabel:function(t,i,n){return t.attr("name")!=this.sortingSelector.attr("name")||!e.isNull(n)&&""!=n?null:""},getFormFieldValue:function(t,s){if(s.attr("name")==this.functionManager.$el.attr("name")){var o=s.val();return""==o?null:e.extend({name:o},i.findSelectOption(s,o).data())}return n.prototype.getFormFieldValue.apply(this,arguments)},setFormFieldValue:function(t,i,s){return i.attr("name")==this.functionManager.$el.attr("name")?(e.isNull(s)||""==s?i.val(""):i.val(s.name),void 0):(n.prototype.setFormFieldValue.apply(this,arguments),void 0)}})}),define("oro/query-designer/filter/model",["backbone","oro/app"],function(e,t){return e.Model.extend({defaults:{id:null,index:null,columnName:null,criterion:null},toJSON:function(){return t.deepClone(this.attributes)}})}),define("oro/query-designer/filter/collection",["backbone","oro/query-designer/filter/model"],function(e,t){return e.Collection.extend({model:t})}),define("oro/query-designer/filter-manager",["jquery","underscore","backbone","oro/mediator","oro/query-designer/util"],function(e,t,i,n,s){return i.View.extend({tagName:"div",className:"filter-box oro-clearfix-width",activeFilter:null,activeFilterName:null,initialize:function(){this.options.filters=this.options.filters||[],t.each(this.options.filters,function(e){this.listenTo(e,"update",t.partial(this._onFilterUpdated,e))},this),i.View.prototype.initialize.apply(this,arguments),n.once("hash_navigation_request:start",function(){t.each(this.filters,function(e){this.stopListening(e,"update",this._onFilterUpdated)},this)},this)},_onFilterUpdated:function(e){e===this.activeFilter&&this.trigger("update_value")},setActiveFilter:function(e){var i=null,n=null;if(t.isUndefined(e.filter)){var o=null;t.each(this.options.filters,function(r,a){var l=!1;if(t.isEmpty(r.applicable))t.isNull(i)&&(l=!0);else{var c=s.matchApplicable(r.applicable,e);t.isUndefined(c)||(t.isNull(o)||t.size(o)<t.size(c)||1==t.size(o)&&t.has(o,"type"))&&(o=c,l=!0)}l&&(i=r,n=a)})}else n=e.filter,i=this.options.filters[n];i!==this.activeFilter&&(t.isNull(this.activeFilter)||this.activeFilter.hide(),this.activeFilter=i,this.activeFilterName=n,this.activeFilter.show()),t.isUndefined(e.data)?this.activeFilter.reset():this.activeFilter.setValue(e.data)},getCriteriaHint:function(e){var i=this.activeFilter;return e.filter!=this.activeFilterName&&(i=t.find(this.options.filters,function(t,i){return e.filter==i})),i._getCriteriaHint(e.data)},getName:function(){return this.activeFilterName},getValue:function(){return this.activeFilter.getValue()},setValue:function(e){this.activeFilter.setValue(e)},resetValue:function(){this.activeFilter.reset()},reset:function(){this.setActiveFilter({})},isEmptyValue:function(){return this.activeFilter.isEmptyValue()},render:function(){this.$el.empty();var e=document.createDocumentFragment();return t.each(this.options.filters,function(t){t.render(),t.hide(),e.appendChild(t.$el.get(0))},this),this.$el.append(e),this.reset(),this.trigger("rendered"),this},ensurePopupCriteriaClosed:function(){t.isUndefined(this.activeFilter.ensurePopupCriteriaClosed)||this.activeFilter.ensurePopupCriteriaClosed()}})}),define("oro/query-designer/filter-builder",["jquery","underscore","oro/translator","oro/tools","oro/mediator","oro/query-designer/filter-manager"],function(e,t,i,n,s,o){var r=!1,a="oro/datafilter/{{type}}-filter",l={string:"choice",choice:"select",selectrow:"select-row",multichoice:"multiselect","boolean":"select"},c={initBuilder:function(){var e=this.$el.closest("[data-metadata]").data("metadata");this.metadata=t.extend({filters:[]},e),this.metadata.filters.push({type:"none",applicable:{},popupHint:i("Choose a column first")}),this.modules={},c.collectModules.call(this),n.loadModules(this.modules,t.bind(c.build,this))},collectModules:function(){var e=this.modules;t.each(this.metadata.filters||{},function(t){var i=t.type;e[i]=a.replace("{{type}}",l[i]||i)})},build:function(){var e=c.combineOptions.call(this),t=new o(e);this.$el.prepend(t.render().$el),s.trigger("query_designer_filter_manager_initialized",t)},combineOptions:function(){var e={},n=this.modules;return t.each(this.metadata.filters,function(t){t.showLabel=!1,t.canDisable=!1,t.placeholder=i("Choose a condition"),e[t.type]=new(n[t.type].extend(t))}),{filters:e}}};return{init:function(e,i){var n=t.bind(function(e){r=!0,i(e)},this);s.once("query_designer_filter_manager_initialized",n),c.initBuilder.call({$el:e}),s.once("hash_navigation_request:start",function(){r||s.off("query_designer_filter_manager_initialized",n)})}}}),define("oro/query-designer/filter/view",["underscore","backbone","oro/translator","oro/query-designer/abstract-view","oro/query-designer/filter/collection","oro/query-designer/filter-builder"],function(e,t,i,n,s,o){var r=t.$;return n.extend({collectionClass:s,criterionSelector:null,filterManager:null,filtersLogic:null,initialize:function(){n.prototype.initialize.apply(this,arguments),this.addFieldLabelGetter(this.getCriterionFieldLabel)},initForm:function(){n.prototype.initForm.apply(this,arguments),this.criterionSelector=this.form.find('[data-purpose="criterion-selector"]'),this.filtersLogic=this.form.parent().find('[data-purpose="filter-logic"]'),this.criterionSelector.hide(),o.init(this.criterionSelector.parent(),e.bind(function(e){this.filterManager=e,this.listenTo(this.filterManager,"update_value",this.onCriterionValueUpdated),this.trigger("filter_manager_initialized")},this)),this.columnSelector.$el.on("change",e.bind(function(t){e.isUndefined(t.added)||(e.isNull(this.filterManager)&&!e.isUndefined(console)?console.error("Cannot choose a filer because the filter manager was not initialized yet."):this.filterManager.setActiveFilter(this.getFieldApplicableConditions(r(t.added.element))))},this)),this.criterionSelector.on("change",e.bind(function(t){e.isNull(this.filterManager)&&!e.isUndefined(console)?console.error("Cannot set a filter because the filter manager was not initialized yet."):""==t.currentTarget.value?this.filterManager.reset():this.filterManager.setActiveFilter(JSON.parse(t.currentTarget.value))},this))},beforeFormSubmit:function(){e.isNull(this.filterManager)||this.filterManager.ensurePopupCriteriaClosed(),n.prototype.beforeFormSubmit.apply(this,arguments)},getFiltersLogic:function(){return this.filtersLogic.val()},setFiltersLogic:function(e){this.filtersLogic.val(e)},initModel:function(e,t){n.prototype.initModel.apply(this,arguments),e.set("index",t+1)},addModel:function(e){n.prototype.addModel.apply(this,arguments),""==this.filtersLogic.val()?this.filtersLogic.val(this.filtersLogic.val()+e.get("index")):this.filtersLogic.val(this.filtersLogic.val()+" AND "+e.get("index"))},deleteModel:function(t){n.prototype.deleteModel.apply(this,arguments),this.getCollection().each(function(e){e.get("index")>t.get("index")&&e.set("index",e.get("index")-1)});var i=this.getFiltersLogic(),s=i,o=""+t.get("index");
if(i==o)s="";else{var r=[{pattern:"^\\("+o+"\\)$",replaceValue:""},{pattern:" (AND|OR) \\("+o+"\\) ",replaceValue:" "},{pattern:" (AND|OR) \\("+o+"\\)$",replaceValue:""},{pattern:"^\\("+o+"\\) (AND|OR) ",replaceValue:""},{pattern:" (AND|OR) "+o+" ",replaceValue:" "},{pattern:" (AND|OR) "+o+"\\)",replaceValue:")"},{pattern:" (AND|OR) "+o+"$",replaceValue:""},{pattern:" "+o+" (AND|OR) ",replaceValue:" "},{pattern:"\\("+o+" (AND|OR) ",replaceValue:"("},{pattern:"^"+o+" (AND|OR) ",replaceValue:""}];e.each(r,function(e){s=s.replace(new RegExp(e.pattern,"i"),e.replaceValue)})}s!=i&&(o=Number(o),s=s.replace(/(\d+)/g,function(e){return Number(e)>o?""+(Number(e)-1):e}),this.setFiltersLogic(s))},onResetCollection:function(){e.isNull(this.filterManager)?this.once("filter_manager_initialized",function(){n.prototype.onResetCollection.apply(this,arguments),this.getCollection().isEmpty()&&this.setFiltersLogic("")},this):(n.prototype.onResetCollection.apply(this,arguments),this.getCollection().isEmpty()&&this.setFiltersLogic(""))},onCriterionValueUpdated:function(){this.criterionSelector.val(this.filterManager.isEmptyValue()?"":JSON.stringify({filter:this.filterManager.getName(),data:this.filterManager.getValue()}))},prepareItemTemplateData:function(){var e=n.prototype.prepareItemTemplateData.apply(this,arguments);return e.filter=e.columnName+" "+e.criterion,e},getCriterionFieldLabel:function(t,i,n){return t.attr("name")==this.criterionSelector.attr("name")?e.isNull(n)||""==n?"":(e.isString(n)&&(n=JSON.parse(n)),this.filterManager.getCriteriaHint(n)):null},getFormFieldValue:function(e,t){if(t.attr("name")==this.criterionSelector.attr("name")){var i=t.val();return""!=i?JSON.parse(i):null}return n.prototype.getFormFieldValue.apply(this,arguments)},setFormFieldValue:function(t,i,s){return i.attr("name")==this.criterionSelector.attr("name")?(e.isNull(s)||""==s?i.val(""):i.val(JSON.stringify(s)),void 0):(n.prototype.setFormFieldValue.apply(this,arguments),void 0)}})}),define("oro/query-designer",["underscore","backbone","oro/translator","oro/app","oro/messenger","routing","oro/loading-mask","oro/query-designer/column/view","oro/query-designer/filter/view"],function(e,t,i,n,s,o,r,a,l){var c=t.$;return t.View.extend({options:{entityName:null,storageElementSelector:null,getLoadColumnsUrl:null,columnChainTemplateSelector:null,fieldsLabel:"Fields",relatedLabel:"Related",findEntity:function(e){return{name:e,label:e,plural_label:e,icon:null}},columnsOptions:{collection:null,groupingFormSelector:null,itemTemplateSelector:null,itemFormSelector:null},filtersOptions:{collection:null,itemTemplateSelector:null,itemFormSelector:null}},loadingMask:null,columnsView:null,filtersView:null,storageEl:null,initialize:function(){this.options.getLoadColumnsUrl=this.options.getLoadColumnsUrl||function(e){return o.generate("oro_api_get_entity_fields",{entityName:e,"with-relations":!0,"with-entity-details":!0,"deep-level":1})}},isEmpty:function(){return this.columnsView.getCollection().isEmpty()&&this.filtersView.getCollection().isEmpty()},changeEntity:function(t){this.disableViews(),c.ajax({url:this.options.getLoadColumnsUrl(t.replace(/\\/g,"_")),success:e.bind(function(e){this.updateColumnSelectors(t,e),this.enableViews()},this),error:e.bind(function(e){this.showError(e.responseJSON),this.enableViews()},this)})},updateStorage:function(){if(this.storageEl){var t=this.columnsView.getCollection().toJSON();e.each(t,function(e){delete e.id});var i=this.filtersView.getCollection().toJSON();e.each(i,function(e){delete e.id,delete e.index});var n=[];e.each(this.columnsView.getGroupingColumns(),function(e){n.push({name:e})});var s={columns:t,grouping_columns:n,filters:i,filters_logic:this.filtersView.getFiltersLogic()};this.storageEl.val(JSON.stringify(s))}},render:function(){this.options.storageElementSelector&&(this.storageEl=c(this.options.storageElementSelector)),this.loadingMask=new r,this.$el.append(this.loadingMask.render().$el);var t=[];return this.storageEl&&""!=this.storageEl.val()&&(t=JSON.parse(this.storageEl.val())),this.initColumnsView(t),this.initFiltersView(t),this.$el.closest("form").on("submit",e.bind(function(){return this.onPreSubmit(),!0},this)),this},initColumnsView:function(t){var i=e.extend({entityName:this.options.entityName,columnChainTemplateSelector:this.options.columnChainTemplateSelector,fieldsLabel:this.options.fieldsLabel,relatedLabel:this.options.relatedLabel,findEntity:this.options.findEntity},this.options.columnsOptions);this.columnsView=new a(i),this.columnsView.render(),delete this.options.columnsOptions;var n=[];e.each(t.grouping_columns,function(e){n.push(e.name)}),this.columnsView.setGroupingColumns(n),e.isUndefined(t.columns)||e.isEmpty(t.columns)||this.columnsView.getCollection().reset(t.columns),this.listenTo(this.columnsView,"collection:change",e.bind(this.updateStorage,this)),this.listenTo(this.columnsView,"grouping:change",e.bind(this.updateStorage,this))},initFiltersView:function(t){var i=e.extend({entityName:this.options.entityName,columnChainTemplateSelector:this.options.columnChainTemplateSelector,fieldsLabel:this.options.fieldsLabel,relatedLabel:this.options.relatedLabel,findEntity:this.options.findEntity},this.options.filtersOptions);this.filtersView=new l(i),this.filtersView.render(),delete this.options.filtersOptions,e.isUndefined(t.filters)||e.isEmpty(t.filters)||this.filtersView.getCollection().reset(t.filters),e.isUndefined(t.filters_logic)||e.isEmpty(t.filters_logic)||this.filtersView.setFiltersLogic(t.filters_logic),this.listenTo(this.filtersView,"collection:change",e.bind(this.updateStorage,this))},onPreSubmit:function(){if(this.storageEl&&""!=this.storageEl.val()){var t=JSON.parse(this.storageEl.val());e.isUndefined(t.filters_logic)||t.filters_logic==this.filtersView.getFiltersLogic()||(t.filters_logic=this.filtersView.getFiltersLogic(),this.storageEl.val(JSON.stringify(t)))}},enableViews:function(){this.loadingMask.hide()},disableViews:function(){this.loadingMask.show()},updateColumnSelectors:function(e,t){this.options.entityName=e,this.columnsView.changeEntity(e),this.columnsView.updateColumnSelector(t),this.filtersView.changeEntity(e),this.filtersView.updateColumnSelector(t)},showError:function(t){e.isUndefined(console)||console.error(e.isUndefined(t.stack)?t:t.stack);var o=i("Sorry, unexpected error was occurred");n.debug&&(e.isUndefined(t.message)?!e.isUndefined(t.errors)&&e.isArray(t.errors)?o+=": "+t.errors.join():e.isString(t)&&(o+=": "+t):o+=": "+t.message),s.notificationFlashMessage("error",o)}})}),function(e){var t="tree_select";e.jstree.plugin("tree_selector",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var i=this,n=this._get_settings().tree_selector;this.data.tree_selector.ajax=n.ajax,this.data.tree_selector.data=n.data,this.data.tree_selector.auto_open_root=n.auto_open_root,this.data.tree_selector.node_label_field=n.node_label_field,this.data.tree_selector.no_tree_message=n.no_tree_message,this.data.tree_selector.preselect_node_id=n.preselect_node_id;var s=e("<div>",{id:"tree_toolbar"});s.addClass("jstree-tree-toolbar");var o=e("<select>",{id:t,"class":"input-large"});o.addClass("jstree-tree-select"),o.bind("change",function(){i.switch_tree()}),s.html(o),this.get_container_ul().before(s),this.load_trees()},this)).bind("loaded.jstree",e.proxy(function(e){"jstree"==e.namespace&&this.switch_tree()},this)).bind("clean_node.jstree",e.proxy(function(t,i){var n=this;i.rslt.obj&&e.each(i.rslt.obj,function(t,i){e(i).hasClass("toselect")&&(n.select_node(e(i)),e(i).removeClass("toselect"))})},this))},defaults:{ajax:!1,data:!1,tree_selector_buttons:!1,no_tree_message:!1,node_label_field:"code",preselect_node_id:!1},_fn:{refresh:function(){return this.refresh_trees(),this.__call_old()},switch_tree:function(){var t=this.get_tree_select().find(":selected"),i=e(t).attr("value");return i&&-1!==i?(root_node=this._prepare_node("node_"+i,t.text()),this.get_container_ul().empty(),this.get_container_ul().append(root_node),this.close_node(root_node),this.clean_node(),this.data.tree_selector.auto_open_root&&this.open_node(root_node),this.data.tree_selector.preselect_node_id===i&&this.select_node(root_node),this.get_container().trigger("after_tree_loaded.jstree",i),void 0):null},get_tree_select:function(){return e("#"+t)},load_trees:function(){var i,n=this;if(this.data.tree_selector.data)i=this._load_data_trees();else{if(!this.data.tree_selector.ajax)throw"jquery.jstree.tree_selector : Neither data nor ajax settings supplied for trees.";i=this._load_ajax_trees()}if(this.get_tree_select().empty(),0===i.length&&this.data.tree_selector.no_tree_message){var s=e("<option>",{text:this.data.tree_selector.no_tree_message,value:-1,disabled:!0,selected:!0});this.get_container_ul().empty(),this.get_tree_select().append(s)}e.each(i,function(t,i){var s=i[n.data.tree_selector.node_label_field],o=e("<option>",{value:i.id,text:s});"true"==i.selected&&(o.prop("defaultSelected",!0),n._get_settings().json_data.data=[{data:s,state:"closed",attr:{id:"node_"+i.id}}]),n.get_tree_select().append(o)}),this.get_container().trigger("trees_loaded.jstree",t)},_load_data_trees:function(){var t=this.data.tree_selector.data;return e.parseJSON(t)},_load_ajax_trees:function(){var t=this.data.tree_selector.ajax.url,i=this.data.tree_selector.ajax.parameters,n=[];return e.ajax({url:t,async:!1,dataType:"json",data:i}).done(function(e){n=e}),n},_prepare_node:function(t,i){var n=e("<li>",{id:t,rel:"folder"});n.prepend("<ins class='jstree-icon'>&#160;</ins>"),n.removeClass("jstree-leaf"),n.addClass("jstree-close"),n.addClass("jstree-closed");var s=e("<a>",{href:"#",text:i});return s.prepend("<ins class='jstree-icon'>&#160;</ins>"),n.append(s),n},refresh_trees:function(){this.get_tree_select().empty(),this.load_trees(),this.switch_tree()},get_tree_id:function(){return root_node=this.get_container_ul().find("li")[0],e(root_node).attr("id")}}}),e.jstree.defaults.plugins.push("tree_selector")}(jQuery),define("jstree/jquery.jstree.tree_selector",["jquery.jstree"],function(){}),define("oro/sidebar/constants",[],function(){var e={};return e.SIDEBAR_LEFT="SIDEBAR_LEFT",e.SIDEBAR_RIGHT="SIDEBAR_RIGHT",e.SIDEBAR_MINIMIZED="SIDEBAR_MINIMIZED",e.SIDEBAR_MAXIMIZED="SIDEBAR_MAXIMIZED",e.WIDGET_MINIMIZED="WIDGET_MINIMIZED",e.WIDGET_MAXIMIZED="WIDGET_MAXIMIZED",e.WIDGET_MAXIMIZED_HOVER="WIDGET_MAXIMIZED_HOVER",e}),define("oro/sidebar/sidebar/model",["backbone","routing","oro/sidebar/constants"],function(e,t,i){return e.Model.extend({defaults:{position:i.SIDEBAR_LEFT,state:i.SIDEBAR_MINIMIZED},toggleState:function(){switch(this.get("state")){case i.SIDEBAR_MINIMIZED:this.set("state",i.SIDEBAR_MAXIMIZED);break;case i.SIDEBAR_MAXIMIZED:this.set("state",i.SIDEBAR_MINIMIZED)}}})}),define("oro/sidebar/widget-container/icon-view",["require","jquery","underscore","backbone","text!oro/sidebar/widget-container/icon-template","oro/sidebar/constants"],function(e){e("jquery");var t=e("underscore"),i=e("backbone"),n=e("text!oro/sidebar/widget-container/icon-template"),s=e("oro/sidebar/constants"),o=i.View.extend({className:"sidebar-icon",template:t.template(n),events:{click:"onClick"},initialize:function(){var e=this;e.listenTo(e.model,"change",e.render)},render:function(){var e=this,t=e.model;return e.$el.html(e.template(t.toJSON())),e.$el.attr("data-cid",t.cid),t.get("state")===s.WIDGET_MAXIMIZED_HOVER?e.$el.addClass("sidebar-icon-active"):e.$el.removeClass("sidebar-icon-active"),e},onClick:function(e){if(e.stopPropagation(),e.preventDefault(),!this.model.isDragged){var t=this.$el.offset();i.trigger("showWidgetHover",this.model.cid,t)}}});return o}),define("oro/sidebar/widget-container/view",["jquery","underscore","backbone","oro/sidebar/constants","text!oro/sidebar/widget-container/widget-min-template","text!oro/sidebar/widget-container/widget-max-template"],function(e,t,i,n,s,o){var r=i.View.extend({templateMin:t.template(s),templateMax:t.template(o),events:{"click .sidebar-widget-header-toggle":"onClickToggle","click .sidebar-widget-settings":"onClickSettings","click .sidebar-widget-remove":"onClickRemove","click .sidebar-widget-close":"onClickClose"},initialize:function(){var e=this;e.listenTo(e.model,"change",e.render)},render:function(){var e=this,t=e.model,i=null;return i=t.get("state")===n.WIDGET_MINIMIZED?e.templateMin:e.templateMax,e.$el.html(i(t.toJSON())),e.$el.attr("data-cid",t.cid),t.get("state")!==n.WIDGET_MINIMIZED&&t.get("module")&&requirejs([t.get("module")],function(i){var n=e.$el.find(".sidebar-widget-content");e.contentView||(e.contentView=new i.ContentView({model:t})),e.contentView.setElement(n),e.contentView.render()}),t.get("state")===n.WIDGET_MAXIMIZED_HOVER?e.$el.addClass("sidebar-widget-popup"):e.$el.removeClass("sidebar-widget-popup"),e},setOffset:function(e){var t=this;t.$el.offset(e),t.$el.find(".sidebar-widget-content").css("max-height",t.$el.height())},onClickToggle:function(e){e.stopPropagation(),e.preventDefault(),this.model.toggleState(),this.model.save()},onClickSettings:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("setupWidget",this.model.cid)},onClickRemove:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("removeWidget",this.model.cid)},onClickClose:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("closeWidget",this.model.cid)}});return r}),define("oro/sidebar/widget-container/model",["backbone","oro/sidebar/constants"],function(e,t){var i=e.Model.extend({defaults:{widgetName:"",position:0,title:"",icon:"#",module:"",settings:{},state:t.WIDGET_MINIMIZED},initialize:function(){this.stateSnapshot=this.get("state"),this.isDragged=!1},toggleState:function(){var e=this,i=e.get("state");i!==t.WIDGET_MAXIMIZED_HOVER&&(i===t.WIDGET_MINIMIZED?e.set("state",t.WIDGET_MAXIMIZED):e.set("state",t.WIDGET_MINIMIZED),e.trigger("change"))},snapshotState:function(){this.stateSnapshot=this.get("state")},restoreState:function(){this.set({state:this.stateSnapshot})},update:function(e){this.set(_.omit(e,"settings","placement"))}});return i}),define("oro/sidebar/widget-container/widget-add-view",["require","jquery","underscore","text!oro/sidebar/widget-container/widget-add-template","oro/sidebar/widget-container/model","oro/modal","oro/dialog-widget","oro/sidebar/constants"],function(e){var t=e("jquery"),i=e("underscore"),n=e("text!oro/sidebar/widget-container/widget-add-template"),s=e("oro/sidebar/widget-container/model"),o=e("oro/modal");e("oro/dialog-widget");var r=e("oro/sidebar/constants"),a=o.extend({className:"modal oro-modal-normal",options:{sidebar:null},initialize:function(e){e.content=i.template(n,{availableWidgets:e.sidebar.getAvailableWidgets()}),e.title="Select widget to add",o.prototype.initialize.apply(this,arguments)},open:function(){var e=this,i=this.options.sidebar.getPosition();o.prototype.open.apply(this,arguments);var n=null;e.$el.find("ol").selectable({selected:function(e,t){n=t.selected}}),e.once("ok",function(){if(!n)return e.close(),void 0;var o=this.options.sidebar.getAvailableWidgets(),a=this.options.sidebar.getWidgets(),l=t(n).closest("li").data("widget-name"),c=o[l],h=null;i===r.SIDEBAR_LEFT?h="left":i===r.SIDEBAR_RIGHT&&(h="right");var d=new s({widgetName:l,position:a.length,placement:h});d.update(c),d.set("settings",c.settings),a.push(d),d.save(),e.close()})}});return a}),define("oro/sidebar/widget-container/widget-setup-view",["require","oro/modal"],function(e){var t=e("oro/modal"),i=t.extend({className:"modal oro-modal-normal",initialize:function(e){var i=this,n=i.model;e.content='<div class="sidebar-widgetsetup"></div>';var s=n.get("module");requirejs([s],function(e){i.setupView=new e.SetupView({model:n}),i.setupView.render(),i.$el.find(".sidebar-widgetsetup").append(i.setupView.$el)}),t.prototype.initialize.apply(this,arguments),i.once("ok cancel",function(){i.setupView.remove()})}});return i}),define("oro/sidebar/sidebar/view",["require","jquery","jquery-ui","underscore","backbone","oro/translator","oro/delete-confirmation","oro/sidebar/constants","oro/sidebar/widget-container/icon-view","oro/sidebar/widget-container/view","oro/sidebar/widget-container/widget-add-view","oro/sidebar/widget-container/widget-setup-view","text!oro/sidebar/sidebar/template"],function(e){e("jquery"),e("jquery-ui");var t=e("underscore"),i=e("backbone"),n=e("oro/translator"),s=e("oro/delete-confirmation"),o=e("oro/sidebar/constants"),r=e("oro/sidebar/widget-container/icon-view"),a=e("oro/sidebar/widget-container/view"),l=e("oro/sidebar/widget-container/widget-add-view"),c=e("oro/sidebar/widget-container/widget-setup-view"),h=e("text!oro/sidebar/sidebar/template"),d=100,u=i.View.extend({template:t.template(h),events:{"click .sidebar-add a":"onClickAdd","click .sidebar-resize a":"onClickToggle","click .sidebar-toggle a":"onClickToggle"},options:{availableWidgets:null,widgets:null},initialize:function(){var e=this,t=e.model,n=this.getWidgets();e.iconViews={},e.hoverViews={},e.widgetViews={},e.padding=t.get("position")===o.SIDEBAR_LEFT?"margin-left":"margin-right",e.listenTo(t,"change",e.render),e.listenTo(n,"reset",e.onWidgetsReset),e.listenTo(n,"add",e.onWidgetAdded),e.listenTo(n,"remove",e.onWidgetRemoved),e.listenTo(n,"reset",e.render),e.listenTo(n,"add",e.render),e.listenTo(n,"remove",e.render),e.listenTo(i,"showWidgetHover",e.onShowWidgetHover),e.listenTo(i,"removeWidget",e.onRemoveWidget),e.listenTo(i,"closeWidget",e.onCloseWidget),e.listenTo(i,"setupWidget",e.onSetupWidget)},getAvailableWidgets:function(){return this.options.availableWidgets},getWidgets:function(){return this.options.widgets},getPosition:function(){return this.model.get("position")},render:function(){var e=this,t=e.model;return e.$el.html(e.template(t.toJSON())),t.get("state")===o.SIDEBAR_MAXIMIZED?e.$el.addClass("sidebar-maximized"):e.$el.removeClass("sidebar-maximized"),e.options.$main.css(e.padding,e.$el.width()+"px"),t.get("state")===o.SIDEBAR_MINIMIZED?e.renderIcons():e.renderWidgets(),e},renderIcons:function(){var e=this,t=e.$el.find(".sidebar-content");return this.getWidgets().each(function(i){var n=e.iconViews[i.cid];n&&(n.render().delegateEvents(),t.append(n.$el))}),t.sortable({revert:!0,axis:"y",containment:"parent",delay:d,start:function(t,i){var n=i.item.data("cid");e.onIconDragStart(n)},stop:function(t,i){var n=i.item.data("cid");e.onIconDragStop(n),e.reorderWidgets()}}),e},renderWidgets:function(){var e=this,t=e.$el.find(".sidebar-content");return this.getWidgets().each(function(i){var n=e.widgetViews[i.cid];n&&(i.get("state")===o.WIDGET_MAXIMIZED_HOVER&&i.set({state:o.WIDGET_MAXIMIZED},{silent:!0}),n.render().delegateEvents(),t.append(n.$el))}),t.sortable({revert:!0,axis:"y",containment:"parent",delay:d,start:function(t,i){var n=i.item.data("cid");e.onIconDragStart(n)},stop:function(t,i){var n=i.item.data("cid");e.onIconDragStop(n),e.reorderWidgets()}}),e},onIconDragStart:function(e){var t=this.getWidgets().get(e);t&&(t.isDragged=!0)},onIconDragStop:function(e){var t=this.getWidgets().get(e);t&&(t.isDragged=!1)},reorderWidgets:function(){var e=this,i=e.$el.find(".sidebar-content"),n=i.sortable("toArray",{attribute:"data-cid"}),s=t.object(n,t.range(n.length));this.getWidgets().each(function(e){var t=s[e.cid];e.set({position:t},{silent:!0}),e.save()}),this.getWidgets().sort()},onClickAdd:function(e){e.stopPropagation(),e.preventDefault();var t=new l({sidebar:this});t.open()},onClickToggle:function(e){e.stopPropagation(),e.preventDefault(),this.model.toggleState(),this.model.save()},onWidgetsReset:function(){var e=this;this.getWidgets().each(function(t){var i=new a({model:t});e.widgetViews[t.cid]=i;var n=new r({model:t});e.iconViews[t.cid]=n})},onWidgetAdded:function(e){var t=new a({model:e});this.widgetViews[e.cid]=t;var i=new r({model:e});this.iconViews[e.cid]=i},onWidgetRemoved:function(e){var t=e.cid,i=this.widgetViews[t];i&&(i.contentView&&i.contentView.remove(),i.remove(),delete this.widgetViews[t]);var n=this.iconViews[t];n&&(n.remove(),delete this.iconViews[t]);var s=this.hoverViews[t];s&&(s.contentView.remove(),s.remove(),delete this.hoverViews[t])},onShowWidgetHover:function(e,t){var i=this,n=this.getWidgets().get(e);if(n){i.hideAllWidgetHovers(),n.snapshotState(),n.set({state:o.WIDGET_MAXIMIZED_HOVER});var s=new a({model:n});i.$el.append(s.render().$el),s.setOffset({top:t.top}),i.hoverViews[e]=s}},hideWidgetHover:function(e){var t=this.hoverViews[e];t&&(t.model.restoreState(),t.contentView.remove(),t.remove(),delete this.hoverViews[e])},hideAllWidgetHovers:function(){var e=this;this.getWidgets().each(function(t){e.hideWidgetHover(t.cid)})},onRemoveWidget:function(e){var t=this.getWidgets().get(e);if(t){var i=new s({content:n("The widget will be removed")});i.on("ok",function(){t.destroy(),i.off()}),i.on("cancel",function(){i.off()}),i.open()}},onCloseWidget:function(e){var t=this,i=this.getWidgets().get(e);i&&t.hideWidgetHover(e)},onSetupWidget:function(e){var t=this.getWidgets().get(e);if(t){var i=JSON.stringify(t),n=new c({model:t});n.on("ok",function(){t.save()}),n.on("cancel",function(){t.set(JSON.parse(i),{silent:!0}),t.trigger("change")}),n.open()}}});return u}),define("oro/sidebar/widget-container/collection",["require","underscore","backbone","oro/sidebar/widget-container/model"],function(e){e("underscore");var t=e("backbone"),i=e("oro/sidebar/widget-container/model"),n=t.Collection.extend({model:i,comparator:"position"});return n}),define("oro/sidebar/widget/hello-world",["jquery","underscore","backbone"],function(e,t,i){var n={};return n.ContentView=i.View.extend({template:t.template("<span><%= settings.content %></span>"),initialize:function(){var e=this;e.listenTo(e.model,"change",e.render)},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e}}),n.SetupView=i.View.extend({template:t.template('<h3>Hello world settings</h3><textarea style="width: 400px; height: 150px;"><%= settings.content %></textarea>'),events:{"keyup textarea":"onKeyup"},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e},onKeyup:function(){var e=this,t=e.model,i=e.$el.find("textarea").val(),n=t.get("settings");n.content=i,t.set({settings:n},{silent:!0}),t.trigger("change")}}),n});var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},s=function(){},o=n.Base={extend:function(e){s.prototype=this;var t=new s;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var s=0;e>s;s++)t[n+s>>>2]|=(255&i[s>>>2]>>>24-8*(s%4))<<24-8*((n+s)%4);else if(65535<i.length)for(s=0;e>s;s+=4)t[n+s>>>2]=i[s>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(0|4294967296*e.random());return new r.init(i,t)}}),a=i.enc={},l=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++){var s=255&t[n>>>2]>>>24-8*(n%4);i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new r.init(i,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++)i.push(String.fromCharCode(255&t[n>>>2]>>>24-8*(n%4)));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new r.init(i,t)}},h=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,a=s/(4*o),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,s=e.min(4*t,s),t){for(var l=0;t>l;l+=o)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=s}return new r.init(l,s)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}});var u=i.algo={};return i}(Math);define("cryptojs/core",function(){}),function(){var e=CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var s=0;i>s;s+=3)for(var o=(255&t[s>>>2]>>>24-8*(s%4))<<16|(255&t[s+1>>>2]>>>24-8*((s+1)%4))<<8|255&t[s+2>>>2]>>>24-8*((s+2)%4),r=0;4>r&&i>s+.75*r;r++)e.push(n.charAt(63&o>>>6*(3-r)));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var i=e.length,n=this._map,s=n.charAt(64);s&&(s=e.indexOf(s),-1!=s&&(i=s));for(var s=[],o=0,r=0;i>r;r++)if(r%4){var a=n.indexOf(e.charAt(r-1))<<2*(r%4),l=n.indexOf(e.charAt(r))>>>6-2*(r%4);s[o>>>2]|=(a|l)<<24-8*(o%4),o++}return t.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),define("cryptojs/enc-base64",["cryptojs/core"],function(){}),function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,i){e=this._hasher=new e.init,"string"==typeof i&&(i=t.parse(i));var n=e.blockSize,s=4*n;i.sigBytes>s&&(i=e.finalize(i)),i.clamp();for(var o=this._oKey=i.clone(),r=this._iKey=i.clone(),a=o.words,l=r.words,c=0;n>c;c++)a[c]^=1549556828,l[c]^=909522486;o.sigBytes=r.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),define("cryptojs/hmac",["cryptojs/core"],function(){}),function(e){for(var t=CryptoJS,i=t.lib,n=i.WordArray,s=i.Hasher,i=t.algo,o=[],r=[],a=function(e){return 0|4294967296*(e-(0|e))},l=2,c=0;64>c;){var h;e:{h=l;for(var d=e.sqrt(h),u=2;d>=u;u++)if(!(h%u)){h=!1;break e}h=!0}h&&(8>c&&(o[c]=a(e.pow(l,.5))),r[c]=a(e.pow(l,1/3)),c++),l++}var f=[],i=i.SHA256=s.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],d=i[7],u=0;64>u;u++){if(16>u)f[u]=0|e[t+u];else{var p=f[u-15],g=f[u-2];f[u]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+f[u-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[u-16]}p=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&h)+r[u]+f[u],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&s^n&o^s&o),d=h,h=c,c=l,l=0|a+p,a=o,o=s,s=n,n=0|p+g}i[0]=0|i[0]+n,i[1]=0|i[1]+s,i[2]=0|i[2]+o,i[3]=0|i[3]+a,i[4]=0|i[4]+l,i[5]=0|i[5]+c,i[6]=0|i[6]+h,i[7]=0|i[7]+d},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;return i[s>>>5]|=128<<24-s%32,i[(s+64>>>9<<4)+14]=e.floor(n/4294967296),i[(s+64>>>9<<4)+15]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(i),t.HmacSHA256=s._createHmacHelper(i)}(Math),define("cryptojs/sha256",["cryptojs/core"],function(){}),function(){var e=CryptoJS,t=e.lib,i=t.Base,n=t.WordArray,t=e.algo,s=t.HMAC,o=t.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,o=s.create(i.hasher,e),r=n.create(),a=n.create([1]),l=r.words,c=a.words,h=i.keySize,i=i.iterations;l.length<h;){var d=o.update(t).finalize(a);o.reset();for(var u=d.words,f=u.length,p=d,g=1;i>g;g++){p=o.finalize(p),o.reset();for(var m=p.words,v=0;f>v;v++)u[v]^=m[v]}r.concat(d),c[0]++}return r.sigBytes=4*h,r}});e.PBKDF2=function(e,t,i){return o.create(i).compute(e,t)}}(),define("cryptojs/pbkdf2",["cryptojs/core"],function(){}),function(e,t){e("when",["require"],function(e){function i(e,t,i,n){return s(e).then(t,i,n)}function n(e,t){this._message=e,this.inspect=t}function s(e){return a(function(t){t(e)})}function o(e){return i(e,h)}function r(){function e(e,o,r){t.resolve=t.resolver.resolve=function(t){return n?s(t):(n=!0,e(t),i)},t.reject=t.resolver.reject=function(e){return n?s(h(e)):(n=!0,o(e),i)},t.notify=t.resolver.notify=function(e){return r(e),e}}var t,i,n;return t={promise:U,resolve:U,reject:U,notify:U,resolver:{resolve:U,reject:U,notify:U}},t.promise=i=a(e),t}function a(e){return l(e,q.PromiseStatus&&q.PromiseStatus())}function l(e,t){function i(e,t,i,n){function s(s){s._message(e,t,i,n)}d?d.push(s):E(function(){s(c)})}function s(){return c?c.inspect():j()}function o(e){d&&(c=f(e),m(d,c),d=U,t&&v(c,t))}function r(e){o(h(e))}function a(e){d&&m(d,u(e))}var l,c,d=[];l=new n(i,s),l._status=t;try{e(o,r,a)}catch(p){r(p)}return l}function c(e){return d(new p(e),function(){return D(e)})}function h(e){return d(new g(e),function(){return M(e)})}function d(e,t){return new n(function(t,i,n){try{n(e[t].apply(e,i))}catch(s){n(h(s))}},t)}function u(e){return new n(function(t,i,n,s){var o=i[2];try{s("function"==typeof o?o(e):e)}catch(r){s(r)}})}function f(e){return e instanceof n?e:e===Object(e)&&"then"in e?a(function(t,i,n){E(function(){try{var s=e.then;"function"==typeof s?I(s,e,t,i,n):t(c(e))}catch(o){i(o)}})}):c(e)}function p(e){this.value=e}function g(e){this.reason=e}function m(e,t){E(function(){for(var i,n=0;i=e[n++];)i(t)})}function v(e,t){function i(){t.fulfilled()}function n(e){t.rejected(e)}e.then(i,n)}function _(e){return e&&"function"==typeof e.then}function y(e,t,n,s,o){return i(e,function(e){function r(n,s,o){function r(e){f(e)}function a(e){u(e)}var l,c,h,d,u,f,p,g;if(p=e.length>>>0,l=Math.max(0,Math.min(t,p)),h=[],c=p-l+1,d=[],l)for(f=function(e){d.push(e),--c||(u=f=A,s(d))},u=function(e){h.push(e),--l||(u=f=A,n(h))},g=0;p>g;++g)g in e&&i(e[g],a,r,o);else n(h)}return a(r).then(n,s,o)})}function b(e,t,i,n){function s(e){return t?t(e[0]):e[0]}return y(e,1,s,i,n)}function w(e,t,i,n){return T(e,A).then(t,i,n)}function x(){return T(arguments,A)}function C(e){return T(e,D,M)}function k(e,t){return T(e,t)}function T(e,t,n){return i(e,function(e){function s(s,o,r){function a(e,a){i(e,t,n).then(function(e){l[a]=e,r(e),--h||s(l)},o)}var l,c,h,d;if(h=c=e.length>>>0,l=[],!h)return s(l),void 0;for(d=0;c>d;d++)d in e?a(e[d],d):--h}return l(s)})}function S(e,t){var n=I(N,arguments,1);return i(e,function(e){var s;return s=e.length,n[0]=function(e,n,o){return i(e,function(e){return i(n,function(i){return t(e,i,o,s)})})},O.apply(e,n)})}function D(e){return{state:"fulfilled",value:e}}function M(e){return{state:"rejected",reason:e}}function j(){return{state:"pending"}}function E(e){1===z.push(e)&&P(F)}function F(){for(var e,t=0;e=z[t++];)e();z=[]}function A(e){return e}i.promise=a,i.resolve=s,i.reject=o,i.defer=r,i.join=x,i.all=w,i.map=k,i.reduce=S,i.settle=C,i.any=b,i.some=y,i.isPromise=_,i.isPromiseLike=_,n.prototype={then:function(){var e,t;return e=arguments,t=this._message,l(function(i,n,s){t("when",e,i,s)},this._status&&this._status.observed())
},otherwise:function(e){return this.then(U,e)},ensure:function(e){function t(){return s(e())}return this.then(t,t).yield(this)},yield:function(e){return this.then(function(){return e})},tap:function(e){return this.then(e).yield(this)},spread:function(e){return this.then(function(t){return w(t,function(t){return e.apply(U,t)})})},always:function(e,t){return this.then(e,e,t)}},p.prototype.when=function(e){return"function"==typeof e?e(this.value):this.value},g.prototype.when=function(e,t){if("function"==typeof t)return t(this.reason);throw this.reason};var O,N,I,P,z,R,$,L,H,q,W,U;if(W=e,z=[],R=t.setTimeout,q="undefined"!=typeof console?console:i,"function"==typeof setImmediate)P=setImmediate.bind(t);else if("undefined"!=typeof MessageChannel){var B=new MessageChannel;B.port1.onmessage=F,P=function(){B.port2.postMessage(0)}}else if("object"==typeof process&&process.nextTick)P=process.nextTick;else try{P=W("vertx").runOnLoop||W("vertx").runOnContext}catch(V){P=function(e){R(e,0)}}return $=Function.prototype,L=$.call,I=$.bind?L.bind(L):function(e,t){return e.apply(t,N.call(arguments,2))},H=[],N=H.slice,O=H.reduce||function(e){var t,i,n,s,o;if(o=0,t=Object(this),s=t.length>>>0,i=arguments,i.length<=1)for(;;){if(o in t){n=t[o++];break}if(++o>=s)throw new TypeError}else n=i[1];for(;s>o;++o)o in t&&(n=e(n,t[o],o,t));return n},i})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)},this),define("oro/when-setup",["when"],function(e){return window.when=e,e}),define("oro/sync/wamp",["jquery","underscore","backbone","autobahn"],function(e,t,i,n){var s={port:80,debug:!1},o=function(e){var t=function(t,i){e(i)};return t.origCallback=e,t},r=function(e){this.session=e,this.trigger("connection_established"),t.each(this.channels,function(i,n){t.each(i,function(t){e.subscribe(n,t)})})},a=function(e,i,n){0!==e&&this.trigger("connection_lost",t.extend({code:e},n||{})),this.session=null},l=function(i){if(this.options=t.extend({},s,i),!this.options.host)throw new Error("host option is required");this.channels={},this.options.debug&&n.debug(!0,!0,!0),this.connect(),e(window).on("beforeunload",t.bind(function(){this.session.close()},this))};return l.prototype={connect:function(){if(!this.session){var e="ws://"+this.options.host+":"+this.options.port;n.connect(e,t.bind(r,this),t.bind(a,this),this.options)}},subscribe:function(e,t){t=o(t),(this.channels[e]=this.channels[e]||[]).push(t),this.session&&this.session.subscribe(e,t)},unsubscribe:function(e,i){var n=this.channels[e];if(n&&(i&&(i=t.findWhere(n,{origCallback:i}),n=this.channels[e]=t.without(n,i)),n.length&&i||delete this.channels[e],this.session))try{this.session.unsubscribe(e,i)}catch(s){}}},t.extend(l.prototype,i.Events),l}),define("oro/tag/model",["backbone"],function(e){return e.Model.extend({defaults:{owner:!1,notSaved:!1,moreOwners:!1,url:"",name:""}})}),define("oro/tag/collection",["backbone","oro/tag/model"],function(e,t){var i=e.Collection.extend({model:t,getFilteredCollection:function(e){var t=this.filter(function(t){return"owner"===e?t.get("owner"):!0});return new i(t)},addItem:function(e){var t=this.where({name:e.name});return t.length&&0==t[0].get("owner")?(t[0].set("owner",!0),this.trigger("add"),void 0):(this.add(new this.model({id:e.id,name:e.name,owner:!0,notSaved:!0})),void 0)},removeItem:function(e,t){var i=this.where({id:e});if(i.length){if(i=i[0],"owner"===t&&i.get("owner")===!0&&i.get("moreOwners")===!0)return i.set("owner",!1),this.trigger("remove"),void 0;this.remove(i)}}});return i}),define("oro/tag/view",["underscore","backbone","oro/navigation","oro/translator","oro/tag/collection"],function(e,t,i,n,s){var o=t.$;return t.View.extend({options:{filter:null},template:e.template('<ul class="inline tag-list"><% _.each(models, function(tag, i) { %><li data-id="<%= tag.get("id") %>"><% if (tag.get("url").length > 0) { %><a href="<%= tag.get("url") %>"><%} %><span class="label label-info"><%= tag.get("name") %></span><% if (tag.get("url").length > 0) { %></a><%} %></li><%}) %><% if (models.length == 0) { %><%= _.__("Not tagged") %><%} %></ul>'),initialize:function(){this.collection=new s,this.listenTo(this.getCollection(),"reset",this.render),this.listenTo(this,"filter",this.render),this.$tagsHolder=this.$(".tags-holder"),this.$(".tag-sort-actions a").click(e.bind(this.filter,this))},filter:function(e){var t=o(e.target);return t.parents("ul").find("a.active").removeClass("active"),t.addClass("active"),this.options.filter=t.data("type"),this.trigger("filter"),this},getCollection:function(){return this.collection},render:function(){this.$tagsHolder.html(this.template(this.getCollection().getFilteredCollection(this.options.filter)));var e=i.getInstance();return e&&e.processClicks(this.$(".tag-list a")),this}})}),define("oro/tag/update-view",["jquery","underscore","oro/tag/view","json"],function(e,t,i){return i.extend({tagsOverlayTemplate:t.template('<div class="controls"><div class="well well-small"><div class="tags-holder"></div></div></div>'),options:t.extend({},i.prototype.options,{autocompleteFieldId:null,fieldId:null,ownFieldId:null,unassign:!1,unassignGlobal:!1,tagOverlayId:null}),initialize:function(n){if(n=n||{},!n.autocompleteFieldId)throw new TypeError("'autocompleteFieldId' is required");if(!n.fieldId)throw new TypeError("'fieldId' is required");if(!n.ownFieldId)throw new TypeError("'ownFieldId' is required");this.$tagOverlayId=e(this.options.tagOverlayId),this._renderOverlay(),i.prototype.initialize.apply(this,arguments),this._prepareCollections();var s=t.bind(function(){this.render(),this._updateHiddenInputs()},this);this.listenTo(this.getCollection(),"add",s),this.listenTo(this.getCollection(),"remove",s),e(this.options.autocompleteFieldId).on("change",t.bind(this._addItem,this))},render:function(){i.prototype.render.apply(this,arguments);var n=this;("owner"===this.options.filter&&this.options.unassign||"owner"!==this.options.filter&&this.options.unassignGlobal)&&this.$tagsHolder.find("span.label").each(function(i,s){var o=e(s),r=e('<span class="select2-search-choice-close"/>');r.click(t.bind(n._removeItem,n)),o.append(r),o.addClass("with-button")})},_addItem:function(i){i.preventDefault();var n=i.added;t.isUndefined(n)||this.getCollection().addItem(n),e(i.target).select2("val","")},_removeItem:function(i){i.preventDefault(),i.stopImmediatePropagation();var n=e(i.currentTarget).parents("li"),s=e(n).data("id");return t.isUndefined(s)||this.getCollection().removeItem(s,this.options.filter),this},_renderOverlay:function(){return this.$tagOverlayId.append(this.tagsOverlayTemplate()),this},_prepareCollections:function(){var i=e.parseJSON(e(this.options.fieldId).val());return t.isArray(i)||(i=[]),this.getCollection().reset(i),this},_updateHiddenInputs:function(){e(this.options.fieldId).val(JSON.stringify(this.getCollection())),e(this.options.ownFieldId).val(JSON.stringify(this.getCollection().getFilteredCollection("owner")))}})}),require(["jquery","underscore","oro/translator","oro/app","oro/mediator","oro/messenger","oro/dialog-widget","jquery.dialog.extended"],function(e,t,i,n,s,o,r){e(function(){function i(){var t=e("#roles-list .controls").find(":checkbox");t.attr("required",t.filter(":checked").length>0?null:"required")}function n(){o.setup()}e(document).on("click","#roles-list input",function(){i()}),s.on("hash_navigation_request:complete",i),s.on("hash_navigation_request:complete",n),e(document).on("change","#btn-enable input",function(){e(".status-enabled").toggleClass("hide"),e(".status-disabled").toggleClass("hide")}),e(document).on("click","#view-activity-btn",function(i){i.stopImmediatePropagation();var n=e(this),s=n.data("dialog");return s?!1:(n.data("dialog",s=new r({url:n.attr("href"),dialogOptions:{allowMaximize:!0,allowMinimize:!0,dblclick:"maximize",maximizedHeightDecreaseBy:"minimize-bar",width:1e3,title:n.attr("title")}})),s.once("widgetRemove",t.bind(n.removeData,n,"dialog")),s.render(),!1)})}),e(function(){var t;e(".update-status a").click(function(){return e.get(e(this).attr("href"),function(n){t=e(n).dialog({title:i("Update status"),width:300,height:180,modal:!1,resizable:!1})}),!1}),e(document).on("submit","#create-status-form",function(){return e.ajax({type:"POST",url:e(this).attr("action"),data:e(this).serialize(),success:function(){t.dialog("destroy")}}),!1})})}),define("oro/init-user",function(){}),define("oro/dialog/state/collection",["backbone","oro/dialog/state/model"],function(e,t){return e.Collection.extend({model:t,url:function(){return this.model.prototype.urlRoot}})}),define("oro/workflow-transition-handler",["jquery","underscore","routing","oro/messenger","oro/translator","oro/navigation","oro/modal"],function(e,t,i,n,s,o,r){var a=o.getInstance(),l=function(t,o){e.getJSON(t.data("transition-url"),o?{data:o}:null).done(function(e){var n=function(e){a?a.setLocation(e):window.location.href=e},s=function(){a?a.loadPage():window.location.reload()};t.one("transitions_success",function(e,t){t.workflowItem&&t.workflowItem.result&&t.workflowItem.result.redirectUrl&&(e.stopImmediatePropagation(),n(t.workflowItem.result.redirectUrl))}),t.one("transitions_success",function(e,s){var o=null;s.workflowItem&&s.workflowItem.id&&(o=s.workflowItem.id);var r=t.data("redirect-to-workflow");if(r&&o){e.stopImmediatePropagation();var a=i.generate("oro_workflow_step_edit",{id:o});n(a)}}),t.one("transitions_success",s),t.trigger("transitions_success",[e])}).fail(function(e,i,o){t.one("transitions_failure",function(){n.notificationFlashMessage("error",s("Could not perform transition"))}),t.trigger("transitions_failure",[e,i,o])})};return function(){var i=e(this);if(!i.data("_in-progress")){i.data("_in-progress",!0);var n=function(){i.data("_in-progress",!1)};if(i.one("transitions_success",n),i.one("transitions_failure",n),i.data("dialog-url"))require(["oro/dialog-widget"],function(e){var s={title:i.data("transition-label")||i.html(),url:i.data("dialog-url"),stateEnabled:!1,incrementalPosition:!1,loadingMaskEnabled:!1,dialogOptions:{modal:!0,resizable:!1,width:475,autoResize:!0}},o=i.data("dialog-options");o&&(void 0!==o.dialogOptions&&(o.dialogOptions=t.extend(s.dialogOptions,o.dialogOptions)),s=t.extend(s,o));var r=new e(s);r.on("widgetRemove",n),r.on("formSave",function(e){r.remove(),l(i,e)}),r.render()});else{var s=i.data("message");if(s){var o=new r({title:i.data("transition-label"),content:s});o.on("ok",function(){l(i)}),o.on("cancel",function(){n()}),o.open()}else l(i)}}}}),define("oro/workflow-save-and-transit-handler",["jquery","oro/mediator","routing","oro/buttons-widget"],function(e,t,i,n){return function(){var s=e(this),o=s.closest("form"),r=o.find('input[name="input_action"]');r.val("save_and_stay");var a=o.prop("id");t.once("hash_navigation_request:refresh",function(t){var o=e(t.selectorCached.container),r=o.find(".alert-error, .validation-error").length>0;if(!r){var l=/update\/(\d+).*/,c=o.find("#"+a),h=l.exec(c.prop("action"));if(h.length>1){var d=e('<div class="hidden invisible"/>');e("body").append(d);var u=new n({el:d,elementFirst:!1,url:i.generate("oro_workflow_widget_buttons_entity",{entityId:h[1],entityClass:s.data("entity-class")})});u.on("renderComplete",function(e){var t=e.find("#transition-"+s.data("workflow")+"-"+s.data("transition"));t.length&&t.on("transitionHandlerInitialized",function(){t.data("executor").call(),d.remove()})}),u.render()}}}),o.submit()}}),define("oro/content/grid-builder",["underscore","oro/content-manager"],function(e,t){var i=!1,n={initHandler:function(n){this.metadata=n.data("metadata")||{},!e.isUndefined(this.metadata.options)&&e.isArray(this.metadata.options.contentTags||[])&&t.tagContent(this.metadata.options.contentTags),i=!0}};return{allowedTracking:[],allowTracking:function(t){-1===e.indexOf(this.allowedTracking,t)&&this.allowedTracking.push(t)},init:function(t,i){-1!==e.indexOf(this.allowedTracking,i)&&n.initHandler(t)}}}),define("oro/navigation/dotmenu/item-view",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({tagName:"li",template:t.template(e("#template-dot-menu-item").html()),events:{"click .close":"close","click span":"activate"},initialize:function(){this.listenTo(this.model,"destroy",this.remove)},activate:function(e){var t=i.$(e.currentTarget);window.location.href=t.data("url")},close:function(){this.model.destroy({wait:!0})},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("url")===window.location.pathname&&this.$el.addClass("active"),this}})}),define("oro/navigation/dotmenu/view",["jquery","underscore","backbone","oro/mediator","oro/navigation/dotmenu/item-view"],function(e,t,i,n,s){return i.View.extend({options:{el:".pin-menus .tabbable",defaultTabOptions:{hideOnEmpty:!1}},tabs:{},templates:{tab:t.template(e("#template-dot-menu-tab").html()),content:t.template(e("#template-dot-menu-tab-content").html()),emptyMessage:t.template(e("#template-dot-menu-empty-message").html())},initialize:function(){this.$tabsContainer=this.$(".nav-tabs"),this.$tabsContent=this.$(".tab-content"),this.init(),n.bind("hash_navigation_request:complete",function(){this.init()},this),n.bind("tab:changed",function(e){this.chooseActiveTab(e)},this),this.chooseActiveTab()},init:function(){this.$tabsContent.find(".menu-close").click(t.bind(this.close,this))},addTab:function(i){var n=t.extend(this.options.defaultTabOptions,i);n.$tab=this.$("#"+n.key+"-tab"),n.$tab.length||(n.$tab=e(this.templates.tab(n)),this.$tabsContainer.append(n.$tab)),n.$tabContent=this.$("#"+n.key+"-content"),n.$tabContent.length||(n.$tabContent=e(this.templates.content(n)),this.$tabsContent.append(n.$tabContent)),n.$tabContentContainer=n.$tabContent.find("ul"),this.tabs[n.key]=t.clone(n)},getTab:function(e){return this.tabs[e]},addTabItem:function(e,i,o){this.isTabEmpty(e)&&this.cleanup(e);var r=null;t.isElement(i)?r=i:t.isObject(i)&&(t.isFunction(i.render)||(i=new s({model:i})),r=i.render().$el),r&&(o?this.getTab(e).$tabContentContainer.prepend(r):this.getTab(e).$tabContentContainer.append(r)),n.trigger("navigation_item:added",r)},cleanup:function(e){this.getTab(e).$tabContentContainer.empty()},checkTabContent:function(e){var t=this.isTabEmpty(e);t?this.hideTab(e):this.showTab(e)},isFirstTabEmpty:function(){var e=this.$tabsContent.children();return e&&e.first().size()&&(!e.first().html().trim()||!e.first().find("ul").html())},setDefaultNonEmptyTab:function(){this.$(".show-if-empty a").tab("show")},chooseActiveTab:function(e){t.isUndefined(e)?this.isFirstTabEmpty()&&this.setDefaultNonEmptyTab():0==this.getTab(e).$tab.index()&&(this.isTabEmpty(e)?this.setDefaultNonEmptyTab():this.tabs[e].$tab.find("a").tab("show"))},isTabEmpty:function(e){var t=this.getTab(e);return!t.$tabContentContainer.children().length||t.$tabContentContainer.html()==this.templates.emptyMessage()},hideTab:function(e){var t=this.getTab(e);t.hideOnEmpty?t.$tab.hide():this.getTab(e).$tabContentContainer.html(this.templates.emptyMessage())},showTab:function(e){this.getTab(e).$tab.show()},close:function(){return this.$el.parents(".open").removeClass("open"),!1}})}),define("oro/navigation/abstract-view",["underscore","backbone","oro/navigation","oro/navigation/dotmenu/view"],function(e,t,i,n){return t.View.extend({options:{tabTitle:"Tabs",tabIcon:"icon-folder-close",tabId:"tabs",hideTabOnEmpty:!1,collection:null},initialize:function(){this.dotMenu=new n},getCollection:function(){return this.options.collection},registerTab:function(){this.dotMenu.addTab({key:this.options.tabId,title:this.options.tabTitle,icon:this.options.tabIcon,hideOnEmpty:this.options.hideTabOnEmpty})},getItemForCurrentPage:function(e){return this.getItemForPage(this.getCurrentPageItemData().url,e)},getItemForPage:function(t,i){return t=this.cleanupUrl(t),this.options.collection.filter(e.bind(function(n){var s=this.cleanupUrl(n.get("url"));return!e.isUndefined(i)&&i&&(s=s.split("#g")[0],t=t.split("#g")[0]),s==t},this))},getCurrentPageItemData:function(){var e="",t=i.getInstance();return e=t?t.getHashUrl(!0,!0):window.location.pathname+window.location.search+window.location.hash,{url:e}},cleanupUrl:function(e){return e&&(e=e.replace(/(\?|&)restore=1/gi,"")),e},getNewItemData:function(e){var t=this.getCurrentPageItemData();return e.data("url")&&(t.url=e.data("url")),t.title_rendered=e.data("title-rendered")?e.data("title-rendered"):document.title,t.title_rendered_short=e.data("title-rendered-short")?e.data("title-rendered-short"):document.title,t.title=e.data("title")?JSON.stringify(e.data("title")):'{"template": "'+document.title+'"}',t},cleanupTab:function(){this.dotMenu.cleanup(this.options.tabId),this.dotMenu.hideTab(this.options.tabId)},addItemToTab:function(e,t){this.dotMenu.addTabItem(this.options.tabId,e,t)},checkTabContent:function(){this.dotMenu.checkTabContent(this.options.tabId)},render:function(){return this.checkTabContent(),this}})}),define("oro/navigation/model",["underscore","routing","backbone"],function(e,t,i){return i.Model.extend({defaults:{title:"",title_rendered:"",url:null,position:null,type:null},url:function(){var i=e.result(this,"urlRoot")||e.result(this.collection,"url");return i&&-1===i.indexOf(this.get("type"))?i+=("/"===i.charAt(i.length-1)?"":"/")+this.get("type"):i||(i=t.generate("oro_api_get_navigationitems",{type:this.get("type")})),this.isNew()?i:i+("/"===i.charAt(i.length-1)?"":"/")+"ids/"+encodeURIComponent(this.id)}})}),define("oro/navigation/collection",["backbone","oro/navigation/model"],function(e,t){return e.Collection.extend({model:t})}),define("oro/navigation/favorites/view",["underscore","backbone","oro/app","oro/mediator","oro/error","oro/navigation/abstract-view","oro/navigation/model","oro/navigation/collection"],function(e,t,i,n,s,o,r,a){return o.extend({options:{el:".favorite-button",tabTitle:"Favorites",tabIcon:"icon-star-empty",tabId:"favorite"},events:{click:"toggleItem"},initialize:function(){o.prototype.initialize.apply(this,arguments),this.options.collection||(this.options.collection=new a),this.listenTo(this.getCollection(),"add",this.addItemToTab),this.listenTo(this.getCollection(),"reset",this.addAll),this.listenTo(this.getCollection(),"all",this.render),this.$icon=this.$("i"),this.registerTab(),this.cleanupTab(),n.bind("hash_navigation_request:complete",function(){this.render()},this)},activate:function(){this.$icon.addClass("icon-gold")},inactivate:function(){this.$icon.removeClass("icon-gold")},toggleItem:function(n){var o=this,a=this.getItemForCurrentPage();if(a.length)e.each(a,function(e){e.destroy({wait:!1,error:function(e,t,n){404!=t.status||i.debug?s.dispatch(e,t,n):o.inactivate()}})});else{var l=this.getNewItemData(t.$(n.currentTarget));l.type="favorite",l.position=this.getCollection().length;var c=new r(l);this.getCollection().unshift(c),c.save()}},addAll:function(e){e.each(function(e){this.addItemToTab(e)},this)},render:function(){return this.checkTabContent(),this.getItemForCurrentPage().length?this.activate():this.inactivate(),n.trigger("tab:changed",this.options.tabId),this}})}),define("oro/navigation/pinbar/model",["oro/navigation/model"],function(e){return e.extend({defaults:{title:"",url:null,position:null,type:"pinbar",display_type:null,maximized:!1,remove:!1}})}),define("oro/navigation/pinbar/collection",["oro/navigation/collection","oro/navigation/pinbar/model"],function(e,t){return e.extend({model:t,initialize:function(){this.on("change:position",this.onPositionChange,this),this.on("change:url",this.onUrlChange,this),this.on("change:maximized",this.onStateChange,this)},onPositionChange:function(e){this.trigger("positionChange",e)},onStateChange:function(e){this.trigger("stateChange",e)},onUrlChange:function(e){this.trigger("urlChange",e)}})}),define("oro/navigation/pinbar/item-view",["jquery","underscore","oro/translator","backbone","oro/app","oro/navigation","oro/mediator","oro/error"],function(e,t,i,n,s,o,r,a){return n.View.extend({options:{type:"list"},tagName:"li",isRemoved:!1,templates:{list:t.template(e("#template-list-pin-item").html()),tab:t.template(e("#template-tab-pin-item").html())},events:{"click .btn-close":"unpin","click .close":"unpin","click .pin-holder div a":"maximize","click span":"maximize"},initialize:function(){this.listenTo(this.model,"destroy",this.removeItem),this.listenTo(this.model,"change:display_type",this.removeItem),this.listenTo(this.model,"change:remove",this.unpin),r.bind("hash_navigation_request:complete",function(){this.setActiveItem()},this)},unpin:function(){return r.trigger("pinbar_item_remove_before",this.model),this.model.destroy({wait:!0,error:t.bind(function(e,t,i){404!=t.status||s.debug?a.dispatch(e,t,i):this.removeItem()},this)}),!1},maximize:function(){return this.model.set("maximized",(new Date).toISOString()),!1},removeItem:function(){r.off("content-manager:content-outdated",this.outdatedContentHandler,this),this.isRemoved=!0,this.remove()},checkCurrentUrl:function(){var e="",t=this.model.get("url"),i=o.getInstance();return i?(e=i.getHashUrl(),e=i.removeGridParams(e),t=i.removeGridParams(t)):e=window.location.pathname,this.cleanupUrl(t)==this.cleanupUrl(e)},cleanupUrl:function(e){return e&&(e=e.replace(/(\?|&)restore=1/gi,"")),e},setActiveItem:function(){this.checkCurrentUrl()?this.$el.addClass("active"):this.$el.removeClass("active")},render:function(){return this.$el.html(this.templates[this.options.type](this.model.toJSON())),r.on("content-manager:content-outdated",this.outdatedContentHandler,this),this.setActiveItem(),this},outdatedContentHandler:function(e){var t=o.getInstance(),i=t.removeGridParams(this.model.get("url")),n=this.$el,s=this,a=function(e){i===e.url&&(l=n.find(".pin-status.outdated"),s.markNormal(l),r.off("hash_navigation_request:page_refreshed",a))};if(!e.isCurrentPage&&i==e.url){var l=n.find(".pin-status");l.is(".outdated")||(this.markOutdated(l),r.on("hash_navigation_request:page_refreshed",a))}},markOutdated:function(e){e.addClass("outdated").attr("title",i("Content of pinned page is outdated"))},markNormal:function(e){e.removeClass("outdated").removeAttr("title")}})}),define("oro/navigation/pinbar/view",["jquery","underscore","backbone","oro/navigation","oro/mediator","oro/navigation/abstract-view","oro/navigation/pinbar/item-view","oro/navigation/pinbar/collection","oro/navigation/pinbar/model"],function(e,t,i,n,s,o,r,a,l){return o.extend({options:{maxItems:10,tabTitle:"Pinbar",tabIcon:"icon-folder-close",el:".pin-bar",listBar:".list-bar",minimizeButton:".top-action-box .minimize-button",defaultUrl:"/",tabId:"pinbar",collection:null},requireCleanup:!0,massAdd:!1,templates:{noItemsMessage:t.template(e("#template-no-pins-message").html())},initialize:function(){o.prototype.initialize.apply(this,arguments),this.$listBar=this.getBackboneElement(this.options.listBar),this.$minimizeButton=i.$(this.options.minimizeButton),this.$icon=this.$minimizeButton.find("i"),this.options.collection||(this.options.collection=new a),this.listenTo(this.options.collection,"add",function(e){this.setItemPosition(e)}),this.listenTo(this.options.collection,"remove",this.onPageClose),this.listenTo(this.options.collection,"reset",this.addAll),this.listenTo(this.options.collection,"all",this.render),this.listenTo(this.options.collection,"positionChange",this.renderItem),this.listenTo(this.options.collection,"stateChange",this.handleItemStateChange),this.listenTo(this.options.collection,"urlChange",this.renderItem),s.bind("grid_load:complete",this.updatePinbarState,this),s.bind("hash_navigation_request:complete",this.checkPinbarIcon,this),this.$minimizeButton.click(t.bind(this.changePageState,this)),this.registerTab(),this.cleanup(),this.render()},resetCollection:function(){this.options.collection.reset.apply(this.options.collection,arguments)},getBackboneElement:function(e){return e instanceof i.$?e:this.$(e)},handleItemStateChange:function(e){if(!this.massAdd){var i,s=null,o=e.get("maximized");o&&(s=e.get("url")),this.cleanupUrl(s)!=this.cleanupUrl(this.getCurrentPageItemData().url)&&(i=n.getInstance(),i&&o&&i.setLocation(s,{useCache:!0}),e.save(null,{wait:!0,success:t.bind(function(){this.checkPinbarIcon(),!i&&o&&(window.location.href=s)},this)}))}},checkPinbarIcon:function(){this.getItemForCurrentPage().length?this.activate():this.inactivate()},onPageClose:function(){this.checkPinbarIcon(),this.reorder()},changePageState:function(e){var t=this.getItemForCurrentPage(!0);t.length?this.closePage(t):this.minimizePage(e)},minimizePage:function(e){s.trigger("pinbar_item_minimized"),this.updatePinbarState();var n=this.getItemForCurrentPage(!0);if(n.length)t.each(n,function(e){e.set("maximized",!1)},this);else{var o=this.getNewItemData(i.$(e.currentTarget));o.url=this.cleanupUrl(o.url);var r=new l(o);this.options.collection.unshift(r),this.handleItemStateChange(r)}},updatePinbarState:function(){var e,i,s=n.getInstance();s&&s.useCache&&(e=this.getItemForCurrentPage(!0),e.length&&(i=s.getHashUrl(!0,!0),t.each(e,function(e){e.get("url")!==i&&(e.set("url",i),e.save())},this)))},closePage:function(e){t.each(e,function(e){e.set("remove",!0)})},addAll:function(){this.massAdd=!0,this.markCurrentPageMaximized(),this.options.collection.each(this.setItemPosition,this),this.massAdd=!1},markCurrentPageMaximized:function(){var e=this.getItemForCurrentPage(!0);e.length&&t.each(e,function(e){e.set("maximized",(new Date).toISOString())})},setItemPosition:function(e,i){t.isUndefined(i)?this.reorder():e.set({position:i})},reorder:function(){this.options.collection.each(function(e,t){e.set({position:t})})},activate:function(){this.$icon.addClass("icon-gold")},inactivate:function(){this.$icon.removeClass("icon-gold")},renderItem:function(e){var t=e.get("position"),i=t>=this.options.maxItems?"tab":"list";if(e.get("display_type")!=i){this.cleanup(),e.set("display_type",i);var n=new r({type:i,model:e});if("tab"==i)this.addItemToTab(n,!this.massAdd),s.trigger("tab:changed",this.options.tabId);else{var o=n.render().el;this.massAdd||t>0?this.$listBar.append(o):this.$listBar.prepend(o)}}},needPinbarTab:function(){return this.options.collection.length>this.options.maxItems},cleanup:function(){this.requireCleanup&&(this.$listBar.empty(),this.cleanupTab(),this.requireCleanup=!1)},render:function(){this.massAdd||(0==this.options.collection.length&&(this.requireCleanup=!0,this.$listBar.html(this.templates.noItemsMessage()),s.trigger("pinbar_help:shown")),this.checkTabContent(),s.trigger("tab:changed",this.options.tabId))}})}),define("oro/navigation/shortcuts/view",["jquery","underscore","backbone","routing","bootstrap"],function(e,t,i,n){return i.View.extend({options:{el:".shortcuts .input-large",source:null},events:{change:"onChange"},data:{},cache:{},initialize:function(){this.$el.val(""),this.$el.typeahead({source:t.bind(this.source,this)}),this.$form=this.$el.closest("form")},source:function(i,s){if(t.isArray(this.options.source))s(this.options.source);else if(t.isUndefined(this.cache[i])){var o=n.generate(this.options.source,{query:i});e.get(o,t.bind(function(e){this.data=e;var n=[];t.each(e,function(e,t){n.push(t)}),this.cache[i]=n,s(n)},this))}else s(this.cache[i])},onChange:function(){var e,i=this.$el.val();this.$el.val(""),t.isUndefined(this.data[i])||(e=this.data[i],this.$form.attr("action",e.url).submit())}})});